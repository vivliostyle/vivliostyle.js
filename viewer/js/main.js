!function(){return function t(e,n,i){function r(a,s){if(!n[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var h=n[a]={exports:{}};e[a][0].call(h.exports,function(t){return r(e[a][1][t]||t)},h,h.exports,t,e,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}}()({1:[function(t,e,n){!function(t){var i=this||(0,eval)("this"),r=i.document,o=i.navigator,a=i.jQuery,s=i.JSON;a||"undefined"==typeof jQuery||(a=jQuery),function(t){"function"==typeof define&&define.amd?define(["exports","require"],t):t("object"==typeof n&&"object"==typeof e?e.exports||n:i.ko={})}(function(e,n){function u(t,e){return(null===t||typeof t in x)&&t===e}function l(e,n){var i;return function(){i||(i=y.a.setTimeout(function(){i=t,e()},n))}}function h(t,e){var n;return function(){clearTimeout(n),n=y.a.setTimeout(t,e)}}function c(t,e){e&&"change"!==e?"beforeChange"===e?this.oc(t):this.bb(t,e):this.pc(t)}function f(t,e){null!==e&&e.s&&e.s()}function p(t,e){var n=this.pd,i=n[T];i.qa||(this.Pb&&this.kb[e]?(n.tc(e,t,this.kb[e]),this.kb[e]=null,--this.Pb):i.F[e]||n.tc(e,t,i.G?{da:t}:n.Zc(t)),t.Ka&&t.fd())}var d,b,g,v,m,w,y=void 0!==e?e:{};y.b=function(t,e){for(var n=t.split("."),i=y,r=0;r<n.length-1;r++)i=i[n[r]];i[n[n.length-1]]=e},y.J=function(t,e,n){t[e]=n},y.version="3.5.0",y.b("version",y.version),y.options={deferUpdates:!1,useOnlyNativeEvents:!1,foreachHidesDestroyed:!1},y.a=function(){function e(t,e){for(var n in t)h.call(t,n)&&e(n,t[n])}function n(t,e){if(e)for(var n in e)h.call(e,n)&&(t[n]=e[n]);return t}function u(t,e){return t.__proto__=e,t}function l(t,e,n,i){var r=t[e].match(m)||[];y.a.C(n.match(m),function(t){y.a.Oa(r,t,i)}),t[e]=r.join(" ")}var h=Object.prototype.hasOwnProperty,c={__proto__:[]}instanceof Array,f="function"==typeof Symbol,p={},d={};p[o&&/Firefox\/2/i.test(o.userAgent)?"KeyboardEvent":"UIEvents"]=["keyup","keydown","keypress"],p.MouseEvents="click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave".split(" "),e(p,function(t,e){if(e.length)for(var n=0,i=e.length;n<i;n++)d[e[n]]=t});var b,g={propertychange:!0},v=r&&function(){for(var e=3,n=r.createElement("div"),i=n.getElementsByTagName("i");n.innerHTML="\x3c!--[if gt IE "+ ++e+"]><i></i><![endif]--\x3e",i[0];);return 4<e?e:t}(),m=/\S+/g;return{Ic:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],C:function(t,e,n){for(var i=0,r=t.length;i<r;i++)e.call(n,t[i],i,t)},A:"function"==typeof Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e)}:function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},Lb:function(e,n,i){for(var r=0,o=e.length;r<o;r++)if(n.call(i,e[r],r,e))return e[r];return t},hb:function(t,e){var n=y.a.A(t,e);0<n?t.splice(n,1):0===n&&t.shift()},vc:function(t){var e=[];return t&&y.a.C(t,function(t){0>y.a.A(e,t)&&e.push(t)}),e},Mb:function(t,e,n){var i=[];if(t)for(var r=0,o=t.length;r<o;r++)i.push(e.call(n,t[r],r));return i},fb:function(t,e,n){var i=[];if(t)for(var r=0,o=t.length;r<o;r++)e.call(n,t[r],r)&&i.push(t[r]);return i},gb:function(t,e){if(e instanceof Array)t.push.apply(t,e);else for(var n=0,i=e.length;n<i;n++)t.push(e[n]);return t},Oa:function(t,e,n){var i=y.a.A(y.a.$b(t),e);0>i?n&&t.push(e):n||t.splice(i,1)},Ba:c,extend:n,setPrototypeOf:u,zb:c?u:n,O:e,Ha:function(t,e,n){if(!t)return t;var i,r={};for(i in t)h.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r},Sb:function(t){for(;t.firstChild;)y.removeNode(t.firstChild)},Xb:function(t){for(var e=((t=y.a.la(t))[0]&&t[0].ownerDocument||r).createElement("div"),n=0,i=t.length;n<i;n++)e.appendChild(y.na(t[n]));return e},Ca:function(t,e){for(var n=0,i=t.length,r=[];n<i;n++){var o=t[n].cloneNode(!0);r.push(e?y.na(o):o)}return r},ua:function(t,e){if(y.a.Sb(t),e)for(var n=0,i=e.length;n<i;n++)t.appendChild(e[n])},Wc:function(t,e){var n=t.nodeType?[t]:t;if(0<n.length){for(var i=n[0],r=i.parentNode,o=0,a=e.length;o<a;o++)r.insertBefore(e[o],i);for(o=0,a=n.length;o<a;o++)y.removeNode(n[o])}},Ua:function(t,e){if(t.length){for(e=8===e.nodeType&&e.parentNode||e;t.length&&t[0].parentNode!==e;)t.splice(0,1);for(;1<t.length&&t[t.length-1].parentNode!==e;)t.length--;if(1<t.length){var n=t[0],i=t[t.length-1];for(t.length=0;n!==i;)t.push(n),n=n.nextSibling;t.push(i)}}return t},Yc:function(t,e){7>v?t.setAttribute("selected",e):t.selected=e},Cb:function(e){return null===e||e===t?"":e.trim?e.trim():e.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},Td:function(t,e){return t=t||"",!(e.length>t.length)&&t.substring(0,e.length)===e},ud:function(t,e){if(t===e)return!0;if(11===t.nodeType)return!1;if(e.contains)return e.contains(1!==t.nodeType?t.parentNode:t);if(e.compareDocumentPosition)return 16==(16&e.compareDocumentPosition(t));for(;t&&t!=e;)t=t.parentNode;return!!t},Rb:function(t){return y.a.ud(t,t.ownerDocument.documentElement)},jd:function(t){return!!y.a.Lb(t,y.a.Rb)},P:function(t){return t&&t.tagName&&t.tagName.toLowerCase()},zc:function(t){return y.onError?function(){try{return t.apply(this,arguments)}catch(t){throw y.onError&&y.onError(t),t}}:t},setTimeout:function(t,e){return setTimeout(y.a.zc(t),e)},Fc:function(t){setTimeout(function(){throw y.onError&&y.onError(t),t},0)},H:function(t,e,n){var i=y.a.zc(n);if(n=g[e],y.options.useOnlyNativeEvents||n||!a)if(n||"function"!=typeof t.addEventListener){if(void 0===t.attachEvent)throw Error("Browser doesn't support addEventListener or attachEvent");var r=function(e){i.call(t,e)},o="on"+e;t.attachEvent(o,r),y.a.I.za(t,function(){t.detachEvent(o,r)})}else t.addEventListener(e,i,!1);else b||(b="function"==typeof a(t).on?"on":"bind"),a(t)[b](e,i)},Fb:function(t,e){if(!t||!t.nodeType)throw Error("element must be a DOM node when calling triggerEvent");var n;if(n=!("input"!==y.a.P(t)||!t.type||"click"!=e.toLowerCase())&&("checkbox"==(n=t.type)||"radio"==n),y.options.useOnlyNativeEvents||!a||n)if("function"==typeof r.createEvent){if("function"!=typeof t.dispatchEvent)throw Error("The supplied element doesn't support dispatchEvent");(n=r.createEvent(d[e]||"HTMLEvents")).initEvent(e,!0,!0,i,0,0,0,0,0,!1,!1,!1,!1,0,t),t.dispatchEvent(n)}else if(n&&t.click)t.click();else{if(void 0===t.fireEvent)throw Error("Browser doesn't support triggering events");t.fireEvent("on"+e)}else a(t).trigger(e)},c:function(t){return y.N(t)?t():t},$b:function(t){return y.N(t)?t.w():t},Eb:function(t,e,n){var i;e&&("object"==typeof t.classList?(i=t.classList[n?"add":"remove"],y.a.C(e.match(m),function(e){i.call(t.classList,e)})):"string"==typeof t.className.baseVal?l(t.className,"baseVal",e,n):l(t,"className",e,n))},Ab:function(e,n){var i=y.a.c(n);null!==i&&i!==t||(i="");var r=y.h.firstChild(e);!r||3!=r.nodeType||y.h.nextSibling(r)?y.h.ua(e,[e.ownerDocument.createTextNode(i)]):r.data=i,y.a.zd(e)},Xc:function(t,e){if(t.name=e,7>=v)try{var n=t.name.replace(/[&<>'"]/g,function(t){return"&#"+t.charCodeAt(0)+";"});t.mergeAttributes(r.createElement("<input name='"+n+"'/>"),!1)}catch(t){}},zd:function(t){9<=v&&(t=1==t.nodeType?t:t.parentNode).style&&(t.style.zoom=t.style.zoom)},vd:function(t){if(v){var e=t.style.width;t.style.width=0,t.style.width=e}},Od:function(t,e){t=y.a.c(t),e=y.a.c(e);for(var n=[],i=t;i<=e;i++)n.push(i);return n},la:function(t){for(var e=[],n=0,i=t.length;n<i;n++)e.push(t[n]);return e},Da:function(t){return f?Symbol(t):t},Xd:6===v,Yd:7===v,W:v,Kc:function(t,e){for(var n=y.a.la(t.getElementsByTagName("input")).concat(y.a.la(t.getElementsByTagName("textarea"))),i="string"==typeof e?function(t){return t.name===e}:function(t){return e.test(t.name)},r=[],o=n.length-1;0<=o;o--)i(n[o])&&r.push(n[o]);return r},Md:function(t){return"string"==typeof t&&(t=y.a.Cb(t))?s&&s.parse?s.parse(t):new Function("return "+t)():null},fc:function(t,e,n){if(!s||!s.stringify)throw Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return s.stringify(y.a.c(t),e,n)},Nd:function(t,n,i){var o=(i=i||{}).params||{},a=i.includeFields||this.Ic,s=t;if("object"==typeof t&&"form"===y.a.P(t)){s=t.action;for(var u=a.length-1;0<=u;u--)for(var l=y.a.Kc(t,a[u]),h=l.length-1;0<=h;h--)o[l[h].name]=l[h].value}n=y.a.c(n);var c=r.createElement("form");for(var f in c.style.display="none",c.action=s,c.method="post",n)(t=r.createElement("input")).type="hidden",t.name=f,t.value=y.a.fc(y.a.c(n[f])),c.appendChild(t);e(o,function(t,e){var n=r.createElement("input");n.type="hidden",n.name=t,n.value=e,c.appendChild(n)}),r.body.appendChild(c),i.submitter?i.submitter(c):c.submit(),setTimeout(function(){c.parentNode.removeChild(c)},0)}}}(),y.b("utils",y.a),y.b("utils.arrayForEach",y.a.C),y.b("utils.arrayFirst",y.a.Lb),y.b("utils.arrayFilter",y.a.fb),y.b("utils.arrayGetDistinctValues",y.a.vc),y.b("utils.arrayIndexOf",y.a.A),y.b("utils.arrayMap",y.a.Mb),y.b("utils.arrayPushAll",y.a.gb),y.b("utils.arrayRemoveItem",y.a.hb),y.b("utils.cloneNodes",y.a.Ca),y.b("utils.createSymbolOrString",y.a.Da),y.b("utils.extend",y.a.extend),y.b("utils.fieldsIncludedWithJsonPost",y.a.Ic),y.b("utils.getFormFields",y.a.Kc),y.b("utils.objectMap",y.a.Ha),y.b("utils.peekObservable",y.a.$b),y.b("utils.postJson",y.a.Nd),y.b("utils.parseJson",y.a.Md),y.b("utils.registerEventHandler",y.a.H),y.b("utils.stringifyJson",y.a.fc),y.b("utils.range",y.a.Od),y.b("utils.toggleDomNodeCssClass",y.a.Eb),y.b("utils.triggerEvent",y.a.Fb),y.b("utils.unwrapObservable",y.a.c),y.b("utils.objectForEach",y.a.O),y.b("utils.addOrRemoveItem",y.a.Oa),y.b("utils.setTextContent",y.a.Ab),y.b("unwrap",y.a.c),Function.prototype.bind||(Function.prototype.bind=function(t){var e=this;if(1===arguments.length)return function(){return e.apply(t,arguments)};var n=Array.prototype.slice.call(arguments,1);return function(){var i=n.slice(0);return i.push.apply(i,arguments),e.apply(t,i)}}),y.a.g=new function(){var e,n,i=0,r="__ko__"+(new Date).getTime(),o={};return y.a.W?(e=function(e,n){var a=e[r];if(!a||"null"===a||!o[a]){if(!n)return t;a=e[r]="ko"+i++,o[a]={}}return o[a]},n=function(t){var e=t[r];return!!e&&(delete o[e],t[r]=null,!0)}):(e=function(t,e){var n=t[r];return!n&&e&&(n=t[r]={}),n},n=function(t){return!!t[r]&&(delete t[r],!0)}),{get:function(t,n){var i=e(t,!1);return i&&i[n]},set:function(n,i,r){(n=e(n,r!==t))&&(n[i]=r)},Tb:function(t,n,i){return(t=e(t,!0))[n]||(t[n]=i)},clear:n,Z:function(){return i+++r}}},y.b("utils.domData",y.a.g),y.b("utils.domData.clear",y.a.g.clear),y.a.I=new function(){function e(e,n){var i=y.a.g.get(e,r);return i===t&&n&&(i=[],y.a.g.set(e,r,i)),i}function n(t){if(n=e(t,!1))for(var n=n.slice(0),r=0;r<n.length;r++)n[r](t);y.a.g.clear(t),y.a.I.cleanExternalData(t),s[t.nodeType]&&i(t.childNodes,!0)}function i(t,e){for(var i,r=[],o=0;o<t.length;o++)if((!e||8===t[o].nodeType)&&(n(r[r.length]=i=t[o]),t[o]!==i))for(;o--&&-1==y.a.A(r,t[o]););}var r=y.a.g.Z(),o={1:!0,8:!0,9:!0},s={1:!0,9:!0};return{za:function(t,n){if("function"!=typeof n)throw Error("Callback must be a function");e(t,!0).push(n)},xb:function(n,i){var o=e(n,!1);o&&(y.a.hb(o,i),0==o.length&&y.a.g.set(n,r,t))},na:function(t){return o[t.nodeType]&&(n(t),s[t.nodeType]&&i(t.getElementsByTagName("*"))),t},removeNode:function(t){y.na(t),t.parentNode&&t.parentNode.removeChild(t)},cleanExternalData:function(t){a&&"function"==typeof a.cleanData&&a.cleanData([t])}}},y.na=y.a.I.na,y.removeNode=y.a.I.removeNode,y.b("cleanNode",y.na),y.b("removeNode",y.removeNode),y.b("utils.domNodeDisposal",y.a.I),y.b("utils.domNodeDisposal.addDisposeCallback",y.a.I.za),y.b("utils.domNodeDisposal.removeDisposeCallback",y.a.I.xb),d=[0,"",""],m={thead:b=[1,"<table>","</table>"],tbody:b,tfoot:b,tr:[2,"<table><tbody>","</tbody></table>"],td:g=[3,"<table><tbody><tr>","</tr></tbody></table>"],th:g,option:v=[1,"<select multiple='multiple'>","</select>"],optgroup:v},w=8>=y.a.W,y.a.ta=function(t,e){var n;if(a){if(a.parseHTML)n=a.parseHTML(t,e)||[];else if((n=a.clean([t],e))&&n[0]){for(var o=n[0];o.parentNode&&11!==o.parentNode.nodeType;)o=o.parentNode;o.parentNode&&o.parentNode.removeChild(o)}}else{(n=e)||(n=r),o=n.parentWindow||n.defaultView||i;var s,u=y.a.Cb(t).toLowerCase(),l=n.createElement("div");for(s=(u=u.match(/^(?:\x3c!--.*?--\x3e\s*?)*?<([a-z]+)[\s>]/))&&m[u[1]]||d,u=s[0],s="ignored<div>"+s[1]+t+s[2]+"</div>","function"==typeof o.innerShiv?l.appendChild(o.innerShiv(s)):(w&&n.body.appendChild(l),l.innerHTML=s,w&&l.parentNode.removeChild(l));u--;)l=l.lastChild;n=y.a.la(l.lastChild.childNodes)}return n},y.a.Ld=function(t,e){var n=y.a.ta(t,e);return n.length&&n[0].parentElement||y.a.Xb(n)},y.a.dc=function(e,n){if(y.a.Sb(e),null!==(n=y.a.c(n))&&n!==t)if("string"!=typeof n&&(n=n.toString()),a)a(e).html(n);else for(var i=y.a.ta(n,e.ownerDocument),r=0;r<i.length;r++)e.appendChild(i[r])},y.b("utils.parseHtmlFragment",y.a.ta),y.b("utils.setHtml",y.a.dc),y.aa=function(){var e={};return{Wb:function(t){if("function"!=typeof t)throw Error("You can only pass a function to ko.memoization.memoize()");var n=(4294967296*(1+Math.random())|0).toString(16).substring(1)+(4294967296*(1+Math.random())|0).toString(16).substring(1);return e[n]=t,"\x3c!--[ko_memo:"+n+"]--\x3e"},ad:function(n,i){var r=e[n];if(r===t)throw Error("Couldn't find any memo with ID "+n+". Perhaps it's already been unmemoized.");try{return r.apply(null,i||[]),!0}finally{delete e[n]}},bd:function(t,e){var n=[];!function t(e,n){if(e)if(8==e.nodeType)null!=(i=y.aa.Tc(e.nodeValue))&&n.push({sd:e,Jd:i});else if(1==e.nodeType)for(var i=0,r=e.childNodes,o=r.length;i<o;i++)t(r[i],n)}(t,n);for(var i=0,r=n.length;i<r;i++){var o=n[i].sd,a=[o];e&&y.a.gb(a,e),y.aa.ad(n[i].Jd,a),o.nodeValue="",o.parentNode&&o.parentNode.removeChild(o)}},Tc:function(t){return(t=t.match(/^\[ko_memo\:(.*?)\]$/))?t[1]:null}}}(),y.b("memoization",y.aa),y.b("memoization.memoize",y.aa.Wb),y.b("memoization.unmemoize",y.aa.ad),y.b("memoization.parseMemoText",y.aa.Tc),y.b("memoization.unmemoizeDomNodeAndDescendants",y.aa.bd),y.ma=function(){function t(){if(o)for(var t,e=o,i=0;s<o;)if(t=n[s++]){if(s>e){if(5e3<=++i){s=o,y.a.Fc(Error("'Too much recursion' after processing "+i+" task groups."));break}e=o}try{t()}catch(t){y.a.Fc(t)}}}function e(){t(),s=o=n.length=0}var n=[],o=0,a=1,s=0;return{scheduler:i.MutationObserver?function(t){var e=r.createElement("div");return new MutationObserver(t).observe(e,{attributes:!0}),function(){e.classList.toggle("foo")}}(e):r&&"onreadystatechange"in r.createElement("script")?function(t){var e=r.createElement("script");e.onreadystatechange=function(){e.onreadystatechange=null,r.documentElement.removeChild(e),e=null,t()},r.documentElement.appendChild(e)}:function(t){setTimeout(t,0)},yb:function(t){return o||y.ma.scheduler(e),n[o++]=t,a++},cancel:function(t){(t-=a-o)>=s&&t<o&&(n[t]=null)},resetForTesting:function(){var t=o-s;return s=o=n.length=0,t},Rd:t}}(),y.b("tasks",y.ma),y.b("tasks.schedule",y.ma.yb),y.b("tasks.runEarly",y.ma.Rd),y.Ta={throttle:function(t,e){t.throttleEvaluation=e;var n=null;return y.$({read:t,write:function(i){clearTimeout(n),n=y.a.setTimeout(function(){t(i)},e)}})},rateLimit:function(t,e){var n,i,r;"number"==typeof e?n=e:(n=e.timeout,i=e.method),t.Hb=!1,r="function"==typeof i?i:"notifyWhenChangesStop"==i?h:l,t.tb(function(t){return r(t,n,e)})},deferred:function(e,n){if(!0!==n)throw Error("The 'deferred' extender only accepts the value 'true', because it is not supported to turn deferral off once enabled.");e.Hb||(e.Hb=!0,e.tb(function(n){var i,r=!1;return function(){if(!r){y.ma.cancel(i),i=y.ma.yb(n);try{r=!0,e.notifySubscribers(t,"dirty")}finally{r=!1}}}}))},notify:function(t,e){t.equalityComparer="always"==e?null:u}};var x={undefined:1,boolean:1,number:1,string:1};y.b("extenders",y.Ta),y.gc=function(t,e,n){this.da=t,this.kc=e,this.lc=n,this.Ib=!1,this.ab=this.Jb=null,y.J(this,"dispose",this.s),y.J(this,"disposeWhenNodeIsRemoved",this.l)},y.gc.prototype.s=function(){this.Ib||(this.ab&&y.a.I.xb(this.Jb,this.ab),this.Ib=!0,this.lc(),this.da=this.kc=this.lc=this.Jb=this.ab=null)},y.gc.prototype.l=function(t){this.Jb=t,y.a.I.za(t,this.ab=this.s.bind(this))},y.R=function(){y.a.zb(this,E),E.ob(this)};var E={ob:function(t){t.S={change:[]},t.rc=1},subscribe:function(t,e,n){var i=this;n=n||"change";var r=new y.gc(i,e?t.bind(e):t,function(){y.a.hb(i.S[n],r),i.cb&&i.cb(n)});return i.Qa&&i.Qa(n),i.S[n]||(i.S[n]=[]),i.S[n].push(r),r},notifySubscribers:function(t,e){if("change"===(e=e||"change")&&this.Gb(),this.Wa(e)){var n="change"===e&&this.dd||this.S[e].slice(0);try{y.v.wc();for(var i,r=0;i=n[r];++r)i.Ib||i.kc(t)}finally{y.v.end()}}},mb:function(){return this.rc},Cd:function(t){return this.mb()!==t},Gb:function(){++this.rc},tb:function(t){var e,n,i,r,o,a=this,s=y.N(a);a.bb||(a.bb=a.notifySubscribers,a.notifySubscribers=c);var u=t(function(){a.Ka=!1,s&&r===a&&(r=a.mc?a.mc():a());var t=n||o&&a.qb(i,r);o=n=e=!1,t&&a.bb(i=r)});a.pc=function(t,n){n&&a.Ka||(o=!n),a.dd=a.S.change.slice(0),a.Ka=e=!0,r=t,u()},a.oc=function(t){e||(i=t,a.bb(t,"beforeChange"))},a.qc=function(){o=!0},a.fd=function(){a.qb(i,a.w(!0))&&(n=!0)}},Wa:function(t){return this.S[t]&&this.S[t].length},Ad:function(t){if(t)return this.S[t]&&this.S[t].length||0;var e=0;return y.a.O(this.S,function(t,n){"dirty"!==t&&(e+=n.length)}),e},qb:function(t,e){return!this.equalityComparer||!this.equalityComparer(t,e)},toString:function(){return"[object Object]"},extend:function(t){var e=this;return t&&y.a.O(t,function(t,n){var i=y.Ta[t];"function"==typeof i&&(e=i(e,n)||e)}),e}};y.J(E,"init",E.ob),y.J(E,"subscribe",E.subscribe),y.J(E,"extend",E.extend),y.J(E,"getSubscriptionsCount",E.Ad),y.a.Ba&&y.a.setPrototypeOf(E,Function.prototype),y.R.fn=E,y.Pc=function(t){return null!=t&&"function"==typeof t.subscribe&&"function"==typeof t.notifySubscribers},y.b("subscribable",y.R),y.b("isSubscribable",y.Pc),y.U=y.v=function(){function t(t){i.push(n),n=t}function e(){n=i.pop()}var n,i=[],r=0;return{wc:t,end:e,ac:function(t){if(n){if(!y.Pc(t))throw Error("Only subscribable things can act as dependencies");n.nd.call(n.od,t,t.ed||(t.ed=++r))}},K:function(n,i,r){try{return t(),n.apply(i,r||[])}finally{e()}},pa:function(){if(n)return n.o.pa()},Va:function(){if(n)return n.o.Va()},rb:function(){if(n)return n.rb},o:function(){if(n)return n.o}}}(),y.b("computedContext",y.U),y.b("computedContext.getDependenciesCount",y.U.pa),y.b("computedContext.getDependencies",y.U.Va),y.b("computedContext.isInitial",y.U.rb),y.b("computedContext.registerDependency",y.U.ac),y.b("ignoreDependencies",y.Wd=y.v.K);var S=y.a.Da("_latestValue");y.sa=function(t){function e(){return 0<arguments.length?(e.qb(e[S],arguments[0])&&(e.xa(),e[S]=arguments[0],e.wa()),this):(y.v.ac(e),e[S])}return e[S]=t,y.a.Ba||y.a.extend(e,y.R.fn),y.R.fn.ob(e),y.a.zb(e,k),y.options.deferUpdates&&y.Ta.deferred(e,!0),e};var k={equalityComparer:u,w:function(){return this[S]},wa:function(){this.notifySubscribers(this[S],"spectate"),this.notifySubscribers(this[S])},xa:function(){this.notifySubscribers(this[S],"beforeChange")}};y.a.Ba&&y.a.setPrototypeOf(k,y.R.fn);var C=y.sa.Na="__ko_proto__";k[C]=y.sa,y.N=function(t){if((t="function"==typeof t&&t[C])&&t!==k[C]&&t!==y.o.fn[C])throw Error("Invalid object that looks like an observable; possibly from another Knockout instance");return!!t},y.Ya=function(t){return"function"==typeof t&&(t[C]===k[C]||t[C]===y.o.fn[C]&&t.Mc)},y.b("observable",y.sa),y.b("isObservable",y.N),y.b("isWriteableObservable",y.Ya),y.b("isWritableObservable",y.Ya),y.b("observable.fn",k),y.J(k,"peek",k.w),y.J(k,"valueHasMutated",k.wa),y.J(k,"valueWillMutate",k.xa),y.Ia=function(t){if("object"!=typeof(t=t||[])||!("length"in t))throw Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");return t=y.sa(t),y.a.zb(t,y.Ia.fn),t.extend({trackArrayChanges:!0})},y.Ia.fn={remove:function(t){for(var e=this.w(),n=[],i="function"!=typeof t||y.N(t)?function(e){return e===t}:t,r=0;r<e.length;r++){var o=e[r];if(i(o)){if(0===n.length&&this.xa(),e[r]!==o)throw Error("Array modified during remove; cannot remove item");n.push(o),e.splice(r,1),r--}}return n.length&&this.wa(),n},removeAll:function(e){if(e===t){var n=this.w(),i=n.slice(0);return this.xa(),n.splice(0,n.length),this.wa(),i}return e?this.remove(function(t){return 0<=y.a.A(e,t)}):[]},destroy:function(t){var e=this.w(),n="function"!=typeof t||y.N(t)?function(e){return e===t}:t;this.xa();for(var i=e.length-1;0<=i;i--){var r=e[i];n(r)&&(r._destroy=!0)}this.wa()},destroyAll:function(e){return e===t?this.destroy(function(){return!0}):e?this.destroy(function(t){return 0<=y.a.A(e,t)}):[]},indexOf:function(t){var e=this();return y.a.A(e,t)},replace:function(t,e){var n=this.indexOf(t);0<=n&&(this.xa(),this.w()[n]=e,this.wa())},sorted:function(t){var e=this().slice(0);return t?e.sort(t):e.sort()},reversed:function(){return this().slice(0).reverse()}},y.a.Ba&&y.a.setPrototypeOf(y.Ia.fn,y.sa.fn),y.a.C("pop push reverse shift sort splice unshift".split(" "),function(t){y.Ia.fn[t]=function(){var e=this.w();this.xa(),this.yc(e,t,arguments);var n=e[t].apply(e,arguments);return this.wa(),n===e?this:n}}),y.a.C(["slice"],function(t){y.Ia.fn[t]=function(){var e=this();return e[t].apply(e,arguments)}}),y.Oc=function(t){return y.N(t)&&"function"==typeof t.remove&&"function"==typeof t.push},y.b("observableArray",y.Ia),y.b("isObservableArray",y.Oc),y.Ta.trackArrayChanges=function(e,n){function i(){function t(){if(l){var t,n=[].concat(e.w()||[]);e.Wa("arrayChange")&&((!u||1<l)&&(u=y.a.Ob(o,n,e.Nb)),t=u),o=n,u=null,l=0,t&&t.length&&e.notifySubscribers(t,"arrayChange")}}s?t():(s=!0,a=e.notifySubscribers,e.notifySubscribers=function(t,e){return e&&"change"!==e||++l,a.apply(this,arguments)},o=[].concat(e.w()||[]),u=null,r=e.subscribe(t))}if(e.Nb={},n&&"object"==typeof n&&y.a.extend(e.Nb,n),e.Nb.sparse=!0,!e.yc){var r,o,a,s=!1,u=null,l=0,h=e.Qa,c=e.cb;e.Qa=function(t){h&&h.call(e,t),"arrayChange"===t&&i()},e.cb=function(n){c&&c.call(e,n),"arrayChange"!==n||e.Wa("arrayChange")||(a&&(e.notifySubscribers=a,a=t),r&&r.s(),r=null,s=!1,o=t)},e.yc=function(t,e,n){function i(t,e,n){return r[r.length]={status:t,value:e,index:n}}if(s&&!l){var r=[],o=t.length,a=n.length,h=0;switch(e){case"push":h=o;case"unshift":for(e=0;e<a;e++)i("added",n[e],h+e);break;case"pop":h=o-1;case"shift":o&&i("deleted",t[h],h);break;case"splice":e=Math.min(Math.max(0,0>n[0]?o+n[0]:n[0]),o),o=1===a?o:Math.min(e+(n[1]||0),o),a=e+a-2,h=Math.max(o,a);for(var c=[],f=[],p=2;e<h;++e,++p)e<o&&f.push(i("deleted",t[e],e)),e<a&&c.push(i("added",n[p],e));y.a.Jc(f,c);break;default:return}u=r}}}};var T=y.a.Da("_state");y.o=y.$=function(e,n,i){function r(){if(0<arguments.length){if("function"!=typeof o)throw Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return o.apply(a.lb,arguments),this}return a.qa||y.v.ac(r),(a.ka||a.G&&r.Xa())&&r.ha(),a.X}if("object"==typeof e?i=e:(i=i||{},e&&(i.read=e)),"function"!=typeof i.read)throw Error("Pass a function that returns the value of the ko.computed");var o=i.write,a={X:t,ra:!0,ka:!0,pb:!1,hc:!1,qa:!1,vb:!1,G:!1,Vc:i.read,lb:n||i.owner,l:i.disposeWhenNodeIsRemoved||i.l||null,Sa:i.disposeWhen||i.Sa,Qb:null,F:{},V:0,Hc:null};return r[T]=a,r.Mc="function"==typeof o,y.a.Ba||y.a.extend(r,y.R.fn),y.R.fn.ob(r),y.a.zb(r,A),i.pure?(a.vb=!0,a.G=!0,y.a.extend(r,_)):i.deferEvaluation&&y.a.extend(r,N),y.options.deferUpdates&&y.Ta.deferred(r,!0),a.l&&(a.hc=!0,a.l.nodeType||(a.l=null)),a.G||i.deferEvaluation||r.ha(),a.l&&r.ja()&&y.a.I.za(a.l,a.Qb=function(){r.s()}),r};var A={equalityComparer:u,pa:function(){return this[T].V},Va:function(){var t=[];return y.a.O(this[T].F,function(e,n){t[n.La]=n.da}),t},Ub:function(t){if(!this[T].V)return!1;var e=this.Va();return-1!==y.a.A(e,t)||!!y.a.Lb(e,function(e){return e.Ub&&e.Ub(t)})},tc:function(t,e,n){if(this[T].vb&&e===this)throw Error("A 'pure' computed must not be called recursively");this[T].F[t]=n,n.La=this[T].V++,n.Ma=e.mb()},Xa:function(){var t,e,n=this[T].F;for(t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&(e=n[t],this.Ja&&e.da.Ka||e.da.Cd(e.Ma)))return!0},Id:function(){this.Ja&&!this[T].pb&&this.Ja(!1)},ja:function(){var t=this[T];return t.ka||0<t.V},Qd:function(){this.Ka?this[T].ka&&(this[T].ra=!0):this.Gc()},Zc:function(t){if(t.Hb){var e=t.subscribe(this.Id,this,"dirty"),n=t.subscribe(this.Qd,this);return{da:t,s:function(){e.s(),n.s()}}}return t.subscribe(this.Gc,this)},Gc:function(){var t=this,e=t.throttleEvaluation;e&&0<=e?(clearTimeout(this[T].Hc),this[T].Hc=y.a.setTimeout(function(){t.ha(!0)},e)):t.Ja?t.Ja(!0):t.ha(!0)},ha:function(t){var e=this[T],n=e.Sa,i=!1;if(!e.pb&&!e.qa){if(e.l&&!y.a.Rb(e.l)||n&&n()){if(!e.hc)return void this.s()}else e.hc=!1;e.pb=!0;try{i=this.yd(t)}finally{e.pb=!1}return i}},yd:function(e){var n=this[T],i=!1,r=n.vb?t:!n.V;i={pd:this,kb:n.F,Pb:n.V},y.v.wc({od:i,nd:p,o:this,rb:r}),n.F={},n.V=0;var o=this.xd(n,i);return n.V?i=this.qb(n.X,o):(this.s(),i=!0),i&&(n.G?this.Gb():this.notifySubscribers(n.X,"beforeChange"),n.X=o,this.notifySubscribers(n.X,"spectate"),!n.G&&e&&this.notifySubscribers(n.X),this.qc&&this.qc()),r&&this.notifySubscribers(n.X,"awake"),i},xd:function(t,e){try{var n=t.Vc;return t.lb?n.call(t.lb):n()}finally{y.v.end(),e.Pb&&!t.G&&y.a.O(e.kb,f),t.ra=t.ka=!1}},w:function(t){var e=this[T];return(e.ka&&(t||!e.V)||e.G&&this.Xa())&&this.ha(),e.X},tb:function(t){y.R.fn.tb.call(this,t),this.mc=function(){return this[T].G||(this[T].ra?this.ha():this[T].ka=!1),this[T].X},this.Ja=function(t){this.oc(this[T].X),this[T].ka=!0,t&&(this[T].ra=!0),this.pc(this,!t)}},s:function(){var e=this[T];!e.G&&e.F&&y.a.O(e.F,function(t,e){e.s&&e.s()}),e.l&&e.Qb&&y.a.I.xb(e.l,e.Qb),e.F=t,e.V=0,e.qa=!0,e.ra=!1,e.ka=!1,e.G=!1,e.l=t,e.Sa=t,e.Vc=t,this.Mc||(e.lb=t)}},_={Qa:function(t){var e=this,n=e[T];if(!n.qa&&n.G&&"change"==t){if(n.G=!1,n.ra||e.Xa())n.F=null,n.V=0,e.ha()&&e.Gb();else{var i=[];y.a.O(n.F,function(t,e){i[e.La]=t}),y.a.C(i,function(t,i){var r=n.F[t],o=e.Zc(r.da);o.La=i,o.Ma=r.Ma,n.F[t]=o}),e.Xa()&&e.ha()&&e.Gb()}n.qa||e.notifySubscribers(n.X,"awake")}},cb:function(e){var n=this[T];n.qa||"change"!=e||this.Wa("change")||(y.a.O(n.F,function(t,e){e.s&&(n.F[t]={da:e.da,La:e.La,Ma:e.Ma},e.s())}),n.G=!0,this.notifySubscribers(t,"asleep"))},mb:function(){var t=this[T];return t.G&&(t.ra||this.Xa())&&this.ha(),y.R.fn.mb.call(this)}},N={Qa:function(t){"change"!=t&&"beforeChange"!=t||this.w()}};y.a.Ba&&y.a.setPrototypeOf(A,y.R.fn);var O=y.sa.Na;A[O]=y.o,y.Nc=function(t){return"function"==typeof t&&t[O]===A[O]},y.Ed=function(t){return y.Nc(t)&&t[T]&&t[T].vb},y.b("computed",y.o),y.b("dependentObservable",y.o),y.b("isComputed",y.Nc),y.b("isPureComputed",y.Ed),y.b("computed.fn",A),y.J(A,"peek",A.w),y.J(A,"dispose",A.s),y.J(A,"isActive",A.ja),y.J(A,"getDependenciesCount",A.pa),y.J(A,"getDependencies",A.Va),y.wb=function(t,e){return"function"==typeof t?y.o(t,e,{pure:!0}):((t=y.a.extend({},t)).pure=!0,y.o(t,e))},y.b("pureComputed",y.wb),function(){function e(i,r,o){if(o=o||new n,"object"!=typeof(i=r(i))||null===i||i===t||i instanceof RegExp||i instanceof Date||i instanceof String||i instanceof Number||i instanceof Boolean)return i;var a=i instanceof Array?[]:{};return o.save(i,a),function(t,e){if(t instanceof Array){for(var n=0;n<t.length;n++)e(n);"function"==typeof t.toJSON&&e("toJSON")}else for(n in t)e(n)}(i,function(n){var s=r(i[n]);switch(typeof s){case"boolean":case"number":case"string":case"function":a[n]=s;break;case"object":case"undefined":var u=o.get(s);a[n]=u!==t?u:e(s,r,o)}}),a}function n(){this.keys=[],this.values=[]}y.$c=function(t){if(0==arguments.length)throw Error("When calling ko.toJS, pass the object you want to convert.");return e(t,function(t){for(var e=0;y.N(t)&&10>e;e++)t=t();return t})},y.toJSON=function(t,e,n){return t=y.$c(t),y.a.fc(t,e,n)},n.prototype={constructor:n,save:function(t,e){var n=y.a.A(this.keys,t);0<=n?this.values[n]=e:(this.keys.push(t),this.values.push(e))},get:function(e){return 0<=(e=y.a.A(this.keys,e))?this.values[e]:t}}}(),y.b("toJS",y.$c),y.b("toJSON",y.toJSON),y.Vd=function(t,e,n){function i(e){var i=y.wb(t,n).extend({Ga:"always"}),r=i.subscribe(function(t){t&&(r.s(),e(t))});return i.notifySubscribers(i.w()),r}return"function"!=typeof Promise||e?i(e.bind(n)):new Promise(i)},y.b("when",y.Vd),y.u={L:function(e){switch(y.a.P(e)){case"option":return!0===e.__ko__hasDomDataOptionValue__?y.a.g.get(e,y.f.options.Yb):7>=y.a.W?e.getAttributeNode("value")&&e.getAttributeNode("value").specified?e.value:e.text:e.value;case"select":return 0<=e.selectedIndex?y.u.L(e.options[e.selectedIndex]):t;default:return e.value}},ya:function(e,n,i){switch(y.a.P(e)){case"option":"string"==typeof n?(y.a.g.set(e,y.f.options.Yb,t),"__ko__hasDomDataOptionValue__"in e&&delete e.__ko__hasDomDataOptionValue__,e.value=n):(y.a.g.set(e,y.f.options.Yb,n),e.__ko__hasDomDataOptionValue__=!0,e.value="number"==typeof n?n:"");break;case"select":""!==n&&null!==n||(n=t);for(var r,o=-1,a=0,s=e.options.length;a<s;++a)if((r=y.u.L(e.options[a]))==n||""===r&&n===t){o=a;break}(i||0<=o||n===t&&1<e.size)&&(e.selectedIndex=o,6===y.a.W&&y.a.setTimeout(function(){e.selectedIndex=o},0));break;default:null!==n&&n!==t||(n=""),e.value=n}}},y.b("selectExtensions",y.u),y.b("selectExtensions.readValue",y.u.L),y.b("selectExtensions.writeValue",y.u.ya),y.m=function(){function t(t){123===(t=y.a.Cb(t)).charCodeAt(0)&&(t=t.slice(1,-1));var e,n=[],a=(t+="\n,").match(i),s=[],u=0;if(1<a.length){for(var l,h=0;l=a[h];++h){var c=l.charCodeAt(0);if(44===c){if(0>=u){n.push(e&&s.length?{key:e,value:s.join("")}:{unknown:e||s.join("")}),e=u=0,s=[];continue}}else if(58===c){if(!u&&!e&&1===s.length){e=s.pop();continue}}else{if(47===c&&1<l.length&&(47===l.charCodeAt(1)||42===l.charCodeAt(1)))continue;47===c&&h&&1<l.length?(c=a[h-1].match(r))&&!o[c[0]]&&(a=(t=t.substr(t.indexOf(l)+1)).match(i),h=-1,l="/"):40===c||123===c||91===c?++u:41===c||125===c||93===c?--u:e||s.length||34!==c&&39!==c||(l=l.slice(1,-1))}s.push(l)}if(0<u)throw Error("Unbalanced parentheses, braces, or brackets")}return n}var e=["true","false","null","undefined"],n=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i,i=RegExp("\"(?:\\\\.|[^\"])*\"|'(?:\\\\.|[^'])*'|`(?:\\\\.|[^`])*`|/\\*(?:[^*]|\\*+[^*/])*\\*+/|//.*\n|/(?:\\\\.|[^/])+/w*|[^\\s:,/][^,\"'`{}()/:[\\]]*[^\\s,\"'`{}()/:[\\]]|[^\\s]","g"),r=/[\])"'A-Za-z0-9_$]+$/,o={in:1,return:1,typeof:1},a={};return{Ra:[],va:a,Zb:t,ub:function(i,r){function o(t,i){var r;if(!h){var c=y.getBindingHandler(t);if(c&&c.preprocess&&!(i=c.preprocess(i,t,o)))return;(c=a[t])&&(r=i,0<=y.a.A(e,r)?r=!1:(c=r.match(n),r=null!==c&&(c[1]?"Object("+c[1]+")"+c[2]:r)),c=r),c&&u.push("'"+("string"==typeof a[t]?a[t]:t)+"':function(_z){"+r+"=_z}")}l&&(i="function(){return "+i+" }"),s.push("'"+t+"':"+i)}var s=[],u=[],l=(r=r||{}).valueAccessors,h=r.bindingParams,c="string"==typeof i?t(i):i;return y.a.C(c,function(t){o(t.key||t.unknown,t.value)}),u.length&&o("_ko_property_writers","{"+u.join(",")+" }"),s.join(",")},Hd:function(t,e){for(var n=0;n<t.length;n++)if(t[n].key==e)return!0;return!1},$a:function(t,e,n,i,r){t&&y.N(t)?!y.Ya(t)||r&&t.w()===i||t(i):(t=e.get("_ko_property_writers"))&&t[n]&&t[n](i)}}}(),y.b("expressionRewriting",y.m),y.b("expressionRewriting.bindingRewriteValidators",y.m.Ra),y.b("expressionRewriting.parseObjectLiteral",y.m.Zb),y.b("expressionRewriting.preProcessBindings",y.m.ub),y.b("expressionRewriting._twoWayBindings",y.m.va),y.b("jsonExpressionRewriting",y.m),y.b("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",y.m.ub),function(){function t(t){return 8==t.nodeType&&a.test(o?t.text:t.nodeValue)}function e(t){return 8==t.nodeType&&s.test(o?t.text:t.nodeValue)}function n(n,i){for(var r=n,o=1,a=[];r=r.nextSibling;){if(e(r)&&(y.a.g.set(r,l,!0),0==--o))return a;a.push(r),t(r)&&o++}if(!i)throw Error("Cannot find closing comment tag to match: "+n.nodeValue);return null}function i(t,e){var i=n(t,e);return i?0<i.length?i[i.length-1].nextSibling:t.nextSibling:null}var o=r&&"\x3c!--test--\x3e"===r.createComment("test").text,a=o?/^\x3c!--\s*ko(?:\s+([\s\S]+))?\s*--\x3e$/:/^\s*ko(?:\s+([\s\S]+))?\s*$/,s=o?/^\x3c!--\s*\/ko\s*--\x3e$/:/^\s*\/ko\s*$/,u={ul:!0,ol:!0},l="__ko_matchedEndComment__";y.h={ea:{},childNodes:function(e){return t(e)?n(e):e.childNodes},Ea:function(e){if(t(e))for(var n=0,i=(e=y.h.childNodes(e)).length;n<i;n++)y.removeNode(e[n]);else y.a.Sb(e)},ua:function(e,n){if(t(e)){y.h.Ea(e);for(var i=e.nextSibling,r=0,o=n.length;r<o;r++)i.parentNode.insertBefore(n[r],i)}else y.a.ua(e,n)},Uc:function(e,n){t(e)?e.parentNode.insertBefore(n,e.nextSibling):e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n)},Vb:function(e,n,i){i?t(e)?e.parentNode.insertBefore(n,i.nextSibling):i.nextSibling?e.insertBefore(n,i.nextSibling):e.appendChild(n):y.h.Uc(e,n)},firstChild:function(n){if(t(n))return!n.nextSibling||e(n.nextSibling)?null:n.nextSibling;if(n.firstChild&&e(n.firstChild))throw Error("Found invalid end comment, as the first child of "+n);return n.firstChild},nextSibling:function(n){if(t(n)&&(n=i(n)),n.nextSibling&&e(n.nextSibling)){var r=n.nextSibling;if(e(r)&&!y.a.g.get(r,l))throw Error("Found end comment without a matching opening comment, as child of "+n);return null}return n.nextSibling},Bd:t,Ud:function(t){return(t=(o?t.text:t.nodeValue).match(a))?t[1]:null},Rc:function(n){if(u[y.a.P(n)]){var r=n.firstChild;if(r)do{if(1===r.nodeType){var o,a=null;if(o=r.firstChild)do{if(a)a.push(o);else if(t(o)){var s=i(o,!0);s?o=s:a=[o]}else e(o)&&(a=[o])}while(o=o.nextSibling);if(o=a)for(a=r.nextSibling,s=0;s<o.length;s++)a?n.insertBefore(o[s],a):n.appendChild(o[s])}}while(r=r.nextSibling)}}}}(),y.b("virtualElements",y.h),y.b("virtualElements.allowedBindings",y.h.ea),y.b("virtualElements.emptyNode",y.h.Ea),y.b("virtualElements.insertAfter",y.h.Vb),y.b("virtualElements.prepend",y.h.Uc),y.b("virtualElements.setDomNodeChildren",y.h.ua),y.ga=function(){this.md={}},y.a.extend(y.ga.prototype,{nodeHasBindings:function(t){switch(t.nodeType){case 1:return null!=t.getAttribute("data-bind")||y.i.getComponentNameForNode(t);case 8:return y.h.Bd(t);default:return!1}},getBindings:function(t,e){var n=(n=this.getBindingsString(t,e))?this.parseBindingsString(n,e,t):null;return y.i.sc(n,t,e,!1)},getBindingAccessors:function(t,e){var n=(n=this.getBindingsString(t,e))?this.parseBindingsString(n,e,t,{valueAccessors:!0}):null;return y.i.sc(n,t,e,!0)},getBindingsString:function(t){switch(t.nodeType){case 1:return t.getAttribute("data-bind");case 8:return y.h.Ud(t);default:return null}},parseBindingsString:function(t,e,n,i){try{var r,o=this.md,a=t+(i&&i.valueAccessors||"");if(!(r=o[a])){var s,u="with($context){with($data||{}){return{"+y.m.ub(t,i)+"}}}";s=new Function("$context","$element",u),r=o[a]=s}return r(e,n)}catch(e){throw e.message="Unable to parse bindings.\nBindings value: "+t+"\nMessage: "+e.message,e}}}),y.ga.instance=new y.ga,y.b("bindingProvider",y.ga),function(){function e(t){var e=(t=y.a.g.get(t,x))&&t.M;e&&(t.M=null,e.Sc())}function n(t,n,i){this.node=t,this.xc=n,this.ib=[],this.T=!1,n.M||y.a.I.za(t,e),i&&i.M&&(i.M.ib.push(t),this.Kb=i)}function o(t){return function(){return t}}function s(t){return t()}function u(t){return y.a.Ha(y.v.K(t),function(e,n){return function(){return t()[n]}})}function l(t,e,n){return"function"==typeof t?u(t.bind(null,e,n)):y.a.Ha(t,o)}function h(t,e){return u(this.getBindings.bind(this,t,e))}function c(t,e){var n=y.h.firstChild(e);if(n){var i,r=y.ga.instance,o=r.preprocessNode;if(o){for(;i=n;)n=y.h.nextSibling(i),o.call(r,i);n=y.h.firstChild(e)}for(;i=n;)n=y.h.nextSibling(i),f(t,i)}y.j.Ga(e,y.j.T)}function f(t,e){var n=t,i=1===e.nodeType;i&&y.h.Rc(e),(i||y.ga.instance.nodeHasBindings(e))&&(n=p(e,null,t).bindingContextForDescendants),n&&!m[y.a.P(e)]&&c(n,e)}function p(e,n,i){var r,o=y.a.g.Tb(e,x,{}),a=o.gd;if(!n){if(a)throw Error("You cannot apply bindings multiple times to the same element.");o.gd=!0}if(a||(o.context=i),n&&"function"!=typeof n)r=n;else{var u=y.ga.instance,l=u.getBindingAccessors||h,c=y.$(function(){return(r=n?n(i,e):l.call(u,e,i))&&(i[b]&&i[b](),i[v]&&i[v]()),r},null,{l:e});r&&c.ja()||(c=null)}var f,p=i;if(r){var d=function(){return y.a.Ha(c?c():r,s)},g=c?function(t){return function(){return s(c()[t])}}:function(t){return r[t]};d.get=function(t){return r[t]&&s(g(t))},d.has=function(t){return t in r},y.j.T in r&&y.j.subscribe(e,y.j.T,function(){var t=(0,r[y.j.T])();if(t){var n=y.h.childNodes(e);n.length&&t(n,y.Dc(n[0]))}}),y.j.oa in r&&(p=y.j.Bb(e,i),y.j.subscribe(e,y.j.oa,function(){var t=(0,r[y.j.oa])();t&&y.h.firstChild(e)&&t(e)})),o=function(t){var e=[],n={},i=[];return y.a.O(t,function r(o){if(!n[o]){var a=y.getBindingHandler(o);a&&(a.after&&(i.push(o),y.a.C(a.after,function(e){if(t[e]){if(-1!==y.a.A(i,e))throw Error("Cannot combine the following bindings, because they have a cyclic dependency: "+i.join(", "));r(e)}}),i.length--),e.push({key:o,Lc:a})),n[o]=!0}}),e}(r),y.a.C(o,function(n){var i=n.Lc.init,o=n.Lc.update,a=n.key;if(8===e.nodeType&&!y.h.ea[a])throw Error("The binding '"+a+"' cannot be used with virtual elements");try{"function"==typeof i&&y.v.K(function(){var n=i(e,g(a),d,p.$data,p);if(n&&n.controlsDescendantBindings){if(f!==t)throw Error("Multiple bindings ("+f+" and "+a+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");f=a}}),"function"==typeof o&&y.$(function(){o(e,g(a),d,p.$data,p)},null,{l:e})}catch(t){throw t.message='Unable to process binding "'+a+": "+r[a]+'"\nMessage: '+t.message,t}})}return{shouldBindDescendants:o=f===t,bindingContextForDescendants:o&&p}}function d(e,n){return e&&e instanceof y.fa?e:new y.fa(e,t,t,n)}var b=y.a.Da("_subscribable"),g=y.a.Da("_ancestorBindingInfo"),v=y.a.Da("_dataDependency");y.f={};var m={script:!0,textarea:!0,template:!0};y.getBindingHandler=function(t){return y.f[t]};var w={};y.fa=function(e,n,i,r,o){function a(){var t=c?h():h,e=y.a.c(t);return n?(y.a.extend(u,n),g in n&&(u[g]=n[g])):(u.$parents=[],u.$root=e,u.ko=y),u[b]=s,l?e=u.$data:(u.$rawData=t,u.$data=e),i&&(u[i]=e),r&&r(u,n,e),n&&n[b]&&!y.U.o().Ub(n[b])&&n[b](),f&&(u[v]=f),u.$data}var s,u=this,l=e===w,h=l?t:e,c="function"==typeof h&&!y.N(h),f=o&&o.dataDependency;o&&o.exportDependencies?a():((s=y.wb(a)).w(),s.ja()?s.equalityComparer=null:u[b]=t)},y.fa.prototype.createChildContext=function(t,e,n,i){if(!i&&e&&"object"==typeof e&&(e=(i=e).as,n=i.extend),e&&i&&i.noChildContext){var r="function"==typeof t&&!y.N(t);return new y.fa(w,this,null,function(i){n&&n(i),i[e]=r?t():t},i)}return new y.fa(t,this,e,function(t,e){t.$parentContext=e,t.$parent=e.$data,t.$parents=(e.$parents||[]).slice(0),t.$parents.unshift(t.$parent),n&&n(t)},i)},y.fa.prototype.extend=function(t,e){return new y.fa(w,this,null,function(e){y.a.extend(e,"function"==typeof t?t(e):t)},e)};var x=y.a.g.Z();n.prototype.Sc=function(){this.Kb&&this.Kb.M&&this.Kb.M.rd(this.node)},n.prototype.rd=function(t){y.a.hb(this.ib,t),!this.ib.length&&this.T&&this.Bc()},n.prototype.Bc=function(){this.T=!0,this.xc.M&&!this.ib.length&&(this.xc.M=null,y.a.I.xb(this.node,e),y.j.Ga(this.node,y.j.oa),this.Sc())},y.j={T:"childrenComplete",oa:"descendantsComplete",subscribe:function(t,e,n,i){return(t=y.a.g.Tb(t,x,{})).Fa||(t.Fa=new y.R),t.Fa.subscribe(n,i,e)},Ga:function(e,n){var i=y.a.g.get(e,x);if(i&&(i.Fa&&i.Fa.notifySubscribers(e,n),n==y.j.T))if(i.M)i.M.Bc();else if(i.M===t&&i.Fa&&i.Fa.Wa(y.j.oa))throw Error("descendantsComplete event not supported for bindings on this node")},Bb:function(t,e){var i=y.a.g.Tb(t,x,{});return i.M||(i.M=new n(t,i,e[g])),e[g]==i?e:e.extend(function(t){t[g]=i})}},y.Sd=function(t){return(t=y.a.g.get(t,x))&&t.context},y.eb=function(t,e,n){return 1===t.nodeType&&y.h.Rc(t),p(t,e,d(n))},y.kd=function(t,e,n){return n=d(n),y.eb(t,l(e,n,t),n)},y.Pa=function(t,e){1!==e.nodeType&&8!==e.nodeType||c(d(t),e)},y.uc=function(t,e,n){if(!a&&i.jQuery&&(a=i.jQuery),2>arguments.length){if(!(e=r.body))throw Error("ko.applyBindings: could not find document.body; has the document been loaded?")}else if(!e||1!==e.nodeType&&8!==e.nodeType)throw Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");f(d(t,n),e)},y.Cc=function(e){return!e||1!==e.nodeType&&8!==e.nodeType?t:y.Sd(e)},y.Dc=function(e){return(e=y.Cc(e))?e.$data:t},y.b("bindingHandlers",y.f),y.b("bindingEvent",y.j),y.b("bindingEvent.subscribe",y.j.subscribe),y.b("bindingEvent.startPossiblyAsyncContentBinding",y.j.Bb),y.b("applyBindings",y.uc),y.b("applyBindingsToDescendants",y.Pa),y.b("applyBindingAccessorsToNode",y.eb),y.b("applyBindingsToNode",y.kd),y.b("contextFor",y.Cc),y.b("dataFor",y.Dc)}(),function(t){function e(e,i){var a,s=Object.prototype.hasOwnProperty.call(r,e)?r[e]:t;s?s.subscribe(i):((s=r[e]=new y.R).subscribe(i),n(e,function(t,n){var i=!(!n||!n.synchronous);o[e]={definition:t,Fd:i},delete r[e],a||i?s.notifySubscribers(t):y.ma.yb(function(){s.notifySubscribers(t)})}),a=!0)}function n(t,e){i("getConfig",[t],function(n){n?i("loadComponent",[t,n],function(t){e(t,n)}):e(null,null)})}function i(e,n,r,o){o||(o=y.i.loaders.slice(0));var a=o.shift();if(a){var s=a[e];if(s){var u=!1;if(s.apply(a,n.concat(function(t){u?r(null):null!==t?r(t):i(e,n,r,o)}))!==t&&(u=!0,!a.suppressLoaderExceptions))throw Error("Component loaders must supply values by invoking the callback, not by returning values synchronously.")}else i(e,n,r,o)}else r(null)}var r={},o={};y.i={get:function(n,i){var r=Object.prototype.hasOwnProperty.call(o,n)?o[n]:t;r?r.Fd?y.v.K(function(){i(r.definition)}):y.ma.yb(function(){i(r.definition)}):e(n,i)},Ac:function(t){delete o[t]},nc:i},y.i.loaders=[],y.b("components",y.i),y.b("components.get",y.i.get),y.b("components.clearCachedDefinition",y.i.Ac)}(),function(){function t(t,e,n,i){function r(){0==--s&&i(o)}var o={},s=2,u=n.template;n=n.viewModel,u?a(e,u,function(e){y.i.nc("loadTemplate",[t,e],function(t){o.template=t,r()})}):r(),n?a(e,n,function(e){y.i.nc("loadViewModel",[t,e],function(t){o[l]=t,r()})}):r()}function e(t){switch(y.a.P(t)){case"script":return y.a.ta(t.text);case"textarea":return y.a.ta(t.value);case"template":if(o(t.content))return y.a.Ca(t.content.childNodes)}return y.a.Ca(t.childNodes)}function o(t){return i.DocumentFragment?t instanceof DocumentFragment:t&&11===t.nodeType}function a(t,e,r){"string"==typeof e.require?n||i.require?(n||i.require)([e.require],r):t("Uses require, but no AMD loader is present"):r(e)}function s(t){return function(e){throw Error("Component '"+t+"': "+e)}}var u={};y.i.register=function(t,e){if(!e)throw Error("Invalid configuration for "+t);if(y.i.sb(t))throw Error("Component "+t+" is already registered");u[t]=e},y.i.sb=function(t){return Object.prototype.hasOwnProperty.call(u,t)},y.i.unregister=function(t){delete u[t],y.i.Ac(t)},y.i.Ec={getConfig:function(t,e){e(y.i.sb(t)?u[t]:null)},loadComponent:function(e,n,i){var r=s(e);a(r,n,function(n){t(e,r,n,i)})},loadTemplate:function(t,n,a){if(t=s(t),"string"==typeof n)a(y.a.ta(n));else if(n instanceof Array)a(n);else if(o(n))a(y.a.la(n.childNodes));else if(n.element)if(n=n.element,i.HTMLElement?n instanceof HTMLElement:n&&n.tagName&&1===n.nodeType)a(e(n));else if("string"==typeof n){var u=r.getElementById(n);u?a(e(u)):t("Cannot find element with ID "+n)}else t("Unknown element type: "+n);else t("Unknown template value: "+n)},loadViewModel:function(t,e,n){!function t(e,n,i){if("function"==typeof n)i(function(t){return new n(t)});else if("function"==typeof n[l])i(n[l]);else if("instance"in n){var r=n.instance;i(function(){return r})}else"viewModel"in n?t(e,n.viewModel,i):e("Unknown viewModel value: "+n)}(s(t),e,n)}};var l="createViewModel";y.b("components.register",y.i.register),y.b("components.isRegistered",y.i.sb),y.b("components.unregister",y.i.unregister),y.b("components.defaultLoader",y.i.Ec),y.i.loaders.push(y.i.Ec),y.i.cd=u}(),function(){function t(t,n){if(i=t.getAttribute("params")){var i=e.parseBindingsString(i,n,t,{valueAccessors:!0,bindingParams:!0}),r=(i=y.a.Ha(i,function(e){return y.o(e,null,{l:t})}),y.a.Ha(i,function(e){var n=e.w();return e.ja()?y.o({read:function(){return y.a.c(e())},write:y.Ya(n)&&function(t){e()(t)},l:t}):n}));return Object.prototype.hasOwnProperty.call(r,"$raw")||(r.$raw=i),r}return{$raw:{}}}y.i.getComponentNameForNode=function(t){var e=y.a.P(t);if(y.i.sb(e)&&(-1!=e.indexOf("-")||"[object HTMLUnknownElement]"==""+t||8>=y.a.W&&t.tagName===e))return e},y.i.sc=function(e,n,i,r){if(1===n.nodeType){var o=y.i.getComponentNameForNode(n);if(o){if((e=e||{}).component)throw Error('Cannot use the "component" binding on a custom element matching a component');var a={name:o,params:t(n,i)};e.component=r?function(){return a}:a}}return e};var e=new y.ga;9>y.a.W&&(y.i.register=function(t){return function(e){return t.apply(this,arguments)}}(y.i.register),r.createDocumentFragment=function(t){return function(){var e,n=t(),i=y.i.cd;for(e in i);return n}}(r.createDocumentFragment))}(),function(){var t=0;y.f.component={init:function(e,n,i,r,o){function a(){var t=s&&s.dispose;"function"==typeof t&&t.call(s),l&&l.s(),u=s=l=null}var s,u,l,h=y.a.la(y.h.childNodes(e));return y.h.Ea(e),y.a.I.za(e,a),y.o(function(){var i,r,c=y.a.c(n());if("string"==typeof c?i=c:(i=y.a.c(c.name),r=y.a.c(c.params)),!i)throw Error("No component name specified");var f=y.j.Bb(e,o),p=u=++t;y.i.get(i,function(t){if(u===p){if(a(),!t)throw Error("Unknown component '"+i+"'");!function(t,e,n){if(!(e=e.template))throw Error("Component '"+t+"' has no template");t=y.a.Ca(e),y.h.ua(n,t)}(i,t,e);var n=function(t,e,n){var i=t.createViewModel;return i?i.call(t,e,n):e}(t,r,{element:e,templateNodes:h});t=f.createChildContext(n,{extend:function(t){t.$component=n,t.$componentTemplateNodes=h}}),n&&n.koDescendantsComplete&&(l=y.j.subscribe(e,y.j.oa,n.koDescendantsComplete,n)),s=n,y.Pa(t,e)}})},null,{l:e}),{controlsDescendantBindings:!0}}},y.h.ea.component=!0}();var I={class:"className",for:"htmlFor"};y.f.attr={update:function(e,n){var i=y.a.c(n())||{};y.a.O(i,function(n,i){i=y.a.c(i);var r=n.indexOf(":"),o=(r="lookupNamespaceURI"in e&&0<r&&e.lookupNamespaceURI(n.substr(0,r)),!1===i||null===i||i===t);o?r?e.removeAttributeNS(r,n):e.removeAttribute(n):i=i.toString(),8>=y.a.W&&n in I?(n=I[n],o?e.removeAttribute(n):e[n]=i):o||(r?e.setAttributeNS(r,n,i):e.setAttribute(n,i)),"name"===n&&y.a.Xc(e,o?"":i)})}},y.f.checked={after:["value","attr"],init:function(e,n,i){function r(){var r=e.checked,u=o();if(!y.U.rb()&&(r||!s&&!y.U.pa())){var c=y.v.K(n);if(l){var p=h?c.w():c,d=f;f=u,d!==u?r&&(y.a.Oa(p,u,!0),y.a.Oa(p,d,!1)):y.a.Oa(p,u,r),h&&y.Ya(c)&&c(p)}else a&&(u===t?u=r:r||(u=t)),y.m.$a(c,i,"checked",u,!0)}}var o=y.wb(function(){return i.has("checkedValue")?y.a.c(i.get("checkedValue")):c?i.has("value")?y.a.c(i.get("value")):e.value:void 0}),a="checkbox"==e.type,s="radio"==e.type;if(a||s){var u=n(),l=a&&y.a.c(u)instanceof Array,h=!(l&&u.push&&u.splice),c=s||l,f=l?o():t;s&&!e.name&&y.f.uniqueName.init(e,function(){return!0}),y.o(r,null,{l:e}),y.a.H(e,"click",r),y.o(function(){var i=y.a.c(n()),r=o();l?(e.checked=0<=y.a.A(i,r),f=r):e.checked=a&&r===t?!!i:o()===i},null,{l:e}),u=t}}},y.m.va.checked=!0,y.f.checkedValue={update:function(t,e){t.value=y.a.c(e())}},y.f.class={update:function(t,e){var n=y.a.Cb(y.a.c(e()));y.a.Eb(t,t.__ko__cssValue,!1),t.__ko__cssValue=n,y.a.Eb(t,n,!0)}},y.f.css={update:function(t,e){var n=y.a.c(e());null!==n&&"object"==typeof n?y.a.O(n,function(e,n){n=y.a.c(n),y.a.Eb(t,e,n)}):y.f.class.update(t,e)}},y.f.enable={update:function(t,e){var n=y.a.c(e());n&&t.disabled?t.removeAttribute("disabled"):n||t.disabled||(t.disabled=!0)}},y.f.disable={update:function(t,e){y.f.enable.update(t,function(){return!y.a.c(e())})}},y.f.event={init:function(t,e,n,i,r){var o=e()||{};y.a.O(o,function(o){"string"==typeof o&&y.a.H(t,o,function(t){var a,s=e()[o];if(s){try{var u=y.a.la(arguments);i=r.$data,u.unshift(i),a=s.apply(i,u)}finally{!0!==a&&(t.preventDefault?t.preventDefault():t.returnValue=!1)}!1===n.get(o+"Bubble")&&(t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation())}})})}},y.f.foreach={Qc:function(t){return function(){var e=t(),n=y.a.$b(e);return n&&"number"!=typeof n.length?(y.a.c(e),{foreach:n.data,as:n.as,noChildContext:n.noChildContext,includeDestroyed:n.includeDestroyed,afterAdd:n.afterAdd,beforeRemove:n.beforeRemove,afterRender:n.afterRender,beforeMove:n.beforeMove,afterMove:n.afterMove,templateEngine:y.ba.Na}):{foreach:e,templateEngine:y.ba.Na}}},init:function(t,e){return y.f.template.init(t,y.f.foreach.Qc(e))},update:function(t,e,n,i,r){return y.f.template.update(t,y.f.foreach.Qc(e),n,i,r)}},y.m.Ra.foreach=!1,y.h.ea.foreach=!0,y.f.hasfocus={init:function(t,e,n){function i(i){t.__ko_hasfocusUpdating=!0;var r=t.ownerDocument;if("activeElement"in r){var o;try{o=r.activeElement}catch(t){o=r.body}i=o===t}r=e(),y.m.$a(r,n,"hasfocus",i,!0),t.__ko_hasfocusLastValue=i,t.__ko_hasfocusUpdating=!1}var r=i.bind(null,!0),o=i.bind(null,!1);y.a.H(t,"focus",r),y.a.H(t,"focusin",r),y.a.H(t,"blur",o),y.a.H(t,"focusout",o),t.__ko_hasfocusLastValue=!1},update:function(t,e){var n=!!y.a.c(e());t.__ko_hasfocusUpdating||t.__ko_hasfocusLastValue===n||(n?t.focus():t.blur(),!n&&t.__ko_hasfocusLastValue&&t.ownerDocument.body.focus(),y.v.K(y.a.Fb,null,[t,n?"focusin":"focusout"]))}},y.m.va.hasfocus=!0,y.f.hasFocus=y.f.hasfocus,y.m.va.hasFocus="hasfocus",y.f.html={init:function(){return{controlsDescendantBindings:!0}},update:function(t,e){y.a.dc(t,e())}},function(){function t(t,e,n){y.f[t]={init:function(t,i,r,o,a){var s,u,l,h,c,f={};if(e){o=r.get("as");var p=r.get("noChildContext");f={as:o,noChildContext:p,exportDependencies:c=!(o&&p)}}return h=(l="render"==r.get("completeOn"))||r.has(y.j.oa),y.o(function(){var r,o=y.a.c(i()),p=!n!=!o,d=!u;(c||p!==s)&&(h&&(a=y.j.Bb(t,a)),p&&(e&&!c||(f.dataDependency=y.U.o()),r=e?a.createChildContext("function"==typeof o?o:i,f):y.U.pa()?a.extend(null,f):a),d&&y.U.pa()&&(u=y.a.Ca(y.h.childNodes(t),!0)),p?(d||y.h.ua(t,y.a.Ca(u)),y.Pa(r,t)):(y.h.Ea(t),l||y.j.Ga(t,y.j.T)),s=p)},null,{l:t}),{controlsDescendantBindings:!0}}},y.m.Ra[t]=!1,y.h.ea[t]=!0}t("if"),t("ifnot",!1,!0),t("with",!0)}(),y.f.let={init:function(t,e,n,i,r){return e=r.extend(e),y.Pa(e,t),{controlsDescendantBindings:!0}}},y.h.ea.let=!0;var P={};y.f.options={init:function(t){if("select"!==y.a.P(t))throw Error("options binding applies only to SELECT elements");for(;0<t.length;)t.remove(0);return{controlsDescendantBindings:!0}},update:function(e,n,i){function r(){return y.a.fb(e.options,function(t){return t.selected})}function o(t,e,n){var i=typeof e;return"function"==i?e(t):"string"==i?t[e]:n}function a(t,n){if(d&&h)y.u.ya(e,y.a.c(i.get("value")),!0);else if(p.length){var r=0<=y.a.A(p,y.u.L(n[0]));y.a.Yc(n[0],r),d&&!r&&y.v.K(y.a.Fb,null,[e,"change"])}}var s=e.multiple,u=0!=e.length&&s?e.scrollTop:null,l=y.a.c(n()),h=i.get("valueAllowUnset")&&i.has("value"),c=i.get("optionsIncludeDestroyed");n={};var f,p=[];h||(s?p=y.a.Mb(r(),y.u.L):0<=e.selectedIndex&&p.push(y.u.L(e.options[e.selectedIndex]))),l&&(void 0===l.length&&(l=[l]),f=y.a.fb(l,function(e){return c||e===t||null===e||!y.a.c(e._destroy)}),i.has("optionsCaption")&&null!==(l=y.a.c(i.get("optionsCaption")))&&l!==t&&f.unshift(P));var d=!1;n.beforeRemove=function(t){e.removeChild(t)},l=a,i.has("optionsAfterRender")&&"function"==typeof i.get("optionsAfterRender")&&(l=function(e,n){a(0,n),y.v.K(i.get("optionsAfterRender"),null,[n[0],e!==P?e:t])}),y.a.cc(e,f,function(n,r,a){return a.length&&(p=!h&&a[0].selected?[y.u.L(a[0])]:[],d=!0),r=e.ownerDocument.createElement("option"),n===P?(y.a.Ab(r,i.get("optionsCaption")),y.u.ya(r,t)):(a=o(n,i.get("optionsValue"),n),y.u.ya(r,y.a.c(a)),n=o(n,i.get("optionsText"),a),y.a.Ab(r,n)),[r]},n,l),y.v.K(function(){h?y.u.ya(e,y.a.c(i.get("value")),!0):(s?p.length&&r().length<p.length:p.length&&0<=e.selectedIndex?y.u.L(e.options[e.selectedIndex])!==p[0]:p.length||0<=e.selectedIndex)&&y.a.Fb(e,"change")}),y.a.vd(e),u&&20<Math.abs(u-e.scrollTop)&&(e.scrollTop=u)}},y.f.options.Yb=y.a.g.Z(),y.f.selectedOptions={after:["options","foreach"],init:function(t,e,n){y.a.H(t,"change",function(){var i=e(),r=[];y.a.C(t.getElementsByTagName("option"),function(t){t.selected&&r.push(y.u.L(t))}),y.m.$a(i,n,"selectedOptions",r)})},update:function(t,e){if("select"!=y.a.P(t))throw Error("values binding applies only to SELECT elements");var n=y.a.c(e()),i=t.scrollTop;n&&"number"==typeof n.length&&y.a.C(t.getElementsByTagName("option"),function(t){var e=0<=y.a.A(n,y.u.L(t));t.selected!=e&&y.a.Yc(t,e)}),t.scrollTop=i}},y.m.va.selectedOptions=!0,y.f.style={update:function(e,n){var i=y.a.c(n()||{});y.a.O(i,function(n,i){if(null!==(i=y.a.c(i))&&i!==t&&!1!==i||(i=""),a)a(e).css(n,i);else if(/^--/.test(n))e.style.setProperty(n,i);else{n=n.replace(/-(\w)/g,function(t,e){return e.toUpperCase()});var r=e.style[n];e.style[n]=i,i===r||e.style[n]!=r||isNaN(i)||(e.style[n]=i+"px")}})}},y.f.submit={init:function(t,e,n,i,r){if("function"!=typeof e())throw Error("The value for a submit binding must be a function");y.a.H(t,"submit",function(n){var i,o=e();try{i=o.call(r.$data,t)}finally{!0!==i&&(n.preventDefault?n.preventDefault():n.returnValue=!1)}})}},y.f.text={init:function(){return{controlsDescendantBindings:!0}},update:function(t,e){y.a.Ab(t,e())}},y.h.ea.text=!0,function(){if(i&&i.navigator){var e,n,r,o,a,s=function(t){if(t)return parseFloat(t[1])},u=i.navigator.userAgent;(e=i.opera&&i.opera.version&&parseInt(i.opera.version()))||(a=s(u.match(/Edge\/([^ ]+)$/)))||s(u.match(/Chrome\/([^ ]+)/))||(n=s(u.match(/Version\/([^ ]+) Safari/)))||(r=s(u.match(/Firefox\/([^ ]+)/)))||(o=y.a.W||s(u.match(/MSIE ([^ ]+)/)))||(o=s(u.match(/rv:([^ )]+)/)))}if(8<=o&&10>o)var l=y.a.g.Z(),h=y.a.g.Z(),c=function(t){var e=this.activeElement;(e=e&&y.a.g.get(e,h))&&e(t)},f=function(t,e){var n=t.ownerDocument;y.a.g.get(n,l)||(y.a.g.set(n,l,!0),y.a.H(n,"selectionchange",c)),y.a.g.set(t,h,e)};y.f.textInput={init:function(i,s,u){function l(t,e){y.a.H(i,t,e)}function h(){p||(d=i.value,p=y.a.setTimeout(c,4))}function c(){clearTimeout(p),d=p=t;var e=i.value;b!==e&&(b=e,y.m.$a(s(),u,"textInput",e))}var p,d,b=i.value,g=9==y.a.W?h:c,v=!1;o&&l("keypress",c),11>o&&l("propertychange",function(t){v||"value"!==t.propertyName||g(t)}),8==o&&(l("keyup",c),l("keydown",c)),f&&(f(i,g),l("dragend",h)),(!o||9<=o)&&l("input",g),5>n&&"textarea"===y.a.P(i)?(l("keydown",h),l("paste",h),l("cut",h)):11>e?l("keydown",h):4>r?(l("DOMAutoComplete",c),l("dragdrop",c),l("drop",c)):a&&"number"===i.type&&l("keydown",h),l("change",c),l("blur",c),y.o(function e(){var n=y.a.c(s());null!==n&&n!==t||(n=""),d!==t&&n===d?y.a.setTimeout(e,4):i.value!==n&&(v=!0,i.value=n,v=!1,b=i.value)},null,{l:i})}},y.m.va.textInput=!0,y.f.textinput={preprocess:function(t,e,n){n("textInput",t)}}}(),y.f.uniqueName={init:function(t,e){if(e()){var n="ko_unique_"+ ++y.f.uniqueName.qd;y.a.Xc(t,n)}}},y.f.uniqueName.qd=0,y.f.using={init:function(t,e,n,i,r){var o;return n.has("as")&&(o={as:n.get("as"),noChildContext:n.get("noChildContext")}),e=r.createChildContext(e,o),y.Pa(e,t),{controlsDescendantBindings:!0}}},y.h.ea.using=!0,y.f.value={after:["options","foreach"],init:function(e,n,i){var r=y.a.P(e),o="input"==r;if(!o||"checkbox"!=e.type&&"radio"!=e.type){var a=["change"],s=i.get("valueUpdate"),u=!1,l=null;s&&("string"==typeof s&&(s=[s]),y.a.gb(a,s),a=y.a.vc(a));var h,c=function(){l=null,u=!1;var t=n(),r=y.u.L(e);y.m.$a(t,i,"value",r)};!y.a.W||!o||"text"!=e.type||"off"==e.autocomplete||e.form&&"off"==e.form.autocomplete||-1!=y.a.A(a,"propertychange")||(y.a.H(e,"propertychange",function(){u=!0}),y.a.H(e,"focus",function(){u=!1}),y.a.H(e,"blur",function(){u&&c()})),y.a.C(a,function(t){var n=c;y.a.Td(t,"after")&&(n=function(){l=y.u.L(e),y.a.setTimeout(c,0)},t=t.substring(5)),y.a.H(e,t,n)}),h=o&&"file"==e.type?function(){var i=y.a.c(n());null===i||i===t||""===i?e.value="":y.v.K(c)}:function(){var o=y.a.c(n()),a=y.u.L(e);null!==l&&o===l?y.a.setTimeout(h,0):o===a&&a!==t||("select"===r?(a=i.get("valueAllowUnset"),y.u.ya(e,o,a),a||o===y.u.L(e)||y.v.K(c)):y.u.ya(e,o))},y.o(h,null,{l:e})}else y.eb(e,{checkedValue:n})},update:function(){}},y.m.va.value=!0,y.f.visible={update:function(t,e){var n=y.a.c(e()),i="none"!=t.style.display;n&&!i?t.style.display="":!n&&i&&(t.style.display="none")}},y.f.hidden={update:function(t,e){y.f.visible.update(t,function(){return!y.a.c(e())})}},function(t){y.f[t]={init:function(e,n,i,r,o){return y.f.event.init.call(this,e,function(){var e={};return e[t]=n(),e},i,r,o)}}}("click"),y.ca=function(){},y.ca.prototype.renderTemplateSource=function(){throw Error("Override renderTemplateSource")},y.ca.prototype.createJavaScriptEvaluatorBlock=function(){throw Error("Override createJavaScriptEvaluatorBlock")},y.ca.prototype.makeTemplateSource=function(t,e){if("string"==typeof t){var n=(e=e||r).getElementById(t);if(!n)throw Error("Cannot find template with ID "+t);return new y.B.D(n)}if(1==t.nodeType||8==t.nodeType)return new y.B.ia(t);throw Error("Unknown template type: "+t)},y.ca.prototype.renderTemplate=function(t,e,n,i){return t=this.makeTemplateSource(t,i),this.renderTemplateSource(t,e,n,i)},y.ca.prototype.isTemplateRewritten=function(t,e){return!1===this.allowTemplateRewriting||this.makeTemplateSource(t,e).data("isRewritten")},y.ca.prototype.rewriteTemplate=function(t,e,n){e=e((t=this.makeTemplateSource(t,n)).text()),t.text(e),t.data("isRewritten",!0)},y.b("templateEngine",y.ca),y.ic=function(){function t(t,e,n,i){t=y.m.Zb(t);for(var r=y.m.Ra,o=0;o<t.length;o++){var a=t[o].key;if(Object.prototype.hasOwnProperty.call(r,a)){var s=r[a];if("function"==typeof s){if(a=s(t[o].value))throw Error(a)}else if(!s)throw Error("This template engine does not support the '"+a+"' binding within its templates")}}return n="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+y.m.ub(t,{valueAccessors:!0})+" } })()},'"+n.toLowerCase()+"')",i.createJavaScriptEvaluatorBlock(n)+e}var e=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'|[^>]*))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi,n=/\x3c!--\s*ko\b\s*([\s\S]*?)\s*--\x3e/g;return{wd:function(t,e,n){e.isTemplateRewritten(t,n)||e.rewriteTemplate(t,function(t){return y.ic.Kd(t,e)},n)},Kd:function(i,r){return i.replace(e,function(e,n,i,o,a){return t(a,n,i,r)}).replace(n,function(e,n){return t(n,"\x3c!-- ko --\x3e","#comment",r)})},ld:function(t,e){return y.aa.Wb(function(n,i){var r=n.nextSibling;r&&r.nodeName.toLowerCase()===e&&y.eb(r,t,i)})}}}(),y.b("__tr_ambtns",y.ic.ld),function(){y.B={},y.B.D=function(t){if(this.D=t){var e=y.a.P(t);this.Db="script"===e?1:"textarea"===e?2:"template"==e&&t.content&&11===t.content.nodeType?3:4}},y.B.D.prototype.text=function(){var t=1===this.Db?"text":2===this.Db?"value":"innerHTML";if(0==arguments.length)return this.D[t];var e=arguments[0];"innerHTML"===t?y.a.dc(this.D,e):this.D[t]=e};var e=y.a.g.Z()+"_";y.B.D.prototype.data=function(t){if(1===arguments.length)return y.a.g.get(this.D,e+t);y.a.g.set(this.D,e+t,arguments[1])};var n=y.a.g.Z();y.B.D.prototype.nodes=function(){var e=this.D;if(0==arguments.length){var i=y.a.g.get(e,n)||{},r=i.jb||(3===this.Db?e.content:4===this.Db?e:t);return r&&!i.hd||(i=this.text())&&(r=y.a.Ld(i,e.ownerDocument),this.text(""),y.a.g.set(e,n,{jb:r,hd:!0})),r}y.a.g.set(e,n,{jb:arguments[0]})},y.B.ia=function(t){this.D=t},y.B.ia.prototype=new y.B.D,y.B.ia.prototype.constructor=y.B.ia,y.B.ia.prototype.text=function(){if(0==arguments.length){var e=y.a.g.get(this.D,n)||{};return e.jc===t&&e.jb&&(e.jc=e.jb.innerHTML),e.jc}y.a.g.set(this.D,n,{jc:arguments[0]})},y.b("templateSources",y.B),y.b("templateSources.domElement",y.B.D),y.b("templateSources.anonymousTemplate",y.B.ia)}(),function(){function e(t,e,n){var i;for(e=y.h.nextSibling(e);t&&(i=t)!==e;)n(i,t=y.h.nextSibling(i))}function n(t,n){if(t.length){var i=t[0],r=t[t.length-1],o=i.parentNode,a=y.ga.instance,s=a.preprocessNode;if(s){if(e(i,r,function(t,e){var n=t.previousSibling,o=s.call(a,t);o&&(t===i&&(i=o[0]||e),t===r&&(r=o[o.length-1]||n))}),t.length=0,!i)return;i===r?t.push(i):(t.push(i,r),y.a.Ua(t,o))}e(i,r,function(t){1!==t.nodeType&&8!==t.nodeType||y.uc(n,t)}),e(i,r,function(t){1!==t.nodeType&&8!==t.nodeType||y.aa.bd(t,[n])}),y.a.Ua(t,o)}}function i(t){return t.nodeType?t:0<t.length?t[0]:null}function r(t,e,r,o,s){s=s||{};var u=(t&&i(t)||r||{}).ownerDocument,l=s.templateEngine||a;if(y.ic.wd(r,l,u),"number"!=typeof(r=l.renderTemplate(r,o,s,u)).length||0<r.length&&"number"!=typeof r[0].nodeType)throw Error("Template engine must return an array of DOM nodes");switch(u=!1,e){case"replaceChildren":y.h.ua(t,r),u=!0;break;case"replaceNode":y.a.Wc(t,r),u=!0;break;case"ignoreTargetNode":break;default:throw Error("Unknown renderMode: "+e)}return u&&(n(r,o),s.afterRender&&y.v.K(s.afterRender,null,[r,o[s.as||"$data"]]),"replaceChildren"==e&&y.j.Ga(t,y.j.T)),r}function o(t,e,n){return y.N(t)?t():"function"==typeof t?t(e,n):t}var a;y.ec=function(e){if(e!=t&&!(e instanceof y.ca))throw Error("templateEngine must inherit from ko.templateEngine");a=e},y.bc=function(e,n,s,u,l){if(((s=s||{}).templateEngine||a)==t)throw Error("Set a template engine before calling renderTemplate");if(l=l||"replaceChildren",u){var h=i(u);return y.$(function(){var t=n&&n instanceof y.fa?n:new y.fa(n,null,null,null,{exportDependencies:!0}),a=o(e,t.$data,t);t=r(u,l,a,t,s),"replaceNode"==l&&(h=i(u=t))},null,{Sa:function(){return!h||!y.a.Rb(h)},l:h&&"replaceNode"==l?h.parentNode:h})}return y.aa.Wb(function(t){y.bc(e,n,s,t,"replaceNode")})},y.Pd=function(e,i,a,s,u){function l(t,e){y.v.K(y.a.cc,null,[s,t,c,a,h,e]),y.j.Ga(s,y.j.T)}function h(t,e){n(e,f),a.afterRender&&a.afterRender(e,t),f=null}function c(t,n){f=u.createChildContext(t,{as:p,noChildContext:a.noChildContext,extend:function(t){t.$index=n,p&&(t[p+"Index"]=n)}});var i=o(e,t,f);return r(s,"ignoreTargetNode",i,f,a)}var f,p=a.as,d=!1===a.includeDestroyed||y.options.foreachHidesDestroyed&&!a.includeDestroyed;if(d||a.beforeRemove||!y.Oc(i))return y.$(function(){var e=y.a.c(i)||[];void 0===e.length&&(e=[e]),d&&(e=y.a.fb(e,function(e){return e===t||null===e||!y.a.c(e._destroy)})),l(e)},null,{l:s});l(i.w());var b=i.subscribe(function(t){l(i(),t)},null,"arrayChange");return b.l(s),b};var s=y.a.g.Z(),u=y.a.g.Z();y.f.template={init:function(t,e){var n=y.a.c(e());if("string"==typeof n||n.name)y.h.Ea(t);else if("nodes"in n){if(n=n.nodes||[],y.N(n))throw Error('The "nodes" option must be a plain, non-observable array.');var i=n[0]&&n[0].parentNode;i&&y.a.g.get(i,u)||(i=y.a.Xb(n),y.a.g.set(i,u,!0)),new y.B.ia(t).nodes(i)}else{if(!(0<(n=y.h.childNodes(t)).length))throw Error("Anonymous template defined, but no template content was provided");i=y.a.Xb(n),new y.B.ia(t).nodes(i)}return{controlsDescendantBindings:!0}},update:function(e,n,i,r,o){var a=n();i=!0,r=null,"string"==typeof(n=y.a.c(a))?n={}:(a=n.name,"if"in n&&(i=y.a.c(n.if)),i&&"ifnot"in n&&(i=!y.a.c(n.ifnot))),"foreach"in n?r=y.Pd(a||e,i&&n.foreach||[],n,e,o):i?(i=o,"data"in n&&(i=o.createChildContext(n.data,{as:n.as,noChildContext:n.noChildContext,exportDependencies:!0})),r=y.bc(a||e,i,n,e)):y.h.Ea(e),o=r,(n=y.a.g.get(e,s))&&"function"==typeof n.s&&n.s(),y.a.g.set(e,s,!o||o.ja&&!o.ja()?t:o)}},y.m.Ra.template=function(t){return 1==(t=y.m.Zb(t)).length&&t[0].unknown||y.m.Hd(t,"name")?null:"This template engine does not support anonymous templates nested within its templates"},y.h.ea.template=!0}(),y.b("setTemplateEngine",y.ec),y.b("renderTemplate",y.bc),y.a.Jc=function(t,e,n){var i,r,o,a,s;if(t.length&&e.length)for(i=r=0;(!n||i<n)&&(a=t[r]);++r){for(o=0;s=e[o];++o)if(a.value===s.value){a.moved=s.index,s.moved=a.index,e.splice(o,1),i=o=0;break}i+=o}},y.a.Ob=function(){function t(t,e,n,i,r){var o,a,s,u,l,h=Math.min,c=Math.max,f=[],p=t.length,d=e.length,b=d-p||1,g=p+d+1;for(o=0;o<=p;o++)for(u=s,f.push(s=[]),l=h(d,o+b),a=c(0,o-1);a<=l;a++)s[a]=a?o?t[o-1]===e[a-1]?u[a-1]:h(u[a]||g,s[a-1]||g)+1:a+1:o+1;for(h=[],c=[],b=[],o=p,a=d;o||a;)d=f[o][a]-1,a&&d===f[o][a-1]?c.push(h[h.length]={status:n,value:e[--a],index:a}):o&&d===f[o-1][a]?b.push(h[h.length]={status:i,value:t[--o],index:o}):(--a,--o,r.sparse||h.push({status:"retained",value:e[a]}));return y.a.Jc(b,c,!r.dontLimitMoves&&10*p),h.reverse()}return function(e,n,i){return i="boolean"==typeof i?{dontLimitMoves:i}:i||{},n=n||[],(e=e||[]).length<n.length?t(e,n,"added","deleted",i):t(n,e,"deleted","added",i)}}(),y.b("utils.compareArrays",y.a.Ob),function(){function e(e,n,i,r,o){var a=[],s=y.$(function(){var t=n(i,o,y.a.Ua(a,e))||[];0<a.length&&(y.a.Wc(a,t),r&&y.v.K(r,null,[i,t,o])),a.length=0,y.a.gb(a,t)},null,{l:e,Sa:function(){return!y.a.jd(a)}});return{Y:a,$:s.ja()?s:t}}var n=y.a.g.Z(),i=y.a.g.Z();y.a.cc=function(r,o,a,s,u,l){function h(t){p={Aa:t,nb:y.sa(E++)},w.push(p),m||A.push(p)}function c(t){p=v[t],E!==p.nb.w()&&T.push(p),p.nb(E++),y.a.Ua(p.Y,r),w.push(p)}function f(t,e){if(t)for(var n=0,i=e.length;n<i;n++)y.a.C(e[n].Y,function(i){t(i,n,e[n].Aa)})}void 0===(o=o||[]).length&&(o=[o]),s=s||{};var p,d,b,g,v=y.a.g.get(r,n),m=!v,w=[],x=0,E=0,S=[],k=[],C=[],T=[],A=[],_=0;if(m)y.a.C(o,h);else{if(!l||v&&v._countWaitingForRemove){var N=y.a.Mb(v,function(t){return t.Aa});l=y.a.Ob(N,o,{dontLimitMoves:s.dontLimitMoves,sparse:!0})}var O,I,P;for(N=0;O=l[N];N++)switch(I=O.moved,P=O.index,O.status){case"deleted":for(;x<P;)c(x++);I===t&&((p=v[x]).$&&(p.$.s(),p.$=t),y.a.Ua(p.Y,r).length&&(s.beforeRemove&&(w.push(p),_++,p.Aa===i?p=null:C.push(p)),p&&S.push.apply(S,p.Y))),x++;break;case"added":for(;E<P;)c(x++);I!==t?(k.push(w.length),c(I)):h(O.value)}for(;E<o.length;)c(x++);w._countWaitingForRemove=_}y.a.g.set(r,n,w),f(s.beforeMove,T),y.a.C(S,s.beforeRemove?y.na:y.removeNode);try{g=r.ownerDocument.activeElement}catch(t){}if(k.length)for(;(N=k.shift())!=t;){for(p=w[N],d=t;N;)if((b=w[--N].Y)&&b.length){d=b[b.length-1];break}for(o=0;x=p.Y[o];d=x,o++)y.h.Vb(r,x,d)}for(N=0,k=y.h.firstChild(r);p=w[N];N++){for(p.Y||y.a.extend(p,e(r,a,p.Aa,u,p.nb)),o=0;x=p.Y[o];k=x.nextSibling,d=x,o++)x!==k&&y.h.Vb(r,x,d);!p.Dd&&u&&(u(p.Aa,p.Y,p.nb),p.Dd=!0,d=p.Y[p.Y.length-1])}for(g&&r.ownerDocument.activeElement!=g&&g.focus(),f(s.beforeRemove,C),N=0;N<C.length;++N)C[N].Aa=i;f(s.afterMove,T),f(s.afterAdd,A)}}(),y.b("utils.setDomNodeChildrenFromArrayMapping",y.a.cc),y.ba=function(){this.allowTemplateRewriting=!1},y.ba.prototype=new y.ca,y.ba.prototype.constructor=y.ba,y.ba.prototype.renderTemplateSource=function(t,e,n,i){return(e=9>y.a.W||!t.nodes?null:t.nodes())?y.a.la(e.cloneNode(!0).childNodes):(t=t.text(),y.a.ta(t,i))},y.ba.Na=new y.ba,y.ec(y.ba.Na),y.b("nativeTemplateEngine",y.ba),function(){y.Za=function(){var t=this.Gd=function(){if(!a||!a.tmpl)return 0;try{if(0<=a.tmpl.tag.tmpl.open.toString().indexOf("__"))return 2}catch(t){}return 1}();this.renderTemplateSource=function(e,n,i,o){if(o=o||r,i=i||{},2>t)throw Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.");var s=e.data("precompiled");return s||(s=e.text()||"",s=a.template(null,"{{ko_with $item.koBindingContext}}"+s+"{{/ko_with}}"),e.data("precompiled",s)),e=[n.$data],n=a.extend({koBindingContext:n},i.templateOptions),(n=a.tmpl(s,e,n)).appendTo(o.createElement("div")),a.fragments={},n},this.createJavaScriptEvaluatorBlock=function(t){return"{{ko_code ((function() { return "+t+" })()) }}"},this.addTemplate=function(t,e){r.write("<script type='text/html' id='"+t+"'>"+e+"<\/script>")},0<t&&(a.tmpl.tag.ko_code={open:"__.push($1 || '');"},a.tmpl.tag.ko_with={open:"with($1) {",close:"} "})},y.Za.prototype=new y.ca,y.Za.prototype.constructor=y.Za;var t=new y.Za;0<t.Gd&&y.ec(t),y.b("jqueryTmplTemplateEngine",y.Za)}()})}()},{}],2:[function(t,e,n){(function(t){!function(t){if("function"==typeof define&&define.amd)define([],t);else if("object"==typeof e){var i={};e.exports=t(i)}else if("object"==typeof n){n=t(i={})}else t(window)}(function(e){e=e||{};var n,i="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){if(n.get||n.set)throw new TypeError("ES3 does not support getters and setters.");t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},r="undefined"!=typeof window&&window===this?this:void 0!==t?t:this;function o(){o=function(){},r.Symbol||(r.Symbol=s)}var a=0;function s(t){return"jscomp_symbol_"+(t||"")+a++}function u(){o();var t=r.Symbol.iterator;t||(t=r.Symbol.iterator=r.Symbol("iterator")),"function"!=typeof Array.prototype[t]&&i(Array.prototype,t,{configurable:!0,writable:!0,value:function(){return l(this)}}),u=function(){}}function l(t){var e=0;return function(t){return u(),(t={next:t})[r.Symbol.iterator]=function(){return this},t}(function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}})}function h(t){u();var e=t[Symbol.iterator];return e?e.call(t):l(t)}function c(t){if(!(t instanceof Array)){t=h(t);for(var e,n=[];!(e=t.next()).done;)n.push(e.value);t=n}return t}function f(t,e){if(e){for(var n=r,o=t.split("."),a=0;a<o.length-1;a++){var s=o[a];s in n||(n[s]={}),n=n[s]}(s=e(a=n[o=o[o.length-1]]))!=a&&null!=s&&i(n,o,{configurable:!0,writable:!0,value:s})}}function p(t,e,n){if(null==t)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return t+""}f("Array.from",function(t){return t||function(t,e,n){u(),e=e||function(t){return t};var i=[];if("function"==typeof(r=t[Symbol.iterator]))for(t=r.call(t);!(r=t.next()).done;)i.push(e.call(n,r.value));else for(var r=t.length,o=0;o<r;o++)i.push(e.call(n,t[o]));return i}}),f("String.prototype.startsWith",function(t){return t||function(t,e){var n=p(this,t,"startsWith");t+="";for(var i=n.length,r=t.length,o=Math.max(0,Math.min(0|e,n.length)),a=0;a<r&&o<i;)if(n[o++]!=t[a++])return!1;return a>=r}}),f("Object.assign",function(t){return t||function(t,e){for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t}}),f("Array.prototype.values",function(t){return t||function(){return function(t,e){u(),t instanceof String&&(t+="");var n=0,i={next:function(){if(n<t.length){var r=n++;return{value:e(r,t[r]),done:!1}}return i.next=function(){return{done:!0,value:void 0}},i.next()}};return i[Symbol.iterator]=function(){return i},i}(this,function(t,e){return e})}}),f("String.prototype.endsWith",function(t){return t||function(t,e){var n=p(this,t,"endsWith");t+="",void 0===e&&(e=n.length);for(var i=Math.max(0,Math.min(0|e,n.length)),r=t.length;0<r&&0<i;)if(n[--i]!=t[--r])return!1;return 0>=r}}),f("String.prototype.includes",function(t){return t||function(t,e){return-1!==p(this,t,"includes").indexOf(t,e||0)}}),f("Array.prototype.findIndex",function(t){return t||function(t,e){var n;t:{(n=this)instanceof String&&(n=String(n));for(var i=n.length,r=0;r<i;r++)if(t.call(e,n[r],r,n)){n=r;break t}n=-1}return n}});var d=this;function b(t,n){var i,r=void 0!==e&&e?e:window,o=t.split(".");r=r||d;o[0]in r||!r.execScript||r.execScript("var "+o[0]);for(;o.length&&(i=o.shift());)o.length||void 0===n?r=r[i]?r[i]:r[i]={}:r[i]=n}function g(t,e){function n(){}n.prototype=e.prototype,t.ng=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.nh=function(t,n,i){for(var r=Array(arguments.length-2),o=2;o<arguments.length;o++)r[o-2]=arguments[o];return e.prototype[n].apply(t,r)}}function v(t){if(Error.captureStackTrace)Error.captureStackTrace(this,v);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function m(t,e){e.unshift(t),v.call(this,function(t,e){for(var n=t.split("%s"),i="",r=Array.prototype.slice.call(arguments,1);r.length&&1<n.length;)i+=n.shift()+r.shift();return i+n.join("%s")}.apply(null,e)),e.shift()}function w(t,e){throw new m("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function y(t){var e=t.error,n=e&&(e.frameTrace||e.stack);return t=[].concat(t.messages),e&&(0<t.length&&(t=t.concat(["\n"])),t=t.concat([e.toString()]),n&&(t=t.concat(["\n"]).concat(n))),t}function x(t){var e=null;return(t=Array.from(t))[0]instanceof Error&&(e=t.shift()),{error:e,messages:t}}function E(t){this.f=t,this.Pb={}}function S(t,e,n){(t=t.Pb[e])&&t.forEach(function(t){t(n)})}function k(t,e){var n=C,i=n.Pb[t];i||(i=n.Pb[t]=[]),i.push(e)}g(v,Error),v.prototype.name="CustomError",g(m,v),m.prototype.name="AssertionError",E.prototype.debug=function(t){var e=x(arguments),n=y(e);this.f?this.f.debug?this.f.debug.apply(this.f,[].concat(c(n))):this.f.log.apply(this.f,[].concat(c(n))):console.debug.apply(console,[].concat(c(n))),S(this,1,e)},E.prototype.g=function(t){var e=x(arguments),n=y(e);this.f?this.f.info?this.f.info.apply(this.f,[].concat(c(n))):this.f.log.apply(this.f,[].concat(c(n))):console.info.apply(console,[].concat(c(n))),S(this,2,e)},E.prototype.b=function(t){var e=x(arguments),n=y(e);this.f?this.f.warn?this.f.warn.apply(this.f,[].concat(c(n))):this.f.log.apply(this.f,[].concat(c(n))):console.warn.apply(console,[].concat(c(n))),S(this,3,e)},E.prototype.error=function(t){var e=x(arguments),n=y(e);this.f?this.f.error?this.f.error.apply(this.f,[].concat(c(n))):this.f.log.apply(this.f,[].concat(c(n))):console.error.apply(console,[].concat(c(n))),S(this,4,e)};var C=new E;function T(t){var e=t.match(/^([^#]*)/);return e?e[1]:t}var A=window.location.href,_=window.location.href;function N(t,e){if(e.startsWith("data:"))return t||e;if(!e||t.match(/^\w{2,}:/))return t.toLowerCase().match("^javascript:")?"#":(t.match(/^\w{2,}:\/\/[^\/]+$/)&&(t+="/"),t);var n;if(e.match(/^\w{2,}:\/\/[^\/]+$/)&&(e+="/"),t.match(/^\/\//))return(n=e.match(/^(\w{2,}:)\/\//))?n[1]+t:t;if(t.match(/^\//))return(n=e.match(/^(\w{2,}:\/\/[^\/]+)\//))?n[1]+t:t;t.match(/^\.(\/|$)/)&&(t=t.substr(2));var i=(n=e).match(/^([^#?]*)/);if(e=i?i[1]:n,t.match(/^\#/))return e+t;if(0>(n=e.lastIndexOf("/")))return t;if(n<e.length-1&&e.lastIndexOf(".")<n){if(""==t)return e;n=(e+="/").length-1}for(i=e.substr(0,n+1)+t;!(0>=(n=i.indexOf("/../")));){var r=i.lastIndexOf("/",n-1);if(0>=r)break;i=i.substr(0,r)+i.substr(n+3)}return i.replace(/\/(\.\/)+/g,"/")}function O(t){var e;return(e=/^(https?:)\/\/github\.com\/([^\/]+\/[^\/]+)\/(blob\/|tree\/|raw\/)?(.*)$/.exec(t))?t=e[1]+"//raw.githubusercontent.com/"+e[2]+"/"+(e[3]?"":"master/")+e[4]:(e=/^(https?:)\/\/www\.aozora\.gr\.jp\/(cards\/[^\/]+\/files\/[^\/.]+\.html)$/.exec(t))?t=e[1]+"//raw.githubusercontent.com/aozorabunko/aozorabunko/master/"+e[2]:(e=/^(https?:)\/\/gist\.github\.com\/([^\/]+\/\w+)(\/|$)(raw(\/|$))?(.*)$/.exec(t))?t=e[1]+"//gist.githubusercontent.com/"+e[2]+"/raw/"+e[6]:(e=/^(https?:)\/\/(?:[^\/.]+\.)?jsbin\.com\/(?!(?:blog|help)\b)(\w+)((\/\d+)?).*$/.exec(t))&&(t=e[1]+"//output.jsbin.com/"+e[2]+e[3]+"/"),t}function I(t){return t=new RegExp("#(.*&)?"+X(t)+"=([^#&]*)"),(t=window.location.href.match(t))?t[2]:null}function P(t){return null==t?t:t.toString()}function F(){this.b=[null]}F.prototype.length=function(){return this.b.length-1};var M=" -webkit- -moz- -ms- -o- -epub-".split(" "),D={};function L(t,e){if("writing-mode"===e){var n=document.createElement("span");return"-ms-"===t?(n.style.setProperty(t+e,"tb-rl"),"tb-rl"===n.style["writing-mode"]):(n.style.setProperty(t+e,"vertical-rl"),"vertical-rl"===n.style[t+e])}return"string"==typeof document.documentElement.style[function(t,e){return t&&(e="-"+e,"moz"===(t=t.replace(/-/g,""))&&(t="Moz")),t+e.replace(/-[a-z]/g,function(t){return t.substr(1).toUpperCase()})}(t,e)]}function j(t){if((e=D[t])||null===e)return e;switch(t){case"text-combine-upright":if(L("-webkit-","text-combine")&&!L("","text-combine-upright"))return D[t]=["-webkit-text-combine"],["-webkit-text-combine"];break;case"writing-mode":if(L("-ms-","writing-mode"))return D[t]=["-ms-writing-mode"],["-ms-writing-mode"];break;case"filter":if(L("-webkit-","filter"))return D[t]=["-webkit-filter"],["-webkit-filter"];break;case"clip-path":if(L("-webkit-","clip-path"))return D[t]=["-webkit-clip-path","clip-path"];break;case"margin-inline-start":if(L("-webkit-","margin-start"))return D[t]=["-webkit-margin-start"],["-webkit-margin-start"];break;case"margin-inline-end":if(L("-webkit-","margin-end"))return D[t]=["-webkit-margin-end"],["-webkit-margin-end"];case"padding-inline-start":if(L("-webkit-","padding-start"))return D[t]=["-webkit-padding-start"],["-webkit-padding-start"];break;case"padding-inline-end":if(L("-webkit-","padding-end"))return D[t]=["-webkit-padding-end"],["-webkit-padding-end"]}for(var e,n=(e=h(M)).next();!n.done;n=e.next())if(L(n=n.value,t))return e=n+t,D[t]=[e],[e];return C.b("Property not supported by the browser: ",t),D[t]=null}function R(t,e,n){try{var i=j(e);i&&i.forEach(function(e){if("-ms-writing-mode"===e)switch(n){case"horizontal-tb":n="lr-tb";break;case"vertical-rl":n="tb-rl";break;case"vertical-lr":n="tb-lr"}else if("-webkit-text-combine"===e)switch(n){case"all":n="horizontal"}t&&t.style&&t.style.setProperty(e,n)})}catch(t){C.b(t)}}function z(t,e,n){try{var i=D[e];return t.style.getPropertyValue(i?i[0]:e)}catch(t){}return n||""}function B(t){var e=t.getAttributeNS("http://www.w3.org/XML/1998/namespace","lang");return e||"http://www.w3.org/1999/xhtml"!=t.namespaceURI||(e=t.getAttribute("lang")),e}function U(){this.b=[]}function V(t){return"\\"+t.charCodeAt(0).toString(16)+" "}function H(t){return t.replace(/[^-_a-zA-Z0-9\u0080-\uFFFF]/g,V)}function $(t){return t.replace(/[\u0000-\u001F"\\]/g,V)}function G(t){return t.replace(/[\s+&?=#\u007F-\uFFFF]+/g,encodeURIComponent)}function K(t){return!!t.match(/^[a-zA-Z\u009E\u009F\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u024F\u037B-\u037D\u0386\u0388-\u0482\u048A-\u0527]$/)}function X(t,e){return t.replace(/[^-a-zA-Z0-9_]/g,function(t){return("string"==typeof e?e:"\\u")+(65536|t.charCodeAt(0)).toString(16).substr(1)})}function W(t){if(!t)throw"Assert failed"}function Y(t,e){for(var n=0,i=t;;){if(W(n<=i),W(!n||!e(n-1)),W(i==t||e(i)),n==i)return n;var r=n+i>>1;e(r)?i=r:n=r+1}}function J(t,e){return t-e}function Z(t,e){for(var n={},i=h(t),r=i.next();!r.done;r=i.next()){var o=e(r=r.value);o&&!n[o]&&(n[o]=r)}return n}U.prototype.append=function(t){return this.b.push(t),this},U.prototype.toString=function(){var t=this.b.join("");return this.b=[t],t};var q={};function Q(t,e){for(var n={},i=h(t),r=i.next();!r.done;r=i.next()){var o=e(r=r.value);o&&(n[o]?n[o].push(r):n[o]=[r])}return n}function tt(t,e){for(var n=Array(t.length),i=0;i<t.length;i++)n[i]=e(t[i],i);return n}function et(){this.Pb={}}function nt(t,e){var n=t.Pb[e.type];if(n){e.target=t,e.currentTarget=t;for(var i=0;i<n.length;i++)n[i](e)}}et.prototype.addEventListener=function(t,e,n){n||((n=this.Pb[t])?n.push(e):this.Pb[t]=[e])},et.prototype.removeEventListener=function(t,e,n){!n&&(t=this.Pb[t])&&(0<=(e=t.indexOf(e))&&t.splice(e,1))};var it=null,rt=null,ot=null,at=null;function st(t){return 1==t.nodeType&&(t=t.getAttribute("id"))&&t.match(/^[-a-zA-Z_0-9.\u007F-\uFFFF]+$/)?t:null}function ut(t){return"^"+t}function lt(t){return t.substr(1)}function ht(t){return t?t.replace(/\^[\[\]\(\),=;^]/g,lt):t}function ct(t){for(var e={};t;){var n=t.match(/^;([^;=]+)=(([^;]|\^;)*)/);if(!n)break;var i,r=n[1];t:{i=n[2];var o=[];do{var a=i.match(/^(\^,|[^,])*/),s=ht(a[0]);if(!(i=i.substr(a[0].length+1))&&!o.length){i=s;break t}o.push(s)}while(i);i=o}e[r]=i,t=t.substr(n[0].length)}return e}function ft(){}function pt(t,e,n){this.index=t,this.id=e,this.Hb=n}function dt(t,e,n,i){this.offset=t,this.f=e,this.b=n,this.Hb=i}function bt(){this.pa=null}function gt(t,e){for(var n={node:e.documentElement,offset:0,K:!1,Hb:null,sd:null},i=0;i<t.pa.length;i++)if(!t.pa[i].h(n)){n.sd=new bt,n.sd.pa=t.pa.slice(i+1);break}return n}function vt(t,e,n){for(var i=!1,r=null,o=[],a=e.parentNode,s="",u="";e;){switch(e.nodeType){case 3:case 4:case 5:var l=e.textContent,h=l.length;i?(n+=h,s||(s=l)):(n>h&&(n=h),i=!0,s=l.substr(0,n),u=l.substr(n)),e=e.previousSibling;continue;case 8:e=e.previousSibling;continue}break}for((0<n||s||u)&&(s=t.trim(s,!1),u=t.trim(u,!0),o.push(new dt(n,s,u,r)),r=null);a&&a&&9!=a.nodeType;){for(n=i?null:st(e),i=i?1:0;e;)1==e.nodeType&&(i+=2),e=e.previousSibling;o.push(new pt(i,n,r)),r=null,e=a,a=a.parentNode,i=!1}o.reverse(),t.pa?(o.push(new ft),t.pa=o.concat(t.pa)):t.pa=o}function mt(t){return{fontFamily:t.fontFamily,lineHeight:t.lineHeight,margin:t.margin,xe:t.xe,pe:t.pe,we:t.we,Ie:t.Ie,ub:t.ub,Dc:t.Dc,af:Object.assign({},t.af),vc:t.vc?Object.assign({},t.vc):void 0}}ft.prototype.g=function(t){t.append("!")},ft.prototype.h=function(){return!1},pt.prototype.g=function(t){t.append("/"),t.append(this.index.toString()),(this.id||this.Hb)&&(t.append("["),this.id&&t.append(this.id),this.Hb&&(t.append(";s="),t.append(this.Hb)),t.append("]"))},pt.prototype.h=function(t){if(1!=t.node.nodeType)throw Error("E_CFI_NOT_ELEMENT");var e=t.node,n=e.children,i=n.length,r=Math.floor(this.index/2)-1;if(0>r||!i?(n=e.firstChild,t.node=n||e):(n=n[Math.min(r,i-1)],1&this.index&&((e=n.nextSibling)&&1!=e.nodeType?n=e:t.K=!0),t.node=n),this.id&&(t.K||this.id!=st(t.node)))throw Error("E_CFI_ID_MISMATCH");return t.Hb=this.Hb,!0},dt.prototype.h=function(t){if(0<this.offset&&!t.K){for(var e=this.offset,n=t.node;;){var i=n.nodeType;if(1==i)break;var r=n.nextSibling;if(3<=i&&5>=i){if(e<=(i=n.textContent.length))break;if(!r){e=i;break}e-=i}if(!r){e=0;break}n=r}t.node=n,t.offset=e}return t.Hb=this.Hb,!0},dt.prototype.g=function(t){t.append(":"),t.append(this.offset.toString()),(this.f||this.b||this.Hb)&&(t.append("["),(this.f||this.b)&&(this.f&&t.append(this.f.replace(/[\[\]\(\),=;^]/g,ut)),t.append(","),this.b&&t.append(this.b.replace(/[\[\]\(\),=;^]/g,ut))),this.Hb&&(t.append(";s="),t.append(this.Hb)),t.append("]"))},bt.prototype.trim=function(t,e){return t.replace(/\s+/g," ").match(e?/^[ -\uD7FF\uE000-\uFFFF]{0,8}/:/[ -\uD7FF\uE000-\uFFFF]{0,8}$/)[0].replace(/^\s/,"").replace(/\s$/,"")},bt.prototype.toString=function(){if(!this.pa)return"";var t=new U;t.append("epubcfi(");for(var e=0;e<this.pa.length;e++)this.pa[e].g(t);return t.append(")"),t.toString()};var wt={fontFamily:"serif",lineHeight:1.25,margin:8,xe:!1,pe:25,we:!1,Ie:!1,ub:!1,Dc:1,af:{vivliostyle:!0,print:!0},vc:void 0},yt={};function xt(t,e,n,i){return"matrix("+(t=Math.min((t-0)/n,(e-0)/i))+",0,0,"+t+",0,0)"}function Et(t){return'"'+$(""+t)+'"'}function St(t){return H(""+t)}function kt(t,e){return t?H(t)+"."+H(e):H(e)}var Ct=0;function Tt(t,e){if(this.parent=t,this.u="S"+Ct++,this.children=[],this.b=new pe(this,0),this.f=new pe(this,1),this.j=new pe(this,!0),this.h=new pe(this,!1),t&&t.children.push(this),this.values={},this.D={},this.B={},this.l=e,!t){var n=this.B;n.floor=Math.floor,n.ceil=Math.ceil,n.round=Math.round,n.sqrt=Math.sqrt,n.min=Math.min,n.max=Math.max,n.letterbox=xt,n["css-string"]=Et,n["css-name"]=St,n.typeof=function(t){return typeof t},At(this,"page-width",function(){return this.jc()}),At(this,"page-height",function(){return this.ic()}),At(this,"pref-font-family",function(){return this.$.fontFamily}),At(this,"pref-night-mode",function(){return this.$.Ie}),At(this,"pref-hyphenate",function(){return this.$.xe}),At(this,"pref-margin",function(){return this.$.margin}),At(this,"pref-line-height",function(){return this.$.lineHeight}),At(this,"pref-column-width",function(){return this.$.pe*this.fontSize}),At(this,"pref-horizontal",function(){return this.$.we}),At(this,"pref-spread-view",function(){return this.$.ub}),At(this,"pub-title",function(){return Et(this.yb?this.yb:"")}),At(this,"doc-title",function(){return Et(this.fb?this.fb:"")})}}function At(t,e,n){t.values[e]=new he(t,n,e)}function _t(t){switch(t.toLowerCase()){case"vw":case"vh":case"vi":case"vb":case"vmin":case"vmax":case"pvw":case"pvh":case"pvi":case"pvb":case"pvmin":case"pvmax":return!0;default:return!1}}var Nt={px:1,in:96,pt:4/3,pc:16,cm:96/2.54,mm:96/25.4,q:96/2.54/40,em:16,rem:16,ex:8,dppx:1,dpi:1/96,dpcm:2.54/96};function Ot(t){switch(t){case"q":case"rem":return!0;default:return!1}}function It(t,e,n,i){this.Cb=e,this.Lc=n,this.Y=null,this.jc=function(){return this.Y?this.Y:this.$.ub?Math.floor(e/2)-this.$.Dc:e},this.S=null,this.ic=function(){return this.S?this.S:n},this.u=i,this.Za=null,this.fontSize=function(){return this.Za?this.Za:i},this.$=wt,this.J={},this.G=this.Z=this.ca=null}function Pt(t,e){t.J[e.u]={};for(var n=0;n<e.children.length;n++)Pt(t,e.children[n])}function Ft(t,e,n){if(_t(e)){var i=t.jc()/100,r=t.ic()/100,o=null!=t.ca?t.ca/100:i,a=null!=t.Z?t.Z/100:r;switch(e){case"vw":return o;case"vh":return a;case"vi":return t.G?a:o;case"vb":return t.G?o:a;case"vmin":return o<a?o:a;case"vmax":return o>a?o:a;case"pvw":return i;case"pvh":return r;case"pvi":return t.G?r:i;case"pvb":return t.G?i:r;case"pvmin":return i<r?i:r;case"pvmax":return i>r?i:r}}return"em"==e||"rem"==e?n?t.u:t.fontSize():"ex"==e?Nt.ex*(n?t.u:t.fontSize())/Nt.em:Nt[e]}function Mt(t,e,n){do{var i=e.values[n];if(i||e.l&&(i=e.l.call(t,n,!1)))return i;e=e.parent}while(e);throw Error("Name '"+n+"' is undefined")}function Dt(t,e,n,i,r){do{var o=e.D[n];if(o||e.l&&(o=e.l.call(t,n,!0)))return o;if(o=e.B[n]){if(r)return e.b;for(n=Array(i.length),r=0;r<i.length;r++)n[r]=i[r].evaluate(t);return new pe(e,o.apply(t,n))}e=e.parent}while(e);throw Error("Function '"+n+"' is undefined")}function Lt(t){this.b=t,this.g="_"+Ct++}function jt(t,e,n,i){var r=i[t.g];return null!=r?r!==yt&&r:(i[t.g]=yt,e=t.wc(e,n,i),i[t.g]=e)}function Rt(t,e){Lt.call(this,t),this.f=e}function zt(t,e,n){Lt.call(this,t),this.f=e,this.h=n}function Bt(t,e,n){zt.call(this,t,e,n)}function Ut(t,e,n){zt.call(this,t,e,n)}function Vt(t,e,n){zt.call(this,t,e,n)}function Ht(t,e,n){zt.call(this,t,e,n)}function $t(t,e){Rt.call(this,t,e)}function Gt(t,e){Rt.call(this,t,e)}function Kt(t,e,n){zt.call(this,t,e,n)}function Xt(t,e,n){zt.call(this,t,e,n)}function Wt(t,e,n){zt.call(this,t,e,n)}function Yt(t,e,n){zt.call(this,t,e,n)}function Jt(t,e,n){zt.call(this,t,e,n)}function Zt(t,e,n){zt.call(this,t,e,n)}function qt(t,e,n){zt.call(this,t,e,n)}function Qt(t,e,n){zt.call(this,t,e,n)}function te(t,e,n){zt.call(this,t,e,n)}function ee(t,e,n){zt.call(this,t,e,n)}function ne(t,e,n){zt.call(this,t,e,n)}function ie(t,e,n){zt.call(this,t,e,n)}function re(t,e,n){zt.call(this,t,e,n)}function oe(t,e,n){zt.call(this,t,e,n)}function ae(t,e,n){zt.call(this,t,e,n)}function se(t,e,n){Lt.call(this,t),this.L=e,this.ka=n.toLowerCase()}function ue(t,e){Lt.call(this,t),this.f=e}function le(t,e,n){Lt.call(this,t),this.f=e,this.name=n}function he(t,e,n){Lt.call(this,t),this.Pc=e,this.Xc=n}function ce(t,e,n){Lt.call(this,t),this.h=e,this.f=n}function fe(t,e,n,i){Lt.call(this,t),this.f=e,this.j=n,this.h=i}function pe(t,e){Lt.call(this,t),this.f=e}function de(t,e,n){Lt.call(this,t),this.name=e,this.value=n}function be(t,e){Lt.call(this,t),this.index=e}function ge(t,e,n){return e===t.h||e===t.b||n==t.h||n==t.b?t.h:e===t.j||e===t.f?n:n===t.j||n===t.f?e:new Kt(t,e,n)}function ve(t,e,n){return e===t.b?n:n===t.b?e:new ne(t,e,n)}function me(t,e,n){return e===t.b?new Gt(t,n):n===t.b?e:new ie(t,e,n)}function we(t,e,n){return e===t.b||n===t.b?t.b:e===t.f?n:n===t.f?e:new re(t,e,n)}function ye(t,e,n){return e===t.b?t.b:n===t.f?e:new oe(t,e,n)}(n=Lt.prototype).toString=function(){var t=new U;return this.Ha(t,0),t.toString()},n.Ha=function(){throw Error("F_ABSTRACT")},n.zb=function(){throw Error("F_ABSTRACT")},n.lb=function(){return this},n.wc=function(t){return t===this},n.evaluate=function(t){var e;if(void 0!==(e=(e=t.J[this.b.u])?e[this.g]:void 0))return e;e=this.zb(t);var n=this.g,i=this.b,r=t.J[i.u];return r||(r={},t.J[i.u]=r),r[n]=e},n.gf=function(){return!1},g(Rt,Lt),(n=Rt.prototype).Ve=function(){throw Error("F_ABSTRACT")},n.bf=function(){throw Error("F_ABSTRACT")},n.zb=function(t){return t=this.f.evaluate(t),this.bf(t)},n.wc=function(t,e,n){return t===this||jt(this.f,t,e,n)},n.Ha=function(t,e){10<e&&t.append("("),t.append(this.Ve()),this.f.Ha(t,10),10<e&&t.append(")")},n.lb=function(t,e){var n=this.f.lb(t,e);return n===this.f?this:new this.constructor(this.b,n)},g(zt,Lt),(n=zt.prototype).Ed=function(){throw Error("F_ABSTRACT")},n.hb=function(){throw Error("F_ABSTRACT")},n.Gb=function(){throw Error("F_ABSTRACT")},n.zb=function(t){var e=this.f.evaluate(t);return t=this.h.evaluate(t),this.Gb(e,t)},n.wc=function(t,e,n){return t===this||jt(this.f,t,e,n)||jt(this.h,t,e,n)},n.Ha=function(t,e){var n=this.Ed();n<=e&&t.append("("),this.f.Ha(t,n),t.append(this.hb()),this.h.Ha(t,n),n<=e&&t.append(")")},n.lb=function(t,e){var n=this.f.lb(t,e),i=this.h.lb(t,e);return n===this.f&&i===this.h?this:new this.constructor(this.b,n,i)},g(Bt,zt),Bt.prototype.Ed=function(){return 1},g(Ut,zt),Ut.prototype.Ed=function(){return 2},g(Vt,zt),Vt.prototype.Ed=function(){return 3},g(Ht,zt),Ht.prototype.Ed=function(){return 4},g($t,Rt),$t.prototype.Ve=function(){return"!"},$t.prototype.bf=function(t){return!t},g(Gt,Rt),Gt.prototype.Ve=function(){return"-"},Gt.prototype.bf=function(t){return-t},g(Kt,Bt),Kt.prototype.hb=function(){return"&&"},Kt.prototype.zb=function(t){return this.f.evaluate(t)&&this.h.evaluate(t)},g(Xt,Kt),Xt.prototype.hb=function(){return" and "},g(Wt,Bt),Wt.prototype.hb=function(){return"||"},Wt.prototype.zb=function(t){return this.f.evaluate(t)||this.h.evaluate(t)},g(Yt,Wt),Yt.prototype.hb=function(){return", "},g(Jt,Ut),Jt.prototype.hb=function(){return"<"},Jt.prototype.Gb=function(t,e){return t<e},g(Zt,Ut),Zt.prototype.hb=function(){return"<="},Zt.prototype.Gb=function(t,e){return t<=e},g(qt,Ut),qt.prototype.hb=function(){return">"},qt.prototype.Gb=function(t,e){return t>e},g(Qt,Ut),Qt.prototype.hb=function(){return">="},Qt.prototype.Gb=function(t,e){return t>=e},g(te,Ut),te.prototype.hb=function(){return"=="},te.prototype.Gb=function(t,e){return t==e},g(ee,Ut),ee.prototype.hb=function(){return"!="},ee.prototype.Gb=function(t,e){return t!=e},g(ne,Vt),ne.prototype.hb=function(){return"+"},ne.prototype.Gb=function(t,e){return t+e},g(ie,Vt),ie.prototype.hb=function(){return" - "},ie.prototype.Gb=function(t,e){return t-e},g(re,Ht),re.prototype.hb=function(){return"*"},re.prototype.Gb=function(t,e){return t*e},g(oe,Ht),oe.prototype.hb=function(){return"/"},oe.prototype.Gb=function(t,e){return t/e},g(ae,Ht),ae.prototype.hb=function(){return"%"},ae.prototype.Gb=function(t,e){return t%e},g(se,Lt),se.prototype.Ha=function(t){t.append(this.L.toString()),t.append(H(this.ka))},se.prototype.zb=function(t){return this.L*Ft(t,this.ka,!1)},g(ue,Lt),ue.prototype.Ha=function(t){t.append(this.f)},ue.prototype.zb=function(t){return Mt(t,this.b,this.f).evaluate(t)},ue.prototype.wc=function(t,e,n){return t===this||jt(Mt(e,this.b,this.f),t,e,n)},g(le,Lt),le.prototype.Ha=function(t){this.f&&t.append("not "),t.append(H(this.name))},le.prototype.zb=function(t){var e=this.name;return t="all"===e||!!t.$.af[e],this.f?!t:t},le.prototype.wc=function(t,e,n){return t===this||jt(this.value,t,e,n)},le.prototype.gf=function(){return!0},g(he,Lt),he.prototype.Ha=function(t){t.append(this.Xc)},he.prototype.zb=function(t){return this.Pc.call(t)},g(ce,Lt),ce.prototype.Ha=function(t){t.append(this.h);var e=this.f;t.append("(");for(var n=0;n<e.length;n++)n&&t.append(","),e[n].Ha(t,0);t.append(")")},ce.prototype.zb=function(t){return Dt(t,this.b,this.h,this.f,!1).lb(t,this.f).evaluate(t)},ce.prototype.wc=function(t,e,n){if(t===this)return!0;for(var i=0;i<this.f.length;i++)if(jt(this.f[i],t,e,n))return!0;return jt(Dt(e,this.b,this.h,this.f,!0),t,e,n)},ce.prototype.lb=function(t,e){for(var n=this.f,i=n,r=0;r<n.length;r++){var o=n[r].lb(t,e);if(n!==i)i[r]=o;else if(o!==n[r]){i=Array(n.length);for(var a=0;a<r;a++)i[a]=n[a];i[r]=o}}return(n=i)===this.f?this:new ce(this.b,this.h,n)},g(fe,Lt),fe.prototype.Ha=function(t,e){0<e&&t.append("("),this.f.Ha(t,0),t.append("?"),this.j.Ha(t,0),t.append(":"),this.h.Ha(t,0),0<e&&t.append(")")},fe.prototype.zb=function(t){return this.f.evaluate(t)?this.j.evaluate(t):this.h.evaluate(t)},fe.prototype.wc=function(t,e,n){return t===this||jt(this.f,t,e,n)||jt(this.j,t,e,n)||jt(this.h,t,e,n)},fe.prototype.lb=function(t,e){var n=this.f.lb(t,e),i=this.j.lb(t,e),r=this.h.lb(t,e);return n===this.f&&i===this.j&&r===this.h?this:new fe(this.b,n,i,r)},g(pe,Lt),pe.prototype.Ha=function(t){switch(typeof this.f){case"number":case"boolean":t.append(this.f.toString());break;case"string":t.append('"'),t.append($(this.f)),t.append('"');break;default:throw Error("F_UNEXPECTED_STATE")}},pe.prototype.zb=function(){return this.f},g(de,Lt),de.prototype.Ha=function(t){t.append("("),t.append($(this.name.name)),t.append(":"),this.value.Ha(t,0),t.append(")")},de.prototype.zb=function(t){return function(t,e,n){var i="",r=e.match(/^(min|max)-(.*)$/);r&&(i=r[1],e=r[2]);var o=r=null;switch(e){case"width":case"height":case"device-width":case"device-height":case"color":n&&(r=n.evaluate(t))}switch(e){case"width":o=t.jc();break;case"height":o=t.ic();break;case"device-width":o=window.screen.availWidth;break;case"device-height":o=window.screen.availHeight;break;case"color":o=window.screen.pixelDepth}if(null!=o&&null!=r)switch(i){case"min":return o>=r;case"max":return o<=r;default:return o==r}else if(null!=o&&!n)return!!o;return!1}(t,this.name.name,this.value)},de.prototype.wc=function(t,e,n){return t===this||jt(this.value,t,e,n)},de.prototype.lb=function(t,e){var n=this.value.lb(t,e);return n===this.value?this:new de(this.b,this.name,n)},g(be,Lt),be.prototype.Ha=function(t){t.append("$"),t.append(this.index.toString())},be.prototype.lb=function(t,e){var n=e[this.index];if(!n)throw Error("Parameter missing: "+this.index);return n};var xe={};function Ee(){}function Se(){}function ke(){}function Ce(){if(Te)throw Error("E_INVALID_CALL")}(n=Ee.prototype).sc=function(t){for(var e=0;e<t.length;e++)t[e].fa(this)},n.Se=function(){throw Error("E_CSS_EMPTY_NOT_ALLOWED")},n.Te=function(){throw Error("E_CSS_SLASH_NOT_ALLOWED")},n.Bd=function(){throw Error("E_CSS_STR_NOT_ALLOWED")},n.rc=function(){throw Error("E_CSS_IDENT_NOT_ALLOWED")},n.ad=function(){throw Error("E_CSS_NUMERIC_NOT_ALLOWED")},n.$c=function(){throw Error("E_CSS_NUM_NOT_ALLOWED")},n.Zc=function(t){return this.$c(t)},n.he=function(){throw Error("E_CSS_COLOR_NOT_ALLOWED")},n.bd=function(){throw Error("E_CSS_URL_NOT_ALLOWED")},n.Ub=function(){throw Error("E_CSS_LIST_NOT_ALLOWED")},n.qc=function(){throw Error("E_CSS_COMMA_NOT_ALLOWED")},n.Xb=function(){throw Error("E_CSS_FUNC_NOT_ALLOWED")},n.Yc=function(){throw Error("E_CSS_EXPR_NOT_ALLOWED")},g(Se,Ee),(n=Se.prototype).sc=function(t){for(var e=null,n=0;n<t.length;n++){var i=t[n],r=i.fa(this);if(e)e[n]=r;else if(i!==r){for(e=Array(t.length),i=0;i<n;i++)e[i]=t[i];e[n]=r}}return e||t},n.Bd=function(t){return t},n.rc=function(t){return t},n.Te=function(t){return t},n.ad=function(t){return t},n.$c=function(t){return t},n.Zc=function(t){return t},n.he=function(t){return t},n.bd=function(t){return t},n.Ub=function(t){var e=this.sc(t.values);return e===t.values?t:new Re(e)},n.qc=function(t){var e=this.sc(t.values);return e===t.values?t:new ze(e)},n.Xb=function(t){var e=this.sc(t.values);return e===t.values?t:new Be(t.name,e)},n.Yc=function(t){return t},(n=ke.prototype).toString=function(){var t=new U;return this.$a(t,!0),t.toString()},n.stringValue=function(){var t=new U;return this.$a(t,!1),t.toString()},n.Aa=function(){throw Error("F_ABSTRACT")},n.$a=function(t){t.append("[error]")},n.ef=function(){return!1},n.Ac=function(){return!1},n.hf=function(){return!1},n.Vf=function(){return!1},n.Ud=function(){return!1},g(Ce,ke),Ce.prototype.Aa=function(t){return new pe(t,"")},Ce.prototype.$a=function(){},Ce.prototype.fa=function(t){return t.Se(this)};var Te=new Ce;function Ae(){if(_e)throw Error("E_INVALID_CALL")}g(Ae,ke),Ae.prototype.Aa=function(t){return new pe(t,"/")},Ae.prototype.$a=function(t){t.append("/")},Ae.prototype.fa=function(t){return t.Te(this)};var _e=new Ae;function Ne(t){this.Xc=t}function Oe(t){if(this.name=t,xe[t])throw Error("E_INVALID_CALL");xe[t]=this}function Ie(t){var e=xe[t];return e||(e=new Oe(t)),e}function Pe(t,e){this.L=t,this.ka=e.toLowerCase()}function Fe(t){this.L=t}function Me(t){this.L=t}function De(t){this.b=t}function Le(t){this.url=t}function je(t,e,n,i){var r=e.length;e[0].$a(t,i);for(var o=1;o<r;o++)t.append(n),e[o].$a(t,i)}function Re(t){this.values=t}function ze(t){this.values=t}function Be(t,e){this.name=t,this.values=e}function Ue(t){this.Mc=t}function Ve(t,e){if(t){if(t.Ac())return Ft(e,t.ka,!1)*t.L;if(t.hf())return t.L}return 0}g(Ne,ke),Ne.prototype.Aa=function(t){return new pe(t,this.Xc)},Ne.prototype.$a=function(t,e){e?(t.append('"'),t.append($(this.Xc)),t.append('"')):t.append(this.Xc)},Ne.prototype.fa=function(t){return t.Bd(this)},g(Oe,ke),Oe.prototype.Aa=function(t){return new pe(t,this.name)},Oe.prototype.$a=function(t,e){e?t.append(H(this.name)):t.append(this.name)},Oe.prototype.fa=function(t){return t.rc(this)},Oe.prototype.Vf=function(){return!0},g(Pe,ke),Pe.prototype.Aa=function(t,e){return this.L?e&&"%"==this.ka?100==this.L?e:new re(t,e,new pe(t,this.L/100)):new se(t,this.L,this.ka):t.b},Pe.prototype.$a=function(t){t.append(this.L.toString()),t.append(this.ka)},Pe.prototype.fa=function(t){return t.ad(this)},Pe.prototype.Ac=function(){return!0},g(Fe,ke),Fe.prototype.Aa=function(t){return this.L?1==this.L?t.f:new pe(t,this.L):t.b},Fe.prototype.$a=function(t){t.append(this.L.toString())},Fe.prototype.fa=function(t){return t.$c(this)},Fe.prototype.hf=function(){return!0},g(Me,Fe),Me.prototype.fa=function(t){return t.Zc(this)},g(De,ke),De.prototype.$a=function(t){t.append("#");var e=this.b.toString(16);t.append("000000".substr(e.length)),t.append(e)},De.prototype.fa=function(t){return t.he(this)},g(Le,ke),Le.prototype.$a=function(t){t.append('url("'),t.append($(this.url)),t.append('")')},Le.prototype.fa=function(t){return t.bd(this)},g(Re,ke),Re.prototype.$a=function(t,e){je(t,this.values," ",e)},Re.prototype.fa=function(t){return t.Ub(this)},Re.prototype.Ud=function(){return!0},g(ze,ke),ze.prototype.$a=function(t,e){je(t,this.values,",",e)},ze.prototype.fa=function(t){return t.qc(this)},g(Be,ke),Be.prototype.$a=function(t,e){t.append(H(this.name)),t.append("("),je(t,this.values,",",e),t.append(")")},Be.prototype.fa=function(t){return t.Xb(this)},g(Ue,ke),Ue.prototype.Aa=function(){return this.Mc},Ue.prototype.$a=function(t){t.append("-epubx-expr("),this.Mc.Ha(t,0),t.append(")")},Ue.prototype.fa=function(t){return t.Yc(this)},Ue.prototype.ef=function(){return!0};var He=Ie("absolute"),$e=Ie("all"),Ge=Ie("always"),Ke=Ie("auto");Ie("avoid");var Xe=Ie("balance"),We=Ie("balance-all"),Ye=Ie("block"),Je=Ie("block-end"),Ze=Ie("block-start"),qe=Ie("both"),Qe=Ie("bottom"),tn=Ie("border-box"),en=Ie("break-all"),nn=Ie("break-word"),rn=Ie("crop"),on=Ie("cross");Ie("column");var an=Ie("exclusive"),sn=Ie("false"),un=Ie("fixed"),ln=Ie("flex"),hn=Ie("footnote"),cn=Ie("footer"),fn=Ie("header");Ie("hidden");var pn=Ie("horizontal-tb"),dn=Ie("inherit"),bn=Ie("inline"),gn=Ie("inline-block"),vn=Ie("inline-end"),mn=Ie("inline-start"),wn=Ie("landscape"),yn=Ie("left"),xn=Ie("line"),En=Ie("list-item"),Sn=Ie("ltr");Ie("manual");var kn=Ie("none"),Cn=Ie("normal"),Tn=Ie("oeb-page-foot"),An=Ie("oeb-page-head"),_n=Ie("page"),Nn=Ie("relative"),On=Ie("right"),In=Ie("same"),Pn=Ie("scale"),Fn=Ie("snap-block");Ie("spread");var Mn=Ie("static"),Dn=Ie("rtl"),Ln=Ie("table"),jn=Ie("table-caption"),Rn=Ie("table-cell"),zn=Ie("table-footer-group"),Bn=Ie("table-header-group");Ie("table-row");var Un=Ie("top"),Vn=Ie("transparent"),Hn=Ie("vertical-lr"),$n=Ie("vertical-rl"),Gn=Ie("visible"),Kn=Ie("true"),Xn=new Pe(100,"%"),Wn=new Pe(100,"pvw"),Yn=new Pe(100,"pvh"),Jn=new Pe(0,"px"),Zn={"font-size":1,color:2};function qn(t,e){return(Zn[t]||Number.MAX_VALUE)-(Zn[e]||Number.MAX_VALUE)}var Qn={SIMPLE_PROPERTY:"SIMPLE_PROPERTY",PREPROCESS_SINGLE_DOCUMENT:"PREPROCESS_SINGLE_DOCUMENT",PREPROCESS_TEXT_CONTENT:"PREPROCESS_TEXT_CONTENT",PREPROCESS_ELEMENT_STYLE:"PREPROCESS_ELEMENT_STYLE",POLYFILLED_INHERITED_PROPS:"POLYFILLED_INHERITED_PROPS",CONFIGURATION:"CONFIGURATION",RESOLVE_TEXT_NODE_BREAKER:"RESOLVE_TEXT_NODE_BREAKER",RESOLVE_FORMATTING_CONTEXT:"RESOLVE_FORMATTING_CONTEXT",RESOLVE_LAYOUT_PROCESSOR:"RESOLVE_LAYOUT_PROCESSOR",POST_LAYOUT_BLOCK:"POST_LAYOUT_BLOCK"},ti={};function ei(t,e){if(Qn[t]){var n=ti[t];n||(n=ti[t]=[]),n.push(e)}else C.b(Error("Skipping unknown plugin hook '"+t+"'."))}function ni(t){return ti[t]||[]}b("vivliostyle.plugin.registerHook",ei),b("vivliostyle.plugin.removeHook",function(t,e){if(Qn[t]){var n=ti[t];if(n){var i=n.indexOf(e);0<=i&&n.splice(i,1)}}else C.b(Error("Ignoring unknown plugin hook '"+t+"'."))});var ii=null,ri=null;function oi(t){if(!ii)throw Error("E_TASK_NO_CONTEXT");ii.name||(ii.name=t);var e=ii;return t=new wi(e,e.top,t),e.top=t,t.b=ui,t}function ai(t){return new vi(t)}function si(t,e,n){(t=oi(t)).j=n;try{e(t)}catch(e){gi(t.f,e,t)}return t.result()}var ui=1;function li(){}function hi(t){this.g=t,this.h=1,this.slice=25,this.l=0,this.f=new F,this.b=this.u=null,this.j=!1,this.order=0,ri||(ri=this)}function ci(t){if(!t.j){var e=t.f.b[1].b,n=t.g.currentTime();if(null!=t.b){if(n+t.h>t.u)return;clearTimeout(t.b)}(e-=n)<=t.h&&(e=t.h),t.u=n+e,t.b=function(t,e){return setTimeout(t,e)}(function(){t.b=null,null!=t.b&&(clearTimeout(t.b),t.b=null),t.j=!0;try{var e=t.g.currentTime();for(t.l=e+t.slice;t.f.length();){var n=t.f.b[1];if(n.b>e)break;var i=t.f,r=i.b.pop(),o=i.b.length;if(1<o){for(var a=1;;){var s=2*a;if(s>=o)break;if(0<di(i.b[s],r))s+1<o&&0<di(i.b[s+1],i.b[s])&&s++;else{if(!(s+1<o&&0<di(i.b[s+1],r)))break;s++}i.b[a]=i.b[s],a=s}i.b[a]=r}if(!n.g){var u=n.f;n.f=null,u&&u.b==n&&(u.b=null,a=ii,ii=u,xi(u.top,n.result),ii=a)}if((e=t.g.currentTime())>=t.l)break}}catch(t){C.error(t)}t.j=!1,t.f.length()&&ci(t)},e)}}function fi(t,e,n){var i=new bi(t,n||"");return i.top=new wi(i,null,"bootstrap"),i.top.b=ui,i.top.then(function(){function t(){i.j=!1;for(var t=h(i.h),e=t.next();!e.done;e=t.next()){e=e.value;try{e()}catch(t){C.error(t)}}}try{e().then(function(e){i.result=e,t()})}catch(e){gi(i,e),t()}}),n=ii,ii=i,t.tb(Ti(i.top,"bootstrap")),ii=n,i}function pi(t){this.f=t,this.order=this.b=0,this.result=null,this.g=!1}function di(t,e){return e.b-t.b||e.order-t.order}function bi(t,e){this.f=t,this.name=e,this.h=[],this.g=null,this.j=!0,this.b=this.top=this.l=this.result=null}function gi(t,e,n){if(!(i=e.frameTrace)){for(var i=e.stack?e.stack+"\n\t---- async ---\n":"",r=t.top;r;r=r.parent)i+="\t",i+=r.name,i+="\n";e.frameTrace=i}if(n){for(i=t.top;i&&i!=n;)i=i.parent;i==n&&(t.top=i)}for(t.g=e;t.top&&!t.top.j;)t.top=t.top.parent;t.top?(e=t.g,t.g=null,t.top.j(t.top,e)):t.g&&C.error(t.g,"Unhandled exception in task",t.name)}function vi(t){this.value=t}function mi(t){this.b=t}function wi(t,e,n){this.f=t,this.parent=e,this.name=n,this.g=null,this.b=0,this.j=this.h=null}function yi(t){if(!ii)throw Error("F_TASK_NO_CONTEXT");if(t!==ii.top)throw Error("F_TASK_NOT_TOP_FRAME")}function xi(t,e){yi(t),ii.g||(t.g=e),t.b=2;var n=t.parent;if(ii.top=n,t.h){try{t.h(e)}catch(e){gi(t.f,e,n)}t.b=3}}function Ei(){var t=oi("Frame.timeSlice"),e=t.f.f;return e.g.currentTime()>=e.l?(C.debug("-- time slice --"),Ti(t).tb(!0)):xi(t,!0),t.result()}function Si(t){var e=oi("Frame.sleep");return Ti(e).tb(!0,t),e.result()}function ki(t){var e=oi("Frame.loop");return function n(i){try{for(;i;){var r=t();if(r.Xa())return void r.then(n);r.then(function(t){i=t})}xi(e,!0)}catch(t){gi(e.f,t,e)}}(!0),e.result()}function Ci(t){var e=ii;if(!e)throw Error("E_TASK_NO_CONTEXT");return ki(function(){var n;do{n=new Ai(e,e.top),e.top=n,n.b=ui,t(n),n=n.result()}while(!n.Xa()&&n.get());return n})}function Ti(t,e){if(yi(t),t.f.b)throw Error("E_TASK_ALREADY_SUSPENDED");var n=new pi(t.f);return t.f.b=n,ii=null,t.f.l=e||null,n}function Ai(t,e){wi.call(this,t,e,"loop")}function _i(t){xi(t,!0)}function Ni(t){xi(t,!1)}function Oi(t,e){this.fetch=t,this.name=e,this.f=!1,this.b=this.h=null,this.g=[]}function Ii(t){if(!t.length)return ai(!0);if(1==t.length)return t[0].get().Hc(!0);var e=oi("waitForFetches"),n=0;return ki(function(){for(;n<t.length;){var e=t[n++];if(!e.f)return e.get().Hc(!0)}return ai(!1)}).then(function(){xi(e,!0)}),e.result()}function Pi(t,e){var n=null,i=null;"img"==t.localName&&(n=t.getAttribute("width"),i=t.getAttribute("height"));var r=new Oi(function(){function r(e){s||(s=!0,"img"==t.localName&&(n||t.removeAttribute("width"),i||t.removeAttribute("height")),a.tb(e?e.type:"timeout"))}var o=oi("loadImage"),a=Ti(o,t),s=!1;return t.addEventListener("load",r,!1),t.addEventListener("error",r,!1),t.addEventListener("abort",r,!1),"http://www.w3.org/2000/svg"==t.namespaceURI?(t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e),setTimeout(r,300)):t.src=e,o.result()},"loadElement "+e);return r.start(),r}function Fi(t){return(t=t.substr(1)).match(/^[^0-9a-fA-F\n\r]$/)?t:(t=parseInt(t,16),isNaN(t)?"":65535>=t?String.fromCharCode(t):1114111>=t?String.fromCharCode(55296|t>>10&1023,56320|1023&t):"")}function Mi(t){return t.replace(/\\([0-9a-fA-F]{0,6}(\r\n|[ \n\r\t\f])?|[^0-9a-fA-F\n\r])/g,Fi)}function Di(){this.type=0,this.b=!1,this.L=0,this.text="",this.position=0}function Li(t,e){var n,i=Array(128);for(n=0;128>n;n++)i[n]=t;for(i.NaN=35==t?35:72,n=0;n<e.length;n+=2)i[e[n]]=e[n+1];return i}li.prototype.currentTime=function(){return(new Date).valueOf()},hi.prototype.tb=function(t,e){var n=this.g.currentTime();t.order=this.order++,t.b=n+(e||0);t:{for(var i=(n=this.f).b.length;1<i;){var r=Math.floor(i/2),o=n.b[r];if(0<di(o,t)){n.b[i]=t;break t}n.b[i]=o,i=r}n.b[1]=t}ci(this)},pi.prototype.tb=function(t,e){this.result=t,this.f.f.tb(this,e)},bi.prototype.join=function(){var t=oi("Task.join");if(this.j){var e=Ti(t,this),n=this;!function(t,e){t.h.push(e)}(this,function(){e.tb(n.result)})}else xi(t,this.result);return t.result()},(n=vi.prototype).then=function(t){t(this.value)},n.ea=function(t){return t(this.value)},n.Hc=function(t){return new vi(t)},n.Ga=function(t){xi(t,this.value)},n.Xa=function(){return!1},n.get=function(){return this.value},(n=mi.prototype).then=function(t){this.b.then(t)},n.ea=function(t){if(this.Xa()){var e=new wi(this.b.f,this.b.parent,"AsyncResult.thenAsync");return e.b=ui,this.b.parent=e,this.b.then(function(n){t(n).then(function(t){xi(e,t)})}),e.result()}return t(this.b.g)},n.Hc=function(t){return this.Xa()?this.ea(function(){return new vi(t)}):new vi(t)},n.Ga=function(t){this.Xa()?this.then(function(e){xi(t,e)}):xi(t,this.b.g)},n.Xa=function(){return this.b.b==ui},n.get=function(){if(this.Xa())throw Error("Result is pending");return this.b.g},wi.prototype.result=function(){return new mi(this)},wi.prototype.then=function(t){switch(this.b){case ui:if(this.h)throw Error("F_TASK_FRAME_ALREADY_HAS_CALLBACK");this.h=t;break;case 2:var e=this.f,n=this.parent;try{t(this.g),this.b=3}catch(t){this.b=3,gi(e,t,n)}break;case 3:throw Error("F_TASK_DEAD_FRAME");default:throw Error("F_TASK_UNEXPECTED_FRAME_STATE "+this.b)}},g(Ai,wi),Oi.prototype.start=function(){if(!this.b){var t=this;this.b=fi(ii.f,function(){var e=oi("Fetcher.run");return t.fetch().then(function(n){var i=t.g;if(t.f=!0,t.h=n,t.b=null,t.g=[],i)for(var r=0;r<i.length;r++)try{i[r](n)}catch(t){C.error(t,"Error:")}xi(e,n)}),e.result()},this.name)}},Oi.prototype.get=function(){return this.f?ai(this.h):(this.start(),this.b.join())};var ji=[72,72,72,72,72,72,72,72,72,1,1,72,1,1,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,1,4,34,6,7,8,9,33,10,11,12,13,14,15,16,17,2,2,2,2,2,2,2,2,2,2,18,19,20,21,22,23,24,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,25,29,26,30,3,72,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,27,31,28,32,72];ji.NaN=80;var Ri=[43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,52,43,43,43,43,39,43,43,39,39,39,39,39,39,39,39,39,39,43,43,43,43,43,43,43,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,43,44,43,43,39,43,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,43,43,43,43,43];Ri.NaN=43;var zi=[72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,78,59,72,59,59,59,59,59,59,59,59,59,59,72,72,72,72,72,72,72,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,72,61,72,72,78,72,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,72,72,72,72,72];Ri.NaN=43;var Bi=[35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,57,59,35,58,58,58,58,58,58,58,58,58,58,35,35,35,35,35,35,35,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,35,61,35,35,60,35,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,35,35,35,35,35];Bi.NaN=35;var Ui=[45,45,45,45,45,45,45,45,45,73,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,73,45,45,45,45,45,45,45,53,45,45,45,45,45,45,45,39,39,39,39,39,39,39,39,39,39,45,45,45,45,45,45,45,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,45,44,45,45,39,45,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,45,45,45,45,45];Ui.NaN=45;var Vi=[37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,41,37,37,37,37,37,37,37,37,42,37,39,39,39,39,39,39,39,39,39,39,37,37,37,37,37,37,37,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,37,37,37,37,40,37,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,37,37,37,37,37];Vi.NaN=37;var Hi=[38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,41,38,38,38,38,38,38,38,38,38,38,39,39,39,39,39,39,39,39,39,39,38,38,38,38,38,38,38,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,38,38,38,38,40,38,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,38,38,38,38,38];Hi.NaN=38;var $i=Li(35,[61,36]),Gi=Li(35,[58,77]),Ki=Li(35,[61,36,124,50]),Xi=Li(35,[38,51]),Wi=Li(35,[42,54]),Yi=Li(39,[42,55]),Ji=Li(54,[42,55,47,56]),Zi=Li(62,[62,56]),qi=Li(35,[61,36,33,70]),Qi=Li(62,[45,71]),tr=Li(63,[45,56]),er=Li(76,[9,72,10,72,13,72,32,72]),nr=Li(39,[39,46,10,72,13,72,92,48]),ir=Li(39,[34,46,10,72,13,72,92,49]),rr=Li(39,[39,47,10,74,13,74,92,48]),or=Li(39,[34,47,10,74,13,74,92,49]),ar=Li(64,[9,39,32,39,34,66,39,65,41,72,10,39,13,39]),sr=Li(39,[41,67,9,79,10,79,13,79,32,79,92,75,40,72,91,72,93,72,123,72,125,72,NaN,67]),ur=Li(39,[39,68,10,74,13,74,92,75,NaN,67]),lr=Li(39,[34,68,10,74,13,74,92,75,NaN,67]),hr=Li(72,[9,39,10,39,13,39,32,39,41,69]);function cr(t,e){this.l=e,this.g=15,this.u=t,this.j=Array(this.g+1),this.b=-1;for(var n=this.position=this.f=this.h=0;n<=this.g;n++)this.j[n]=new Di}function fr(t){return t.h==t.f&&gr(t),t.j[t.f]}function pr(t,e){return(t.h-t.f&t.g)<=e&&gr(t),t.j[t.f+e&t.g]}function dr(t){t.f=t.f+1&t.g}function br(t){if(0>t.b)throw Error("F_CSSTOK_BAD_CALL reset");t.f=t.b,t.b=-1}function gr(t){var e=t.h,n=0<=t.b?t.b:t.f,i=t.g;if(e>=n?n+=i:n--,n==e){if(0>t.b)throw Error("F_CSSTOK_INTERNAL");e=2*(t.g+1)-1,n=Array(e+1),i=t.b;for(var r=0;i!=t.h;)n[r]=t.j[i],i==t.f&&(t.f=r),i=i+1&t.g,r++;for(t.b=0,t.h=r,t.g=e,t.j=n;r<=e;)n[r++]=new Di;e=t.h,n=i=t.g}r=ji;for(var o=t.u,a=t.position,s=t.j,u=0,l=0,h="",c=0,f=!1,p=s[e],d=-9;;){var b=o.charCodeAt(a);switch(r[b]||r[65]){case 72:u=51,h=isNaN(b)?"E_CSS_UNEXPECTED_EOF":"E_CSS_UNEXPECTED_CHAR",a++;break;case 1:a++,f=!0;continue;case 2:l=a++,r=Vi;continue;case 3:u=1,l=a++,r=Ri;continue;case 4:l=a++,u=31,r=$i;continue;case 33:u=2,l=++a,r=nr;continue;case 34:u=2,l=++a,r=ir;continue;case 6:l=++a,u=7,r=Ri;continue;case 7:l=a++,u=32,r=$i;continue;case 8:l=a++,u=21;break;case 9:l=a++,u=32,r=Xi;continue;case 10:l=a++,u=10;break;case 11:l=a++,u=11;break;case 12:l=a++,u=36,r=$i;continue;case 13:l=a++,u=23;break;case 14:l=a++,u=16;break;case 15:u=24,l=a++,r=Bi;continue;case 16:l=a++,r=zi;continue;case 78:l=a++,u=9,r=Ri;continue;case 17:l=a++,u=19,r=Wi;continue;case 18:l=a++,u=18,r=Gi;continue;case 77:a++,u=50;break;case 19:l=a++,u=17;break;case 20:l=a++,u=38,r=qi;continue;case 21:l=a++,u=39,r=$i;continue;case 22:l=a++,u=37,r=$i;continue;case 23:l=a++,u=22;break;case 24:l=++a,u=20,r=Ri;continue;case 25:l=a++,u=14;break;case 26:l=a++,u=15;break;case 27:l=a++,u=12;break;case 28:l=a++,u=13;break;case 29:d=l=a++,u=1,r=er;continue;case 30:l=a++,u=33,r=$i;continue;case 31:l=a++,u=34,r=Ki;continue;case 32:l=a++,u=35,r=$i;continue;case 35:break;case 36:a++,u=u+41-31;break;case 37:u=5,c=parseInt(o.substring(l,a),10);break;case 38:u=4,c=parseFloat(o.substring(l,a));break;case 39:a++;continue;case 40:u=3,c=parseFloat(o.substring(l,a)),l=a++,r=Ri;continue;case 41:u=3,c=parseFloat(o.substring(l,a)),h="%",l=a++;break;case 42:a++,r=Hi;continue;case 43:h=o.substring(l,a);break;case 44:d=a++,r=er;continue;case 45:h=Mi(o.substring(l,a));break;case 46:h=o.substring(l,a),a++;break;case 47:h=Mi(o.substring(l,a)),a++;break;case 48:d=a,a+=2,r=rr;continue;case 49:d=a,a+=2,r=or;continue;case 50:a++,u=25;break;case 51:a++,u=26;break;case 52:if(h=o.substring(l,a),1==u){if(a++,"url"==h.toLowerCase()){r=ar;continue}u=6}break;case 53:if(h=Mi(o.substring(l,a)),1==u){if(a++,"url"==h.toLowerCase()){r=ar;continue}u=6}break;case 54:r=Yi,a++;continue;case 55:r=Ji,a++;continue;case 56:r=ji,a++;continue;case 57:r=Zi,a++;continue;case 58:u=5,r=Vi,a++;continue;case 59:u=4,r=Hi,a++;continue;case 60:u=1,r=Ri,a++;continue;case 61:u=1,r=er,d=a++;continue;case 62:a--;break;case 63:a-=2;break;case 64:l=a++,r=sr;continue;case 65:l=++a,r=ur;continue;case 66:l=++a,r=lr;continue;case 67:u=8,h=Mi(o.substring(l,a)),a++;break;case 69:a++;break;case 70:r=Qi,a++;continue;case 71:r=tr,a++;continue;case 79:if(8>a-d&&o.substring(d+1,a+1).match(/^[0-9a-fA-F]{0,6}(\r\n|[\n\r])|[ \t]$/)){a++;continue}case 68:u=8,h=Mi(o.substring(l,a)),a++,r=hr;continue;case 74:if(9>++a-d&&o.substring(d+1,a).match(/^[0-9a-fA-F]{0,6}(\r\n|[\n\r])$/))continue;u=51,h="E_CSS_UNEXPECTED_NEWLINE";break;case 73:if(9>a-d&&o.substring(d+1,a+1).match(/^[0-9a-fA-F]{0,6}[ \t]$/)){a++;continue}h=Mi(o.substring(l,a));break;case 75:d=a++;continue;case 76:a++,r=Ui;continue;default:r!==ji?(u=51,h="E_CSS_UNEXPECTED_STATE"):(l=a,u=0)}if(p.type=u,p.b=f,p.L=c,p.text=h,p.position=l,++e>=n)break;r=ji,f=!1,p=s[e&i]}t.position=a,t.h=e&i}function vr(t,e,n,i,r){var o=oi("ajax"),a=new XMLHttpRequest,s=Ti(o,a),u={status:0,statusText:"",url:t,contentType:null,responseText:null,responseXML:null,vd:null};a.open(n||"GET",t,!0),e&&(a.responseType=e),a.onreadystatechange=function(){if(4===a.readyState){if(u.status=a.status,u.statusText=a.statusText||404==a.status&&"Not Found"||"",200==u.status||!u.status)if(e&&"document"!==e||!a.responseXML||"parsererror"==a.responseXML.documentElement.localName)if((!e||"document"===e)&&a.response instanceof HTMLDocument)u.responseXML=a.response,u.contentType=a.response.contentType;else{var n=a.response;e&&"text"!==e||"string"!=typeof n?n?u.vd="string"==typeof n?mr([n]):n:C.b("Unexpected empty success response for",t):u.responseText=n,(n=a.getResponseHeader("Content-Type"))&&(u.contentType=n.replace(/(.*);.*$/,"$1"))}else u.responseXML=a.responseXML,u.contentType=a.responseXML.contentType;s.tb(u)}};try{i?(a.setRequestHeader("Content-Type",r||"text/plain; charset=UTF-8"),a.send(i)):(/^file:|^https?:\/\/[^\/]+\.githubusercontent\.com/.test(t)?/\/aozorabunko\/[^\/]+\/cards\/[^\/]+\/files\/[^\/.]+\.html$/.test(t)?a.overrideMimeType("text/html; charset=Shift_JIS"):/\.(html|htm)$/.test(t)?a.overrideMimeType("text/html; charset=UTF-8"):/\.(xhtml|xht|xml|opf)$/.test(t)?a.overrideMimeType("application/xml; charset=UTF-8"):/\.(txt|css)$/.test(t)?a.overrideMimeType("text/plain; charset=UTF-8"):a.overrideMimeType("text/html; charset=UTF-8"):/^data:,(<|%3C|%3c)/.test(t)?a.overrideMimeType("text/html; charset=UTF-8"):/^data:,/.test(t)&&a.overrideMimeType("text/plain; charset=UTF-8"),a.send(null))}catch(e){C.b(e,"Error fetching "+t),s.tb(u)}return o.result()}function mr(t){if(e=window.WebKitBlobBuilder||window.MSBlobBuilder){for(var e=new e,n=0;n<t.length;n++)e.append(t[n]);return e.getBlob("application/octet-stream")}return new Blob(t,{type:"application/octet-stream"})}function wr(t,e){this.ca=t,this.type=e,this.f={},this.j={}}function yr(t){return ai((t=t.responseText)?JSON.parse(t):null)}function xr(t){var e=parseInt(t,16);if(isNaN(e))throw Error("E_CSS_COLOR");if(6==t.length)return new De(e);if(3==t.length)return new De(15&e|(15&e)<<4|(240&e)<<4|(240&e)<<8|(3840&e)<<8|(3840&e)<<12);throw Error("E_CSS_COLOR")}function Er(t){this.f=t,this.qb="Author"}function Sr(t){switch(t.qb){case"UA":return 0;case"User":return 100663296;default:return 83886080}}function kr(t){switch(t.qb){case"UA":return 0;case"User":return 16777216;default:return 33554432}}function Cr(){Er.call(this,null),this.g=[],this.b=null}function Tr(t,e){t.g.push(t.b),t.b=e}function Ar(t,e,n){Er.call(this,t),this.N=n,this.J=0,(this.oa=e)&&(this.qb=e.qb)}function _r(t,e,n){Ar.call(this,t,e,n)}function Nr(t,e){t.error(e,t.jd())}function Or(t,e){Nr(t,e),Tr(t.oa,new Ar(t.f,t.oa,!1))}cr.prototype.error=function(t,e,n){this.l&&this.l.error(n,e)},wr.prototype.load=function(t,e,n){t=T(t);var i=this.f[t];return void 0!==i?ai(i):this.fetch(t,e,n).get()},wr.prototype.fetch=function(t,e,n){if(t=T(t),this.f[t])return null;if(!(r=this.j[t])){var i=this,r=new Oi(function(){return function(t,e,n,i){var r=oi("fetch"),o=e.endsWith("?viv-toc-box");return o&&(e=e.replace("?viv-toc-box","")),vr(e,t.type).then(function(a){if(400<=a.status&&n)throw Error((i||"Failed to fetch required resource: "+e)+" ("+a.status+(a.statusText?" "+a.statusText:"")+")");o&&(e+="?viv-toc-box",a.url+="?viv-toc-box"),t.ca(a,t).then(function(n){delete t.j[e],t.f[e]=n,xi(r,n)})}),r.result()}(i,t,e,n)},"Fetch "+t);i.j[t]=r,r.start()}return r},wr.prototype.get=function(t){return this.f[T(t)]},(n=Er.prototype).jd=function(){return null},n.ma=function(){return this.f},n.error=function(){},n.Wc=function(t){this.qb=t},n.Wb=function(){},n.oe=function(){},n.qd=function(){},n.rd=function(){},n.ze=function(){},n.Hd=function(){},n.cc=function(){},n.ne=function(){},n.me=function(){},n.te=function(){},n.Sc=function(){},n.Tb=function(){},n.ae=function(){},n.wd=function(){},n.ee=function(){},n.Zd=function(){},n.de=function(){},n.Vc=function(){},n.Qe=function(){},n.Fc=function(){},n.$d=function(){},n.ce=function(){},n.be=function(){},n.zd=function(){},n.yd=function(){},n.La=function(){},n.Qb=function(){},n.dc=function(){},n.xd=function(){},n.Nd=function(){},g(Cr,Er),(n=Cr.prototype).jd=function(){return null},n.ma=function(){return this.b.ma()},n.error=function(t,e){this.b.error(t,e)},n.Wc=function(t){Er.prototype.Wc.call(this,t),0<this.g.length&&(this.b=this.g[0],this.g=[]),this.b.Wc(t)},n.Wb=function(t,e){this.b.Wb(t,e)},n.oe=function(t){this.b.oe(t)},n.qd=function(t,e){this.b.qd(t,e)},n.rd=function(t,e){this.b.rd(t,e)},n.ze=function(t){this.b.ze(t)},n.Hd=function(t,e,n,i){this.b.Hd(t,e,n,i)},n.cc=function(){this.b.cc()},n.ne=function(){this.b.ne()},n.me=function(){this.b.me()},n.te=function(){this.b.te()},n.Sc=function(){this.b.Sc()},n.Tb=function(){this.b.Tb()},n.ae=function(){this.b.ae()},n.wd=function(t){this.b.wd(t)},n.ee=function(){this.b.ee()},n.Zd=function(){this.b.Zd()},n.de=function(){this.b.de()},n.Vc=function(){this.b.Vc()},n.Qe=function(t){this.b.Qe(t)},n.Fc=function(t){this.b.Fc(t)},n.$d=function(t){this.b.$d(t)},n.ce=function(){this.b.ce()},n.be=function(t,e,n){this.b.be(t,e,n)},n.zd=function(t,e,n){this.b.zd(t,e,n)},n.yd=function(t,e,n){this.b.yd(t,e,n)},n.La=function(){this.b.La()},n.Qb=function(t,e,n){this.b.Qb(t,e,n)},n.dc=function(){this.b.dc()},n.xd=function(t){this.b.xd(t)},n.Nd=function(){this.b.Nd()},g(Ar,Er),Ar.prototype.jd=function(){return this.oa.jd()},Ar.prototype.error=function(t){C.b(t)},Ar.prototype.La=function(){this.J++},Ar.prototype.dc=function(){if(!--this.J&&!this.N){var t=this.oa;t.b=t.g.pop()}},g(_r,Ar),(n=_r.prototype).Tb=function(){Or(this,"E_CSS_UNEXPECTED_SELECTOR")},n.ae=function(){Or(this,"E_CSS_UNEXPECTED_FONT_FACE")},n.wd=function(){Or(this,"E_CSS_UNEXPECTED_FOOTNOTE")},n.ee=function(){Or(this,"E_CSS_UNEXPECTED_VIEWPORT")},n.Zd=function(){Or(this,"E_CSS_UNEXPECTED_DEFINE")},n.de=function(){Or(this,"E_CSS_UNEXPECTED_REGION")},n.Vc=function(){Or(this,"E_CSS_UNEXPECTED_PAGE")},n.Fc=function(){Or(this,"E_CSS_UNEXPECTED_WHEN")},n.$d=function(){Or(this,"E_CSS_UNEXPECTED_FLOW")},n.ce=function(){Or(this,"E_CSS_UNEXPECTED_PAGE_TEMPLATE")},n.be=function(){Or(this,"E_CSS_UNEXPECTED_PAGE_MASTER")},n.zd=function(){Or(this,"E_CSS_UNEXPECTED_PARTITION")},n.yd=function(){Or(this,"E_CSS_UNEXPECTED_PARTITION_GROUP")},n.xd=function(){Or(this,"E_CSS_UNEXPECTED_SELECTOR_FUNC")},n.Nd=function(){Or(this,"E_CSS_UNEXPECTED_END_SELECTOR_FUNC")},n.Qb=function(){this.error("E_CSS_UNEXPECTED_PROPERTY",this.jd())};var Ir=[],Pr=[],Fr=[],Mr=[],Dr=[],Lr=[],jr=[],Rr=[],zr=[],Br=[],Ur=[],Vr=[],Hr=[];function $r(t,e,n,i){this.b=t,this.f=e,this.u=n,this.Z=i,this.F=[],this.N={},this.g=this.I=null,this.D=!1,this.j=2,this.result=null,this.G=!1,this.B=this.J=null,this.l=[],this.h=[],this.S=this.Y=!1}function Gr(t,e){for(var n=[],i=t.F;n.push(i[e++]),e!=i.length;)if(","!=i[e++])throw Error("Unexpected state");return n}function Kr(t,e,n){var i,r=t.F,o=r.length;do{i=r[--o]}while(void 0!==i&&"string"!=typeof i);var a=r.length-(o+1);if(1<a&&r.splice(o+1,a,new Re(r.slice(o+1,r.length))),","==e)return null;o++;do{i=r[--o]}while(void 0!==i&&("string"!=typeof i||","==i));return a=r.length-(o+1),"("==i?")"!=e?(t.u.error("E_CSS_MISMATCHED_C_PAR",n),t.b=Ur,null):(t=new Be(r[o-1],Gr(t,o+1)),r.splice(o-1,a+2,t),null):";"!=e||0<=o?(t.u.error("E_CSS_UNEXPECTED_VAL_END",n),t.b=Ur,null):1<a?new ze(Gr(t,o+1)):r[0]}function Xr(t,e,n){t.b=t.g?Ur:Br,t.u.error(e,n)}function Wr(t,e,n){for(var i,r=t.F,o=t.u,a=r.pop();;){var s=r.pop();if(11==e){for(i=[a];16==s;)i.unshift(r.pop()),s=r.pop();if("string"==typeof s){if("{"==s){for(;2<=i.length;)t=i.shift(),n=i.shift(),t=new Yt(o.ma(),t,n),i.unshift(t);return r.push(new Ue(i[0])),!0}if("("==s){e=r.pop(),a=r.pop(),a=new ce(o.ma(),kt(a,e),i),e=0;continue}}if(10==s){a.gf()&&(a=new de(o.ma(),a,null)),e=0;continue}}else if("string"==typeof s){r.push(s);break}if(0>s)if(-31==s)a=new $t(o.ma(),a);else{if(-24!=s)return Xr(t,"F_UNEXPECTED_STATE",n),!1;a=new Gt(o.ma(),a)}else{if(Hr[e]>Hr[s]){r.push(s);break}switch(i=r.pop(),s){case 26:a=new Kt(o.ma(),i,a);break;case 52:a=new Xt(o.ma(),i,a);break;case 25:a=new Wt(o.ma(),i,a);break;case 38:a=new Jt(o.ma(),i,a);break;case 37:a=new qt(o.ma(),i,a);break;case 48:a=new Zt(o.ma(),i,a);break;case 47:a=new Qt(o.ma(),i,a);break;case 39:case 49:a=new te(o.ma(),i,a);break;case 41:a=new ee(o.ma(),i,a);break;case 23:a=new ne(o.ma(),i,a);break;case 24:a=new ie(o.ma(),i,a);break;case 36:a=new re(o.ma(),i,a);break;case 19:a=new oe(o.ma(),i,a);break;case 21:a=new ae(o.ma(),i,a);break;case 18:if(!(1<r.length))return Xr(t,"E_CSS_EXPR_COND",n),!1;switch(r[r.length-1]){case 22:r.pop(),a=new fe(o.ma(),r.pop(),i,a);break;case 10:if(!i.gf())return Xr(t,"E_CSS_MEDIA_TEST",n),!1;a=new de(o.ma(),i,a)}break;case 22:if(18!=e)return Xr(t,"E_CSS_EXPR_COND",n),!1;case 10:return r.push(i),r.push(s),r.push(a),!1;default:return Xr(t,"F_UNEXPECTED_STATE",n),!1}}}return r.push(a),!1}function Yr(t){for(var e=[];;){var n=fr(t.f);switch(n.type){case 1:e.push(n.text);break;case 23:e.push("+");break;case 4:case 5:e.push(n.L);break;default:return e}dr(t.f)}}function Jr(t){var e=!1;if(23===(i=fr(t.f)).type)e=!0,dr(t.f),i=fr(t.f);else if(1===i.type&&("even"===i.text||"odd"===i.text))return dr(t.f),[2,"odd"===i.text?1:0];switch(i.type){case 3:if(e&&0>i.L)break;case 1:if(e&&"-"===i.text.charAt(0))break;if("n"===i.text||"-n"===i.text){if(e&&i.b)break;e="-n"===i.text?-1:1,3===i.type&&(e=i.L);var n=0;dr(t.f);var i,r=24===(i=fr(t.f)).type,o=23===i.type||r;if(o&&(dr(t.f),i=fr(t.f)),5===i.type){if(1/(n=i.L)==-1/0){if(n=0,o)break}else if(0>n){if(o)break}else if(0<=n&&!o)break;dr(t.f)}else if(o)break;return[e,r&&0<n?-n:n]}if("n-"===i.text||"-n-"===i.text){if(!(e&&i.b||(e="-n-"===i.text?-1:1,3===i.type&&(e=i.L),dr(t.f),i=fr(t.f),5!==i.type||0>i.L||1/i.L==-1/0)))return dr(t.f),[e,i.L]}else{if(n=i.text.match(/^n(-[0-9]+)$/)){if(e&&i.b)break;return dr(t.f),[3===i.type?i.L:1,parseInt(n[1],10)]}if(n=i.text.match(/^-n(-[0-9]+)$/))return dr(t.f),[-1,parseInt(n[1],10)]}break;case 5:if(!e||!(i.b||0>i.L))return dr(t.f),[0,i.L]}return null}function Zr(t){switch(t.h[t.h.length-1]){case"[selector]":case"font-face":case"-epubx-flow":case"-epubx-viewport":case"-epubx-define":case"-adapt-footnote-area":return!0}return!1}function qr(t,e,n,i,r,o){var a,s,u,l,h=t.u,c=t.f,f=t.F;r&&(t.j=2,t.F.push("{"));t:for(;0<e;--e)switch(a=fr(c),t.b[a.type]){case 28:if(18!=pr(c,1).type){Zr(t)?(h.error("E_CSS_COLON_EXPECTED",pr(c,1)),t.b=Ur):(t.b=Lr,h.Tb());continue}if(!((s=pr(c,2)).b||1!=s.type&&6!=s.type)){if(0<=c.b)throw Error("F_CSSTOK_BAD_CALL mark");c.b=c.f}t.g=a.text,t.D=!1,dr(c),dr(c),t.b=jr,f.splice(0,f.length);continue;case 46:if(18!=pr(c,1).type){t.b=Ur,h.error("E_CSS_COLON_EXPECTED",pr(c,1));continue}t.g=a.text,t.D=!1,dr(c),dr(c),t.b=jr,f.splice(0,f.length);continue;case 29:t.b=Lr,h.Tb();continue;case 1:if(!a.b){t.b=Vr,h.error("E_CSS_SPACE_EXPECTED",a);continue}h.cc();case 2:if(34==pr(c,1).type)if(dr(c),dr(c),null!=(u=t.N[a.text]))switch(a=fr(c),a.type){case 1:h.Wb(u,a.text),t.b=o?Mr:Fr,dr(c);break;case 36:h.Wb(u,null),t.b=o?Mr:Fr,dr(c);break;default:t.b=Br,h.error("E_CSS_NAMESPACE",a)}else t.b=Br,h.error("E_CSS_UNDECLARED_PREFIX",a);else h.Wb(t.I,a.text),t.b=o?Mr:Fr,dr(c);continue;case 3:if(!a.b){t.b=Vr,h.error("E_CSS_SPACE_EXPECTED",a);continue}h.cc();case 4:if(34==pr(c,1).type)switch(dr(c),dr(c),a=fr(c),a.type){case 1:h.Wb(null,a.text),t.b=o?Mr:Fr,dr(c);break;case 36:h.Wb(null,null),t.b=o?Mr:Fr,dr(c);break;default:t.b=Br,h.error("E_CSS_NAMESPACE",a)}else h.Wb(t.I,null),t.b=o?Mr:Fr,dr(c);continue;case 5:a.b&&h.cc();case 6:h.ze(a.text),t.b=o?Mr:Fr,dr(c);continue;case 7:a.b&&h.cc();case 8:h.oe(a.text),t.b=o?Mr:Fr,dr(c);continue;case 55:a.b&&h.cc();case 14:dr(c);e:switch((a=fr(c)).type){case 1:h.qd(a.text,null),dr(c),t.b=o?Mr:Fr;continue;case 6:switch(s=a.text,dr(c),s){case"not":t.b=Lr,h.xd("not"),qr(t,Number.POSITIVE_INFINITY,!1,!1,!1,!0)?t.b=Fr:t.b=Vr;break t;case"lang":case"href-epub-type":if(1===(a=fr(c)).type){u=[a.text],dr(c);break}break e;case"nth-child":case"nth-of-type":case"nth-last-child":case"nth-last-of-type":if(u=Jr(t))break;break e;default:u=Yr(t)}if(11==(a=fr(c)).type){h.qd(s,u),dr(c),t.b=o?Mr:Fr;continue}}h.error("E_CSS_PSEUDOCLASS_SYNTAX",a),t.b=Br;continue;case 42:switch(dr(c),(a=fr(c)).type){case 1:h.rd(a.text,null),t.b=o?Mr:Fr,dr(c);continue;case 6:if(s=a.text,dr(c),"nth-fragment"==s){if(!(u=Jr(t)))break}else u=Yr(t);if(11==(a=fr(c)).type){h.rd(s,u),t.b=o?Mr:Fr,dr(c);continue}}h.error("E_CSS_PSEUDOELEM_SYNTAX",a),t.b=Br;continue;case 9:a.b&&h.cc();case 10:if(dr(c),1==(a=fr(c)).type)s=a.text,dr(c);else if(36==a.type)s=null,dr(c);else{if(34!=a.type){t.b=Vr,h.error("E_CSS_ATTR",a),dr(c);continue}s=""}if(34==(a=fr(c)).type){if(null==(u=s?t.N[s]:s)){t.b=Vr,h.error("E_CSS_UNDECLARED_PREFIX",a),dr(c);continue}if(dr(c),1!=(a=fr(c)).type){t.b=Vr,h.error("E_CSS_ATTR_NAME_EXPECTED",a);continue}s=a.text,dr(c),a=fr(c)}else u="";switch(a.type){case 39:case 45:case 44:case 43:case 42:case 46:case 50:l=a.type,dr(c),a=fr(c);break;case 15:h.Hd(u,s,0,null),t.b=o?Mr:Fr,dr(c);continue;default:t.b=Vr,h.error("E_CSS_ATTR_OP_EXPECTED",a);continue}switch(a.type){case 1:case 2:h.Hd(u,s,l,a.text),dr(c),a=fr(c);break;default:t.b=Vr,h.error("E_CSS_ATTR_VAL_EXPECTED",a);continue}if(15!=a.type){t.b=Vr,h.error("E_CSS_ATTR",a);continue}t.b=o?Mr:Fr,dr(c);continue;case 11:h.ne(),t.b=Dr,dr(c);continue;case 12:h.me(),t.b=Dr,dr(c);continue;case 56:h.te(),t.b=Dr,dr(c);continue;case 13:t.Y?(t.h.push("-epubx-region"),t.Y=!1):t.S?(t.h.push("page"),t.S=!1):t.h.push("[selector]"),h.La(),t.b=Ir,dr(c);continue;case 41:h.Sc(),t.b=Lr,dr(c);continue;case 15:f.push(Ie(a.text)),dr(c);continue;case 16:try{f.push(xr(a.text))}catch(e){h.error("E_CSS_COLOR",a),t.b=Br}dr(c);continue;case 17:f.push(new Fe(a.L)),dr(c);continue;case 18:f.push(new Me(a.L)),dr(c);continue;case 19:_t(a.text)?f.push(new Ue(new se(h.ma(),a.L,a.text))):f.push(new Pe(a.L,a.text)),dr(c);continue;case 20:f.push(new Ne(a.text)),dr(c);continue;case 21:f.push(new Le(N(a.text,t.Z))),dr(c);continue;case 22:Kr(t,",",a),f.push(","),dr(c);continue;case 23:f.push(_e),dr(c);continue;case 24:"-epubx-expr"==(s=a.text.toLowerCase())||"calc"==s||"env"==s?(t.b=Rr,t.j=0,f.push("{")):(f.push(s),f.push("(")),dr(c);continue;case 25:Kr(t,")",a),dr(c);continue;case 47:if(dr(c),a=fr(c),s=pr(c,1),1==a.type&&"important"==a.text.toLowerCase()&&(17==s.type||0==s.type||13==s.type)){dr(c),t.D=!0;continue}Xr(t,"E_CSS_SYNTAX",a);continue;case 54:switch((s=pr(c,1)).type){case 4:case 3:case 5:if(!s.b){dr(c);continue}}t.b===jr&&0<=c.b?(br(c),t.b=Lr,h.Tb()):Xr(t,"E_CSS_UNEXPECTED_PLUS",a);continue;case 26:dr(c);case 48:c.b=-1,(s=Kr(t,";",a))&&t.g&&h.Qb(t.g,s,t.D),t.b=i?Pr:Ir;continue;case 44:if(dr(c),c.b=-1,s=Kr(t,";",a),n)return t.result=s,!0;if(t.g&&s&&h.Qb(t.g,s,t.D),i)return!0;Xr(t,"E_CSS_SYNTAX",a);continue;case 31:9==(s=pr(c,1)).type?(10!=pr(c,2).type||pr(c,2).b?(f.push(new ue(h.ma(),kt(a.text,s.text))),t.b=zr):(f.push(a.text,s.text,"("),dr(c)),dr(c)):(2==t.j||3==t.j?"not"==a.text.toLowerCase()?(dr(c),f.push(new le(h.ma(),!0,s.text))):("only"==a.text.toLowerCase()&&(dr(c),a=s),f.push(new le(h.ma(),!1,a.text))):f.push(new ue(h.ma(),a.text)),t.b=zr),dr(c);continue;case 38:f.push(null,a.text,"("),dr(c);continue;case 32:f.push(new pe(h.ma(),a.L)),dr(c),t.b=zr;continue;case 33:"%"==(s=a.text)&&(s=t.g&&t.g.match(/height|^(top|bottom)$/)?"vh":"vw"),f.push(new se(h.ma(),a.L,s)),dr(c),t.b=zr;continue;case 34:f.push(new pe(h.ma(),a.text)),dr(c),t.b=zr;continue;case 35:dr(c),5!=(a=fr(c)).type||a.b?Xr(t,"E_CSS_SYNTAX",a):(f.push(new be(h.ma(),a.L)),dr(c),t.b=zr);continue;case 36:f.push(-a.type),dr(c);continue;case 37:t.b=Rr,Wr(t,a.type,a),f.push(a.type),dr(c);continue;case 45:"and"==a.text.toLowerCase()?(t.b=Rr,Wr(t,52,a),f.push(52),dr(c)):Xr(t,"E_CSS_SYNTAX",a);continue;case 39:Wr(t,a.type,a)&&(t.g?t.b=jr:Xr(t,"E_CSS_UNBALANCED_PAR",a)),dr(c);continue;case 43:Wr(t,11,a)&&(t.g||3==t.j?Xr(t,"E_CSS_UNEXPECTED_BRC",a):(1==t.j?h.Fc(f.pop()):(a=f.pop(),h.Fc(a)),t.h.push("media"),h.La(),t.b=Ir)),dr(c);continue;case 49:if(Wr(t,11,a)){if(!t.g&&3==t.j)return t.B=f.pop(),t.G=!0,t.b=Ir,dr(c),!1;Xr(t,"E_CSS_UNEXPECTED_SEMICOL",a)}dr(c);continue;case 40:f.push(a.type),dr(c);continue;case 27:t.b=Ir,dr(c),h.dc(),t.h.length&&t.h.pop();continue;case 30:switch(s=a.text.toLowerCase()){case"import":if(dr(c),2==(a=fr(c)).type||8==a.type){if(t.J=a.text,dr(c),17==(a=fr(c)).type||0==a.type)return t.G=!0,dr(c),!1;t.g=null,t.j=3,t.b=Rr,f.push("{");continue}h.error("E_CSS_IMPORT_SYNTAX",a),t.b=Br;continue;case"namespace":switch(dr(c),(a=fr(c)).type){case 1:if(s=a.text,dr(c),(2==(a=fr(c)).type||8==a.type)&&17==pr(c,1).type){t.N[s]=a.text,dr(c),dr(c);continue}break;case 2:case 8:if(17==pr(c,1).type){t.I=a.text,dr(c),dr(c);continue}}h.error("E_CSS_NAMESPACE_SYNTAX",a),t.b=Br;continue;case"charset":if(dr(c),2==(a=fr(c)).type&&17==pr(c,1).type){"utf-8"!=(s=a.text.toLowerCase())&&"utf-16"!=s&&h.error("E_CSS_UNEXPECTED_CHARSET "+s,a),dr(c),dr(c);continue}h.error("E_CSS_CHARSET_SYNTAX",a),t.b=Br;continue;case"font-face":case"-epubx-page-template":case"-epubx-define":case"-epubx-viewport":if(12==pr(c,1).type){switch(dr(c),dr(c),s){case"font-face":h.ae();break;case"-epubx-page-template":h.ce();break;case"-epubx-define":h.Zd();break;case"-epubx-viewport":h.ee()}t.h.push(s),h.La();continue}break;case"-adapt-footnote-area":switch(dr(c),(a=fr(c)).type){case 12:dr(c),h.wd(null),t.h.push(s),h.La();continue;case 50:if(dr(c),1==(a=fr(c)).type&&12==pr(c,1).type){s=a.text,dr(c),dr(c),h.wd(s),t.h.push("-adapt-footnote-area"),h.La();continue}}break;case"-epubx-region":dr(c),h.de(),t.Y=!0,t.b=Lr;continue;case"page":dr(c),h.Vc(),t.S=!0,t.b=Dr;continue;case"top-left-corner":case"top-left":case"top-center":case"top-right":case"top-right-corner":case"right-top":case"right-middle":case"right-bottom":case"bottom-right-corner":case"bottom-right":case"bottom-center":case"bottom-left":case"bottom-left-corner":case"left-bottom":case"left-middle":case"left-top":if(dr(c),12==(a=fr(c)).type){dr(c),h.Qe(s),t.h.push(s),h.La();continue}break;case"-epubx-when":dr(c),t.g=null,t.j=1,t.b=Rr,f.push("{");continue;case"media":dr(c),t.g=null,t.j=2,t.b=Rr,f.push("{");continue;case"-epubx-flow":if(1==pr(c,1).type&&12==pr(c,2).type){h.$d(pr(c,1).text),dr(c),dr(c),dr(c),t.h.push(s),h.La();continue}break;case"-epubx-page-master":case"-epubx-partition":case"-epubx-partition-group":dr(c),l=u=null;var p=[];for(1==(a=fr(c)).type&&(u=a.text,dr(c),a=fr(c)),18==a.type&&1==pr(c,1).type&&(l=pr(c,1).text,dr(c),dr(c),a=fr(c));6==a.type&&"class"==a.text.toLowerCase()&&1==pr(c,1).type&&11==pr(c,2).type;)p.push(pr(c,1).text),dr(c),dr(c),dr(c),a=fr(c);if(12==a.type){switch(dr(c),s){case"-epubx-page-master":h.be(u,l,p);break;case"-epubx-partition":h.zd(u,l,p);break;case"-epubx-partition-group":h.yd(u,l,p)}t.h.push(s),h.La();continue}break;case"":h.error("E_CSS_UNEXPECTED_AT"+s,a),t.b=Vr;continue;default:h.error("E_CSS_AT_UNKNOWN "+s,a),t.b=Br;continue}h.error("E_CSS_AT_SYNTAX "+s,a),t.b=Br;continue;case 50:if(n||i)return!0;t.l.push(a.type+1),dr(c);continue;case 52:if(n||i)return!0;if(!t.l.length){t.b=Ir;continue}case 51:0<t.l.length&&t.l[t.l.length-1]==a.type&&t.l.pop(),t.l.length||13!=a.type||(t.b=Ir),dr(c);continue;case 53:if(n||i)return!0;t.l.length||(t.b=Ir),dr(c);continue;case 200:return o&&(dr(c),h.Nd()),!0;default:if(n||i)return!0;if(r)return!!Wr(t,11,a)&&(t.result=f.pop(),!0);if(o)return 51==a.type?h.error(a.text,a):h.error("E_CSS_SYNTAX",a),!1;t.b===jr&&0<=c.b?(br(c),t.b=Lr,h.Tb()):t.b!==Br&&t.b!==Vr&&t.b!==Ur?(51==a.type?h.error(a.text,a):h.error("E_CSS_SYNTAX",a),t.b=Zr(t)?Ur:Vr):dr(c)}return!1}function Qr(t){Er.call(this,null),this.f=t}function to(t,e,n,i,r){var o=oi("parseStylesheet"),a=new $r(Ir,t,e,n),s=null;return r&&(s=function(t,e,n){return qr(t=new $r(Rr,t,e,n),Number.POSITIVE_INFINITY,!1,!1,!0,!1),t.result}(new cr(r,e),e,n)),(s=function(t,e,n){if(!(t=t.u.ma()))return null;if(n=n||t.j,e)for(var i=(e=h(e=e.split(/\s+/))).next();!i.done;i=e.next())switch(i.value){case"vertical":n=ge(t,n,new $t(t,new ue(t,"pref-horizontal")));break;case"horizontal":n=ge(t,n,new ue(t,"pref-horizontal"));break;case"day":n=ge(t,n,new $t(t,new ue(t,"pref-night-mode")));break;case"night":n=ge(t,n,new ue(t,"pref-night-mode"));break;default:n=t.h}return n===t.j?null:new Ue(n)}(a,i,s&&s.Aa()))&&(e.Fc(s),e.La()),ki(function(){for(var t={};!qr(a,100,!1,!1,!1,!1);){if(a.G){var i=N(a.J,n);return a.B&&(e.Fc(a.B),e.La()),t.Ce=oi("parseStylesheet.import"),no(i,e,null,null).then(function(t){return function(){a.B&&e.dc(),a.G=!1,a.J=null,a.B=null,xi(t.Ce,!0)}}(t)),t.Ce.result()}if((i=Ei()).Xa)return i;t={Ce:t.Ce}}return ai(!1)}).then(function(){s&&e.dc(),xi(o,!0)}),o.result()}function eo(t,e,n,i,r){return si("parseStylesheetFromText",function(o){to(new cr(t,e),e,n,i,r).Ga(o)},function(e,n){C.b(n,"Failed to parse stylesheet text: "+t),xi(e,!1)})}function no(t,e,n,i){return si("parseStylesheetFromURL",function(r){vr(t).then(function(o){o.responseText?eo(o.responseText,e,t,n,i).then(function(e){e||C.b("Failed to parse stylesheet from "+t),xi(r,!0)}):xi(r,!0)})},function(e,n){C.b(n,"Exception while fetching and parsing:",t),xi(e,!0)})}function io(t,e){var n=new $r(jr,e,new Qr(t),"");return qr(n,Number.POSITIVE_INFINITY,!0,!1,!1,!1),n.result}Ir[1]=28,Ir[36]=29,Ir[7]=29,Ir[9]=29,Ir[14]=29,Ir[18]=29,Ir[20]=30,Ir[13]=27,Ir[0]=200,Pr[1]=46,Pr[0]=200,Lr[1]=2,Lr[36]=4,Lr[7]=6,Lr[9]=8,Lr[14]=10,Lr[18]=14,Fr[37]=11,Fr[23]=12,Fr[35]=56,Fr[1]=1,Fr[36]=3,Fr[7]=5,Fr[9]=7,Fr[14]=9,Fr[12]=13,Fr[18]=55,Fr[50]=42,Fr[16]=41,Mr[1]=1,Mr[36]=3,Mr[7]=5,Mr[9]=7,Mr[14]=9,Mr[11]=200,Mr[18]=55,Dr[1]=2,Dr[36]=4,Dr[7]=6,Dr[9]=8,Dr[18]=14,Dr[50]=42,Dr[14]=10,Dr[12]=13,jr[1]=15,jr[7]=16,jr[4]=17,jr[5]=18,jr[3]=19,jr[2]=20,jr[8]=21,jr[16]=22,jr[19]=23,jr[6]=24,jr[11]=25,jr[17]=26,jr[13]=48,jr[31]=47,jr[23]=54,jr[0]=44,Rr[1]=31,Rr[4]=32,Rr[5]=32,Rr[3]=33,Rr[2]=34,Rr[10]=40,Rr[6]=38,Rr[31]=36,Rr[24]=36,Rr[32]=35,zr[1]=45,zr[16]=37,zr[37]=37,zr[38]=37,zr[47]=37,zr[48]=37,zr[39]=37,zr[49]=37,zr[41]=37,zr[26]=37,zr[25]=37,zr[23]=37,zr[24]=37,zr[19]=37,zr[21]=37,zr[36]=37,zr[18]=37,zr[22]=37,zr[11]=39,zr[12]=43,zr[17]=49,Br[0]=200,Br[12]=50,Br[13]=51,Br[14]=50,Br[15]=51,Br[10]=50,Br[11]=51,Br[17]=53,Ur[0]=200,Ur[12]=50,Ur[13]=52,Ur[14]=50,Ur[15]=51,Ur[10]=50,Ur[11]=51,Ur[17]=53,Vr[0]=200,Vr[12]=50,Vr[13]=51,Vr[14]=50,Vr[15]=51,Vr[10]=50,Vr[11]=51,Hr[11]=0,Hr[16]=0,Hr[22]=1,Hr[18]=1,Hr[26]=2,Hr[25]=2,Hr[38]=3,Hr[37]=3,Hr[48]=3,Hr[47]=3,Hr[39]=3,Hr[49]=3,Hr[41]=3,Hr[23]=4,Hr[24]=4,Hr[36]=5,Hr[19]=5,Hr[21]=5,Hr[0]=6,Hr[52]=2,g(Qr,Er),Qr.prototype.error=function(t){throw Error(t)},Qr.prototype.ma=function(){return this.f};var ro={"z-index":!0,"column-count":!0,"flow-linger":!0,opacity:!0,page:!0,"flow-priority":!0,utilization:!0};function oo(t,e,n){if(e.ef())t:{switch(typeof(t=(e=e.Mc).evaluate(t))){case"number":n=ro[n]?t==Math.round(t)?new Me(t):new Fe(t):new Pe(t,"px");break t;case"string":n=t?io(e.b,new cr(t,null)):Te;break t;case"boolean":n=t?Kn:sn;break t;case"undefined":n=Te;break t}throw Error("E_UNEXPECTED")}else n=e;return n}function ao(t,e,n,i){this.V=t,this.T=e,this.U=n,this.R=i}function so(t,e){this.f=t,this.b=e}function uo(){this.bottom=this.right=this.top=this.left=0}function lo(t,e,n,i){this.b=t,this.f=e,this.h=n,this.g=i}function ho(t,e,n,i){this.T=t,this.R=e,this.V=n,this.U=i,this.right=this.left=null}function co(t,e){return t.b.b-e.b.b||t.b.f-e.b.f}function fo(t){this.b=t}function po(t,e,n){for(var i=(t=t.b).length,r=t[i-1],o=0;o<i;o++){var a=t[o];e.push(r.b<a.b?new lo(r,a,1,n):new lo(a,r,-1,n)),r=a}}function bo(t,e,n,i){for(var r=[],o=0;20>o;o++){var a=2*o*Math.PI/20;r.push(new so(t+n*Math.sin(a),e+i*Math.cos(a)))}return new fo(r)}function go(t,e,n,i){return new fo([new so(t,e),new so(n,e),new so(n,i),new so(t,i)])}function vo(t,e,n,i){this.f=t,this.h=e,this.b=n,this.g=i}function mo(t,e){var n=t.b.f+(t.f.f-t.b.f)*(e-t.b.b)/(t.f.b-t.b.b);if(isNaN(n))throw Error("Bad intersection");return n}function wo(t,e,n,i){var r,o;e.f.b<n&&C.b("Error: inconsistent segment (1)"),e.b.b<=n?(n=mo(e,n),r=e.h):(n=e.b.f,r=0),e.f.b>=i?(i=mo(e,i),o=e.h):(i=e.f.f,o=0),n<i?(t.push(new vo(n,r,e.g,-1)),t.push(new vo(i,o,e.g,1))):(t.push(new vo(i,o,e.g,-1)),t.push(new vo(n,r,e.g,1)))}function yo(t,e,n){n=e+n;for(var i=Array(n),r=Array(n),o=0;o<=n;o++)i[o]=0,r[o]=0;for(var a=[],s=!1,u=t.length,l=0;l<u;l++){var h=t[l];i[h.b]+=h.h,r[h.b]+=h.g;var c=!1;for(o=0;o<e;o++)if(i[o]&&!r[o]){c=!0;break}if(c)for(o=e;o<=n;o++)if(i[o]||r[o]){c=!1;break}s!=c&&(a.push(h.f),s=c)}return a}function xo(t,e){return e?Math.ceil(t/e)*e:t}function Eo(t,e){return e?Math.floor(t/e)*e:t}function So(t){return new so(t.b,-t.f)}function ko(t){return new ao(t.T,-t.U,t.R,-t.V)}function Co(t){return new fo(tt(t.b,So))}function To(t,e){for(var n=e.length-1,i=new ho(t.R,t.R,t.V,t.U);0<=n;){var r=i;(1>(i=e[n]).R-i.T||i.V==r.V&&i.U==r.U)&&(r.T=i.T,e.splice(n,1),i=r),n--}}function Ao(t,e){for(var n=0,i=t.length;n<i;){var r=Math.floor((n+i)/2);e>=t[r].R?n=r+1:i=r}return n}function _o(t,e){if(!t.length)return e;for(var n,i=e.T,r=0;r<t.length&&!((n=t[r]).R>e.T&&n.V-.1<=e.V&&n.U+.1>=e.U);r++)i=Math.max(i,n.R);for(var o=i;r<t.length&&!((n=t[r]).T>=e.R||n.V-.1>e.V||n.U+.1<e.U);r++)o=n.R;return(o=r===t.length?e.R:Math.min(o,e.R))<=i?null:new ao(e.V,i,e.U,o)}function No(t,e){if(!t.length)return e;for(var n,i=e.R,r=t.length-1;0<=r&&(n=t[r],!(r===t.length-1&&n.R<e.R))&&!(n.T<e.R&&n.V-.1<=e.V&&n.U+.1>=e.U);r--)i=Math.min(i,n.T);for(var o=Math.min(i,n.R);0<=r&&!((n=t[r]).R<=e.T||n.V-.1>e.V||n.U+.1<e.U);r--)o=n.T;return i<=(o=Math.max(o,e.T))?null:new ao(e.V,o,e.U,i)}function Oo(){this.b={}}function Io(t){this.value=t}function Po(t,e){if(t){var n=new Io(e);try{return t.fa(n),n.value}catch(t){C.b(t,"toInt: ")}}return e}function Fo(){this.b=!1,this.f=[],this.name=null}function Mo(t,e,n,i,r,o){if(t){var a=new Fo;try{return t.fa(a),function(t,e,n,i,r,o){if(0<t.f.length){var a=[];switch(t.f.forEach(function(e,n){if("%"==e.ka){var s=n%2?r:i;3==n&&"circle"==t.name&&(s=Math.sqrt((i*i+r*r)/2)),a.push(e.L*s/100)}else a.push(e.L*Ft(o,e.ka,!1))}),t.name){case"polygon":if(!(a.length%2)){for(var s=[],u=0;u<a.length;u+=2)s.push(new so(e+a[u],n+a[u+1]));return new fo(s)}break;case"rectangle":if(4==a.length)return go(e+a[0],n+a[1],e+a[0]+a[2],n+a[1]+a[3]);break;case"ellipse":if(4==a.length)return bo(e+a[0],n+a[1],a[2],a[3]);break;case"circle":if(3==a.length)return bo(e+a[0],n+a[1],a[2],a[2])}}return null}(a,e,n,i,r,o)}catch(t){C.b(t,"toShape:")}}return go(e,n,e+i,n+r)}function Do(t){this.f=t,this.b={},this.name=null}function Lo(t,e){var n=new Do(e);try{t.fa(n)}catch(t){C.b(t,"toCounters:")}return n.b}function jo(t,e){this.b=t,this.f=e}function Ro(t){this.f=this.g=null,this.b=0,this.eb=t}function zo(t,e){this.b=-1,this.f=t,this.g=e}function Bo(){this.X=[],this.b=[],this.match=[],this.f=[],this.error=[],this.g=!0}function Uo(t,e,n,i){var r=t.X.length,o=new Ro(Xo);o.b=0<=i?n?2*i+1:2*i+2:n?-1:-2,t.X.push(o),t.connect(e,r),n=new zo(r,!0),r=new zo(r,!1),e.push(t.b.length),t.b.push(r),e.push(t.b.length),t.b.push(n)}function Vo(t){return 1==t.X.length&&!t.X[0].b&&t.X[0].eb instanceof Ko}function Ho(t,e,n){if(e.X.length){var i=t.X.length;if(4==n&&1==i&&Vo(e)&&Vo(t)){n=t.X[0].eb,e=e.X[0].eb;i={};var r,o={};for(r in n.f)i[r]=n.f[r];for(r in e.f)i[r]=e.f[r];for(var a in n.g)o[a]=n.g[a];for(a in e.g)o[a]=e.g[a];t.X[0].eb=new Ko(n.b|e.b,i,o)}else{for(r=0;r<e.X.length;r++)t.X.push(e.X[r]);for(4==n?(t.g=!0,t.connect(t.f,i)):t.connect(t.match,i),a=t.b.length,r=0;r<e.b.length;r++)(o=e.b[r]).f+=i,0<=o.b&&(o.b+=i),t.b.push(o);for(r=0;r<e.match.length;r++)t.match.push(e.match[r]+a);if(3==n&&t.connect(t.match,i),2==n||3==n)for(r=0;r<e.f.length;r++)t.match.push(e.f[r]+a);else if(t.g){for(r=0;r<e.f.length;r++)t.f.push(e.f[r]+a);t.g=e.g}else for(r=0;r<e.f.length;r++)t.error.push(e.f[r]+a);for(r=0;r<e.error.length;r++)t.error.push(e.error[r]+a);e.X=null,e.b=null}}}g(Oo,Ee),Oo.prototype.rc=function(t){return this.b[t.name]=!0,t},Oo.prototype.Ub=function(t){return this.sc(t.values),t},g(Io,Ee),Io.prototype.Zc=function(t){return this.value=t.L,t},g(Fo,Ee),Fo.prototype.ad=function(t){return this.b&&this.f.push(t),null},Fo.prototype.$c=function(t){return this.b&&!t.L&&this.f.push(new Pe(0,"px")),null},Fo.prototype.Ub=function(t){return this.sc(t.values),null},Fo.prototype.Xb=function(t){return this.b||(this.b=!0,this.sc(t.values),this.b=!1,this.name=t.name.toLowerCase()),null},g(Do,Ee),Do.prototype.rc=function(t){return this.name=t.toString(),this.b[this.name]=this.f?0:(this.b[this.name]||0)+1,t},Do.prototype.Zc=function(t){return this.name&&(this.b[this.name]+=t.L-(this.f?0:1)),t},Do.prototype.Ub=function(t){return this.sc(t.values),t},g(jo,Se),jo.prototype.bd=function(t){return new Le(this.f.oc(t.url,this.b))},Bo.prototype.connect=function(t,e){for(var n=0;n<t.length;n++)this.b[t[n]].b=e;t.splice(0,t.length)},Bo.prototype.clone=function(){for(var t=new Bo,e=0;e<this.X.length;e++){var n=this.X[e],i=new Ro(n.eb);i.b=n.b,t.X.push(i)}for(e=0;e<this.b.length;e++)(i=new zo((n=this.b[e]).f,n.g)).b=n.b,t.b.push(i);return t.match.push.apply(t.match,[].concat(c(this.match))),t.f.push.apply(t.f,[].concat(c(this.f))),t.error.push.apply(t.error,[].concat(c(this.error))),t};var $o={};function Go(){}function Ko(t,e,n){this.b=t,this.f=e,this.g=n}g(Go,Ee),Go.prototype.h=function(t,e){var n=t[e].fa(this);return n?[n]:null},g(Ko,Go),(n=Ko.prototype).Se=function(t){return 1&this.b?t:null},n.Te=function(t){return 2048&this.b?t:null},n.Bd=function(t){return 2&this.b?t:null},n.rc=function(t){var e=this.f[t.name.toLowerCase()];return e||(4&this.b?t:null)},n.ad=function(t){return t.L||512&this.b?0>t.L&&!(256&this.b)?null:this.g[t.ka]?t:null:"%"==t.ka&&1024&this.b?t:null},n.$c=function(t){return t.L?0>=t.L&&!(256&this.b)?null:16&this.b?t:null:512&this.b?t:null},n.Zc=function(t){return t.L?0>=t.L&&!(256&this.b)?null:48&this.b?t:(t=this.f[""+t.L])?t:null:512&this.b?t:null},n.he=function(t){return 64&this.b?t:null},n.bd=function(t){return 128&this.b?t:null},n.Ub=function(){return null},n.qc=function(){return null},n.Xb=function(){return null},n.Yc=function(t){return 2046&this.b?t:null};var Xo=new Ko(0,$o,$o);function Wo(t){this.b=new Ro(null);var e=this.g=new Ro(null),n=t.X.length;t.X.push(this.b),t.X.push(e),t.connect(t.match,n),t.connect(t.f,n+1),t.connect(t.error,n+1);for(var i=(e=h(t.b)).next();!i.done;i=e.next())(i=i.value).g?t.X[i.f].g=t.X[i.b]:t.X[i.f].f=t.X[i.b];for(e=0;e<n;e++)if(!t.X[e].f||!t.X[e].g)throw Error("Invalid validator state");this.f=t.X[0]}function Yo(t,e,n,i){for(var r=n?[]:e,o=t.f,a=i,s=null,u=null;o!==t.b&&o!==t.g;)if(a>=e.length)o=o.f;else{var l,h=e[a];if(o.b)l=!0,-1==o.b?(s?s.push(u):s=[u],u=[]):-2==o.b?u=0<s.length?s.pop():null:0<o.b&&!(o.b%2)?u[Math.floor((o.b-1)/2)]="taken":l=null==u[Math.floor((o.b-1)/2)],o=l?o.g:o.f;else{if(!a&&!n&&o.eb instanceof Jo&&t instanceof Jo){if(l=new Re(e).fa(o.eb)){a=e.length,o=o.g;continue}}else if(!a&&!n&&o.eb instanceof Zo&&t instanceof Jo){if(l=new ze(e).fa(o.eb)){a=e.length,o=o.g;continue}}else l=h.fa(o.eb);if(l){if(l!==h&&e===r)for(r=[],h=0;h<a;h++)r[h]=e[h];e!==r&&(r[a-i]=l),a++,o=o.g}else o=o.f}}return o===t.b&&(n?0<r.length:a==e.length)?r:null}function Jo(t){Wo.call(this,t)}function Zo(t){Wo.call(this,t)}function qo(t,e){Wo.call(this,e),this.name=t}function Qo(){}function ta(t,e){this.name=e,this.eb=t.g[this.name]}function ea(t,e){ta.call(this,t,e[0]),this.g=e}function na(t,e){this.X=t,this.sf=e}function ia(){this.f=this.Ab=null,this.error=!1,this.values={},this.b=null}function ra(t,e){return t.Ic([e]),null}function oa(){ia.call(this)}function aa(){ia.call(this)}function sa(){ia.call(this)}function ua(){ia.call(this)}function la(){ia.call(this)}g(Wo,Go),(n=Wo.prototype).Db=function(t){for(var e=null,n=this.f;n!==this.b&&n!==this.g;)t?n.b?n=n.g:(e=t.fa(n.eb))?(t=null,n=n.g):n=n.f:n=n.f;return n===this.b?e:null},n.Se=function(t){return this.Db(t)},n.Te=function(t){return this.Db(t)},n.Bd=function(t){return this.Db(t)},n.rc=function(t){return this.Db(t)},n.ad=function(t){return this.Db(t)},n.$c=function(t){return this.Db(t)},n.Zc=function(t){return this.Db(t)},n.he=function(t){return this.Db(t)},n.bd=function(t){return this.Db(t)},n.Ub=function(){return null},n.qc=function(){return null},n.Xb=function(t){return this.Db(t)},n.Yc=function(){return null},g(Jo,Wo),Jo.prototype.Ub=function(t){var e=Yo(this,t.values,!1,0);return e===t.values?t:e?new Re(e):null},Jo.prototype.qc=function(t){for(var e=this.f,n=!1;e;){if(e.eb instanceof Zo){n=!0;break}e=e.f}return n?(e=Yo(this,t.values,!1,0))===t.values?t:e?new ze(e):null:null},Jo.prototype.h=function(t,e){return Yo(this,t,!0,e)},g(Zo,Wo),Zo.prototype.Ub=function(t){return this.Db(t)},Zo.prototype.qc=function(t){var e=Yo(this,t.values,!1,0);return e===t.values?t:e?new ze(e):null},Zo.prototype.h=function(t,e){for(var n,i=this.f;i!==this.g;){if(n=i.eb.h(t,e))return n;i=i.f}return null},g(qo,Wo),qo.prototype.Db=function(){return null},qo.prototype.Xb=function(t){if(t.name.toLowerCase()!=this.name)return null;var e=Yo(this,t.values,!1,0);return e===t.values?t:e?new Be(t.name,e):null},Qo.prototype.b=function(t,e){return e},Qo.prototype.f=function(){},g(ta,Qo),ta.prototype.b=function(t,e,n){if(n.values[this.name])return e;if(t=this.eb.h(t,e)){var i=t.length;return this.f(1<i?new Re(t):t[0],n),e+i}return e},ta.prototype.f=function(t,e){e.values[this.name]=t},g(ea,ta),ea.prototype.f=function(t,e){for(var n=0;n<this.g.length;n++)e.values[this.g[n]]=t},g(na,Qo),na.prototype.b=function(t,e,n){var i=e;if(this.sf){if(t[e]!=_e)return i;if(++e==t.length)return i}var r=this.X[0].b(t,e,n);if(r==e)return i;for(e=r,i=1;i<this.X.length&&e<t.length&&(r=this.X[i].b(t,e,n))!=e;i++)e=r;return e},(n=ia.prototype).clone=function(){var t=new this.constructor;return t.Ab=this.Ab,t.f=this.f,t.b=this.b,t},n.Ue=function(t,e){this.Ab=t,this.f=e},n.Ic=function(){return this.error=!0,0},n.Se=function(t){return ra(this,t)},n.Bd=function(t){return ra(this,t)},n.rc=function(t){return ra(this,t)},n.ad=function(t){return ra(this,t)},n.$c=function(t){return ra(this,t)},n.Zc=function(t){return ra(this,t)},n.he=function(t){return ra(this,t)},n.bd=function(t){return ra(this,t)},n.Ub=function(t){return this.Ic(t.values),null},n.qc=function(){return this.error=!0,null},n.Xb=function(t){return ra(this,t)},n.Yc=function(){return this.error=!0,null},g(oa,ia),oa.prototype.Ic=function(t){for(var e=0,n=0;e<t.length;){var i=this.Ab[n].b(t,e,this);if(i>e)e=i,n=0;else if(++n==this.Ab.length){this.error=!0;break}}return e},g(aa,ia),aa.prototype.Ic=function(t){if(t.length>this.Ab.length||!t.length)return this.error=!0,0;for(var e=0;e<this.Ab.length;e++){for(var n=e;n>=t.length;)n=1==n?0:n-2;if(this.Ab[e].b(t,n,this)!=n+1)return this.error=!0,0}return t.length},g(sa,ia),sa.prototype.Ic=function(t){for(var e=t.length,n=0;n<t.length;n++)if(t[n]===_e){e=n;break}if(e>this.Ab.length||!t.length)return this.error=!0,0;for(n=0;n<this.Ab.length;n++){for(var i=n;i>=e;)i=1==i?0:i-2;var r;if(e+1<t.length)for(r=e+n+1;r>=t.length;)r-=r==e+2?1:2;else r=i;if(2!=this.Ab[n].b([t[i],t[r]],0,this))return this.error=!0,0}return t.length},g(ua,oa),ua.prototype.qc=function(t){for(var e={},n=0;n<t.values.length;n++){if(this.values={},t.values[n]instanceof ze)this.error=!0;else{t.values[n].fa(this);for(var i=this.values,r=h(this.f),o=r.next();!o.done;o=r.next()){var a=i[o=o.value]||this.b.l[o],s=e[o];s||(s=[],e[o]=s),s.push(a)}this.values["background-color"]&&n!=t.values.length-1&&(this.error=!0)}if(this.error)return null}for(var u in this.values={},e)this.values[u]="background-color"==u?e[u].pop():new ze(e[u]);return null},g(la,oa),la.prototype.Ue=function(t,e){oa.prototype.Ue.call(this,t,e),this.f.push("font-family","line-height","font-size")},la.prototype.Ic=function(t){var e=oa.prototype.Ic.call(this,t);if(e+2>t.length)return this.error=!0,e;this.error=!1;var n=this.b.g;if(!t[e].fa(n["font-size"]))return this.error=!0,e;if(this.values["font-size"]=t[e++],t[e]===_e){if(++e+2>t.length||!t[e].fa(n["line-height"]))return this.error=!0,e;this.values["line-height"]=t[e++]}var i=e==t.length-1?t[e]:new Re(t.slice(e,t.length));return i.fa(n["font-family"])?(this.values["font-family"]=i,t.length):(this.error=!0,e)},la.prototype.qc=function(t){if(t.values[0].fa(this),this.error)return null;for(var e=[this.values["font-family"]],n=1;n<t.values.length;n++)e.push(t.values[n]);return(t=new ze(e)).fa(this.b.g["font-family"])?this.values["font-family"]=t:this.error=!0,null},la.prototype.rc=function(t){if(t=this.b.f[t.name])for(var e in t)this.values[e]=t[e];else this.error=!0;return null};var ha={SIMPLE:oa,INSETS:aa,INSETS_SLASH:sa,COMMA:ua,FONT:la};function ca(){this.g={},this.B={},this.l={},this.b={},this.f={},this.h={},this.u=[],this.j=[]}function fa(t,e){var n;if(3==e.type)n=new Pe(e.L,e.text);else if(7==e.type)n=xr(e.text);else{if(1!=e.type)throw Error("unexpected replacement");n=Ie(e.text)}if(Vo(t)){var i,r=t.X[0].eb.f;for(i in r)r[i]=n;return t}throw Error("unexpected replacement")}function pa(t,e,n){for(var i=new Bo,r=0;r<e;r++)Ho(i,t.clone(),1);if(n==Number.POSITIVE_INFINITY)Ho(i,t,3);else for(r=e;r<n;r++)Ho(i,t.clone(),2);return i}function da(t){var e=new Bo,n=e.X.length;e.X.push(new Ro(t)),t=new zo(n,!0);var i=new zo(n,!1);return e.connect(e.match,n),e.g?(e.f.push(e.b.length),e.g=!1):e.error.push(e.b.length),e.b.push(i),e.match.push(e.b.length),e.b.push(t),e}function ba(t,e){var n;switch(t){case"COMMA":n=new Zo(e);break;case"SPACE":n=new Jo(e);break;default:n=new qo(t.toLowerCase(),e)}return da(n)}function ga(t){return!!t.match(/^[A-Z_0-9]+$/)}function va(t,e,n){var i=fr(e);if(0==i.type)return null;var r={"":!0};if(14==i.type){do{if(dr(e),1!=(i=fr(e)).type)throw Error("Prefix name expected");r[i.text]=!0,dr(e),i=fr(e)}while(16==i.type);if(15!=i.type)throw Error("']' expected");dr(e),i=fr(e)}if(1!=i.type)throw Error("Property name expected");if(2==n?"SHORTHANDS"==i.text:"DEFAULTS"==i.text)return dr(e),null;if(i=i.text,dr(e),2!=n){if(39!=fr(e).type)throw Error("'=' expected");ga(i)||(t.B[i]=r)}else if(18!=fr(e).type)throw Error("':' expected");return i}function ma(t,e){for(var n={},i=h(e),r=i.next();!r.done;r=i.next()){r=r.value;for(var o=(r=h((o=t.h[r])?o.f:[r])).next();!o.done;o=r.next()){o=o.value;var a=t.l[o];a?n[o]=a:C.b("Unknown property in makePropSet:",o)}}return n}function wa(t,e,n,i,r){var o="",a=e,s=(e=e.toLowerCase()).match(/^-([a-z]+)-([-a-z0-9]+)$/);if(s&&(o=s[1],e=s[2]),(s=t.B[e])&&s[o])if(o=t.g[e])(t=n===dn||n.ef()?n:n.fa(o))?r.Sb(e,t,i):r.kd(a,n);else if(e=t.h[e].clone(),n===dn)for(a=(n=h(e.f)).next();!a.done;a=n.next())r.Sb(a.value,dn,i);else{if(n.fa(e),e.error)i=!1;else{for(o=(t=h(e.f)).next();!o.done;o=t.next())o=o.value,r.Sb(o,e.values[o]||e.b.l[o],i);i=!0}i||r.kd(a,n)}else r.fe(a,n)}var ya=new Oi(function(){var t=oi("loadValidatorSet.load"),e=N("validation.txt",_),n=vr(e),i=new ca;return function(t){t.b.HASHCOLOR=da(new Ko(64,$o,$o)),t.b.POS_INT=da(new Ko(32,$o,$o)),t.b.POS_NUM=da(new Ko(16,$o,$o)),t.b.POS_PERCENTAGE=da(new Ko(8,$o,{"%":Te})),t.b.NEGATIVE=da(new Ko(256,$o,$o)),t.b.ZERO=da(new Ko(512,$o,$o)),t.b.ZERO_PERCENTAGE=da(new Ko(1024,$o,$o)),t.b.POS_LENGTH=da(new Ko(8,$o,{em:Te,ex:Te,ch:Te,rem:Te,vw:Te,vh:Te,vi:Te,vb:Te,vmin:Te,vmax:Te,pvw:Te,pvh:Te,pvi:Te,pvb:Te,pvmin:Te,pvmax:Te,cm:Te,mm:Te,in:Te,px:Te,pt:Te,pc:Te,q:Te})),t.b.POS_ANGLE=da(new Ko(8,$o,{deg:Te,grad:Te,rad:Te,turn:Te})),t.b.POS_TIME=da(new Ko(8,$o,{s:Te,ms:Te})),t.b.FREQUENCY=da(new Ko(8,$o,{Hz:Te,kHz:Te})),t.b.RESOLUTION=da(new Ko(8,$o,{dpi:Te,dpcm:Te,dppx:Te})),t.b.URI=da(new Ko(128,$o,$o)),t.b.IDENT=da(new Ko(4,$o,$o)),t.b.STRING=da(new Ko(2,$o,$o)),t.b.SLASH=da(new Ko(2048,$o,$o));var e={"font-family":Ie("sans-serif")};t.f.caption=e,t.f.icon=e,t.f.menu=e,t.f["message-box"]=e,t.f["small-caption"]=e,t.f["status-bar"]=e}(i),n.then(function(n){try{if(n.responseText){var r=new cr(n.responseText,null);for(function(t,e){for(var n={};;){var i=va(t,e,1);if(!i)break;n.ra=[];var r=[];n.bb="";var o=void 0;n.ab=!0,n.ig=t;for(var a=function(t){return function(){if(!t.ra.length)throw Error("No values");var e;if(1==t.ra.length)e=t.ra[0];else{var n=t.bb,i=t.ra;if(e=new Bo,"||"==n){for(n=0;n<i.length;n++){var r=new Bo;if(r.X.length)throw Error("invalid call");(o=new Ro(Xo)).b=2*n+1,r.X.push(o);var o=new zo(0,!0),a=new zo(0,!1);r.f.push(r.b.length),r.b.push(a),r.match.push(r.b.length),r.b.push(o),Ho(r,i[n],1),Uo(r,r.match,!1,n),Ho(e,r,n?4:1)}if((i=new Bo).X.length)throw Error("invalid call");for(Uo(i,i.match,!0,-1),Ho(i,e,3),e=[i.match,i.f,i.error],n=0;n<e.length;n++)Uo(i,e[n],!1,-1);e=i}else{switch(n){case" ":r=1;break;case"|":case"||":r=4;break;default:throw Error("unexpected op")}for(n=0;n<i.length;n++)Ho(e,i[n],n?r:1)}}return e}}(n),s=function(t){return function(e){if(t.ab)throw Error("'"+e+"': unexpected");if(t.bb&&t.bb!=e)throw Error("mixed operators: '"+e+"' and '"+t.bb+"'");t.bb=e,t.ab=!0}}(n),u=null;!u;)switch(dr(e),o=fr(e),o.type){case 1:if(n.ab||s(" "),ga(o.text)){var l=t.b[o.text];if(!l)throw Error("'"+o.text+"' unexpected");n.ra.push(l.clone())}else(l={})[o.text.toLowerCase()]=Ie(o.text),n.ra.push(da(new Ko(0,l,$o)));n.ab=!1;break;case 5:(l={})[""+o.L]=new Me(o.L),n.ra.push(da(new Ko(0,l,$o))),n.ab=!1;break;case 34:s("|");break;case 25:s("||");break;case 14:n.ab||s(" "),r.push({ra:n.ra,bb:n.bb,Nb:"["}),n.bb="",n.ra=[],n.ab=!0;break;case 6:n.ab||s(" "),r.push({ra:n.ra,bb:n.bb,Nb:"(",Pc:o.text}),n.bb="",n.ra=[],n.ab=!0;break;case 15:if(o=a(),"["!=(l=r.pop()).Nb)throw Error("']' unexpected");n.ra=l.ra,n.ra.push(o),n.bb=l.bb,n.ab=!1;break;case 11:if(o=a(),"("!=(l=r.pop()).Nb)throw Error("')' unexpected");n.ra=l.ra,n.ra.push(ba(l.Pc,o)),n.bb=l.bb,n.ab=!1;break;case 18:if(n.ab)throw Error("':' unexpected");dr(e),n.ra.push(fa(n.ra.pop(),fr(e)));break;case 22:if(n.ab)throw Error("'?' unexpected");n.ra.push(pa(n.ra.pop(),0,1));break;case 36:if(n.ab)throw Error("'*' unexpected");n.ra.push(pa(n.ra.pop(),0,Number.POSITIVE_INFINITY));break;case 23:if(n.ab)throw Error("'+' unexpected");n.ra.push(pa(n.ra.pop(),1,Number.POSITIVE_INFINITY));break;case 12:if(dr(e),5!=(o=fr(e)).type)throw Error("<int> expected");var h=l=o.L;if(dr(e),16==(o=fr(e)).type){if(dr(e),5!=(o=fr(e)).type)throw Error("<int> expected");h=o.L,dr(e),o=fr(e)}if(13!=o.type)throw Error("'}' expected");n.ra.push(pa(n.ra.pop(),l,h));break;case 17:if(u=a(),0<r.length)throw Error("unclosed '"+r.pop().Nb+"'");break;default:throw Error("unexpected token")}dr(e),ga(i)?t.b[i]=u:t.g[i]=1!=u.X.length||u.X[0].b?new Jo(u):u.X[0].eb,n={ra:n.ra,ig:n.ig,bb:n.bb,ab:n.ab}}}(i,r);;){var o=va(i,r,2);if(!o)break;for(n=[];;){if(dr(r),17==(b=fr(r)).type){dr(r);break}switch(b.type){case 1:n.push(Ie(b.text));break;case 4:n.push(new Fe(b.L));break;case 5:n.push(new Me(b.L));break;case 3:n.push(new Pe(b.L,b.text));break;default:throw Error("unexpected token")}}i.l[o]=1<n.length?new Re(n):n[0]}for(;;){var a=va(i,r,3);if(!a)break;var s,u=pr(r,1);1==u.type&&ha[u.text]?(s=new ha[u.text],dr(r)):s=new oa,s.b=i,o=!1,b=[],n=!1;for(var l=[],h=[];!o;)switch(dr(r),u=fr(r),u.type){case 1:if(i.g[u.text])b.push(new ta(s.b,u.text)),h.push(u.text);else{if(!(i.h[u.text]instanceof aa))throw Error("'"+u.text+"' is neither a simple property nor an inset shorthand");var f=i.h[u.text];b.push(new ea(f.b,f.f)),h.push.apply(h,[].concat(c(f.f)))}break;case 19:if(0<b.length||n)throw Error("unexpected slash");n=!0;break;case 14:l.push({sf:n,Ab:b}),b=[],n=!1;break;case 15:var p=new na(b,n),d=l.pop(),b=d.Ab;n=d.sf,b.push(p);break;case 17:o=!0,dr(r);break;default:throw Error("unexpected token")}s.Ue(b,h),i.h[a]=s}i.j=ma(i,["background"]),i.u=ma(i,"margin border padding columns column-gap column-rule column-fill".split(" "))}else C.error("Error: missing",e)}catch(t){C.error(t,"Error:")}xi(t,i)}),t.result()},"validatorFetcher"),xa={azimuth:!0,"border-collapse":!0,"border-spacing":!0,"caption-side":!0,"clip-rule":!0,color:!0,"color-interpolation":!0,"color-rendering":!0,cursor:!0,direction:!0,elevation:!0,"empty-cells":!0,fill:!0,"fill-opacity":!0,"fill-rule":!0,"font-kerning":!0,"font-size":!0,"font-size-adjust":!0,"font-family":!0,"font-feature-settings":!0,"font-style":!0,"font-stretch":!0,"font-variant":!0,"font-weight":!0,"glyph-orientation-vertical":!0,hyphens:!0,"hyphenate-character":!0,"hyphenate-limit-chars":!0,"hyphenate-limit-last":!0,"image-rendering":!0,"image-resolution":!0,"letter-spacing":!0,"line-break":!0,"line-height":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,marker:!0,"marker-end":!0,"marker-mid":!0,"marker-start":!0,orphans:!0,"overflow-wrap":!0,"paint-order":!0,"pointer-events":!0,"pitch-range":!0,quotes:!0,richness:!0,"ruby-align":!0,"ruby-position":!0,"speak-header":!0,"speak-numeral":!0,"speak-punctuation":!0,"speech-rate":!0,"shape-rendering":!0,stress:!0,stroke:!0,"stroke-dasharray":!0,"stroke-dashoffset":!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-miterlimit":!0,"stroke-opacity":!0,"stroke-width":!0,"tab-size":!0,"text-align":!0,"text-align-last":!0,"text-anchor":!0,"text-decoration-skip":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-combine-upright":!0,"text-indent":!0,"text-justify":!0,"text-rendering":!0,"text-size-adjust":!0,"text-transform":!0,"text-underline-position":!0,visibility:!0,"voice-family":!0,volume:!0,"white-space":!0,widows:!0,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"writing-mode":!0},Ea=["box-decoration-break","image-resolution","orphans","widows"];for(var Sa={"http://www.idpf.org/2007/ops":!0,"http://www.w3.org/1999/xhtml":!0,"http://www.w3.org/2000/svg":!0},ka="margin-% padding-% border-%-width border-%-style border-%-color %".split(" "),Ca=["max-%","min-%","%"],Ta=["left","right","top","bottom"],Aa={width:!0,height:!0,"max-width":!0,"max-height":!0,"min-width":!0,"min-height":!0},_a=0;_a<ka.length;_a++)for(var Na=0;Na<Ta.length;Na++){var Oa=ka[_a].replace("%",Ta[Na]);Aa[Oa]=!0}function Ia(t,e){for(var n={},i=h(ka),r=i.next();!r.done;r=i.next()){var o;r=r.value;for(o in t){var a=r.replace("%",o),s=r.replace("%",t[o]);n[a]=s,n[s]=a}}for(o=(i=h(Ca)).next();!o.done;o=i.next())for(var u in o=o.value,e)r=o.replace("%",u),a=o.replace("%",e[u]),n[r]=a,n[a]=r;return n}var Pa=Ia({"block-start":"right","block-end":"left","inline-start":"top","inline-end":"bottom"},{"block-size":"width","inline-size":"height"}),Fa=Ia({"block-start":"top","block-end":"bottom","inline-start":"left","inline-end":"right"},{"block-size":"height","inline-size":"width"}),Ma=Ia({"block-start":"right","block-end":"left","inline-start":"bottom","inline-end":"top"},{"block-size":"width","inline-size":"height"}),Da=Ia({"block-start":"top","block-end":"bottom","inline-start":"right","inline-end":"left"},{"block-size":"height","inline-size":"width"});function La(t,e){this.value=t,this.cb=e}function ja(t,e,n){La.call(this,t,e),this.ia=n}function Ra(t,e,n){return(!e||n.cb>e.cb)&&n.zf(t)?n.Qf():e}(n=La.prototype).Qf=function(){return this},n.Pd=function(t){return(t=this.value.fa(t))===this.value?this:new La(t,this.cb)},n.Sf=function(t){return t?new La(this.value,this.cb+t):this},n.evaluate=function(t,e){return oo(t,this.value,e)},n.zf=function(){return!0},g(ja,La),ja.prototype.Qf=function(){return new La(this.value,this.cb)},ja.prototype.Pd=function(t){return(t=this.value.fa(t))===this.value?this:new ja(t,this.cb,this.ia)},ja.prototype.Sf=function(t){return t?new ja(this.value,this.cb+t,this.ia):this},ja.prototype.zf=function(t){return!!this.ia.evaluate(t)};var za={"region-id":!0,"fragment-selector-id":!0};function Ba(t){return"_"!=t.charAt(0)&&!za[t]}function Ua(t,e,n){n?t[e]=n:delete t[e]}function Va(t,e){var n=t[e];return n||(n={},t[e]=n),n}function Ha(t,e){var n=t[e];return n||(n=[],t[e]=n),n}function $a(t,e,n,i,r,o,a){for(var s in[{id:r,mg:"_pseudos"},{id:o,mg:"_regions"}].forEach(function(t){if(t.id){var n=Va(e,t.mg);(e=n[t.id])||(e={},n[t.id]=e)}}),a&&(r=function(t){var e=t._viewConditionalStyles;return e||(e=[],t._viewConditionalStyles=e),e}(e),e={},r.push({Mg:e,Cg:a})),n)"_"!=s.charAt(0)&&(za[s]?(a=n[s],r=Ha(e,s),Array.prototype.push.apply(r,a)):Ua(e,s,Ra(t,e[s],n[s].Sf(i))))}function Ga(t,e){if(0<t.length){t.sort(function(t,e){return e.f()-t.f()});for(var n=null,i=t.length-1;0<=i;i--)(n=t[i]).b=e,e=n;return n}return e}function Ka(t,e){this.g=t,this.f=e,this.b=""}function Xa(t){var e;t:switch((t=t.g["font-size"].value).ka.toLowerCase()){case"px":case"in":case"pt":case"pc":case"cm":case"mm":case"q":e=!0;break t;default:e=!1}if(!e)throw Error("Unexpected state");return t.L*Nt[t.ka]}function Wa(t,e,n){var i=t.ka,r=t.L;return"em"===i||"ex"===i?new Pe(Nt[i]/Nt.em*r*e,"px"):"rem"===i?new Pe(r*n.fontSize(),"px"):t}function Ya(){}function Ja(t){this.b=t}function Za(t){this.b=t}function qa(t,e,n,i,r){this.style=t,this.ba=e,this.b=n,this.h=i,this.j=r}function Qa(){this.b=null}function ts(t){this.b=null,this.h=t}function es(t){this.b=null,this.id=t}function ns(t){this.b=null,this.localName=t}function is(t,e){this.b=null,this.h=t,this.localName=e}function rs(t){this.b=null,this.h=t}function os(t){this.b=null,this.h=t}function as(t,e){this.b=null,this.h=t,this.name=e}function ss(t,e,n){this.b=null,this.h=t,this.name=e,this.value=n}function us(t,e){this.b=null,this.h=t,this.name=e}function ls(t,e,n){this.b=null,this.j=t,this.name=e,this.h=n}function hs(t){this.b=null,this.h=t}function cs(){this.b=null}function fs(){this.b=null}function ps(t,e){this.b=null,this.h=t,this.Nb=e}function ds(t,e,n){return t-=n,e?!(t%e)&&0<=t/e:!t}function bs(t,e){ps.call(this,t,e)}function gs(t,e){ps.call(this,t,e)}function vs(t,e){ps.call(this,t,e)}function ms(t,e){ps.call(this,t,e)}function ws(){this.b=null}function ys(){this.b=null}function xs(){this.b=null}function Es(){this.b=null}function Ss(t){this.b=null,this.ia=t}function ks(){this.b=!1}function Cs(t){this.b=null,this.h=new ks,this.j=Ga(t,this.h)}function Ts(t,e,n){this.ia=t,this.b=e,this.j=n}function As(t,e){var n=t.ia,i=t.j;e.ca[n]=(e.ca[n]||0)+1,i&&(e.B[n]?e.B[n].push(i):e.B[n]=[i])}function _s(t,e){!function(t,e,n){t.ca[e]--,t.B[e]&&(t.B[e]=t.B[e].filter(function(t){return t!==n}),t.B[e].length||delete t.B[e])}(e,t.ia,t.j)}function Ns(t,e,n){Ts.call(this,t,e,n)}function Os(t,e,n){Ts.call(this,t,e,n)}function Is(t,e,n){Ts.call(this,t,e,n),this.h=!1}function Ps(t,e,n){Ts.call(this,t,e,n),this.h=!1}function Fs(t,e){this.b=t,this.element=e}function Ms(t){this.lang=t}function Ds(t){this.b=t}function Ls(t){this.element=t}function js(t,e){switch(e){case"url":return new Le(t||"about:invalid");default:return new Ne(t||"")}}function Rs(t,e,n){this.f=t,this.element=e,this.b=n}g(Ka,Se),Ka.prototype.ad=function(t){if("font-size"===this.b){var e=Xa(this),n=this.f,i=(t=Wa(t,e,n)).ka,r=t.L;return"px"===i?t:new Pe("%"===i?r/100*e:r*Ft(n,i,!1),"px")}return"em"==t.ka||"ex"==t.ka||"rem"==t.ka?Wa(t,Xa(this),this.f):"%"==t.ka?"line-height"===this.b?t:(e=this.b.match(/height|^(top|bottom)$/)?"vh":"vw",new Pe(t.L,e)):t},Ka.prototype.Yc=function(t){return"font-size"==this.b?oo(this.f,t,this.b).fa(this):t},Ya.prototype.apply=function(){},Ya.prototype.l=function(t){return new Za([this,t])},Ya.prototype.clone=function(){return this},g(Ja,Ya),Ja.prototype.apply=function(t){var e=this.b.g(t);t.h[t.h.length-1].push(e)},g(Za,Ya),Za.prototype.apply=function(t){for(var e=0;e<this.b.length;e++)this.b[e].apply(t)},Za.prototype.l=function(t){return this.b.push(t),this},Za.prototype.clone=function(){return new Za([].concat(this.b))},g(qa,Ya),qa.prototype.apply=function(t){$a(t.l,t.F,this.style,this.ba,this.b,this.h,qs(t,this.j))},g(Qa,Ya),Qa.prototype.apply=function(t){this.b.apply(t)},Qa.prototype.f=function(){return 0},Qa.prototype.g=function(){return!1},g(ts,Qa),ts.prototype.apply=function(t){t.G.includes(this.h)&&this.b.apply(t)},ts.prototype.f=function(){return 10},ts.prototype.g=function(t){return this.b&&Js(t.Pa,this.h,this.b),!0},g(es,Qa),es.prototype.apply=function(t){t.Y!=this.id&&t.la!=this.id||this.b.apply(t)},es.prototype.f=function(){return 11},es.prototype.g=function(t){return this.b&&Js(t.g,this.id,this.b),!0},g(ns,Qa),ns.prototype.apply=function(t){t.f==this.localName&&this.b.apply(t)},ns.prototype.f=function(){return 8},ns.prototype.g=function(t){return this.b&&Js(t.Ad,this.localName,this.b),!0},g(is,Qa),is.prototype.apply=function(t){t.f==this.localName&&t.j==this.h&&this.b.apply(t)},is.prototype.f=function(){return 8},is.prototype.g=function(t){if(this.b){var e=t.b[this.h];e||(e="ns"+t.j+++":",t.b[this.h]=e),Js(t.h,e+this.localName,this.b)}return!0},g(rs,Qa),rs.prototype.apply=function(t){var e=t.b;if(e&&"a"==t.f){var n=e.getAttribute("href");n&&n.match(/^#/)&&(e=e.ownerDocument.getElementById(n.substring(1)))&&(e=e.getAttributeNS("http://www.idpf.org/2007/ops","type"))&&e.match(this.h)&&this.b.apply(t)}},g(os,Qa),os.prototype.apply=function(t){t.j==this.h&&this.b.apply(t)},g(as,Qa),as.prototype.apply=function(t){t.b&&t.b.hasAttributeNS(this.h,this.name)&&this.b.apply(t)},g(ss,Qa),ss.prototype.apply=function(t){t.b&&t.b.getAttributeNS(this.h,this.name)==this.value&&this.b.apply(t)},ss.prototype.f=function(){return"type"==this.name&&"http://www.idpf.org/2007/ops"==this.h?9:0},ss.prototype.g=function(t){return"type"==this.name&&"http://www.idpf.org/2007/ops"==this.h&&(this.b&&Js(t.f,this.value,this.b),!0)},g(us,Qa),us.prototype.apply=function(t){if(t.b){var e=t.b.getAttributeNS(this.h,this.name);e&&Sa[e]&&this.b.apply(t)}},us.prototype.f=function(){return 0},us.prototype.g=function(){return!1},g(ls,Qa),ls.prototype.apply=function(t){if(t.b){var e=t.b.getAttributeNS(this.j,this.name);e&&e.match(this.h)&&this.b.apply(t)}},g(hs,Qa),hs.prototype.apply=function(t){t.lang.match(this.h)&&this.b.apply(t)},g(cs,Qa),cs.prototype.apply=function(t){t.ob&&this.b.apply(t)},cs.prototype.f=function(){return 6},g(fs,Qa),fs.prototype.apply=function(t){t.ta&&this.b.apply(t)},fs.prototype.f=function(){return 12},g(ps,Qa),g(bs,ps),bs.prototype.apply=function(t){ds(t.Za,this.h,this.Nb)&&this.b.apply(t)},bs.prototype.f=function(){return 5},g(gs,ps),gs.prototype.apply=function(t){ds(t.Cb[t.j][t.f],this.h,this.Nb)&&this.b.apply(t)},gs.prototype.f=function(){return 5},g(vs,ps),vs.prototype.apply=function(t){var e=t.S;null===e&&(e=t.S=t.b.parentNode.childElementCount-t.Za+1),ds(e,this.h,this.Nb)&&this.b.apply(t)},vs.prototype.f=function(){return 4},g(ms,ps),ms.prototype.apply=function(t){var e=t.yb;if(!e[t.j]){var n=t.b;do{var i=n.namespaceURI,r=n.localName,o=e[i];o||(o=e[i]={}),o[r]=(o[r]||0)+1}while(n=n.nextElementSibling)}ds(e[t.j][t.f],this.h,this.Nb)&&this.b.apply(t)},ms.prototype.f=function(){return 4},g(ws,Qa),ws.prototype.apply=function(t){for(var e=t.b.firstChild;e;){switch(e.nodeType){case Node.ELEMENT_NODE:return;case Node.TEXT_NODE:if(0<e.length)return}e=e.nextSibling}this.b.apply(t)},ws.prototype.f=function(){return 4},g(ys,Qa),ys.prototype.apply=function(t){!1===t.b.disabled&&this.b.apply(t)},ys.prototype.f=function(){return 5},g(xs,Qa),xs.prototype.apply=function(t){!0===t.b.disabled&&this.b.apply(t)},xs.prototype.f=function(){return 5},g(Es,Qa),Es.prototype.apply=function(t){var e=t.b;!0!==e.selected&&!0!==e.checked||this.b.apply(t)},Es.prototype.f=function(){return 5},g(Ss,Qa),Ss.prototype.apply=function(t){if(t.ca[this.ia])try{t.fb.push(this.ia),this.b.apply(t)}finally{t.fb.pop()}},Ss.prototype.f=function(){return 5},g(ks,Ya),ks.prototype.apply=function(){this.b=!0},ks.prototype.clone=function(){var t=new ks;return t.b=this.b,t},g(Cs,Qa),Cs.prototype.apply=function(t){this.j.apply(t),this.h.b||this.b.apply(t),this.h.b=!1},Cs.prototype.f=function(){return this.j.f()},g(Ns,Ts),Ns.prototype.g=function(t){return new Ns(this.ia,this.b,qs(t,this.b))},Ns.prototype.push=function(t,e){return e||As(this,t),!1},Ns.prototype.f=function(t,e){return!e&&(_s(this,t),!0)},g(Os,Ts),Os.prototype.g=function(t){return new Os(this.ia,this.b,qs(t,this.b))},Os.prototype.push=function(t,e){return e?1==e&&_s(this,t):As(this,t),!1},Os.prototype.f=function(t,e){return e?(1==e&&As(this,t),!1):(_s(this,t),!0)},g(Is,Ts),Is.prototype.g=function(t){return new Is(this.ia,this.b,qs(t,this.b))},Is.prototype.push=function(t){return!!this.h&&(_s(this,t),!0)},Is.prototype.f=function(t,e){return this.h?(_s(this,t),!0):(e||(this.h=!0,As(this,t)),!1)},g(Ps,Ts),Ps.prototype.g=function(t){return new Ps(this.ia,this.b,qs(t,this.b))},Ps.prototype.push=function(t,e){return this.h&&(-1==e?As(this,t):e||_s(this,t)),!1},Ps.prototype.f=function(t,e){if(this.h){if(-1==e)return _s(this,t),!0;e||As(this,t)}else e||(this.h=!0,As(this,t));return!1},Fs.prototype.g=function(){return this},Fs.prototype.push=function(){return!1},Fs.prototype.f=function(t,e){return!e&&(ou(t,this.b,this.element),!0)},Ms.prototype.g=function(){return this},Ms.prototype.push=function(){return!1},Ms.prototype.f=function(t,e){return!e&&(t.lang=this.lang,!0)},Ds.prototype.g=function(){return this},Ds.prototype.push=function(){return!1},Ds.prototype.f=function(t,e){return!e&&(t.J=this.b,!0)},g(Ls,Se),Ls.prototype.Xb=function(t){if("attr"!==t.name)return Se.prototype.Xb.call(this,t);var e,n="string";return t.values[0]instanceof Re?(2<=t.values[0].values.length&&(n=t.values[0].values[1].stringValue()),e=t.values[0].values[0].stringValue()):e=t.values[0].stringValue(),t=1<t.values.length?js(t.values[1].stringValue(),n):js(null,n),this.element&&this.element.hasAttribute(e)?js(this.element.getAttribute(e),n):t},g(Rs,Se),Rs.prototype.rc=function(t){var e=this.f,n=e.J,i=Math.floor(n.length/2)-1;switch(t.name){case"open-quote":t=n[2*Math.min(i,e.D)],e.D++;break;case"close-quote":return 0<e.D&&e.D--,n[2*Math.min(i,e.D)+1];case"no-open-quote":return e.D++,new Ne("");case"no-close-quote":return 0<e.D&&e.D--,new Ne("")}return t};var zs={roman:[4999,1e3,"M",900,"CM",500,"D",400,"CD",100,"C",90,"XC",50,"L",40,"XL",10,"X",9,"IX",5,"V",4,"IV",1,"I"],armenian:[9999,9e3,"",8e3,"",7e3,"",6e3,"",5e3,"",4e3,"",3e3,"",2e3,"",1e3,"",900,"",800,"",700,"",600,"",500,"",400,"",300,"",200,"",100,"",90,"",80,"",70,"",60,"",50,"",40,"",30,"",20,"",10,"",9,"",8,"",7,"",6,"",5,"",4,"",3,"",2,"",1,""],georgian:[19999,1e4,"",9e3,"",8e3,"",7e3,"",6e3,"",5e3,"",4e3,"",3e3,"",2e3,"",1e3,"",900,"",800,"",700,"",600,"",500,"",400,"",300,"",200,"",100,"",90,"",80,"",70,"",60,"",50,"",40,"",30,"",20,"",10,"",9,"",8,"",7,"",6,"",5,"",4,"",3,"",2,"",1,""],hebrew:[999,400,"",300,"",200,"",100,"",90,"",80,"",70,"",60,"",50,"",40,"",30,"",20,"",19,"",18,"",17,"",16,"",15,"",10,"",9,"",8,"",7,"",6,"",5,"",4,"",3,"",2,"",1,""]},Bs={latin:"a-z",alpha:"a-z",greek:"--",russian:"---"},Us={square:"",disc:"",circle:"",none:""},Vs={ph:!1,fd:"",Vd:"",Fg:""};function Hs(t,e){var n=e[0].toString(),i=1<e.length?e[1].stringValue():"decimal",r=t.f.g[n];return r&&r.length?new Ne(t.format(r&&r.length&&r[r.length-1]||0,i)):new Re([n=new Ue(function(t,e,n){var i=new he(t.f,function(){var i=t.b.b[e];return n(i&&i.length?i[i.length-1]:null)},"page-counter-"+e);return Qf(t.b,e,function(t){return n(t[0])},i),i}(t.b,n,function(e){return t.format(e||0,i)}))])}function $s(t,e){var n=e[0].toString(),i=e[1].stringValue(),r=2<e.length?e[2].stringValue():"decimal",o=t.f.g[n],a=new U;if(o&&o.length)for(var s=0;s<o.length;s++)0<s&&a.append(i),a.append(t.format(o[s],r));return new Re([n=new Ue(function(t,e,n){var i=new he(t.f,function(){return n(t.b.b[e]||[])},"page-counters-"+e);return Qf(t.b,e,n,i),i}(t.b,n,function(e){var n=[];if(e.length)for(var o=0;o<e.length;o++)n.push(t.format(e[o],r));return(e=a.toString()).length&&n.push(e),n.length?n.join(i):t.format(0,r)}))])}function Gs(t,e){var n=(n=e[0])instanceof Le?n.url:n.stringValue(),i=e[1].toString(),r=2<e.length?e[2].stringValue():"decimal";return new Re([n=new Ue(function(t,e,n,i){var r=Xf(e),o=Wf(t,e),a=Yf(t,r,o,!1);return a&&a[n]?(e=a[n],new pe(t.j,i(e[e.length-1]||null))):new he(t.f,function(){if(a=Yf(t,r,o,!0)){if(a[n]){var e=a[n];return i(e[e.length-1]||null)}return(e=t.b.j.g[o]?t.b.b:t.b.B[o]||null)?(Zf(t.b,o),e[n]?(e=e[n],i(e[e.length-1]||null)):i(0)):(qf(t.b,o,!1),"??")}return qf(t.b,o,!1),"??"},"target-counter-"+n+"-of-"+e)}(t.b,n,i,function(e){return t.format(e||0,r)}))])}function Ks(t,e){var n=(n=e[0])instanceof Le?n.url:n.stringValue(),i=e[1].toString(),r=e[2].stringValue(),o=3<e.length?e[3].stringValue():"decimal";return new Re([n=new Ue(function(t,e,n,i){var r=Xf(e),o=Wf(t,e);return new he(t.f,function(){var e=t.b.j.g[o]?t.b.b:t.b.B[o]||null;if(e){Zf(t.b,o);var e=e[n]||[],a=Yf(t,r,o,!0)[n]||[];return i(e.concat(a))}return qf(t.b,o,!1),"??"},"target-counters-"+n+"-of-"+e)}(t.b,n,i,function(e){return(e=e.map(function(e){return t.format(e,o)})).length?e.join(r):t.format(0,o)}))])}Rs.prototype.format=function(t,e){var n,i=!1,r=!1;if((n=e.match(/^upper-(.*)/))?(i=!0,e=n[1]):(n=e.match(/^lower-(.*)/))&&(r=!0,e=n[1]),n="",zs[e])t:{var o=t;if(o>(n=zs[e])[0]||0>=o||o!=Math.round(o))n="";else{for(var a="",s=1;s<n.length;s+=2){var u=n[s],l=Math.floor(o/u);if(20<l){n="";break t}for(o-=l*u;0<l;)a+=n[s+1],l--}n=a}}else if(Bs[e])if(0>=(n=t)||n!=Math.round(n))n="";else{for(a=Bs[e],o=[],s=0;s<a.length;)if("-"==a.substr(s+1,1))for(l=a.charCodeAt(s),u=a.charCodeAt(s+2),s+=3;l<=u;l++)o.push(String.fromCharCode(l));else o.push(a.substr(s++,1));a="";do{a=o[s=--n%o.length]+a,n=(n-s)/o.length}while(0<n);n=a}else null!=Us[e]?n=Us[e]:"decimal-leading-zero"==e?1==(n=""+t).length&&(n="0"+n):n="cjk-ideographic"==e||"trad-chinese-informal"==e?function(t){if(9999<t||-9999>t)return""+t;if(!t)return Vs.fd.charAt(0);var e=new U;if(0>t&&(e.append(Vs.Fg),t=-t),10>t)e.append(Vs.fd.charAt(t));else if(Vs.qh&&19>=t)e.append(Vs.Vd.charAt(0)),t&&e.append(Vs.Vd.charAt(t-10));else{var n=Math.floor(t/1e3);n&&(e.append(Vs.fd.charAt(n)),e.append(Vs.Vd.charAt(2))),(n=Math.floor(t/100)%10)&&(e.append(Vs.fd.charAt(n)),e.append(Vs.Vd.charAt(1))),(n=Math.floor(t/10)%10)&&(e.append(Vs.fd.charAt(n)),e.append(Vs.Vd.charAt(0))),(t%=10)&&e.append(Vs.fd.charAt(t))}return e.toString()}(t):""+t;return i?n.toUpperCase():r?n.toLowerCase():n},Rs.prototype.Xb=function(t){switch(t.name){case"counter":if(2>=t.values.length)return Hs(this,t.values);break;case"counters":if(3>=t.values.length)return $s(this,t.values);break;case"target-counter":if(3>=t.values.length)return Gs(this,t.values);break;case"target-counters":if(4>=t.values.length)return Ks(this,t.values)}return C.b("E_CSS_CONTENT_PROP:",t.toString()),new Ne("")};var Xs=1/1048576;function Ws(t,e){for(var n in t)e[n]=t[n].clone()}function Ys(){this.j=0,this.b={},this.Ad={},this.h={},this.f={},this.Pa={},this.g={},this.od={},this.order=0}function Js(t,e,n){var i=t[e];i&&(n=i.l(n)),t[e]=n}function Zs(t,e,n,i){this.u=t,this.l=e,this.Zb=n,this.xb=i,this.h=[[],[]],this.ca={},this.G=this.F=this.ua=this.b=null,this.Ba=this.la=this.Y=this.j=this.f="",this.Z=this.N=null,this.ta=this.ob=!0,this.g={},this.I=[{}],this.J=[new Ne(""),new Ne(""),new Ne(""),new Ne("")],this.D=0,this.lang="",this.Mb=[0],this.Za=0,this.sa=[{}],this.Cb=this.sa[0],this.S=null,this.Lb=[this.S],this.Jb=[{}],this.yb=this.sa[0],this.B={},this.fb=[],this.Kb=[]}function qs(t,e){var n=null;e&&(n=function(t,e){var n=e.split("_");return"NFS"==n[0]?new rm(t,parseInt(n[1],10),parseInt(n[2],10)):(w("unknown view condition. condition="+e),null)}(t.ua,e));var i=t.fb.map(function(e){return(e=t.B[e])&&0<e.length?1===e.length?e[0]:new om([].concat(e)):null}).filter(function(t){return t});return 0>=i.length?n:n?new am([n].concat(i)):1===i.length?i[0]:new am(i)}function Qs(t,e,n){(e=e[n])&&e.apply(t)}Ys.prototype.clone=function(){var t=new Ys;for(var e in t.j=this.j,this.b)t.b[e]=this.b[e];return Ws(this.Ad,t.Ad),Ws(this.h,t.h),Ws(this.f,t.f),Ws(this.Pa,t.Pa),Ws(this.g,t.g),Ws(this.od,t.od),t.order=this.order,t},Ys.prototype.nf=function(){return this.order+=Xs};var tu=[];function eu(t,e,n,i){t.b=null,t.ua=null,t.F=i,t.j="",t.f="",t.Y="",t.la="",t.G=e,t.Ba="",t.N=tu,t.Z=n,lu(t)}function nu(t,e,n){t.g[e]?t.g[e].push(n):t.g[e]=[n],(n=t.I[t.I.length-1])||(n={},t.I[t.I.length-1]=n),n[e]=!0}function iu(t,e){var n=bn,i=e.display;i&&(n=i.evaluate(t.l));var r=null,o=i=null,a=e["counter-reset"];if(a&&(a=a.evaluate(t.l))&&(r=Lo(a,!0)),(a=e["counter-set"])&&(a=a.evaluate(t.l))&&(o=Lo(a,!1)),(a=e["counter-increment"])&&(a=a.evaluate(t.l))&&(i=Lo(a,!1)),"ol"!=t.f&&"ul"!=t.f||"http://www.w3.org/1999/xhtml"!=t.j||(r||(r={}),r["ua-list-item"]=0),n===En&&(i||(i={}),i["ua-list-item"]=1),r)for(var s in r)nu(t,s,r[s]);if(o)for(var u in o)t.g[u]?(s=t.g[u])[s.length-1]=o[u]:nu(t,u,o[u]);if(i)for(var l in i)t.g[l]||nu(t,l,0),(s=t.g[l])[s.length-1]+=i[l];n===En&&(n=t.g["ua-list-item"],e["ua-list-item-count"]=new La(new Fe(n[n.length-1]),0)),t.I.push(null)}function ru(t){var e=t.I.pop();if(e)for(var n in e)(e=t.g[n])&&(1==e.length?delete t.g[n]:e.pop())}function ou(t,e,n){iu(t,e),e.content&&(e.content=e.content.Pd(new Rs(t,n,t.xb))),ru(t)}var au="before transclusion-before footnote-call footnote-marker inner first-letter first-line  transclusion-after after".split(" ");function su(t,e,n,i){t.Kb.push(e),t.Z=null,t.b=e,t.ua=i,t.F=n,t.j=e.namespaceURI,t.f=e.localName,i=t.u.b[t.j],t.Ba=i?i+t.f:"",t.Y=e.getAttribute("id"),t.la=e.getAttributeNS("http://www.w3.org/XML/1998/namespace","id"),(i=e.getAttribute("class"))?t.G=i.split(/\s+/):t.G=tu,(i=e.getAttributeNS("http://www.idpf.org/2007/ops","type"))?t.N=i.split(/\s+/):t.N=tu,"style"==t.f&&"http://www.gribuser.ru/xml/fictionbook/2.0"==t.j&&(t.G=[e.getAttribute("name")||""]),(i=B(e))&&(t.h[t.h.length-1].push(new Ms(t.lang)),t.lang=i.toLowerCase()),i=t.ta;var r=t.Mb;t.Za=++r[r.length-1],r.push(0);r=t.sa;var o=t.Cb=r[r.length-1],a=o[t.j];if(a||(a=o[t.j]={}),a[t.f]=(a[t.f]||0)+1,r.push({}),null!==(r=t.Lb)[r.length-1]?t.S=--r[r.length-1]:t.S=null,r.push(null),r=t.Jb,(o=t.yb=r[r.length-1])&&o[t.j]&&o[t.j][t.f]--,r.push({}),lu(t),function(t,e){var n,i=new Ls(e),r=t.F,o=r._pseudos;for(n in o)uu(i,o[n]);uu(i,r)}(t,e),r=n.quotes,n=null,r&&(r=r.evaluate(t.l))&&(n=new Ds(t.J),r===kn?t.J=[new Ne(""),new Ne("")]:r instanceof Re&&(t.J=r.values)),iu(t,t.F),r=t.Y||t.la||e.getAttribute("name")||"",i||r){var s={};Object.keys(t.g).forEach(function(t){s[t]=Array.from(this.g[t])},t),function(t,e,n){e=t.b.J.Re(e,t.f),t.b.l[e]=n}(t.Zb,r,s)}if(i=t.F._pseudos)for(r=!0,a=(o=h(au)).next();!a.done;a=o.next())(a=a.value)||(r=!1),(a=i[a])&&(r?ou(t,a,e):t.h[t.h.length-2].push(new Fs(a,e)));n&&t.h[t.h.length-2].push(n)}function uu(t,e){for(var n in e)Ba(n)&&(e[n]=e[n].Pd(t))}function lu(t){var e;for(e=0;e<t.G.length;e++)Qs(t,t.u.Pa,t.G[e]);for(e=0;e<t.N.length;e++)Qs(t,t.u.f,t.N[e]);Qs(t,t.u.g,t.Y),Qs(t,t.u.Ad,t.f),""!=t.f&&Qs(t,t.u.Ad,"*"),Qs(t,t.u.h,t.Ba),null!==t.Z&&(Qs(t,t.u.od,t.Z),Qs(t,t.u.od,"*")),t.b=null,t.h.push([]);for(var n=1;-1<=n;--n){var i=t.h[t.h.length-n-2];for(e=0;e<i.length;)i[e].push(t,n)?i.splice(e,1):e++}t.ob=!0,t.ta=!1}function hu(t){for(var e=1;-1<=e;--e)for(var n=t.h[t.h.length-e-2],i=0;i<n.length;)n[i].f(t,e)?n.splice(i,1):i++;t.h.pop(),t.ob=!1}var cu=null;function fu(t,e,n,i,r,o,a){Ar.call(this,t,e,a),this.b=null,this.ba=0,this.h=this.mb=null,this.D=!1,this.ia=n,this.l=i?i.l:cu?cu.clone():new Ys,this.G=r,this.B=o,this.u=0,this.j=null}function pu(t,e){var n=Ga(t.b,e);n!==e&&n.g(t.l)||t.Uf(n)}g(fu,_r),fu.prototype.Uf=function(t){Js(this.l.Ad,"*",t)},fu.prototype.Wb=function(t,e){(e||t)&&(this.ba+=1,e&&t?this.b.push(new is(t,e.toLowerCase())):e?this.b.push(new ns(e.toLowerCase())):this.b.push(new os(t)))},fu.prototype.oe=function(t){this.h?(C.b("::"+this.h,"followed by ."+t),this.b.push(new Ss(""))):(this.ba+=256,this.b.push(new ts(t)))};var du={"nth-child":bs,"nth-of-type":gs,"nth-last-child":vs,"nth-last-of-type":ms};fu.prototype.qd=function(t,e){if(this.h)C.b("::"+this.h,"followed by :"+t),this.b.push(new Ss(""));else{switch(t.toLowerCase()){case"enabled":this.b.push(new ys);break;case"disabled":this.b.push(new xs);break;case"checked":this.b.push(new Es);break;case"root":this.b.push(new fs);break;case"link":this.b.push(new ns("a")),this.b.push(new as("","href"));break;case"-adapt-href-epub-type":case"href-epub-type":if(e&&1==e.length&&"string"==typeof e[0]){var n=new RegExp("(^|s)"+X(e[0])+"($|s)");this.b.push(new rs(n))}else this.b.push(new Ss(""));break;case"-adapt-footnote-content":case"footnote-content":this.D=!0;break;case"visited":case"active":case"hover":case"focus":this.b.push(new Ss(""));break;case"lang":e&&1==e.length&&"string"==typeof e[0]?this.b.push(new hs(new RegExp("^"+X(e[0].toLowerCase())+"($|-)"))):this.b.push(new Ss(""));break;case"nth-child":case"nth-last-child":case"nth-of-type":case"nth-last-of-type":n=du[t.toLowerCase()],e&&2==e.length?this.b.push(new n(e[0],e[1])):this.b.push(new Ss(""));break;case"first-child":this.b.push(new cs);break;case"last-child":this.b.push(new vs(0,1));break;case"first-of-type":this.b.push(new gs(0,1));break;case"last-of-type":this.b.push(new ms(0,1));break;case"only-child":this.b.push(new cs),this.b.push(new vs(0,1));break;case"only-of-type":this.b.push(new gs(0,1)),this.b.push(new ms(0,1));break;case"empty":this.b.push(new ws);break;case"before":case"after":case"first-line":case"first-letter":return void this.rd(t,e);default:C.b("unknown pseudo-class selector: "+t),this.b.push(new Ss(""))}this.ba+=256}},fu.prototype.rd=function(t,e){switch(t){case"before":case"after":case"first-line":case"first-letter":case"footnote-call":case"footnote-marker":case"inner":case"after-if-continues":this.h?(C.b("Double pseudoelement ::"+this.h+"::"+t),this.b.push(new Ss(""))):this.h=t;break;case"first-n-lines":if(e&&1==e.length&&"number"==typeof e[0]){var n=Math.round(e[0]);if(0<n&&n==e[0]){this.h?(C.b("Double pseudoelement ::"+this.h+"::"+t),this.b.push(new Ss(""))):this.h="first-"+n+"-lines";break}}case"nth-fragment":e&&2==e.length?this.j="NFS_"+e[0]+"_"+e[1]:this.b.push(new Ss(""));break;default:C.b("Unrecognized pseudoelement: ::"+t),this.b.push(new Ss(""))}this.ba+=1},fu.prototype.ze=function(t){this.ba+=65536,this.b.push(new es(t))},fu.prototype.Hd=function(t,e,n,i){var r;switch(this.ba+=256,e=e.toLowerCase(),i=i||"",n){case 0:r=new as(t,e);break;case 39:r=new ss(t,e,i);break;case 45:r=!i||i.match(/\s/)?new Ss(""):new ls(t,e,new RegExp("(^|\\s)"+X(i)+"($|\\s)"));break;case 44:r=new ls(t,e,new RegExp("^"+X(i)+"($|-)"));break;case 43:r=i?new ls(t,e,new RegExp("^"+X(i))):new Ss("");break;case 42:r=i?new ls(t,e,new RegExp(X(i)+"$")):new Ss("");break;case 46:r=i?new ls(t,e,new RegExp(X(i))):new Ss("");break;case 50:"supported"==i?r=new us(t,e):(C.b("Unsupported :: attr selector op:",i),r=new Ss(""));break;default:C.b("Unsupported attr selector:",n),r=new Ss("")}this.b.push(r)};var bu=0;function gu(t){if(t.b){var e=t.ba+t.l.nf();pu(t,t.Xf(e)),t.b=null,t.h=null,t.j=null,t.D=!1,t.ba=0}}function vu(t){fu.call(this,t.f,t.oa,t.ia,t,t.G,t.B,!1),this.parent=t,this.g=t.b}function mu(t,e){Ar.call(this,t,e,!1)}function wu(t,e,n,i,r){Ar.call(this,t,e,!1),this.mb=i,this.ia=n,this.b=r}function yu(t,e){Qr.call(this,t),this.mb={},this.b=e,this.order=0}function xu(t,e,n){return(t=t["writing-mode"])&&(e=t.evaluate(e,"writing-mode"))&&e!==dn?e===$n:n}function Eu(t,e,n){return(t=t.direction)&&(e=t.evaluate(e,"direction"))&&e!==dn?e===Dn:n}function Su(t,e,n,i){var r,o={};for(r in t)Ba(r)&&(o[r]=t[r]);return sm(o,e,t),ku(t,n,i,function(t,n){Cu(o,n,e),sm(o,e,n)}),o}function ku(t,e,n,i){if(t=t._regions,(e||n)&&t)for(n&&(n=["footnote"],e=e?e.concat(n):n),n=(e=h(e)).next();!n.done;n=e.next()){var r=t[n=n.value];r&&i(n,r)}}function Cu(t,e,n){for(var i in e)Ba(i)&&(t[i]=Ra(n,t[i],e[i]))}function Tu(t,e,n,i,r){for(var o in n=n?i?Ma:Pa:i?Da:Fa,t)if(t.hasOwnProperty(o)&&(i=t[o])){var a=n[o];if(a){var s=t[a];if(s&&s.cb>i.cb)continue;a=Aa[a]?a:o}else a=o;e[a]=r(o,i)}}(n=fu.prototype).cc=function(){var t="d"+bu++;pu(this,new Ja(new Ns(t,this.j,null))),this.b=[new Ss(t)],this.j=null},n.ne=function(){var t="c"+bu++;pu(this,new Ja(new Os(t,this.j,null))),this.b=[new Ss(t)],this.j=null},n.me=function(){var t="a"+bu++;pu(this,new Ja(new Is(t,this.j,null))),this.b=[new Ss(t)],this.j=null},n.te=function(){var t="f"+bu++;pu(this,new Ja(new Ps(t,this.j,null))),this.b=[new Ss(t)],this.j=null},n.Sc=function(){gu(this),this.h=null,this.D=!1,this.ba=0,this.b=[]},n.Tb=function(){var t;0!=this.u?(Or(this,"E_CSS_UNEXPECTED_SELECTOR"),t=!0):t=!1,t||(this.u=1,this.mb={},this.h=null,this.ba=0,this.D=!1,this.b=[])},n.error=function(t,e){_r.prototype.error.call(this,t,e),1==this.u&&(this.u=0)},n.Wc=function(t){_r.prototype.Wc.call(this,t),this.u=0},n.La=function(){gu(this),_r.prototype.La.call(this),1==this.u&&(this.u=0)},n.dc=function(){_r.prototype.dc.call(this)},n.Xf=function(t){var e=this.G;return this.D&&(e=e?"xxx-bogus-xxx":"footnote"),new qa(this.mb,t,this.h,e,this.j)},n.Qb=function(t,e,n){wa(this.B,t,e,n,this)},n.kd=function(t,e){Nr(this,"E_INVALID_PROPERTY_VALUE "+t+": "+e.toString())},n.fe=function(t,e){Nr(this,"E_INVALID_PROPERTY "+t+": "+e.toString())},n.Sb=function(t,e,n){"display"!=t||e!==An&&e!==Tn||(this.Sb("flow-options",new Re([an,Mn]),n),this.Sb("flow-into",e,n),e=Ye),ni("SIMPLE_PROPERTY").forEach(function(i){i=i({name:t,value:e,important:n}),t=i.name,e=i.value,n=i.important});var i=n?Sr(this):kr(this);Ua(this.mb,t,this.ia?new ja(e,i,this.ia):new La(e,i))},n.xd=function(t){switch(t){case"not":(t=new vu(this)).Tb(),Tr(this.oa,t)}},g(vu,fu),(n=vu.prototype).xd=function(t){"not"==t&&Or(this,"E_CSS_UNEXPECTED_NOT")},n.La=function(){Or(this,"E_CSS_UNEXPECTED_RULE_BODY")},n.Sc=function(){Or(this,"E_CSS_UNEXPECTED_NEXT_SELECTOR")},n.Nd=function(){this.b&&0<this.b.length&&this.g.push(new Cs(this.b)),this.parent.ba+=this.ba;var t=this.oa;t.b=t.g.pop()},n.error=function(t,e){fu.prototype.error.call(this,t,e);var n=this.oa;n.b=n.g.pop()},g(mu,_r),mu.prototype.Qb=function(t,e){if(this.f.values[t])this.error("E_CSS_NAME_REDEFINED "+t,this.jd());else{var n=t.match(/height|^(top|bottom)$/)?"vh":"vw";n=new se(this.f,100,n),n=e.Aa(this.f,n);this.f.values[t]=n}},g(wu,_r),wu.prototype.Qb=function(t,e,n){n?C.b("E_IMPORTANT_NOT_ALLOWED"):wa(this.b,t,e,n,this)},wu.prototype.kd=function(t,e){C.b("E_INVALID_PROPERTY_VALUE",t+":",e.toString())},wu.prototype.fe=function(t,e){C.b("E_INVALID_PROPERTY",t+":",e.toString())},wu.prototype.Sb=function(t,e,n){n=n?Sr(this):kr(this),n+=this.order,this.order+=Xs,Ua(this.mb,t,this.ia?new ja(e,n,this.ia):new La(e,n))},g(yu,Qr),yu.prototype.Qb=function(t,e,n){wa(this.b,t,e,n,this)},yu.prototype.kd=function(t,e){C.b("E_INVALID_PROPERTY_VALUE",t+":",e.toString())},yu.prototype.fe=function(t,e){C.b("E_INVALID_PROPERTY",t+":",e.toString())},yu.prototype.Sb=function(t,e,n){n=(n?67108864:50331648)+this.order,this.order+=Xs,Ua(this.mb,t,new La(e,n))};var Au=!1,_u={dh:"ltr",eh:"rtl"};b("vivliostyle.constants.PageProgression",_u),_u.LTR="ltr",_u.RTL="rtl";var Nu={pg:"left",qg:"right"};b("vivliostyle.constants.PageSide",Nu),Nu.LEFT="left",Nu.RIGHT="right";var Ou={LOADING:"loading",bh:"interactive",Zg:"complete"};function Iu(t,e,n){if(this.u=t,this.url=e,this.b=n,this.lang=null,this.h=-1,this.root=n.documentElement,e=t=null,"http://www.w3.org/1999/xhtml"==this.root.namespaceURI){for(var i=this.root.firstChild;i;i=i.nextSibling)if(1==i.nodeType&&"http://www.w3.org/1999/xhtml"==(n=i).namespaceURI)switch(n.localName){case"head":e=n;break;case"body":t=n}this.lang=this.root.getAttribute("lang")}else if("http://www.gribuser.ru/xml/fictionbook/2.0"==this.root.namespaceURI){for(e=this.root,i=this.root.firstChild;i;i=i.nextSibling)1==i.nodeType&&("http://www.gribuser.ru/xml/fictionbook/2.0"==(n=i).namespaceURI&&"body"==n.localName&&(t=n));0<(n=Xu(Xu(Xu(Xu(new Hu([this.b]),"FictionBook"),"description"),"title-info"),"lang").textContent()).length&&(this.lang=n[0])}else if("http://example.com/sse"==this.root.namespaceURI)for(n=this.root.firstElementChild;n;n=n.nextElementSibling)"meta"===(i=n.localName)?e=n:"body"===i&&(t=n);this.body=t,this.l=e,this.g=this.root,this.j=1,this.g.setAttribute("data-adapt-eloff","0")}function Pu(t,e){if(n=e.getAttribute("data-adapt-eloff"))return parseInt(n,10);for(var n=t.j,i=t.g;i!=e;){var r=i.firstChild;if(!r)for(;!(r=i.nextSibling);)if(!(i=i.parentNode))throw Error("Internal error");i=r,1==r.nodeType?(r.setAttribute("data-adapt-eloff",n.toString()),++n):n+=r.textContent.length}return t.j=n,t.g=e,n-1}function Fu(t,e,n,i){var r=0;if(1==e.nodeType){if(!i)return Pu(t,e)}else{if(r=n,!(n=e.previousSibling))return r+=1,Pu(t,e=e.parentNode)+r;e=n}for(;;){for(;e.lastChild;)e=e.lastChild;if(1==e.nodeType)break;if(r+=e.textContent.length,!(n=e.previousSibling)){e=e.parentNode;break}e=n}return r+=1,Pu(t,e)+r}function Mu(t){return 0>t.h&&(t.h=Fu(t,t.root,0,!0)),t.h}function Du(t,e){for(var n,i=t.root,r={};;){if((n=Pu(t,i))>=e)return i;if(r.children=i.children,!r.children)break;if(!(o=Y(r.children.length,function(n){return function(i){return Pu(t,n.children[i])>e}}(r))))break;if(o<r.children.length&&Pu(t,r.children[o])<=e)throw Error("Consistency check failed!");i=r.children[o-1],r={children:r.children}}n+=1;for(var o=(r=i).firstChild||r.nextSibling,a=null;;){if(o){if(1==o.nodeType)break;if(a=r=o,(n+=o.textContent.length)>e)break}else if(!(r=r.parentNode))break;o=r.nextSibling}return a||i}function Lu(t,e){if(!(n=e.match(/([^#]*)\#(.+)$/))||n[1]&&n[1]!=t.url)return null;var n=n[2],i=t.b.getElementById(n);return!i&&t.b.getElementsByName&&(i=t.b.getElementsByName(n)[0]),i||(t.f||(t.f={},function t(e,n){var i=n.getAttribute("id");for(i&&!e.f[i]&&(e.f[i]=n),(i=n.getAttributeNS("http://www.w3.org/XML/1998/namespace","id"))&&!e.f[i]&&(e.f[i]=n),i=n.firstElementChild;i;i=i.nextElementSibling)t(e,i)}(t,t.b.documentElement)),i=t.f[n]),i}b("vivliostyle.constants.ReadyState",Ou),Ou.LOADING="loading",Ou.INTERACTIVE="interactive",Ou.COMPLETE="complete";var ju={hh:"text/html",ih:"text/xml",Ug:"application/xml",Tg:"application/xhtml_xml",ah:"image/svg+xml"};function Ru(t,e,n){var i;n=n||new DOMParser;try{i=n.parseFromString(t,e)}catch(t){}if(!i)return null;if("parsererror"===(t=i.documentElement).localName)return null;for(t=t.firstChild;t;t=t.nextSibling)if("parsererror"===t.localName)return null;return i}function zu(t,e){var n=t.responseXML;if(!n){var i=new DOMParser,r=t.responseText;if(r){var o=function(t){var e=t.contentType;if(e){for(var n=Object.keys(ju),i=0;i<n.length;i++)if(ju[n[i]]===e)return e;if(e.match(/\+xml$/))return"application/xml"}if(t=t.url.match(/\.([^.\/]+)$/))switch(t[1]){case"html":case"htm":return"text/html";case"xhtml":case"xht":return"application/xhtml_xml";case"svg":case"svgz":return"image/svg+xml";case"opf":case"xml":return"application/xml"}return null}(t);(n=Ru(r,o||"application/xml",i))&&!o&&("html"!==(o=n.documentElement).localName.toLowerCase()||o.namespaceURI?"svg"===o.localName.toLowerCase()&&"image/svg+xml"!==n.contentType&&(n=Ru(r,"image/svg+xml",i)):n=Ru(r,"text/html",i)),n||(n=Ru(r,"text/html",i))}}return ai(n=n?new Iu(e,t.url,n):null)}function Bu(t){this.Pc=t}function Uu(){var t=function(){var t=Vu;return new Bu(function(e){return t.Pc(e)&&1==e.nodeType&&"http://www.idpf.org/2008/embedding"==e.getAttribute("Algorithm")})}(),e=Vu;return new Bu(function(n){return!!e.Pc(n)&&(n=Xu(n=new Hu([n]),"EncryptionMethod"),t&&(n=$u(n,t)),0<n.size())})}var Vu=new Bu(function(){return!0});function Hu(t){this.X=t}function $u(t,e){for(var n=[],i=h(t.X),r=i.next();!r.done;r=i.next())r=r.value,e.Pc(r)&&n.push(r);return new Hu(n)}function Gu(t,e){function n(t){i.push(t)}for(var i=[],r=0;r<t.X.length;r++)e(t.X[r],n);return new Hu(i)}function Ku(t,e){for(var n=[],i=0;i<t.X.length;i++){var r=e(t.X[i]);null!=r&&n.push(r)}return n}function Xu(t,e){return Gu(t,function(t,n){for(var i=t.firstChild;i;i=i.nextSibling)i.localName==e&&n(i)})}function Wu(t,e){return Ku(t,function(t){return 1==t.nodeType?t.getAttribute(e):null})}Hu.prototype.size=function(){return this.X.length},Hu.prototype.forEach=function(t){for(var e=[],n=0;n<this.X.length;n++)e.push(t(this.X[n]));return e},Hu.prototype.textContent=function(){return this.forEach(function(t){return t.textContent})};var Yu={transform:!0,"transform-origin":!0},Ju={top:!0,bottom:!0,left:!0,right:!0};function Zu(t,e,n){this.target=t,this.name=e,this.value=n}var qu={show:function(t){t.style.visibility="visible"},hide:function(t){t.style.visibility="hidden"},play:function(t){t.currentTime=0,t.play()},pause:function(t){t.pause()},resume:function(t){t.play()},mute:function(t){t.muted=!0},unmute:function(t){t.muted=!1}};function Qu(t,e){var n=qu[e];return n?function(){for(var e=0;e<t.length;e++)try{n(t[e])}catch(t){}}:null}function tl(t,e){this.Pb={},this.H=t,this.h=e,this.G=null,this.l=[];var n=this;this.J=function(t){var e=t.currentTarget,i=e.getAttribute("href")||e.getAttributeNS("http://www.w3.org/1999/xlink","href");i&&nt(n,{type:"hyperlink",target:null,currentTarget:null,mh:e,href:i,preventDefault:function(){t.preventDefault()}})},this.g={},this.f={width:0,height:0},this.B=this.u=!1,this.D=this.F=!0,this.P=0,this.position=null,this.offset=-1,this.b=null,this.j=[],this.I={top:{},bottom:{},left:{},right:{}}}function el(t,e,n){var i=t.g[n];i?i.push(e):t.g[n]=[e]}function nl(t){switch(t){case"normal":case"nowrap":return 0;case"pre-line":return 1;case"pre":case"pre-wrap":return 2;default:return null}}function il(t,e){if(1==t.nodeType)return!1;var n=t.textContent;switch(e){case 0:return!!n.match(/^\s*$/);case 1:return!!n.match(/^[ \t\f]*$/);case 2:return!n.length}throw Error("Unexpected whitespace: "+e)}function rl(t){this.f=t,this.b=[],this.C=null}function ol(t,e,n,i,r,o,a,s,u){this.b=t,this.element=e,this.f=n,this.cb=i,this.l=r,this.h=o,this.u=a,this.j=s,this.wb=-1,this.g=u}function al(t,e){return!!t.h&&(!e.h||t.cb>e.cb||t.j)}function sl(t,e){return t.top-e.top}function ul(t,e){return e.right-t.right}function ll(t,e){return t===e||!(!t||!e)&&(t.node===e.node&&t.kb===e.kb&&bl(t.wa,e.wa)&&bl(t.Ja,e.Ja)&&ll(t.Fa,e.Fa))}function hl(t,e){if(t===e)return!0;if(!t||!e||t.na!==e.na||t.K!==e.K||t.pa.length!==e.pa.length)return!1;for(var n=0;n<t.pa.length;n++)if(!ll(t.pa[n],e.pa[n]))return!1;return!0}function cl(t){return{pa:[{node:t.M,kb:pl,wa:t.wa,Ja:null,Fa:null,Sa:0}],na:0,K:!1,Qa:t.Qa}}function fl(t,e){var n=new vl(t.node,e,0);return n.kb=t.kb,n.wa=t.wa,n.Ja=t.Ja,n.Fa=t.Fa?fl(t.Fa,yl(e)):null,n.C=t.C,n.Sa=t.Sa+1,n}g(tl,et),tl.prototype.zoom=function(t){R(this.H,"transform","scale("+t+")")};var pl=0;function dl(t,e,n,i,r,o,a){this.oa=t,this.pd=i,this.vf=null,this.root=e,this.da=n,this.type=o,r&&(r.vf=this),this.b=a}function bl(t,e){return t===e||!!t&&!!e&&!!e&&t.oa===e.oa&&t.da===e.da&&t.type===e.type&&bl(t.pd,e.pd)}function gl(t,e){this.Ig=t,this.count=e}function vl(t,e,n){this.M=t,this.parent=e,this.Ma=n,this.na=0,this.K=!1,this.kb=pl,this.wa=e?e.wa:null,this.Fa=this.Ja=null,this.Ba=!1,this.ya=!0,this.xa=!1,this.j=e?e.j:0,this.display=null,this.W=Wh,this.ca=this.N=this.l=this.Ca=null,this.Z="baseline",this.la="top",this.ta=this.sa=0,this.I=!1,this.uc=e?e.uc:0,this.F=e?e.F:null,this.B=!!e&&e.B,this.S=this.hd=!1,this.D=this.A=this.G=this.g=null,this.h=e?e.h:{},this.b=!!e&&e.b,this.direction=e?e.direction:"ltr",this.f=e?e.f:null,this.Qa=this.lang=null,this.C=e?e.C:null,this.u=null,this.ua={},this.Sa=1,this.Y=this.J=null}function ml(t){t.ya=!0,t.j=t.parent?t.parent.j:0,t.A=null,t.D=null,t.na=0,t.K=!1,t.display=null,t.W=Wh,t.Ca=null,t.l=null,t.N=null,t.ca=null,t.Z="baseline",t.I=!1,t.uc=t.parent?t.parent.uc:0,t.F=t.parent?t.parent.F:null,t.B=!!t.parent&&t.parent.B,t.g=null,t.G=null,t.Ja=null,t.hd=!1,t.S=!1,t.b=!!t.parent&&t.parent.b,t.Ja=null,t.Qa=null,t.C=t.parent?t.parent.C:null,t.u=null,t.ua={},t.Sa=1,t.J=null,t.Y=null}function wl(t){var e=new vl(t.M,t.parent,t.Ma);return e.na=t.na,e.K=t.K,e.Ja=t.Ja,e.kb=t.kb,e.wa=t.wa,e.Fa=t.Fa,e.ya=t.ya,e.j=t.j,e.display=t.display,e.W=t.W,e.Ca=t.Ca,e.l=t.l,e.N=t.N,e.ca=t.ca,e.Z=t.Z,e.la=t.la,e.sa=t.sa,e.ta=t.ta,e.hd=t.hd,e.S=t.S,e.I=t.I,e.uc=t.uc,e.F=t.F,e.B=t.B,e.g=t.g,e.G=t.G,e.A=t.A,e.D=t.D,e.f=t.f,e.b=t.b,e.xa=t.xa,e.Qa=t.Qa,e.C=t.C,e.u=t.u,e.ua=Object.create(t.ua),e.Sa=t.Sa,e.J=t.J,e.Y=t.Y,e}function yl(t){var e=t;do{if(e.Ba)break;e.Ba=!0,e=e.parent}while(e);return t}function xl(t){return{node:t.M,kb:t.kb,wa:t.wa,Ja:t.Ja,Fa:t.Fa?xl(t.Fa):null,C:t.C,Sa:t.Sa}}function El(t){var e=t,n=[];do{e.f&&e.parent&&e.parent.f!==e.f||n.push(xl(e)),e=e.parent}while(e);return{pa:n,na:e=t.Qa?mv(t.Qa,t.na,-1):t.na,K:t.K,Qa:t.Qa}}function Sl(t,e){for(var n=t;n;)n.ya||e(n),n=n.parent}function kl(t,e){return t.C===e&&!!t.parent&&t.parent.C===e}function Cl(t){this.f=t,this.b=null}function Tl(t,e){if(!e)return!1;if(t===e)return!0;if(!hl(t.f,e.f))return!1;if(t.b){if(!e.b||t.b.length!==e.b.length)return!1;for(var n=0;n<t.b.length;n++)if(!hl(t.b[n],e.b[n]))return!1}else if(e.b)return!1;return!0}function Al(t,e){this.b=t,this.qa=e}function _l(){this.b=[],this.g="any",this.f=null}function Nl(t,e){if(t===e)return!0;if(!e||t.b.length!==e.b.length)return!1;for(var n=0;n<t.b.length;n++){var i=t.b[n],r=e.b[n];if(!r||i!==r&&!Tl(i.b,r.b))return!1}return!0}function Ol(){this.page=0,this.f={},this.b={},this.g=0}function Il(t,e){if(t===e)return!0;if(!e||t.page!==e.page||t.g!==e.g)return!1;var n=Object.keys(t.b),i=Object.keys(e.b);if(n.length!==i.length)return!1;for(i=(n=h(n)).next();!i.done;i=n.next())if(i=i.value,!Nl(t.b[i],e.b[i]))return!1;return!0}function Pl(t){this.element=t,this.G=this.F=this.height=this.width=this.S=this.J=this.Y=this.I=this.Ba=this.ca=this.Za=this.Z=this.marginBottom=this.marginTop=this.marginRight=this.marginLeft=this.top=this.left=0,this.Lb=this.ob=null,this.yb=this.Od=this.Mb=this.Rd=this.h=0,this.b=!1}function Fl(t){return t.marginTop+t.ca+t.J}function Ml(t){return t.marginBottom+t.Ba+t.S}function Dl(t){return t.marginLeft+t.Z+t.I}function Ll(t){return t.marginRight+t.Za+t.Y}function jl(t){return t.b?-1:1}function Rl(t,e,n){t.top=e,t.height=n,R(t.element,"top",e+"px"),R(t.element,"height",n+"px")}function zl(t,e,n){t.left=e,t.width=n,R(t.element,"left",e+"px"),R(t.element,"width",n+"px")}function Bl(t,e,n){t.b?zl(t,e+n*jl(t),n):Rl(t,e,n)}function Ul(t,e,n){t.b?Rl(t,e,n):zl(t,e,n)}function Vl(t){t=t.element;for(var e;e=t.lastChild;)t.removeChild(e)}function Hl(t){var e=t.F+t.left+t.marginLeft+t.Z,n=t.G+t.top+t.marginTop+t.ca;return new ao(e,n,e+(t.I+t.width+t.Y),n+(t.J+t.height+t.S))}function $l(t,e,n){return Mo(e,(t=Gl(t)).V,t.T,t.U-t.V,t.R-t.T,n)}function Gl(t){var e=t.F+t.left,n=t.G+t.top;return new ao(e,n,e+(Dl(t)+t.width+Ll(t)),n+(Fl(t)+t.height+Ml(t)))}function Kl(t,e,n,i){this.b=t,this.f=e,this.h=n,this.g=i}function Xl(t){return!!t&&t!==Cn&&t!==kn&&t!==dn}function Wl(t,e,n){this.g=t,this.f=e,this.b=n}function Yl(){this.map=[]}function Jl(t){return t.map.length?t.map[t.map.length-1].b:0}function Zl(t,e){if(t.map.length){var n=t.map[t.map.length-1],i=n.b+e-n.f;n.f==n.g?(n.f=e,n.g=e,n.b=i):t.map.push(new Wl(e,e,i))}else t.map.push(new Wl(e,e,e))}function ql(t,e){t.map.length?t.map[t.map.length-1].f=e:t.map.push(new Wl(e,0,0))}function Ql(t,e){var n=Y(t.map.length,function(n){return e<=t.map[n].f});return(n=t.map[n]).b-Math.max(0,n.g-e)}function th(t,e){var n=Y(t.map.length,function(n){return e<=t.map[n].b});return(n=t.map[n]).g-(n.b-e)}function eh(t,e,n,i,r,o,a,s){this.B=t,this.style=e,this.offset=n,this.D=i,this.qa=r,this.b=r.b,this.ib=o,this.pb=a,this.F=s,this.j=this.l=null,this.u={},this.g=this.f=this.h=null,oh(this)&&(e=e._pseudos)&&e.before&&(Xl(n=nh(t=new eh(t,e.before,n,!1,r,rh(this),a,!0),"content"))&&(this.h=t,this.g=t.g)),this.g=Fh(ah(this,"before"),this.g),this.pb&&Ih[this.g]&&(r.g=Fh(r.g,this.g))}function nh(t,e,n){if(!(e in t.u)){var i=t.style[e];t.u[e]=i?i.evaluate(t.B,e):n||null}return t.u[e]}function ih(t){return nh(t,"display",bn)}function rh(t){if(null===t.l){var e=ih(t),n=nh(t,"position"),i=nh(t,"float");t.l=Wp(e,n,i,t.D).display===Ye}return t.l}function oh(t){return null===t.j&&(t.j=t.F&&ih(t)!==kn),t.j}function ah(t,e){var n=null;if(rh(t)){var i=nh(t,"break-"+e);i&&(n=i.toString())}return n}function sh(t){this.g=t,this.b=[],this.pb=this.ib=!0,this.f=[]}function uh(t){return t.b[t.b.length-1]}function lh(t,e){if(!e.ib)return e.offset;var n=t.b.length-1,i=t.b[n];for(i===e&&(n--,i=t.b[n]);0<=n;){if(i.b!==e.b)return e.offset;if(!i.ib||i.D)return i.offset;e=i,i=t.b[--n]}throw Error("No block start offset found!")}function hh(t,e,n,i,r,o,a,s){switch(this.da=t,this.root=t.root,this.fb=n,this.h=i,this.B=o,this.f=this.root,this.F={},this.Y={},this.G={},this.J=[],this.D=this.S=this.N=null,this.Ba=a,this.Z=new Zs(e,i,a,s),this.g=new Yl,this.u=!0,this.la=[],this.Za=r,this.ua=this.ta=!1,this.b=t=Pu(t,this.root),this.ca={},this.j=new sh(i),Zl(this.g,t),i=bh(this,this.root),su(this.Z,this.root,i,t),dh(this,i,!1),this.I=!0,this.root.namespaceURI){case"http://www.w3.org/1999/xhtml":case"http://www.gribuser.ru/xml/fictionbook/2.0":this.I=!1}this.la.push(!0),this.Y={},this.Y["e"+t]=i,this.b++,gh(this,-1)}function ch(t,e,n,i){return(e=e[i])&&e.evaluate(t.h)!==n[i]}function fh(t,e,n){for(var i in n){var r=e[i];r?(t.F[i]=r,delete e[i]):(r=n[i])&&(t.F[i]=new La(r,33554432))}}vl.prototype.modify=function(){return this.Ba?wl(this):this},vl.prototype.clone=function(){for(var t,e=wl(this),n=e;t=n.parent;)t=wl(t),n=n.parent=t;return e},Cl.prototype.clone=function(){var t=new Cl(this.f);if(this.b){t.b=[];for(var e=0;e<this.b.length;++e)t.b[e]=this.b[e]}return t},Al.prototype.clone=function(){return new Al(this.b.clone(),this.qa)},_l.prototype.clone=function(){for(var t=new _l,e=this.b,n=t.b,i=0;i<e.length;i++)n[i]=e[i].clone();return t.g=this.g,t.f=this.f,t},Ol.prototype.clone=function(){var t=new Ol;for(var e in t.page=this.page,t.h=this.h,t.g=this.g,t.j=this.j,t.f=this.f,this.b)t.b[e]=this.b[e].clone();return t},g(Kl,Ee),Kl.prototype.Bd=function(t){return this.b.appendChild(this.b.ownerDocument.createTextNode(t.Xc)),null},Kl.prototype.bd=function(t){if(this.h.url)this.b.setAttribute("src",t.url);else{var e=this.b.ownerDocument.createElementNS("http://www.w3.org/1999/xhtml","img");e.setAttribute("src",t.url),this.b.appendChild(e)}return null},Kl.prototype.Ub=function(t){return this.sc(t.values),null},Kl.prototype.Yc=function(t){var e=t.Aa();return"string"==typeof(t=e.evaluate(this.f))&&(e instanceof ue&&(t=io(e.b,new cr(t,null)).stringValue()),(e=this.g(e,t,this.b.ownerDocument))||(e=this.b.ownerDocument.createTextNode(t)),this.b.appendChild(e)),null},sh.prototype.push=function(t,e,n,i){var r=uh(this);i&&r&&i.b!==r.b&&this.f.push({ib:this.ib,pb:this.pb}),r=i||r.qa,i=this.pb||!!i;var o=function(t){return t.b.every(function(t){return ih(t)!==kn})}(this);return t=new eh(this.g,t,e,n,r,i||this.ib,i,o),this.b.push(t),this.ib=oh(t)?!t.h&&rh(t):this.ib,this.pb=oh(t)?!t.h&&i:this.pb,t};var ph=["column-count","column-width","column-fill"];function dh(t,e,n){if(["writing-mode","direction"].forEach(function(i){!e[i]||n&&t.F[i]||(t.F[i]=e[i])}),!t.ta){var i=ch(t,e,t.B.j,"background-color")?e["background-color"].evaluate(t.h):null,r=ch(t,e,t.B.j,"background-image")?e["background-image"].evaluate(t.h):null;(i&&i!==dn||r&&r!==dn)&&(fh(t,e,t.B.j),t.ta=!0)}if(!t.ua)for(i=0;i<ph.length;i++)if(ch(t,e,t.B.u,ph[i])){fh(t,e,t.B.u),t.ua=!0;break}if(!n&&(i=e["font-size"])){switch(r=i.evaluate(t.h),i=r.L,r.ka){case"em":case"rem":i*=t.h.u;break;case"ex":i*=t.h.u*Nt.ex/Nt.em;break;case"%":i*=t.h.u/100;break;default:(r=Nt[r.ka])&&(i*=r)}t.h.Za=i}}function bh(t,e){if(e.style instanceof CSSStyleDeclaration&&(r=e.getAttribute("style"))){var n=t.da.url,i=new yu(t.fb,t.B),r=new cr(r,i);try{qr(new $r(Pr,r,i,n),Number.POSITIVE_INFINITY,!1,!0,!1,!1)}catch(t){C.b(t,"Style attribute parse error:")}return i.mb}return{}}function gh(t,e){if(!(e>=t.b)){var n=t.h,i=Pu(t.da,t.root);if(e<i){var r=t.l(t.root,!1),o=vh(t,o=(o=r["flow-into"])?o.evaluate(n,"flow-into").toString():"body",r,t.root,i);!t.j.b.length&&t.j.push(r,i,!0,o)}if(i=Du(t.da,e),!((r=Fu(t.da,i,0,!1))>=t.b))for(;;){if(1!=i.nodeType)r+=i.textContent.length;else{var a=i;if(r!=Pu(t.da,a))throw Error("Inconsistent offset");var s=t.l(a,!1);(o=s["flow-into"])&&vh(t,o=o.evaluate(n,"flow-into").toString(),s,a,r),r++}if(r>=t.b)break;if(!(o=i.firstChild))for(;!(o=i.nextSibling);)if((i=i.parentNode)===t.root)return;i=o}}}function vh(t,e,n,i,r){var o=0,a=Number.POSITIVE_INFINITY,s=!1,u=!1,l=!1,h=n["flow-options"];if(h){var c;t:{if(s=h.evaluate(t.h,"flow-options")){u=new Oo;try{s.fa(u),c=u.b;break t}catch(t){C.b(t,"toSet:")}}c={}}s=!!(l=c).exclusive,u=!!l.static,l=!!l.last}return(c=n["flow-linger"])&&(a=Po(c.evaluate(t.h,"flow-linger"),Number.POSITIVE_INFINITY)),(n=n["flow-priority"])&&(o=Po(n.evaluate(t.h,"flow-priority"),0)),n=t.ca[r]||null,(c=t.G[e])||(c=uh(t.j),c=t.G[e]=new rl(c?c.qa.b:null)),i=new ol(e,i,r,o,a,s,u,l,n),t.J.push(i),t.S==e&&(t.S=null),t.N&&Gb(t.N,i,c),i}function mh(t,e,n,i){Ih[e]&&((!(i=t.G[i].b).length||i[i.length-1]<n)&&i.push(n)),t.ca[n]=Fh(t.ca[n],e)}function wh(t,e,n){var i=-1;if(e<=t.b&&(i=Ql(t.g,e),(i+=n)<Jl(t.g)))return th(t.g,i);if(!t.f)return Number.POSITIVE_INFINITY;for(var r=t.h;;){if(!(o=t.f.firstChild))for(;;){if(1==t.f.nodeType){var o=t.Z,a=t.f;if(o.Kb.pop()!==a)throw Error("Invalid call to popElement");o.Mb.pop(),o.sa.pop(),o.Lb.pop(),o.Jb.pop(),hu(o),ru(o),t.u=t.la.pop();o=t.j;var s=t.b,u=a=o.b.pop(),l=o.ib,h=o.pb;if(oh(u)){var c=u.style._pseudos;c&&c.after&&(Xl(l=nh(s=new eh(u.B,c.after,s,!1,u.qa,l,h,!0),"content"))&&(u.f=s))}o.pb&&a.f&&(u=ah(a.f,"before"),a.qa.g=Fh(a.qa.g,u)),(u=uh(o))&&(u.b===a.b?oh(a)&&(o.ib=o.pb=!1):(u=o.f.pop(),o.ib=u.ib,o.pb=u.pb)),o=null,a.f&&(mh(t,o=ah(a.f,"before"),a.f.ib?lh(t.j,a):a.f.offset,a.b),o=ah(a.f,"after")),mh(t,o=Fh(o,ah(a,"after")),t.b,a.b)}if(o=t.f.nextSibling)break;if(t.f=t.f.parentNode,t.f===t.root)return t.f=null,e<t.b&&(0>i&&(i=Ql(t.g,e),i+=n),i<=Jl(t.g))?th(t.g,i):Number.POSITIVE_INFINITY}if(t.f=o,1!=t.f.nodeType)t.b+=t.f.textContent.length,o=t.j,a=t.f,u=uh(o),(o.ib||o.pb)&&oh(u)&&(il(a,nl(u=nh(u,"white-space",Cn).toString()))||(o.ib=!1,o.pb=!1)),t.u?Zl(t.g,t.b):ql(t.g,t.b);else{if(o=bh(t,a=t.f),t.la.push(t.u),su(t.Z,a,o,t.b),(u=a.getAttribute("id")||a.getAttributeNS("http://www.w3.org/XML/1998/namespace","id"))&&u===t.D&&(t.D=null),t.I||"body"!=a.localName||a.parentNode!=t.root||(dh(t,o,!0),t.I=!0),(u=o["flow-into"])?(s=vh(t,u=u.evaluate(r,"flow-into").toString(),o,a,t.b),t.u=!!t.Za[u],a=t.j.push(o,t.b,a===t.root,s)):a=t.j.push(o,t.b,a===t.root),u=lh(t.j,a),mh(t,a.g,u,a.b),a.h&&mh(t,s=ah(a.h,"after"),a.h.ib?u:a.offset,a.b),t.u&&ih(a)===kn&&(t.u=!1),Pu(t.da,t.f)!=t.b)throw Error("Inconsistent offset");if(t.Y["e"+t.b]=o,t.b++,t.u?Zl(t.g,t.b):ql(t.g,t.b),e<t.b&&(0>i&&(i=Ql(t.g,e),i+=n),i<=Jl(t.g)))return th(t.g,i)}}}hh.prototype.l=function(t,e){var n=Pu(this.da,t),i="e"+n;return e&&(n=Fu(this.da,t,0,!0)),this.b<=n&&wh(this,n,0),this.Y[i]},hh.prototype.sa=function(){};var yh={"font-style":Cn,"font-variant":Cn,"font-weight":Cn},xh="OTTO"+(new Date).valueOf(),Eh=1;function Sh(t,e){var n,i={};for(n in t)i[n]=t[n].evaluate(e,n);for(var r in yh)i[r]||(i[r]=yh[r]);return i}function kh(t){t=this.Ec=t;var e,n=new U;for(e in yh)n.append(" "),n.append(t[e].toString());this.f=n.toString(),this.src=this.Ec.src?this.Ec.src.toString():null,this.g=[],this.h=[],this.b=(e=this.Ec["font-family"])?e.stringValue():null}function Ch(t,e,n){var i=new U;for(var r in i.append("@font-face {\n  font-family: "),i.append(t.b),i.append(";\n  "),yh)i.append(r),i.append(": "),t.Ec[r].$a(i,!0),i.append(";\n  ");return n?(i.append('src: url("'),e=(window.URL||window.webkitURL).createObjectURL(n),i.append(e),t.g.push(e),t.h.push(n),i.append('")')):(i.append("src: "),i.append(e)),i.append(";\n}\n"),i.toString()}function Th(t){this.f=t,this.b={}}function Ah(t,e){if(e instanceof ze){for(var n=[],i=h(e.values),r=i.next();!r.done;r=i.next()){r=r.value;var o=t.b[r.stringValue()];o&&n.push(Ie(o)),n.push(r)}return new ze(n)}return(n=t.b[e.stringValue()])?new ze([Ie(n),e]):e}function _h(t,e){this.b=t,this.body=e,this.f={},this.g=0}function Nh(t,e,n,i){var r,o=oi("initFont"),a=e.src,s={};for(r in yh)s[r]=e.Ec[r];i=function(t,e,n){e=e.b;var i=n.b[e];return i||(i="Fnt_"+ ++t.g,n.b[e]=i)}(t,e,i),s["font-family"]=Ie(i);var u=new kh(s),l=t.body.ownerDocument.createElement("span");l.textContent="M";var h=(new Date).valueOf()+1e3;for(var c in e=t.b.ownerDocument.createElement("style"),r=xh+Eh++,e.textContent=Ch(u,"",mr([r])),t.b.appendChild(e),t.body.appendChild(l),l.style.visibility="hidden",l.style.fontFamily=i,yh)R(l,c,s[c].toString());var f=(s=l.getBoundingClientRect()).right-s.left,p=s.bottom-s.top;e.textContent=Ch(u,a,n),C.g("Starting to load font:",a);var d=!1;return ki(function(){var t=l.getBoundingClientRect(),e=t.bottom-t.top;return f!=t.right-t.left||p!=e?(d=!0,ai(!1)):(new Date).valueOf()>h?ai(!1):Si(10)}).then(function(){d?C.g("Loaded font:",a):C.b("Failed to load font:",a),t.body.removeChild(l),xi(o,u)}),o.result()}function Oh(t,e,n){var i=e.src,r=t.f[i];return r?function(t,e){t.f?e(t.h):t.g.push(e)}(r,function(t){if(t.f==e.f){var r=e.b,o=n.b[r];if(t=t.b,o){if(o!=t)throw Error("E_FONT_FAMILY_INCONSISTENT "+e.b)}else n.b[r]=t;C.b("Found already-loaded font:",i)}else C.b("E_FONT_FACE_INCOMPATIBLE",e.src)}):(r=new Oi(function(){var r=oi("loadFont"),o=n.f?n.f(i):null;return o?vr(i,"blob").then(function(i){i.vd?o(i.vd).then(function(i){Nh(t,e,i,n).Ga(r)}):xi(r,null)}):Nh(t,e,null,n).Ga(r),r.result()},"loadFont "+i),t.f[i]=r,r.start()),r}ei("SIMPLE_PROPERTY",function(t){var e=t.name,n=t.value;switch(e){case"page-break-before":case"page-break-after":case"page-break-inside":return{name:e.replace(/^page-/,""),value:n===Ge?_n:n,important:t.important};default:return t}});var Ih={page:!0,left:!0,right:!0,recto:!0,verso:!0,column:!0,region:!0},Ph={avoid:!0,"avoid-page":!0,"avoid-column":!0,"avoid-region":!0};function Fh(t,e){if(!t)return e;if(!e)return t;var n=!!Ih[t],i=!!Ih[e];if(!n||!i)return i?e:n?t:Ph[e]?e:Ph[t]?t:e;switch(e){case"column":return t;case"region":return"column"===t?e:t;default:return e}}function Mh(t){switch(t){case"left":case"right":case"recto":case"verso":return t;default:return"any"}}function Dh(){}function Lh(t,e){this.b=t,this.f=e}function jh(t,e){var n=t.b,i=n.Tf(e),r=oi("LayoutIterator");return Ci(function(e){for(var r;i.w;){if((r=((r=i.w.A?1!==i.w.A.nodeType?il(i.w.A,i.w.uc)?void 0:i.w.K?n.Df(i):n.uf(i):i.w.ya?i.w.K?n.Cf(i):n.kg(i):i.w.K?n.tc(i):n.Cd(i):void 0)&&r.Xa()?r:ai(!0)).ea(function(){return i.Vb?ai(null):yd(t.f,i.w,i.Gd)})).Xa())return void r.then(function(t){i.Vb?Ni(e):(i.w=t,_i(e))});if(i.Vb)return void Ni(e);i.w=r.get()}Ni(e)}).then(function(){xi(r,i.w)}),r.result()}function Rh(t){this.gc=t}function zh(t,e,n){this.tf=[],this.za=Object.create(t),this.za.element=e,this.za.j=t.j.clone(),this.za.u=!1,this.za.kf=n.C,this.za.Md=t,t=wf(this.za,n),this.za.la-=t;var i=this;this.za.Lc=function(t){return $c.prototype.Lc.call(this,t).ea(function(t){return i.tf.push(yl(t)),ai(t)})}}function Bh(t,e){return Ff(t.za,e,!0)}function Uh(){this.u=this.h=null}function Vh(t,e,n){return t.eg(e,n),function t(e,n,i){var r=oi("vivliostyle.layoututil.AbstractLayoutRetryer.tryLayout");e.yf(n,i);var o=e.qf(n);o.b(n,i).then(function(e){var a=o.f(e,i);(a=o.g(e,this.f,i,a))?xi(r,e):(this.Jd(this.f),this.ie(n,i),t(this,this.f,i).Ga(r))}.bind(e));return r.result()}(t,e,n)}function Hh(t,e,n,i){if(!(i=i[e]))throw Error("unknown writing-mode: "+e);if(!(e=i[n||"ltr"]))throw Error("unknown direction: "+n);for(e=(n=h(e)).next();!e.done;e=n.next())if(e=e.value,(e=t.replace(e.h,e.b))!==t)return e;return t}function $h(t){var e=Gh,n={};return Object.keys(e).forEach(function(i){var r=n[i]={},o=e[i];Object.keys(o).forEach(function(e){r[e]=o[e].map(function(e){return{h:new RegExp("(-?)"+(t?e.ga:e.ha)+"(-?)"),b:"$1"+(t?e.ha:e.ga)+"$2"}})})}),n}(n=Dh.prototype).Tf=function(t){return{w:t,Gd:!1,Vb:!1}},n.uf=function(){},n.Df=function(){},n.kg=function(){},n.Cf=function(){},n.Cd=function(){},n.tc=function(){},g(Rh,Dh),(n=Rh.prototype).lg=function(){},n.Nf=function(){},n.Tf=function(t){return{w:t,Gd:!!this.gc&&t.K,Vb:!1,gc:this.gc,dd:null,Je:!1,Wf:[],ld:null}},n.uf=function(t){t.Je=!1},n.Cd=function(t){return t.Wf.push(yl(t.w)),t.dd=Fh(t.dd,t.w.g),t.Je=!0,this.lg(t)},n.tc=function(t){var e;return t.Je?(e=void 0,e=(e=ai(!0)).ea(function(){return t.Vb||(t.Wf=[],t.gc=!1,t.Gd=!1,t.dd=null),ai(!0)})):e=(e=this.Nf(t))&&e.Xa()?e:ai(!0),e.ea(function(){return t.Vb||(t.Je=!1,t.ld=yl(t.w),t.dd=Fh(t.dd,t.w.G)),ai(!0)})},zh.prototype.ec=function(t){var e=this.za.ec();if(t){var n=new Uc(t=yl(this.tf[0]),null,t.xa,0);if(n.f(this.za,0),!e.w)return{Eb:n,w:t}}return e},zh.prototype.Na=function(t,e,n){return this.za.Na(t,e,n)},Uh.prototype.eg=function(){},Uh.prototype.Jd=function(t){t=t.A||t.parent.A;for(var e;e=t.lastChild;)t.removeChild(e);for(;e=t.nextSibling;)e.parentNode.removeChild(e)},Uh.prototype.yf=function(t,e){this.f=yl(t),this.h=[].concat(e.N),this.D=[].concat(e.B),t.C&&(this.u=t.C.Ye())},Uh.prototype.ie=function(t,e){e.N=this.h,e.B=this.D,t.C&&t.C.Xe(this.u)};var Gh={"horizontal-tb":{ltr:[{ga:"inline-start",ha:"left"},{ga:"inline-end",ha:"right"},{ga:"block-start",ha:"top"},{ga:"block-end",ha:"bottom"},{ga:"inline-size",ha:"width"},{ga:"block-size",ha:"height"}],rtl:[{ga:"inline-start",ha:"right"},{ga:"inline-end",ha:"left"},{ga:"block-start",ha:"top"},{ga:"block-end",ha:"bottom"},{ga:"inline-size",ha:"width"},{ga:"block-size",ha:"height"}]},"vertical-rl":{ltr:[{ga:"inline-start",ha:"top"},{ga:"inline-end",ha:"bottom"},{ga:"block-start",ha:"right"},{ga:"block-end",ha:"left"},{ga:"inline-size",ha:"height"},{ga:"block-size",ha:"width"}],rtl:[{ga:"inline-start",ha:"bottom"},{ga:"inline-end",ha:"top"},{ga:"block-start",ha:"right"},{ga:"block-end",ha:"left"},{ga:"inline-size",ha:"height"},{ga:"block-size",ha:"width"}]},"vertical-lr":{ltr:[{ga:"inline-start",ha:"top"},{ga:"inline-end",ha:"bottom"},{ga:"block-start",ha:"left"},{ga:"block-end",ha:"right"},{ga:"inline-size",ha:"height"},{ga:"block-size",ha:"width"}],rtl:[{ga:"inline-start",ha:"bottom"},{ga:"inline-end",ha:"top"},{ga:"block-start",ha:"left"},{ga:"block-end",ha:"right"},{ga:"inline-size",ha:"height"},{ga:"block-size",ha:"width"}]}},Kh=$h(!0),Xh=$h(!1),Wh="inline";function Yh(t){switch(t){case Wh:return!1;case"column":case"region":case"page":return!0;default:throw Error("Unknown float-reference: "+t)}}function Jh(t,e,n,i,r,o){this.b=t,this.W=e,this.Ca=n,this.h=i,this.f=r,this.j=o,this.id=this.order=null}function Zh(t){if(!t.id)throw Error("The page float is not yet added");return t.id}function qh(){this.b=[],this.f=0}function Qh(t,e,n,i,r){this.W=t,this.Ca=e,this.Ob=n,this.b=i,this.g=r}function tc(t,e){return t.Ob.some(function(t){return t.ja===e})}function ec(t,e){this.ja=t,this.b=e}function nc(t,e,n,i,r,o,a){(this.parent=t)&&t.children.push(this),this.children=[],this.W=e,this.H=n,this.h=i,this.I=r,this.F=o||t&&t.F||pn,this.direction=a||t&&t.direction||Sn,this.Qc=!1,this.u=t?t.u:new qh,this.B=[],this.b=[],this.j=[],this.l={},this.f=[];t:{for(e=this,t=this.parent;t;){if(e=rc(t,e,this.W,this.h,this.I)){t=e;break t}e=t,t=t.parent}t=null}this.G=t?[].concat(t.f):[],this.D=[],this.g=!1}function ic(t,e){if(!t.parent)throw Error("No PageFloatLayoutContext for "+e);return t.parent}function rc(t,e,n,i,r){for(0>(e=t.children.indexOf(e))&&(e=t.children.length),--e;0<=e;e--){var o=t.children[e];if(o.W===n&&o.h===i&&hl(o.I,r)||(o=rc(o,null,n,i,r)))return o}return null}function oc(t,e){return e&&e!==t.W?oc(ic(t,e),e):t.H}function ac(t,e){t.H=e,Nc(t)}function sc(t,e){return e===t.W?t:sc(ic(t,e),e)}function uc(t,e){var n=Zh(e),i=e.W;i===t.W?t.B.includes(n)||(t.B.push(n),Pc(e).og(e,t)):uc(ic(t,i),e)}function lc(t,e){var n=Zh(e),i=e.W;return i===t.W?t.B.includes(n):lc(ic(t,i),e)}function hc(t,e,n){var i=e.W;i!==t.W?hc(ic(t,i),e,n):t.b.includes(e)||(t.b.push(e),t.b.sort(function(t,e){return t.Ia()-e.Ia()})),n||Sc(t)}function cc(t,e,n){var i=e.W;i!==t.W?cc(ic(t,i),e,n):0<=(e=t.b.indexOf(e))&&((e=(e=t.b.splice(e,1)[0]).b&&e.b.element)&&e.parentNode&&e.parentNode.removeChild(e),n||Sc(t))}function fc(t,e){if(e.W!==t.W)return fc(ic(t,e.W),e);var n=t.b.findIndex(function(t){return tc(t,e)});return 0<=n?t.b[n]:null}function pc(t,e){return!(!(0<t.b.length)||e&&!t.b.some(e))||!!t.parent&&pc(t.parent,e)}function dc(t,e,n){t.l[Zh(e)]=n}function bc(t,e){if(mc(t).some(function(t){return Zh(t.ja)===e}))return!0;var n=function t(e){var n=Object.assign({},e.l);return e.children.reduce(function(e,n){return Object.assign(e,t(n))},n)}(t)[e];return!!n&&(!(!t.H||!t.H.element)&&t.H.element.contains(n))}function gc(t,e){var n=e.ja;if(n.W===t.W){var i=t.f.findIndex(function(t){return t.ja===n});0<=i?t.f.splice(i,1,e):t.f.push(e)}else gc(ic(t,n.W),e)}function vc(t,e,n){if(!n&&e.W!==t.W)return vc(ic(t,e.W),e,!1);var i=e.Ia();return!!t.f.some(function(t){return t.ja.Ia()<i&&!e.df(t.ja)})||!!t.parent&&vc(t.parent,e,!0)}function mc(t,e){e=e||t.h;var n=t.G.filter(function(t){return!e||t.ja.f===e});return t.parent&&(n=mc(t.parent,e).concat(n)),n.sort(function(t,e){return t.ja.Ia()-e.ja.Ia()})}function wc(t,e){e=e||t.h;var n=t.f.filter(function(t){return!e||t.ja.f===e});return t.parent?wc(t.parent,e).concat(n):n}function yc(t){if(function(t){var e=function t(e){for(var n=[],i=[],r=e.children.length-1;0<=r;r--){var o=e.children[r];i.includes(o.h)||(i.push(o.h),n=(n=n.concat(o.f.map(function(t){return t.ja}))).concat(t(o)))}return n}(t);(n=t.b.reduce(function(t,e){return t.concat(e.Ob.map(function(t){return t.ja}))},[])).sort(function(t,e){return e.Ia()-t.Ia()});for(var n,i={},r=(n=h(n)).next();!r.done;i={ja:i.ja,order:i.order},r=n.next())if(i.ja=r.value,i.order=i.ja.Ia(),e.some(function(t){return function(e){return!t.ja.df(e)&&t.order>e.Ia()}}(i)))return t.g?Sc(t):(uc(t,i.ja),e=fc(t,i.ja),cc(t,e)),!0;return!1}(t))return!0;for(var e=t.b.length-1;0<=e;e--){var n,i=t.b[e];t:{n=t;for(var r=i.Ob.length-1;0<=r;r--){var o=i.Ob[r].ja;if(!bc(n,Zh(o))){n=o;break t}}n=null}if(n){if(t.g)Sc(t);else if(cc(t,i),uc(t,n),"block-end"===(i=Cc(t,i.Ca))||"inline-end"===i)for(e=0;e<t.b.length;)Cc(t,(n=t.b[e]).Ca)===i?cc(t,n):e++;return!0}}return!("region"!==t.W||!t.parent.g)&&yc(t.parent)}function xc(t){if(!yc(t)){for(var e=t.f.length-1;0<=e;e--)if(!bc(t,Zh(t.f[e].ja))){if(t.g)return void Sc(t);t.f.splice(e,1)}t.G.forEach(function(t){0<=this.f.findIndex(function(e){return!!e&&(t===e||t.ja===e.ja&&hl(t.b,e.b))})||this.b.some(function(e){return tc(e,t.ja)})||this.f.push(t)},t)}}function Ec(t,e){return!!t.H&&!!e.H&&t.H.element===e.H.element}function Sc(t){t.Qc=!0,t.g||(t.H&&(t.children.forEach(function(t){Ec(this,t)&&t.b.forEach(function(t){(t=t.b.element)&&t.parentNode&&t.parentNode.removeChild(t)})},t),Vl(t.H)),t.children.forEach(function(t){t.D.splice(0)}),t.children.splice(0),Object.keys(t.l).forEach(function(t){delete this.l[t]},t))}function kc(t){return t.Qc||!!t.parent&&kc(t.parent)}function Cc(t,e){return Hh(e,t.F.toString(),t.direction.toString()||null,Xh)}function Tc(t,e,n,i,r){var o=Cc(t,e);e=Hh(e,t.F.toString(),t.direction.toString()||null,Kh);t:{var a=Ac(t,n,i,r);switch(o){case"block-start":o=t.H.b?a.right:a.top;break t;case"block-end":o=t.H.b?a.left:a.bottom;break t;case"inline-start":o=t.H.b?a.top:a.left;break t;case"inline-end":o=t.H.b?a.bottom:a.right;break t;default:throw Error("Unknown logical side: "+o)}}if(t.parent&&t.parent.H)switch(t=Tc(t.parent,e,n,i,r),e){case"top":case"left":return Math.max(o,t);case"bottom":case"right":return Math.min(o,t);default:w("Should be unreachable")}return o}function Ac(t,e,n,i){function r(t,i,r){if("%"===t.ka)t=r*t.L/100;else{r=t.L;var o,a=t.ka;t:switch(a.toLowerCase()){case"em":case"ex":case"rem":o=!0;break t;default:o=!1}if(o){for(;i&&1!==i.nodeType;)i=i.parentNode;t=Wa(t,i=parseFloat(Id(n,i)["font-size"]),e.b).L}else t=(i=Ft(e.b,a,!1))?r*i:t}return t}var o=t.H.F,a=t.H.G,s=Hl(t.H),u={top:s.T-a,left:s.V-o,bottom:s.R-a,right:s.U-o,Oc:0,Nc:0},l=t.b;return 0<l.length&&(u=l.reduce(function(e,n){if(i&&!i(n,t))return e;var o=Cc(t,n.Ca),a=n.b,u=n.Ob[0].ja.j,l=e.top,h=e.left,c=e.bottom,f=e.right,p=e.Oc,d=e.Nc;switch(o){case"inline-start":a.b?l=Math.max(l,a.top+a.height):h=Math.max(h,a.left+a.width);break;case"block-start":a.b?(u&&a.left<f&&(p=r(u,a.Jb[0],s.U-s.V)),f=Math.min(f,a.left)):(u&&a.top+a.height>l&&(p=r(u,a.Jb[0],s.R-s.T)),l=Math.max(l,a.top+a.height));break;case"inline-end":a.b?c=Math.min(c,a.top):f=Math.min(f,a.left);break;case"block-end":a.b?(u&&a.left+a.width>h&&(d=r(u,a.Jb[0],s.U-s.V)),h=Math.max(h,a.left+a.width)):(u&&a.top<c&&(d=r(u,a.Jb[0],s.R-s.T)),c=Math.min(c,a.top));break;default:throw Error("Unknown logical float side: "+o)}return{top:l,left:h,bottom:c,right:f,Oc:p,Nc:d}},u)),u.left+=o,u.right+=o,u.top+=a,u.bottom+=a,u}function _c(t,e,n,i,r,o,a,s){function u(t,n){var i=t(e.Cb,n);return i?(e.b&&(i=new ao(-i.R,i.V,-i.T,i.U)),h=e.b?Math.min(h,i.U):Math.max(h,i.T),c=e.b?Math.max(c,i.V):Math.min(c,i.R),!0):a}if(n!==t.W)return _c(ic(t,n),e,n,i,r,o,a,s);var l=Cc(t,i);if("snap-block"===l){if(!s["block-start"]&&!s["block-end"])return null}else if(!s[l])return null;var h=Tc(t,"block-start",e.j,e.f),c=Tc(t,"block-end",e.j,e.f);n=Tc(t,"inline-start",e.j,e.f);var f,p=Tc(t,"inline-end",e.j,e.f),d=e.b?e.F:e.G,b=e.b?e.G:e.F;h=e.b?Math.min(h,e.left+Dl(e)+e.width+Ll(e)+d):Math.max(h,e.top+d),c=e.b?Math.max(c,e.left+d):Math.min(c,e.top+Fl(e)+e.height+Ml(e)+d);if(o){if(t=e.b?ko(new ao(c,n,h,p)):new ao(n,h,p,c),("block-start"===l||"snap-block"===l||"inline-start"===l)&&!u(_o,t)||("block-end"===l||"snap-block"===l||"inline-end"===l)&&!u(No,t))return null;if(o=(f=(c-h)*jl(e))-(e.b?Ll(e):Fl(e))-(e.b?Dl(e):Ml(e)),t=(r=p-n)-(e.b?Fl(e):Dl(e))-(e.b?Ml(e):Ll(e)),!a&&(0>=o||0>=t))return null}else{f=(o=e.h)+(e.b?Ll(e):Fl(e))+(e.b?Dl(e):Ml(e));var g=(c-h)*jl(e);if("snap-block"===l&&(null===r?l="block-start":(l=Hl(t.H),l=jl(t.H)*(r-(t.H.b?l.U:l.T))<=jl(t.H)*((t.H.b?l.V:l.R)-r-f)?"block-start":"block-end"),!s[l])){if(!s["block-end"])return null;l="block-end"}if(!a&&g<f)return null;if(r=(t="inline-start"===l||"inline-end"===l?Dd(e.f,e.element,[Md])[Md]:e.ve?function(t){return Math.max.apply(null,t.Jb.map(function(t,e){var n=Od(this.f,t),i=this.fg[e];return this.b?i.top+n.height+i.bottom:i.left+n.width+i.right},t))}(e):e.b?e.height:e.width)+(e.b?Fl(e):Dl(e))+(e.b?Ml(e):Ll(e)),!a&&p-n<r)return null}switch(h-=d,c-=d,n-=b,p-=b,l){case"inline-start":case"block-start":case"snap-block":Ul(e,n,t),Bl(e,h,o);break;case"inline-end":case"block-end":Ul(e,p-r,t),Bl(e,c-f*jl(e),o);break;default:throw Error("unknown float direction: "+i)}return l}function Nc(t){var e=t.H.element&&t.H.element.parentNode;e&&t.b.forEach(function(t){e.appendChild(t.b.element)})}function Oc(t,e,n,i){function r(t){return function(e){return e.Ca===t&&e.Ia()<a}}if(e.W!==t.W)return Oc(ic(t,e.W),e,n,i);var o={"block-start":!0,"block-end":!0,"inline-start":!0,"inline-end":!0};if(!i)return o;n=Cc(t,n),i="all"===(i=Cc(t,i))?["block-start","block-end","inline-start","inline-end"]:"both"===i?["inline-start","inline-end"]:"same"===i?"snap-block"===n?["block-start","block-end"]:[n]:[i];var a=e.Ia();return i.forEach(function(t){switch(t){case"block-start":case"inline-start":o[t]=!function t(e,n){return e.children.some(function(e){return e.b.some(r(n))||t(e,n)})}(this,t);break;case"block-end":case"inline-end":o[t]=!function t(e,n){var i=e.parent;return!!i&&(i.b.some(r(n))||t(i,n))}(this,t);break;default:throw Error("Unexpected side: "+t)}},t),o}Jh.prototype.Ia=function(){if(null===this.order)throw Error("The page float is not yet added");return this.order},Jh.prototype.df=function(){return!1},qh.prototype.nf=function(){return this.f++},qh.prototype.le=function(t){if(0<=this.b.findIndex(function(e){return hl(e.b,t.b)}))throw Error("A page float with the same source node is already registered");var e=t.order=this.nf();t.id="pf"+e,this.b.push(t)},qh.prototype.cf=function(t){var e=this.b.findIndex(function(e){return hl(e.b,t)});return 0<=e?this.b[e]:null},Qh.prototype.Ia=function(){var t=this.Ob.map(function(t){return t.ja});return Math.min.apply(null,t.map(function(t){return t.Ia()}))},Qh.prototype.f=function(t){return this.Ia()<t.Ia()},nc.prototype.le=function(t){this.u.le(t)},nc.prototype.cf=function(t){return this.u.cf(t)};var Ic=[];function Pc(t){for(var e=Ic.length-1;0<=e;e--){var n=Ic[e];if(n.Ef(t))return n}throw Error("No PageFloatLayoutStrategy found for "+t)}function Fc(){}(n=Fc.prototype).Ff=function(t){return Yh(t.W)},n.Ef=function(){return!0},n.Lf=function(t,e,n){var i=t.W,r=t.Ca,o=El(t);return function(t,e,n,i){var r=oi("resolveFloatReferenceFromColumnSpan"),o=t.l,a=sc(o,"region");return oc(o).width<oc(a).width&&"column"===e?n===Ke?qc(t,yl(i)).then(function(n){var i=n.A;n=Dd(t.f,i,[Fd])[Fd],i=of(t,i),(n=t.b?n+(i.top+i.bottom):n+(i.left+i.right))>t.width?xi(r,"region"):xi(r,e)}):xi(r,n===$e?"region":e):xi(r,e),r.result()}(n,i,t.ca,t).ea(function(n){return n=new Jh(o,i=n,r,t.l,e.h,t.N),e.le(n),ai(n)})},n.Mf=function(t,e,n,i){return new Qh(t[0].ja.W,e,t,n,i)},n.xf=function(t,e){return fc(e,t)},n.Bf=function(){},n.og=function(){},Ic.push(new Fc);var Mc={img:!0,svg:!0,audio:!0,video:!0};function Dc(t,e,n,i){var r=t.A;if(!r)return NaN;if(1==r.nodeType){if(t.K||!t.ya)if((o=Od(e,r)).right>=o.left&&o.bottom>=o.top)return t.K?i?o.left:o.bottom:i?o.right:o.top;return NaN}var o=NaN,a=r.ownerDocument.createRange(),s=r.textContent.length;if(!s)return NaN;if(t.K&&(n+=s),n>=s&&(n=s-1),a.setStart(r,n),a.setEnd(r,n+1),t=Nd(e,a),n=i){if(n=document.body,null==it){var u=n.ownerDocument;(a=u.createElement("div")).style.position="absolute",a.style.top="0px",a.style.left="0px",a.style.width="100px",a.style.height="100px",a.style.overflow="hidden",a.style.lineHeight="16px",a.style.fontSize="16px",R(a,"writing-mode","vertical-rl"),n.appendChild(a),s=u.createTextNode("a a a a a a a a a a a a a a a a"),a.appendChild(s),(u=u.createRange()).setStart(s,0),u.setEnd(s,1),s=u.getBoundingClientRect(),it=10>s.right-s.left,n.removeChild(a)}n=it}if(n){for((n=r.ownerDocument.createRange()).setStart(r,0),n.setEnd(r,r.textContent.length),e=Nd(e,n),r=[],n=(t=h(t)).next();!n.done;n=t.next()){for(n=n.value,a=0;a<e.length;a++)if(s=e[a],n.top>=s.top&&n.bottom<=s.bottom&&1>Math.abs(n.left-s.left)){r.push({top:n.top,left:s.left,bottom:n.bottom,right:s.right});break}a==e.length&&(C.b("Could not fix character box"),r.push(n))}t=r}for(e=0,t=(r=h(t)).next();!t.done;t=r.next())t=t.value,n=i?t.bottom-t.top:t.right-t.left,t.right>t.left&&t.bottom>t.top&&(isNaN(o)||n>e)&&(o=i?t.left:t.bottom,e=n);return o}function Lc(t){for(var e=ni("RESOLVE_LAYOUT_PROCESSOR"),n=0;n<e.length;n++){var i=e[n](t);if(i)return i}throw Error("No processor found for a formatting context: "+t.We())}function jc(t){this.Kd=t}function Rc(){}function zc(t,e){return{current:e.reduce(function(e,n){return e+n.b(t)},0),He:e.reduce(function(e,n){return e+n.F(t)},0)}}function Bc(t,e){this.h=t,this.Tc=e,this.j=!1,this.l=null}function Uc(t,e,n,i){this.position=t,this.F=e,this.B=this.j=n,this.D=i,this.h=!1,this.xc=0}function Vc(t){for(var e=1;e<t.length;e++){var n=t[e-1],i=t[e];n===i?C.b("validateCheckPoints: duplicate entry"):n.Ma>=i.Ma?C.b("validateCheckPoints: incorrect boxOffset"):n.M==i.M&&(i.K?n.K&&C.b("validateCheckPoints: duplicate after points"):n.K||i.Ma-n.Ma!=i.na-n.na&&C.b("validateCheckPoints: boxOffset inconsistent with offsetInNode"))}}function Hc(t){this.parent=t}function $c(t,e,n,i,r){Pl.call(this,t),this.j=e,this.f=n,this.Zb=i,this.Ng=t.ownerDocument,this.l=r,ac(r,this),this.kf=null,this.$f=this.gg=!1,this.la=this.sa=this.D=this.fb=this.ua=0,this.Cb=this.dg=this.cg=null,this.Ld=!1,this.g=this.N=null,this.Kb=!0,this.ye=this.Fe=this.Ee=0,this.u=!0,this.xb=null,this.B=[],this.ta=this.Md=null,this.jf=NaN}function Gc(t,e){return!(!e.Ca||t.gg&&!e.parent)}function Kc(t,e){return t.b?e<t.la:e>t.la}function Xc(t,e){if(t)for(var n;(n=t.lastChild)!=e;)t.removeChild(n)}jc.prototype.b=function(t){return this.Kd.every(function(e){return e.b(t)})},Rc.prototype.u=function(){},Rc.prototype.g=function(){return null},g(Bc,Rc),Bc.prototype.f=function(t,e){return e<this.b()?null:(this.j||(this.l=function(t,e,n){for(var i=(l=e.h)[0];i.parent&&i.ya;)i=i.parent;var r;n?r=n=1:(n=Math.max((i.h.widows||2)-0,1),r=Math.max((i.h.orphans||2)-0,1));var i=wf(t,i),o=mf(t,l),a=t.la-i,i=jl(t),s=yf(t,e),a=a-i*s,u=function(t,e){var n=e.findIndex(function(t){return t.xa});if(0>n)return{xc:NaN,If:null};var i=e[n];return{xc:nf(t,null,e,n,i.Ma),If:i}}(t,l);isNaN(u.xc)&&(u.xc=1/0*i);var l,h=0>=(l=Y(o.length,function(e){return e=o[e],t.b?e<a||e<=u.xc:e>a||e>=u.xc}));if(h&&(l=Y(o.length,function(e){return t.b?o[e]<a:o[e]>a})),(l=Math.min(o.length-n,l))<r)return null;a=o[l-1],(e=h?u.If:df(t,e.h,a))&&(n=function(t,e){var n=e;do{n=n.parent}while(n&&n.ya);return n?((n=yl(n).modify()).K=!0,Dc(n,t.f,0,t.b)):NaN}(t,e),!isNaN(n)&&n<a&&(a=n),t.h=i*(a-t.D)+s);return e}(t,this,0<e),this.j=!0),this.l)},Bc.prototype.b=function(){return this.Tc},Bc.prototype.g=function(){return this.j?this.l:this.h[this.h.length-1]},g(Uc,Rc),Uc.prototype.f=function(t,e){if(!this.h){var n=wf(t,this.position);this.xc=Dc(this.position,t.f,0,t.b)+n,this.h=!0}n=this.xc;var i=zc(this.g(),em(t));return this.B=Kc(t,n+(t.b?-1:1)*i.He),this.j=this.position.xa=Kc(t,n+(t.b?-1:1)*i.current),e<this.b()?n=null:(t.h=this.D+yf(t,this),n=this.position),n},Uc.prototype.b=function(){if(!this.h)throw Error("EdgeBreakPosition.prototype.updateEdge not called");var t;if((t=this.g())&&t.parent){var e=Pv(t.parent);t=!!e&&(!!(e=e.b)&&(t&&e.g===t.M))}else t=!1;return t=t&&!this.B,(Ph[this.F]?1:0)+(this.j&&!t?3:0)+(this.position.parent?this.position.parent.j:0)},Uc.prototype.g=function(){return this.position},Hc.prototype.We=function(){return"Block formatting context (adapt.layout.BlockFormattingContext)"},Hc.prototype.ff=function(t,e){return e},Hc.prototype.Ye=function(){},Hc.prototype.Xe=function(){},g($c,Pl),$c.prototype.Lc=function(t){var e=this,n=oi("openAllViews"),i=t.pa;!function(t,e,n){t.N=e,t.f=n}(e.j,e.element,e.$f);var r=i.length-1,o=null;return ki(function(){for(;0<=r;){if(o=fl(i[r],o),r!==i.length-1||o.C||(o.C=e.kf),!r){var n,a=o;if(n=(n=t).Qa?mv(n.Qa,n.na,1):n.na,a.na=n,o.K=t.K,o.Qa=t.Qa,o.K)break}if(a=md(e.j,o,!r&&!o.na),r--,a.Xa())return a}return ai(!1)}).then(function(){xi(n,o)}),n.result()};var Wc=/^[^A-Za-z0-9_\u009E\u009F\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02AF\u037B-\u037D\u0386\u0388-\u0482\u048A-\u0527]*([A-Za-z0-9_\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02AF\u037B-\u037D\u0386\u0388-\u0482\u048A-\u0527][^A-Za-z0-9_\u009E\u009F\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02AF\u037B-\u037D\u0386\u0388-\u0482\u048A-\u0527]*)?/;function Yc(t,e){if(e.f&&e.ya&&!e.K&&!e.f.count&&1!=e.A.nodeType){var n=e.A.textContent.match(Wc);return kd(t.j,e,n[0].length)}return ai(e)}function Jc(t,e,n){var i=!1,r=oi("buildViewToNextBlockEdge");return Ci(function(r){e.A&&!vf(e)&&n.push(yl(e)),Yc(t,e).then(function(o){o!==e&&(vf(e=o)||n.push(yl(e))),Zc(t,e).then(function(n){(e=n)?(!i&&t.Zb.b(e)||(i=!0,(e=e.modify()).xa=!0),Gc(t,e)&&!t.b?Af(t,e).then(function(n){e=n,kc(t.l)&&(e=null),e?_i(r):Ni(r)}):e.ya?_i(r):Ni(r)):Ni(r)})})}).then(function(){xi(r,e)}),r.result()}function Zc(t,e,n){return bm(e=yd(t.j,e,n),t)}function qc(t,e){if(!e.A)return ai(e);var n=[],i=e.M,r=oi("buildDeepElementView");return Ci(function(r){e.A&&e.ya&&!vf(e)?n.push(yl(e)):(0<n.length&&pf(t,e,n),n=[]),Yc(t,e).then(function(o){if(o!==e){for(var a=o;a&&a.M!=i;)a=a.parent;if(!a)return e=o,void Ni(r);vf(o)||n.push(yl(o))}Zc(t,o).then(function(n){(e=n)&&e.M!=i?t.Zb.b(e)?_i(r):((e=e.modify()).xa=!0,t.u?Ni(r):_i(r)):Ni(r)})})}).then(function(){0<n.length&&pf(t,e,n),xi(r,e)}),r.result()}function Qc(t,e,n,i,r){var o=t.Ng.createElement("div");return t.b?(r>=t.height&&(r-=.1),R(o,"height",i+"px"),R(o,"width",r+"px")):(i>=t.width&&(i-=.1),R(o,"width",i+"px"),R(o,"height",r+"px")),R(o,"float",n),R(o,"clear",n),t.element.insertBefore(o,e),o}function tf(t){for(var e=t.element.firstChild;e;){var n=e.nextSibling;if(1==e.nodeType){var i=e.style.cssFloat;if("left"!=i&&"right"!=i)break;t.element.removeChild(e)}e=n}}function ef(t){for(var e=t.element.firstChild,n=t.b?t.b?t.ua:t.D:t.b?t.sa:t.ua,i=t.b?t.b?t.fb:t.sa:t.b?t.D:t.fb,r=h(t.Cb),o=r.next();!o.done;o=r.next()){var a=(o=o.value).R-o.T;o.left=Qc(t,e,"left",o.V-n,a),o.right=Qc(t,e,"right",i-o.U,a)}}function nf(t,e,n,i,r){var o;if(e&&Df(e.A))return NaN;if(e&&e.K&&!e.ya&&(o=Dc(e,t.f,0,t.b),!isNaN(o)))return o;for(r-=(e=n[i]).Ma;;){if(o=Dc(e,t.f,r,t.b),!isNaN(o))return o;if(0<r)r--;else{if(0>--i)return t.D;1!=(e=n[i]).A.nodeType&&(r=e.A.textContent.length)}}}function rf(t){return"number"==typeof t?t:(t=t.match(/^(-?[0-9]*(\.[0-9]*)?)px$/))?parseFloat(t[0]):0}function of(t,e){var n=Id(t.f,e),i=new uo;return n&&(i.left=rf(n.marginLeft),i.top=rf(n.marginTop),i.right=rf(n.marginRight),i.bottom=rf(n.marginBottom)),i}function af(t,e){var n=Id(t.f,e),i=new uo;return n&&(i.left=rf(n.borderLeftWidth)+rf(n.paddingLeft),i.top=rf(n.borderTopWidth)+rf(n.paddingTop),i.right=rf(n.borderRightWidth)+rf(n.paddingRight),i.bottom=rf(n.borderBottomWidth)+rf(n.paddingBottom)),i}function sf(t,e,n,i,r,o,a,s){var u=t.l,l=(e=(s?s.Ob:[]).concat(e))[0].ja,h=Oc(u,l,n,i),c=function(t,e,n,i,r,o){R(a=t.element.ownerDocument.createElement("div"),"position","absolute");var a,s=sc(t.l,e.W),u=new nc(null,"column",null,t.l.h,e.b,null,null);s=oc(s),ac(u,a=new Bf(n,a,t.j.clone(),t.f,t.Zb,u,s)),s=e.W;var l=t.l;e=oc(l,s),u=a.element,e.element.parentNode.appendChild(u),a.gg=!0,a.F=e.F,a.G=e.G,a.b=e.b,a.marginLeft=a.marginRight=a.marginTop=a.marginBottom=0,a.Z=a.Za=a.ca=a.Ba=0,a.I=a.Y=a.J=a.S=0,a.ob=(e.ob||[]).concat(),a.Kb=!pc(l),a.Lb=null;var h=Hl(e);return zl(a,h.V-e.F,h.U-h.V),Rl(a,h.T-e.G,h.R-h.T),r.Bf(a,e,t),Of(a),(t=!!_c(l,a,s,n,i,!0,!pc(l),o))?(tf(a),Of(a)):e.element.parentNode.removeChild(u),t?a:null}(t,l,n,a,o,h),f={Pf:c,pf:null,mf:null};if(!c)return ai(f);var p=oi("layoutSinglePageFloatFragment"),d=!1,b=0;return Ci(function(t){b>=e.length?Ni(t):Ff(c,new Cl(e[b].b),!0).then(function(e){f.mf=e,!e||r?(b++,_i(t)):(d=!0,Ni(t))})}).then(function(){if(!d){var t=_c(u,c,l.W,n,a,!1,r,h);t?(t=o.Mf(e,t,c,!!f.mf),hc(u,t,!0),f.pf=t):d=!0}xi(p,f)}),p.result()}function uf(t,e,n,i,r){function o(t,n){n?cc(a,n,!0):t&&t.element.parentNode.removeChild(t.element),function t(e,n){n!==e.W?t(ic(e,n),n):(e.j.forEach(function(t){hc(this,t,!0)},e),e.j.splice(0))}(a,s.W),gc(a,e)}var a=t.l,s=e.ja;!function t(e,n){var i=n.W;if(i!==e.W)t(ic(e,i),n);else if("block-end"===(i=Cc(e,n.Ca))||"snap-block"===i||"inline-end"===i)for(var r=0;r<e.b.length;){var o=e.b[r],a=Cc(e,o.Ca);(a===i||"snap-block"===i&&"block-end"===a)&&o.f(n)?(e.j.push(o),e.b.splice(r,1)):r++}}(a,s);var u=oi("layoutPageFloatInner");return sf(t,[e],s.Ca,s.h,!pc(a),n,i,r).then(function(e){var n=e.Pf,i=e.pf,l=e.mf;i?function(t,e,n){var i=t.l,r=function t(e,n){return n===e.W?e.j.concat().sort(function(t,e){return e.Ia()-t.Ia()}):t(ic(e,n),n)}(i,e),o=[],a=[],s=!1,u=oi("layoutStashedPageFloats"),l=0;return Ci(function(e){if(l>=r.length)Ni(e);else{var i=r[l];if(n.includes(i))l++,_i(e);else{var u=Pc(i.Ob[0].ja);sf(t,i.Ob,i.Ca,null,!1,u,null).then(function(t){var n=t.Pf;n&&o.push(n),(t=t.pf)?(a.push(t),l++,_i(e)):(s=!0,Ni(e))})}}}).then(function(){s?(a.forEach(function(t){cc(i,t,!0)}),o.forEach(function(t){(t=t.element)&&t.parentNode&&t.parentNode.removeChild(t)})):r.forEach(function(t){(t=t.b.element)&&t.parentNode&&t.parentNode.removeChild(t)}),xi(u,!s)}),u.result()}(t,s.W,[r]).then(function(t){t?(hc(a,i),function t(e,n){n!==e.W?t(ic(e,n),n):e.j.splice(0)}(a,s.W),l&&gc(a,new ec(s,l.f)),xi(u,!0)):(o(n,i),xi(u,!1))}):(o(n,i),xi(u,!1))}),u.result()}function lf(t,e){var n=t.l,i=function(t){for(var e=Ic.length-1;0<=e;e--){var n=Ic[e];if(n.Ff(t))return n}throw Error("No PageFloatLayoutStrategy found for "+t)}(e),r=n.cf(El(e));return(r?ai(r):i.Lf(e,n,t)).ea(function(r){var o=cl(e),a=function(t,e){var n=e.A.parentNode,i=n.ownerDocument.createElement("span");return i.setAttribute("data-adapt-spec","1"),"footnote"===e.Ca&&Sd(t.j,e,"footnote-call",i),n.appendChild(i),n.removeChild(e.A),(n=e.modify()).K=!0,n.A=i,n}(t,e),s=i.xf(r,n);o=new ec(r,o);if(s&&tc(s,r))return dc(n,r,a.A),ai(a);if(lc(n,r)||vc(n,r))return gc(n,o),dc(n,r,a.A),ai(a);if(t.ta)return ai(null);var u=Dc(a,t.f,0,t.b);return Kc(t,u)?ai(a):uf(t,o,i,u,s).ea(function(t){return t?ai(null):(dc(n,r,a.A),ai(a))})})}function hf(t,e,n){if(!e.K||e.ya){if(n){for(var i="",r=e.parent;r&&!i;r=r.parent)!r.ya&&r.A&&(i=r.A.style.textAlign);if("justify"!==i)return}var o=e.A,a=o.ownerDocument,s=n&&(e.K||1!=o.nodeType);if((i=s?o.nextSibling:o)&&!i.parentNode&&(i=null),r=o.parentNode||e.parent&&e.parent.A){var u=i,l=document.body;if(null===ot){var h=l.ownerDocument,c=h.createElement("div");c.style.position="absolute",c.style.top="0px",c.style.left="0px",c.style.width="40px",c.style.height="100px",c.style.lineHeight="16px",c.style.fontSize="16px",c.style.textAlign="justify",l.appendChild(c);var f=h.createTextNode("a a-");c.appendChild(f);var p=h.createElement("span");p.style.display="inline-block",p.style.width="40px",c.appendChild(p),(h=h.createRange()).setStart(f,2),h.setEnd(f,4),ot=37>h.getBoundingClientRect().right,l.removeChild(c)}if(ot&&((s=(s=s?o:o.previousSibling)?s.textContent:"").charAt(s.length-1)===gf(e)&&(s=o.ownerDocument,o=o.parentNode,l=document.body,null===at&&((c=(h=l.ownerDocument).createElement("div")).style.position="absolute",c.style.top="0px",c.style.left="0px",c.style.width="40px",c.style.height="100px",c.style.lineHeight="16px",c.style.fontSize="16px",c.style.textAlign="justify",l.appendChild(c),f=h.createTextNode("a a-"),c.appendChild(f),c.appendChild(h.createElement("wbr")),(p=h.createElement("span")).style.display="inline-block",p.style.width="40px",c.appendChild(p),(h=h.createRange()).setStart(f,2),h.setEnd(f,4),at=37>h.getBoundingClientRect().right,l.removeChild(c)),at?o.insertBefore(s.createTextNode(" "),u):o.insertBefore(s.createElement("wbr"),u))),s=e.b,(o=a.createElement("span")).style.visibility="hidden",o.style.verticalAlign="top",o.setAttribute("data-adapt-spec","1"),(l=a.createElement("span")).style.fontSize="0",l.style.lineHeight="0",l.textContent=" #",o.appendChild(l),o.style.display="block",o.style.textIndent="0",o.style.textAlign="left",r.insertBefore(o,u),u=Od(t.f,l),o.style.textAlign="right",l=Od(t.f,l),o.style.textAlign="",c=document.body,null===rt){(f=(p=c.ownerDocument).createElement("div")).style.position="absolute",f.style.top="0px",f.style.left="0px",f.style.width="30px",f.style.height="100px",f.style.lineHeight="16px",f.style.fontSize="16px",f.style.textAlign="justify",c.appendChild(f),h=p.createTextNode("a | "),f.appendChild(h);var d=p.createElement("span");d.style.display="inline-block",d.style.width="30px",f.appendChild(d),(p=p.createRange()).setStart(h,0),p.setEnd(h,3),rt=27>p.getBoundingClientRect().right,c.removeChild(f)}o.style.display=rt?"inline":"inline-block",u=1<=(u=s?l.top-u.top:l.left-u.left)?u-1+"px":"100%",s?o.style.paddingTop=u:o.style.paddingLeft=u,n||(n=a.createElement("div"),r.insertBefore(n,i),i=Od(t.f,o),t=Od(t.f,n),e.b?(n.style.marginRight=t.right-i.right+"px",n.style.width="0px"):(n.style.marginTop=i.top-t.top+"px",n.style.height="0px"),n.setAttribute("data-adapt-spec","1"))}}}function cf(t,e){for(var n=0,i=0,r=e.length-1;0<=r;r--){var o=e[r];if(!o.K||!o.A||1!=o.A.nodeType)break;o=of(t,o.A),0<(o=t.b?-o.left:o.bottom)?n=Math.max(n,o):i=Math.min(i,o)}return n-i}function ff(t,e){var n=oi("layoutBreakableBlock"),i=[];return Jc(t,e,i).then(function(r){if(0>(o=i.length-1))xi(n,r);else{var o=nf(t,r,i,o,i[o].Ma),a=!1;if(!r||!Df(r.A)){var s=zc(r,em(t));a=Kc(t,o+(t.b?-1:1)*s.He);Kc(t,o+(t.b?-1:1)*s.current)&&!t.ta&&(t.ta=r)}r||(o+=cf(t,i)),Pf(t,o),(e.f?function(t,e,n,i){var r=oi("processLineStyling");Vc(i);var o=i.concat([]);i.splice(0,i.length);var a=0,s=e.f;return 0==s.count&&(s=s.Ig),Ci(function(i){if(s){var r=mf(t,o),u=s.count-a;if(r.length<=u)Ni(i);else{var l=df(t,o,r[u-1]);l?t.Na(l,!1,!1).then(function(){a+=u,kd(t.j,l,0).then(function(r){hf(t,e=r,!1),s=e.f,Jc(t,e,o=[]).then(function(t){n=t,_i(i)})})}):Ni(i)}}else Ni(i)}).then(function(){Array.prototype.push.apply(i,o),Vc(i),xi(r,n)}),r.result()}(t,e,r,i):ai(r)).then(function(e){pf(t,e,i),0<i.length&&(t.N.push(new Bc(i,i[0].j)),a&&(2!=i.length&&0<t.N.length||i[0].M!=i[1].M||!Mc[i[0].M.localName])&&e&&((e=e.modify()).xa=!0)),xi(n,e)})}}),n.result()}function pf(t,e,n){ni("POST_LAYOUT_BLOCK").forEach(function(i){i(e,n,t)})}function df(t,e,n){Vc(e);var i=t.b?n-1:n+1,r=0,o=e[0].Ma;n=r;for(var a,s=e.length-1,u=e[s].Ma;o<u;){a=o+Math.ceil((u-o)/2),n=r;for(var l=s;n<l;){var h=n+Math.ceil((l-n)/2);e[h].Ma>a?l=h-1:n=h}if(l=nf(t,null,e,n,a),t.b?l<=i:l>=i){for(u=a-1;e[n].Ma==a;)n--;s=n}else Pf(t,l),o=a,r=n}return i=o,1!=(n=(e=e[n]).A).nodeType&&(function(t){ni("RESOLVE_TEXT_NODE_BREAKER").reduce(function(e,n){return n(t)||e},bf)}(e),e.K?e.na=n.length:(r=i-e.Ma,173==(i=n.data).charCodeAt(r)?(n.replaceData(r,i.length-r,e.B?"":gf(e)),n=r+1):(o=i.charAt(r),r++,s=i.charAt(r),n.replaceData(r,i.length-r,!e.B&&K(o)&&K(s)?gf(e):""),n=r),0<(r=n)&&(n=r,(e=e.modify()).na+=n,e.g=null))),Nf(t,e,!1),e}var bf=new function(){};function gf(t){return t.F||t.parent&&t.parent.F||"-"}function vf(t){return!!t&&(!(!(t=t.A)||1!==t.nodeType)&&!!t.getAttribute("data-adapt-spec"))}function mf(t,e){for(var n=[],i=e[0].A,r=e[e.length-1].A,o=[],a=i.ownerDocument.createRange(),s=!1,u=null,l=!1,h=!0;h;){var c=!0;do{var f=null;if(i==r&&(h=1===r.nodeType&&!(!r.firstChild||s)),1!=i.nodeType)l||(a.setStartBefore(i),l=!0),u=i;else if(s)s=!1;else if(i.getAttribute("data-adapt-spec"))c=!l;else{var p;if(!(p="ruby"==i.localName))t:{switch(Id(t.f,i).display){case"ruby":case"inline-block":case"inline-flex":case"inline-grid":case"inline-list-item":case"inline-table":p=!0;break t}p=!1}p?((c=!l)&&(a.setStartBefore(i),l=!0,u=i),i.contains(r)&&(h=!1)):f=i.firstChild}f||((f=i.nextSibling)||(s=!0,f=i.parentNode)),i=f}while(c&&h);if(l){for(a.setEndAfter(u),l=Nd(t.f,a),c=0;c<l.length;c++)o.push(l[c]);l=!1}}for(o.sort(t.b?ul:sl),u=i=s=a=r=0,h=jl(t);;)if(u<o.length&&(l=o[u],c=1,0<i&&(c=Math.max(t.b?l.right-l.left:l.bottom-l.top,1),c=h*(t.b?l.right:l.top)<h*r?h*((t.b?l.left:l.bottom)-r)/c:h*(t.b?l.left:l.bottom)>h*a?h*(a-(t.b?l.right:l.top))/c:1),!i||.6<=c||.2<=c&&(t.b?l.top:l.left)>=s-1))s=t.b?l.bottom:l.right,t.b?(r=i?Math.max(r,l.right):l.right,a=i?Math.min(a,l.left):l.left):(r=i?Math.min(r,l.top):l.top,a=i?Math.max(a,l.bottom):l.bottom),i++,u++;else if(0<i&&(n.push(a),i=0),u>=o.length)break;return n.sort(J),t.b&&n.reverse(),n}function wf(t,e){var n=0;return Sl(e,function(e){if("clone"===e.h["box-decoration-break"]){var i=af(t,e.A);n+=e.b?-i.left:i.bottom,"table"===e.display&&(n+=e.ta)}}),n}function yf(t,e){return zc(e?e.g():null,em(t)).current}function xf(t,e,n,i,r){if(kc(t.l)||t.g||!n)return ai(e);var o=oi("doFinishBreak"),a=!1;if(!e){if(t.Kb)return C.b("Could not find any page breaks?!!"),function(t,e){var n=yl(e),i=oi("skipEdges"),r=null,o=!1;return Ci(function(i){for(;e;){do{if(e.A){if(e.ya&&1!=e.A.nodeType){if(il(e.A,e.uc))break;if(!e.K)return Ih[r]&&(t.g=r),void Ni(i)}if(!e.K&&(Gc(t,e)||e.I))return r=Fh(r,e.g),Ih[r]&&(t.g=r),void Ni(i);if(1==e.A.nodeType){var a=e.A.style;if(e.K){if(o){if(Ih[r])return t.g=r,void Ni(i);r=null}o=!1,r=Fh(r,e.G)}else{if(r=Fh(r,e.g),Mc[e.A.localName])return Ih[r]&&(t.g=r),void Ni(i);if(a&&(!Ef(a.paddingTop)||!Ef(a.borderTopWidth)))return void Ni(i)}o=!0}}}while(0);if((a=yd(t.j,e)).Xa())return void a.then(function(t){e=t,_i(i)});e=a.get()}n=null,Ni(i)}).then(function(){xi(i,n)}),i.result()}(t,n).then(function(e){e?((e=e.modify()).xa=!1,t.Na(e,a,!0).then(function(){xi(o,e)})):xi(o,e)}),o.result();e=i,a=!0,t.h=r}return t.Na(e,a,!0).then(function(){xi(o,e)}),o.result()}function Ef(t){return""==(t=t.toString())||"auto"==t||!!t.match(/^0+(.0*)?[^0-9]/)}function Sf(t,e,n){if(!e||Df(e.A))return!1;var i=Dc(e,t.f,0,t.b),r=zc(e,em(t)),o=Kc(t,i+(t.b?-1:1)*r.He);return Kc(t,i+(t.b?-1:1)*r.current)&&!t.ta?t.ta=e:n&&(e=i+cf(t,n),r=t.la-jl(t)*r.current,i=t.b?Math.min(i,Math.max(e,r)):Math.max(i,Math.min(e,r))),Pf(t,i),o}function kf(t,e,n,i,r){return!(!e||Df(e.A))&&(n=Sf(t,e,n),!i&&n||If(t,e,r,n),n)}function Cf(t,e){if(!e.A.parentNode)return!1;var n=of(t,e.A),i=e.A.ownerDocument.createElement("div");t.b?(i.style.bottom="0px",i.style.width="1px",i.style.marginRight=n.right+"px"):(i.style.right="0px",i.style.height="1px",i.style.marginTop=n.top+"px"),e.A.parentNode.insertBefore(i,e.A);var r=Od(t.f,i),o=(r=t.b?r.right:r.top,jl(t)),a=e.l,s=1/0*-jl(t);switch("all"===a&&(s=function(t,e){function n(t){return function(e){return bc(t,Zh(e.ja))}}function i(t,e){return t.Ob.some(n(e))}for(var r=Hl(e),o=(r=e.b?r.V:r.R,t);o;){if(o.f.some(n(o)))return r;o=o.parent}return o=Tc(t,"block-start",e.j,e.f,i),Tc(t,"block-end",e.j,e.f,i)*jl(e)<r*jl(e)?r:o}(t.l,t)),a){case"left":s=o*Math.max(s*o,t.Ee*o);break;case"right":s=o*Math.max(s*o,t.Fe*o);break;default:s=o*Math.max(s*o,Math.max(t.Fe*o,t.Ee*o))}return r*o>=s*o?(e.A.parentNode.removeChild(i),!1):(r=Math.max(1,(s-r)*o),t.b?i.style.width=r+"px":i.style.height=r+"px",r=Od(t.f,i),r=t.b?r.left:r.bottom,t.b?(0<(s=r+n.right-s)==0<=n.right&&(s+=n.right),i.style.marginLeft=s+"px"):(0<(s-=r+n.top)==0<=n.top&&(s+=n.top),i.style.marginBottom=s+"px"),e.D=i,!0)}function Tf(t){return t instanceof Hc||!(t instanceof _m)&&t instanceof Mv}function Af(t,e){return Yh(e.W)||"footnote"===e.Ca?lf(t,e):function(t,e){var n=oi("layoutFloat"),i=e.A,r=e.Ca;return R(i,"float","none"),R(i,"display","inline-block"),R(i,"vertical-align","top"),qc(t,e).then(function(o){for(var a=Od(t.f,i),s=of(t,i),u=(a=new ao(a.left-s.left,a.top-s.top,a.right+s.right,a.bottom+s.bottom),s=t.ua,t.fb),l=e.parent;l&&l.ya;)l=l.parent;if(l){var c=l.A.ownerDocument.createElement("div");c.style.left="0px",c.style.top="0px",t.b?(c.style.bottom="0px",c.style.width="1px"):(c.style.right="0px",c.style.height="1px"),l.A.appendChild(c);var f=Od(t.f,c);s=Math.max(t.b?f.top:f.left,s),u=Math.min(t.b?f.bottom:f.right,u),l.A.removeChild(c),c=t.b?a.R-a.T:a.U-a.V,"left"==r?u=Math.max(u,s+c):s=Math.min(s,u-c),l.A.appendChild(e.A)}c=new ao(s,jl(t)*t.D,u,jl(t)*t.sa),s=a,t.b&&(s=ko(a)),u=jl(t),s.T<t.ye*u&&(f=s.R-s.T,s.T=t.ye*u,s.R=s.T+f),u=t.Cb;t:for(var p=(f=s).T,d=f.U-f.V,b=f.R-f.T,g=Ao(u,p);;){var v=p+b;if(v>c.R)break t;for(var m=c.V,w=c.U,y=g;y<u.length&&u[y].T<v;y++){var x=u[y];x.V>m&&(m=x.V),x.U<w&&(w=x.U)}if(m+d<=w||g>=u.length){"left"==r?(f.V=m,f.U=m+d):(f.V=w-d,f.U=w),f.R+=p-f.T,f.T=p;break t}p=u[g].R,g++}t.b&&(a=new ao(-s.R,s.V,-s.T,s.U));t:{if(c=Id(t.f,i),u=new uo,c){if("border-box"==c.boxSizing){c=of(t,i);break t}u.left=rf(c.marginLeft)+rf(c.borderLeftWidth)+rf(c.paddingLeft),u.top=rf(c.marginTop)+rf(c.borderTopWidth)+rf(c.paddingTop),u.right=rf(c.marginRight)+rf(c.borderRightWidth)+rf(c.paddingRight),u.bottom=rf(c.marginBottom)+rf(c.borderBottomWidth)+rf(c.paddingBottom)}c=u}if(R(i,"width",a.U-a.V-c.left-c.right+"px"),R(i,"height",a.R-a.T-c.top-c.bottom+"px"),R(i,"position","absolute"),R(i,"display",e.display),u=null,l)if(l.S)u=l;else t:{for(l=l.parent;l;){if(l.S){u=l;break t}l=l.parent}u=null}if(u?((c=u.A.ownerDocument.createElement("div")).style.position="absolute",u.b?c.style.right="0":c.style.left="0",c.style.top="0",u.A.appendChild(c),l=Od(t.f,c),u.A.removeChild(c)):l={left:(t.b?t.sa:t.ua)-t.I,right:(t.b?t.D:t.fb)+t.Y,top:(t.b?t.ua:t.D)-t.J},(u?u.b:t.b)?R(i,"right",l.right-a.U+"px"):R(i,"left",a.V-l.left+"px"),R(i,"top",a.T-l.top+"px"),e.D&&(e.D.parentNode.removeChild(e.D),e.D=null),l=t.b?a.V:a.R,a=t.b?a.U:a.T,Kc(t,l)&&t.N.length)(e=e.modify()).xa=!0,xi(n,e);else{for(tf(t),c=new ao(t.b?t.sa:t.ua,t.b?t.ua:t.D,t.b?t.D:t.fb,t.b?t.fb:t.sa),t.b&&(c=ko(c)),u=t.Cb,f=[new ho(s.T,s.R,s.V,s.U)];0<f.length&&f[0].R<=c.T;)f.shift();if(f.length){for(f[0].T<c.T&&(f[0].T=c.T),(s=u.length?u[u.length-1].R:c.T)<c.R&&u.push(new ho(s,c.R,c.V,c.U)),s=Ao(u,f[0].T),p=(f=h(f)).next();!p.done&&(d=p.value,s!=u.length);p=f.next())for(u[s].T<d.T&&(p=u[s],s++,u.splice(s,0,new ho(d.T,p.R,p.V,p.U)),p.R=d.T);s<u.length&&((p=u[s++]).R>d.R&&(u.splice(s,0,new ho(d.R,p.R,p.V,p.U)),p.R=d.R),d.V!=d.U&&("left"==r?p.V=Math.min(d.U,c.U):p.U=Math.max(d.V,c.V)),p.R!=d.R););To(c,u)}ef(t),"left"==r?t.Ee=l:t.Fe=l,t.ye=a,Pf(t,l),xi(n,o)}}),n.result()}(t,e)}function _f(t,e,n,i){var r=oi("layoutNext");return function(t,e,n,i){function r(){return!!i||!n&&!!Ih[h]}function o(){(e=f[0]||e).A.parentNode.removeChild(e.A),s.g=h}var a=e.K?e.parent&&e.parent.C:e.C;if(a&&!Tf(a))return ai(e);var s=t,u=oi("skipEdges"),l=!i&&n&&e&&e.K,h=i,c=null,f=[],p=[],d=!1;return Ci(function(t){for(;e;){var i=Lc(e.C);do{if(e.A){if(e.ya&&1!=e.A.nodeType){if(il(e.A,e.uc))break;if(!e.K)return r()?o():kf(s,c,null,!0,h)?(e=(s.u&&c||e).modify()).xa=!0:(e=e.modify()).g=h,void Ni(t)}if(!e.K){if(i&&i.Ze(e))break;if(e.l&&Cf(s,e)&&n&&!s.N.length&&If(s,yl(e),h,!1),!Tf(e.C)||e.C instanceof Mv||Gc(s,e)||e.I)return f.push(yl(e)),h=Fh(h,e.g),r()?o():!kf(s,c,null,!0,h)&&s.Zb.b(e)||((e=(s.u&&c||e).modify()).xa=!0),void Ni(t)}if(1==e.A.nodeType){var a=e.A.style;if(e.K){if(!(e.ya||i&&i.Af(e,s.u))){if(d){if(r())return o(),void Ni(t);f=[],l=n=!1,h=null}d=!1,c=yl(e),p.push(c),h=Fh(h,e.G),!a||Ef(a.paddingBottom)&&Ef(a.borderBottomWidth)||(p=[c])}}else{if(f.push(yl(e)),h=Fh(h,e.g),!s.Zb.b(e)&&(kf(s,c,null,!s.u,h),(e=e.modify()).xa=!0,s.u))return void Ni(t);if(Mc[e.A.localName])return r()?o():kf(s,c,null,!0,h)&&((e=(s.u&&c||e).modify()).xa=!0),void Ni(t);!a||Ef(a.paddingTop)&&Ef(a.borderTopWidth)||(l=!1,p=[]),d=!0}}}}while(0);if((i=Zc(s,e,l)).Xa())return void i.then(function(n){e=n,_i(t)});e=i.get()}kf(s,c,p,!s.u,h)?c&&s.u&&((e=c.modify()).xa=!0):Ih[h]&&(s.g=h),Ni(t)}).then(function(){c&&(s.xb=El(c)),xi(u,e)}),u.result()}(t,e,n,i||null).then(function(i){!(e=i)||t.g||t.u&&e&&e.xa?xi(r,e):Lc(e.C).je(e,t,n).Ga(r)}),r.result()}function Nf(t,e,n){if(e)for(var i=e.parent;e;e=i,i=i?i.parent:null)Lc((i||e).C).Fd(t,i,e,n),n=!1}function Of(t){t.dg=[],R(t.element,"width",t.width+"px"),R(t.element,"height",t.height+"px"),(n=t.element.ownerDocument.createElement("div")).style.position="absolute",n.style.top=t.J+"px",n.style.right=t.Y+"px",n.style.bottom=t.S+"px",n.style.left=t.I+"px",t.element.appendChild(n);var e=Od(t.f,n);t.element.removeChild(n);var n=t.F+t.left+Dl(t),i=t.G+t.top+Fl(t);if(t.cg=new ao(n,i,n+t.width,i+t.height),t.ua=e?t.b?e.top:e.left:0,t.fb=e?t.b?e.bottom:e.right:0,t.D=e?t.b?e.right:e.top:0,t.sa=e?t.b?e.left:e.bottom:0,t.Ee=t.D,t.Fe=t.D,t.ye=t.D,t.la=t.sa,e=t.cg,i=new ao(n=t.F+t.left+Dl(t),i=t.G+t.top+Fl(t),n+t.width,i+t.height),t.Lb){n=i.V,i=i.T;for(var r=[],o=h(t.Lb.b),a=o.next();!a.done;a=o.next())a=a.value,r.push(new so(a.f+n,a.b+i));n=new fo(r)}else n=go(i.V,i.T,i.U,i.R);n=[n],i=function t(e){var n=e.b.map(function(t){return $l(t.b,null,null)});return e.parent?t(e.parent).concat(n):n}(t.l),t.Cb=function(t,e,n,i,r){r&&(t=ko(t),e=tt(e,Co),n=tt(n,Co)),r=e.length;var o,a,s,u=n?n.length:0,l=[],h=[];for(o=0;o<r;o++)po(e[o],h,o);for(o=0;o<u;o++)po(n[o],h,o+r);for(e=h.length,h.sort(co),n=0;h[n].g>=r;)n++;(n=h[n].b.b)>t.T&&l.push(new ho(t.T,n,t.U,t.U)),o=0;for(var c=[];o<e&&(s=h[o]).b.b<n;)s.f.b>n&&c.push(s),o++;for(;o<e||0<c.length;){var f=t.R,p=Math.min(xo(Math.ceil(n+8),i),t.R);for(a=0;a<c.length&&f>p;a++)(s=c[a]).b.f==s.f.f?s.f.b<f&&(f=Math.max(Eo(s.f.b,i),p)):s.b.f!=s.f.f&&(f=p);for(f>t.R&&(f=t.R);o<e&&(s=h[o]).b.b<f;)if(s.f.b<n)o++;else{if(!(s.b.b<p)){(a=Eo(s.b.b,i))<f&&(f=a);break}s.b.b==s.f.b&&s.b.b==n||(c.push(s),f=p),o++}for(p=[],a=0;a<c.length;a++)wo(p,c[a],n,f);if(p.sort(function(t,e){return t.f-e.f||t.g-e.g}),(p=yo(p,r,u)).length){var d=0,b=t.V;for(a=0;a<p.length;a+=2){var g=Math.max(t.V,p[a]),v=Math.min(t.U,p[a+1])-g;v>d&&(d=v,b=g)}d?l.push(new ho(n,f,Math.max(b,t.V),Math.min(b+d,t.U))):l.push(new ho(n,f,t.U,t.U))}else l.push(new ho(n,f,t.U,t.U));if(f==t.R)break;for(n=f,a=c.length-1;0<=a;a--)c[a].f.b<=f&&c.splice(a,1)}return To(t,l),l}(e,n,t.ob.concat(i),t.Mb,t.b),ef(t),t.h=0,t.Ld=!1,t.g=null,t.xb=null}function If(t,e,n,i){var r=yl(e);e=Lc(e.C);var o=wf(t,r);n=e.Kf(r,n,i,t.h+o),t.N.push(n)}function Pf(t,e){isNaN(e)||(t.h=Math.max(jl(t)*(e-t.D),t.h))}function Ff(t,e,n,i){if(t.dg.push(e),e.f.K&&(t.xb=e.f),t.u&&t.Ld)return ai(e);if(function(t,e){for(var n=e.j,i=e.f,r=t,o=null;r&&r.H;){var a=Ac(r,n,i);o?e.b?(a.right<o.right&&(o.right=a.right,o.Oc=a.Oc),a.left>o.left&&(o.left=a.left,o.Nc=a.Nc)):(a.top>o.top&&(o.top=a.top,o.Oc=a.Oc),a.bottom<o.bottom&&(o.bottom=a.bottom,o.Nc=a.Nc)):o=a,r=r.parent}return(e.b?o.right-o.left:o.bottom-o.top)<=Math.max(o.Oc,o.Nc)}(t.l,t))return e.f.K&&1===e.f.pa.length?ai(null):ai(e);var r=oi("layout");return t.Lc(e.f).then(function(e){var o=null;if(e.A)o=yl(e);else{var a=function(e){e.w.A&&(o=e.w,t.j.removeEventListener("nextInTree",a))};t.j.addEventListener("nextInTree",a)}var s=new Lf(n,i);Vh(s,e,t).then(function(e){xf(t,e,s.g.Wd,o,s.b).then(function(e){(t.Md?ai(null):function(t,e){var n=oi("doFinishBreakOfFragmentLayoutConstraints"),i=[].concat(t.B);i.sort(function(t,e){return t.ue()-e.ue()});var r=0;return ki(function(){return r<i.length?i[r++].Na(e,t).Hc(!0):ai(!1)}).then(function(){xi(n,!0)}),n.result()}(t,e)).then(function(){if(kc(t.l))xi(r,null);else if(e){t.Ld=!0;var n=new Cl(El(e));xi(r,n)}else xi(r,null)})})})}),r.result()}function Mf(t){var e=function(t){var e=oc(t).b;return t.b.filter(function(t){return"block-end"===t.Ca}).reduce(function(t,n){var i=Gl(n.b);return e?Math.max(t,i.U):Math.min(t,i.T)},e?0:1/0)}(t.l);0<e&&isFinite(e)&&(t.jf=jl(t)*(e-t.D-t.h))}function Df(t){for(;t;){if(t.parentNode===t.ownerDocument)return!1;t=t.parentNode}return!0}function Lf(t,e){Uh.call(this),this.gc=t,this.B=e||null,this.l=null,this.b=0,this.j=!1,this.g={Wd:null}}function jf(t,e,n){this.gc=t,this.j=e,this.h=n}function Rf(){}$c.prototype.Na=function(t,e,n){var i=Lc(t.C).Na(this,t,e,n);return i||(i=zf.Na(this,t,e,n)),i},$c.prototype.ec=function(){var t,e=null,n=null,i=0;do{t=i;i=Number.MAX_VALUE;for(var r=this.N.length-1;0<=r&&!n;--r){n=(e=this.N[r]).f(this,t);var o=e.b();o>t&&(i=Math.min(i,o))}}while(i>t&&!n&&this.Kb);return{Eb:n?e:null,w:n}},g(Lf,Uh),(n=Lf.prototype).qf=function(){return new jf(this.gc,this.B,this.g)},n.eg=function(t,e){e.B=[],e.Md||(Rv=[])},n.Jd=function(t){for(Uh.prototype.Jd.call(this,t);t;){var e=t.A;e&&Xc(e.parentNode,e),t=t.parent}},n.yf=function(t,e){Uh.prototype.yf.call(this,t,e),this.l=e.g,this.b=e.h,this.j=e.Ld},n.ie=function(t,e){Uh.prototype.ie.call(this,t,e),e.g=this.l,e.h=this.b,e.Ld=this.j},jf.prototype.b=function(t,e){var n=this,i=oi("adapt.layout.DefaultLayoutMode.doLayout");return function(t,e){var n=oi("vivliostyle.selectors.processAfterIfContinuesOfAncestors"),i=t;return ki(function(){if(i){var t=im(i,e);return i=i.parent,t.Hc(!0)}return ai(!1)}).then(function(){xi(n,!0)}),n.result()}(t,e).then(function(){(function(t,e,n,i){var r=oi("doLayout"),o=null;return t.N=[],t.ta=null,Ci(function(r){for(var a={};e;){if(a.Oa=!0,_f(t,e,n,i||null).then(function(a){return function(s){n=!1,i=null,t.ta&&t.u?(t.g=null,(e=t.ta).xa=!0):e=s,kc(t.l)?Ni(r):t.g?Ni(r):e&&t.u&&e&&e.xa?(o=e,s=t.ec(),e=s.w,s.Eb&&s.Eb.u(t),Ni(r)):a.Oa?a.Oa=!1:_i(r)}}(a)),a.Oa)return void(a.Oa=!1);a={Oa:a.Oa}}t.h+=yf(t),Ni(r)}).then(function(){xi(r,{w:e,Wd:o})}),r.result()})(e,t,n.gc,n.j).then(function(t){n.h.Wd=t.Wd,xi(i,t.w)})}),i.result()},jf.prototype.f=function(t,e){var n=this;return!!(kc(e.l)||e.g||0>=e.B.length)||e.B.every(function(i){return i.ke(t,n.h.Wd,e)})},jf.prototype.g=function(t,e,n,i){return i||(i=!n.B.some(function(e){return e.nd(t)})),n.B.forEach(function(r){r.cd(i,t,e,n)}),i},(n=Rf.prototype).je=function(t,e){var n;if(Gc(e,t))n=Af(e,t);else{t:if(t.K)n=!0;else{switch(t.M.namespaceURI){case"http://www.w3.org/2000/svg":n=!1;break t}n=!t.I}n=n?ff(e,t):qc(e,t)}return n},n.Kf=function(t,e,n,i){return new Uc(yl(t),e,n,i)},n.Ze=function(){return!1},n.Af=function(){return!1},n.Fd=function(t,e,n,i){n.A&&n.A.parentNode&&(Xc(t=n.A.parentNode,n.A),i&&t.removeChild(n.A))},n.Na=function(t,e,n,i){return Nf(t,e,n=n||!!e.A&&1==e.A.nodeType&&!e.K),i&&(hf(t,e,!0),Td(n?e:e.parent)),ai(!0)};var zf=new Rf;function Bf(t,e,n,i,r,o,a){$c.call(this,e,n,i,r,o),this.Ca=t,this.hg=a,this.Jb=[],this.fg=[],this.ve=!0}function Uf(t,e){function n(t,n){t.forEach(function(t){var i=z(e,t);i&&"%"===i.charAt(i.length-1)&&R(e,t,n*parseFloat(i)/100+"px")})}var i=(r=Hl(t.hg)).U-r.V,r=r.R-r.T;n(["width","max-width","min-width"],i),n(["height","max-height","min-height"],r),n("margin-top margin-right margin-bottom margin-left padding-top padding-right padding-bottom padding-left".split(" "),t.b?r:i),["margin-top","margin-right","margin-bottom","margin-left"].forEach(function(t){"auto"===z(e,t)&&R(e,t,"0")})}function Vf(t,e,n){var i=Od(e.f,t);return t=of(e,t),n?i.width+t.left+t.right:i.height+t.top+t.bottom}function Hf(t){var e={};return Object.keys(t).forEach(function(n){e[n]=Array.from(t[n])}),e}function $f(t,e){this.Gc=t,this.ud=e,this.Le=null,this.aa=this.P=-1}function Gf(t,e){this.b=t,this.f=e}function Kf(t,e,n,i){this.b=t,this.g=e,this.j=n,this.f=i,this.h=null}function Xf(t){return(t=t.match(/^[^#]*#(.*)$/))?t[1]:null}function Wf(t,e){var n=t.b.J.oc(N(e,t.g),t.g);return"#"===n.charAt(0)&&(n=n.substring(1)),n}function Yf(t,e,n,i){var r=t.b.l[n];if(!r&&i&&e){if(i=t.h,e){for(i.D=e,e=0;i.D&&wh(i,e+=5e3,0)!==Number.POSITIVE_INFINITY;);i.D=null}r=t.b.l[n]}return r||null}function Jf(t){this.J=t,this.l={},this.B={},this.b={},this.b.page=[0],this.G={},this.F=[],this.D={},this.j=null,this.u=[],this.g=[],this.I=[],this.f={},this.h={},this.Ne=[]}function Zf(t,e){var n=t.f[e],i=t.h[e];i||(i=t.h[e]=[]);for(var r=!1,o=0;o<t.g.length;){var a=t.g[o];a.Gc===e?(a.ud=!0,t.g.splice(o,1),n&&(0<=(r=n.indexOf(a))&&n.splice(r,1)),i.push(a),r=!0):o++}r||qf(t,e,!0)}function qf(t,e,n){t.u.some(function(t){return t.Gc===e})||t.u.push(new $f(e,n))}function Qf(t,e,n,i){"pages"===e&&t.Ne.push({Mc:i,format:n})}function tp(t){return t.N.bind(t)}function ep(t,e){this.f=t,this.aa=e}ei("RESOLVE_FORMATTING_CONTEXT",function(t,e,n,i,r,o){return!(e=t.parent)&&t.C?null:e&&t.C!==e.C?null:t.hd||!t.C&&Wp(n,i,r,o).display===Ye?new Hc(e?e.C:null):null}),ei("RESOLVE_LAYOUT_PROCESSOR",function(t){return t instanceof Hc?zf:null}),g(Bf,$c),Bf.prototype.Lc=function(t){var e=this;return $c.prototype.Lc.call(this,t).ea(function(t){if(t){for(var n=t;n.parent;)n=n.parent;if(n=n.A,e.Jb.push(n),e.ve&&Uf(e,n),e.fg.push(of(e,n)),e.ve){var i=e.Ca;e.hg.b?"block-end"!==i&&"left"!==i||""!==(i=z(n,"height"))&&"auto"!==i&&R(n,"margin-top","auto"):"block-end"!==i&&"bottom"!==i||""!==(i=z(n,"width"))&&"auto"!==i&&R(n,"margin-left","auto")}}return ai(t)})},Jf.prototype.N=function(t,e,n){return 0<=this.Ne.findIndex(function(e){return e.Mc===t})?((n=n.createElement("span")).textContent=e,n.setAttribute("data-vivliostyle-pages-counter",t.g),n):null},ep.prototype.b=function(t){return!(t&&!t.K)||(!(t=t.A)||1!==t.nodeType||(!(t=t.getAttribute("id")||t.getAttribute("name"))||!this.f.h[t]&&!this.f.f[t]||(!(t=this.f.D[t])||this.aa>=t.aa)))};var np=1;function ip(t,e,n,i,r){this.b={},this.children=[],this.g=null,this.index=0,this.f=t,this.name=e,this.mc=n,this.Pa=i,this.parent=r,this.j="p"+np++,r&&(this.index=r.children.length,r.children.push(this))}function rp(t,e){var n,i=t.b,r=e.b;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r[n]=i[n])}function op(t,e){for(var n=0;n<t.children.length;n++)t.children[n].clone({parent:e})}function ap(t){ip.call(this,t,null,null,[],null),this.b.width=new La(Wn,0),this.b.height=new La(Yn,0)}function sp(t,e){this.g=e;var n=this;Tt.call(this,t,function(t,e){if(r=t.match(/^([^.]+)\.([^.]+)$/)){var i=n.g.l[r[1]];if(i&&(i=this.ob[i])){if(e){var r=r[2];if(l=i.la[r])i=l;else{switch(r){case"columns":var o=new be(l=i.f.f,0),a=mp(i,"column-count"),s=mp(i,"column-width"),u=mp(i,"column-gap"),l=me(l,we(l,new ce(l,"min",[o,a]),ve(l,s,u)),u)}l&&(i.la[r]=l),i=l}}else i=mp(i,r[2]);return i}}return null})}function up(t,e,n,i,r,o,a){t=t instanceof sp?t:new sp(t,this),ip.call(this,t,e,n,i,r),this.g=this,this.ia=o,this.ba=a,this.b.width=new La(Wn,0),this.b.height=new La(Yn,0),this.b["wrap-flow"]=new La(Ke,0),this.b.position=new La(Nn,0),this.b.overflow=new La(Gn,0),this.l={}}function lp(t,e,n,i,r){ip.call(this,t,e,n,i,r),this.g=r.g,e&&(this.g.l[e]=this.j),this.b["wrap-flow"]=new La(Ke,0)}function hp(t,e,n,i,r){ip.call(this,t,e,n,i,r),this.g=r.g,e&&(this.g.l[e]=this.j)}function cp(t,e,n){return e&&e!==Ke?e.Aa(t,n):null}function fp(t,e,n){return e&&e!==Ke?e.Aa(t,n):t.b}function pp(t,e,n){return e?e===Ke?null:e.Aa(t,n):t.b}function dp(t,e,n,i){return e&&n!==kn?e.Aa(t,i):t.b}function bp(t,e,n){return e?e===Kn?t.j:e===sn?t.h:e.Aa(t,t.b):n}function gp(t,e){this.g=t,this.f=e,this.J={},this.style={},this.B=this.D=null,this.children=[],this.N=this.S=this.h=this.j=!1,this.G=this.I=0,this.F=null,this.sa={},this.la={},this.ua=this.Z=this.b=!1,t&&t.children.push(this)}function vp(t,e,n){if(e=mp(t,e),n=mp(t,n),!e||!n)throw Error("E_INTERNAL");return ve(t.f.f,e,n)}function mp(t,e){var n=t.sa[e];if(n)return n;switch((o=t.style[e])&&(n=o.Aa(t.f.f,t.f.f.b)),e){case"margin-left-edge":n=mp(t,"left");break;case"margin-top-edge":n=mp(t,"top");break;case"margin-right-edge":n=vp(t,"border-right-edge","margin-right");break;case"margin-bottom-edge":n=vp(t,"border-bottom-edge","margin-bottom");break;case"border-left-edge":n=vp(t,"margin-left-edge","margin-left");break;case"border-top-edge":n=vp(t,"margin-top-edge","margin-top");break;case"border-right-edge":n=vp(t,"padding-right-edge","border-right-width");break;case"border-bottom-edge":n=vp(t,"padding-bottom-edge","border-bottom-width");break;case"padding-left-edge":n=vp(t,"border-left-edge","border-left-width");break;case"padding-top-edge":n=vp(t,"border-top-edge","border-top-width");break;case"padding-right-edge":n=vp(t,"right-edge","padding-right");break;case"padding-bottom-edge":n=vp(t,"bottom-edge","padding-bottom");break;case"left-edge":n=vp(t,"padding-left-edge","padding-left");break;case"top-edge":n=vp(t,"padding-top-edge","padding-top");break;case"right-edge":n=vp(t,"left-edge","width");break;case"bottom-edge":n=vp(t,"top-edge","height")}if(!n){if("extent"==e)o=t.b?"width":"height";else if("measure"==e)o=t.b?"height":"width";else{var i,r=t.b?Pa:Fa,o=e;for(i in r)o=o.replace(i,r[i])}o!=e&&(n=mp(t,o))}return n&&(t.sa[e]=n),n}function wp(t,e,n,i){return jt(t=t.style[e].Aa(t.f.f,null),n,i,{})}function yp(t,e){e.ob[t.f.j]=t;var n=t.f.f,i=t.style,r=t.g?Sp(t.g,e):null;r=Su(t.J,e,r,!1);t.b=xu(r,e,!!t.g&&t.g.b),t.Z=Eu(r,e,!!t.g&&t.g.Z),Tu(r,i,t.b,t.Z,function(t,e){return e.value}),t.D=new he(n,function(){return t.I},"autoWidth"),t.B=new he(n,function(){return t.G},"autoHeight"),t.Ae(),t.Be(),function(t){var e=t.f.f,n=t.style;t=cp(e,n[t.b?"height":"width"],null);var i,r=cp(e,n["column-width"],t),o=cp(e,n["column-count"],null);(i=(i=n["column-gap"])&&i!==Cn?i.Aa(e,null):null)||(i=new se(e,1,"em")),r&&!o&&(o=new ce(e,"floor",[ye(e,ve(e,t,i),ve(e,r,i))]),o=new ce(e,"max",[e.f,o])),o||(o=e.f),r=me(e,ye(e,ve(e,t,i),o),i),n["column-width"]=new Ue(r),n["column-count"]=new Ue(o),n["column-gap"]=new Ue(i)}(t),function(t){var e=t.f.f,n=t.style,i=bp(e,n.enabled,e.j),r=cp(e,n.page,e.b);r&&(i=ge(e,i,new te(e,r,new ue(e,"page-number"))));(r=cp(e,n["min-page-width"],e.b))&&(i=ge(e,i,new Qt(e,new ue(e,"page-width"),r))),(r=cp(e,n["min-page-height"],e.b))&&(i=ge(e,i,new Qt(e,new ue(e,"page-height"),r))),i=t.Y(i),n.enabled=new Ue(i)}(t)}function xp(t,e,n){return(t=t.style[n])&&(t=oo(e,t,n)),t}function Ep(t,e,n){return(t=t.style[n])&&(t=oo(e,t,n)),Ve(t,e)}function Sp(t,e){var n;t:{if(n=t.J["region-id"]){for(var i=[],r=0;r<n.length;r++){var o=n[r].evaluate(e,"");o&&o!==Te&&i.push(o)}if(i.length){n=i;break t}}n=null}if(n){for(i=[],r=0;r<n.length;r++)i[r]=n[r].toString();return i}return null}function kp(t,e,n,i,r){(t=xp(t,e,i))&&(t.Ac()&&Ot(t.ka)&&(t=new Pe(Ve(t,e),"px")),"font-family"===i&&(t=Ah(r,t)),R(n,i,t.toString()))}function Cp(t,e,n){var i=Ep(t,e,"left"),r=Ep(t,e,"margin-left"),o=Ep(t,e,"padding-left"),a=Ep(t,e,"border-left-width");zl(n,i,t=Ep(t,e,"width")),R(n.element,"margin-left",r+"px"),R(n.element,"padding-left",o+"px"),R(n.element,"border-left-width",a+"px"),n.marginLeft=r,n.Z=a,n.I=o}function Tp(t,e,n){var i=Ep(t,e,"right"),r=Ep(t,e,"snap-height"),o=Ep(t,e,"margin-right"),a=Ep(t,e,"padding-right");e=Ep(t,e,"border-right-width"),R(n.element,"margin-right",o+"px"),R(n.element,"padding-right",a+"px"),R(n.element,"border-right-width",e+"px"),n.marginRight=o,n.Za=e,t.b&&0<r&&(t=i+Ll(n),0<(t-=Math.floor(t/r)*r)&&(n.Od=r-t,a+=n.Od)),n.Y=a,n.Rd=r}function Ap(t,e,n){var i=Ep(t,e,"snap-height"),r=Ep(t,e,"top"),o=Ep(t,e,"margin-top"),a=Ep(t,e,"padding-top");e=Ep(t,e,"border-top-width"),n.top=r,n.marginTop=o,n.ca=e,n.Mb=i,!t.b&&0<i&&(t=r+Fl(n),0<(t-=Math.floor(t/i)*i)&&(n.yb=i-t,a+=n.yb)),n.J=a,R(n.element,"top",r+"px"),R(n.element,"margin-top",o+"px"),R(n.element,"padding-top",a+"px"),R(n.element,"border-top-width",e+"px")}function _p(t,e,n){var i=Ep(t,e,"margin-bottom"),r=Ep(t,e,"padding-bottom"),o=Ep(t,e,"border-bottom-width");t=Ep(t,e,"height")-n.yb,R(n.element,"height",t+"px"),R(n.element,"margin-bottom",i+"px"),R(n.element,"padding-bottom",r+"px"),R(n.element,"border-bottom-width",o+"px"),n.height=t-n.yb,n.marginBottom=i,n.Ba=o,n.S=r}function Np(t,e,n){t.b?(Ap(t,e,n),_p(t,e,n)):(Tp(t,e,n),Cp(t,e,n))}function Op(t,e,n){R(n.element,"border-top-width","0px");var i=Ep(t,e,"max-height");t.S?Rl(n,0,i):(Ap(t,e,n),i-=n.yb,n.height=i,R(n.element,"height",i+"px"))}function Ip(t,e,n){R(n.element,"border-left-width","0px");var i=Ep(t,e,"max-width");t.N?zl(n,0,i):(Tp(t,e,n),i-=n.Od,n.width=i,t=Ep(t,e,"right"),R(n.element,"right",t+"px"),R(n.element,"width",i+"px"))}ip.prototype.h=function(){throw Error("E_UNEXPECTED_CALL")},ip.prototype.clone=function(){throw Error("E_UNEXPECTED_CALL")},g(ap,ip),g(sp,Tt),g(up,ip),up.prototype.h=function(t){return new zp(t,this)},up.prototype.clone=function(t){return rp(this,t=new up(this.f,this.name,t.mc||this.mc,this.Pa,this.parent,this.ia,this.ba)),op(this,t),t},g(lp,ip),lp.prototype.h=function(t){return new Bp(t,this)},lp.prototype.clone=function(t){return rp(this,t=new lp(t.parent.f,this.name,this.mc,this.Pa,t.parent)),op(this,t),t},g(hp,ip),hp.prototype.h=function(t){return new Up(t,this)},hp.prototype.clone=function(t){return rp(this,t=new hp(t.parent.f,this.name,this.mc,this.Pa,t.parent)),op(this,t),t},gp.prototype.Y=function(t){return t},gp.prototype.Ae=function(){var t=this.f.f,e=this.style,n=this.g?this.g.style.width.Aa(t,null):null,i=cp(t,e.left,n),r=cp(t,e["margin-left"],n),o=dp(t,e["border-left-width"],e["border-left-style"],n),a=fp(t,e["padding-left"],n),s=cp(t,e.width,n),u=cp(t,e["max-width"],n),l=fp(t,e["padding-right"],n),h=dp(t,e["border-right-width"],e["border-right-style"],n),c=cp(t,e["margin-right"],n),f=cp(t,e.right,n),p=ve(t,o,a),d=ve(t,o,l);i&&f&&s?(p=me(t,n,ve(t,s,ve(t,ve(t,i,p),d))),r?c?f=me(t,p,c):c=me(t,p,ve(t,f,r)):(p=me(t,p,f),c?r=me(t,p,c):c=r=we(t,p,new pe(t,.5)))):(r||(r=t.b),c||(c=t.b),i||f||s||(i=t.b),i||s?i||f?s||f||(s=this.D,this.j=!0):i=t.b:(s=this.D,this.j=!0),p=me(t,n,ve(t,ve(t,r,p),ve(t,c,d))),this.j&&(u||(u=me(t,p,i||f)),this.b||!cp(t,e["column-width"],null)&&!cp(t,e["column-count"],null)||(s=u,this.j=!1)),i?s?f||(f=me(t,p,ve(t,i,s))):s=me(t,p,ve(t,i,f)):i=me(t,p,ve(t,f,s))),t=fp(t,e["snap-width"]||(this.g?this.g.style["snap-width"]:null),n),e.left=new Ue(i),e["margin-left"]=new Ue(r),e["border-left-width"]=new Ue(o),e["padding-left"]=new Ue(a),e.width=new Ue(s),e["max-width"]=new Ue(u||s),e["padding-right"]=new Ue(l),e["border-right-width"]=new Ue(h),e["margin-right"]=new Ue(c),e.right=new Ue(f),e["snap-width"]=new Ue(t)},gp.prototype.Be=function(){var t=this.f.f,e=this.style,n=this.g?this.g.style.width.Aa(t,null):null,i=this.g?this.g.style.height.Aa(t,null):null,r=cp(t,e.top,i),o=cp(t,e["margin-top"],n),a=dp(t,e["border-top-width"],e["border-top-style"],n),s=fp(t,e["padding-top"],n),u=cp(t,e.height,i),l=cp(t,e["max-height"],i),h=fp(t,e["padding-bottom"],n),c=dp(t,e["border-bottom-width"],e["border-bottom-style"],n),f=cp(t,e["margin-bottom"],n),p=cp(t,e.bottom,i),d=ve(t,a,s),b=ve(t,c,h);r&&p&&u?(i=me(t,i,ve(t,u,ve(t,ve(t,r,d),b))),o?f?p=me(t,i,o):f=me(t,i,ve(t,p,o)):(i=me(t,i,p),f?o=me(t,i,f):f=o=we(t,i,new pe(t,.5)))):(o||(o=t.b),f||(f=t.b),r||p||u||(r=t.b),r||u?r||p?u||p||(u=this.B,this.h=!0):r=t.b:(u=this.B,this.h=!0),i=me(t,i,ve(t,ve(t,o,d),ve(t,f,b))),this.h&&(l||(l=me(t,i,r||p)),this.b&&(cp(t,e["column-width"],null)||cp(t,e["column-count"],null))&&(u=l,this.h=!1)),r?u?p||(p=me(t,i,ve(t,r,u))):u=me(t,i,ve(t,p,r)):r=me(t,i,ve(t,p,u))),t=fp(t,e["snap-height"]||(this.g?this.g.style["snap-height"]:null),n),e.top=new Ue(r),e["margin-top"]=new Ue(o),e["border-top-width"]=new Ue(a),e["padding-top"]=new Ue(s),e.height=new Ue(u),e["max-height"]=new Ue(l||u),e["padding-bottom"]=new Ue(h),e["border-bottom-width"]=new Ue(c),e["margin-bottom"]=new Ue(f),e.bottom=new Ue(p),e["snap-height"]=new Ue(t)};var Pp="border-left-style border-right-style border-top-style border-bottom-style border-left-color border-right-color border-top-color border-bottom-color outline-style outline-color outline-width overflow visibility".split(" "),Fp="border-top-left-radius border-top-right-radius border-bottom-right-radius border-bottom-left-radius border-image-source border-image-slice border-image-width border-image-outset border-image-repeat background-attachment background-color background-image background-repeat background-position background-clip background-origin background-size opacity z-index background-blend-mode isolation mix-blend-mode filter".split(" "),Mp="color font-family font-size font-style font-weight font-variant line-height letter-spacing text-align text-decoration text-indent text-transform white-space word-spacing font-feature-settings font-kerning font-size-adjust font-variant-east-asian font-stretch text-decoration-color text-decoration-line text-decoration-skip text-decoration-style text-emphasis text-emphasis-color text-emphasis-position text-emphasis-style text-shadow text-underline-position".split(" "),Dp=["width","height","image-resolution","object-fit","object-position"],Lp=["transform","transform-origin"];function jp(t,e){t.j&&(t.N=wp(t,"right",t.D,e)||wp(t,"margin-right",t.D,e)||wp(t,"border-right-width",t.D,e)||wp(t,"padding-right",t.D,e)),t.h&&(t.S=wp(t,"top",t.B,e)||wp(t,"margin-top",t.B,e)||wp(t,"border-top-width",t.B,e)||wp(t,"padding-top",t.B,e));for(var n=h(t.children),i=n.next();!i.done;i=n.next())jp(i.value,e)}function Rp(t){gp.call(this,null,t)}function zp(t,e){gp.call(this,t,e),this.F=this}function Bp(t,e){gp.call(this,t,e),this.F=t.F}function Up(t,e){gp.call(this,t,e),this.F=t.F}function Vp(t,e,n,i){var r=null;if(n instanceof Oe&&(r=[n]),n instanceof ze&&(r=n.values),r)for(t=t.f.f,n=0;n<r.length;n++)if(r[n]instanceof Oe){var o=new ue(t,o=kt(r[n].name,"enabled"));i&&(o=new $t(t,o)),e=ge(t,e,o)}return e}function Hp(t,e,n,i){Ar.call(this,t,e,!1),this.target=n,this.b=i}function $p(t,e,n,i){Hp.call(this,t,e,n,i)}function Gp(t,e,n,i){Hp.call(this,t,e,n,i),n.b.width=new La(Xn,0),n.b.height=new La(Xn,0)}function Kp(t,e,n,i){Hp.call(this,t,e,n,i)}function Xp(t){switch(t=t.toString()){case"inline-flex":t="flex";break;case"inline-grid":t="grid";break;case"inline-table":t="table";break;case"inline":case"table-row-group":case"table-column":case"table-column-group":case"table-header-group":case"table-footer-group":case"table-row":case"table-cell":case"table-caption":case"inline-block":t="block"}return Ie(t)}function Wp(t,e,n,i){return t!==kn&&(e===He||e===un?(n=kn,t=Xp(t)):(n&&n!==kn||i)&&(t=Xp(t))),{display:t,position:e,ja:n}}function Yp(t){switch(t.toString()){case"inline":case"inline-block":case"inline-list-item":case"inline-flex":case"inline-grid":case"ruby":case"inline-table":return!0;default:return!1}}function Jp(t,e,n){return t.replace(/[uU][rR][lL]\(\s*\"((\\([^0-9a-fA-F]+|[0-9a-fA-F]+\s*)|[^\"\r\n])+)\"/gm,function(t,i){return'url("'+n.oc(i,e)+'"'}).replace(/[uU][rR][lL]\(\s*\'((\\([^0-9a-fA-F]+|[0-9a-fA-F]+\s*)|[^\'\r\n])+)\'/gm,function(t,i){return"url('"+n.oc(i,e)+"'"}).replace(/[uU][rR][lL]\(\s*((\\([^0-9a-fA-F]+|[0-9a-fA-F]+\s*)|[^\"\'\r\n\)\s])+)/gm,function(t,i){return"url("+n.oc(i,e)})}gp.prototype.kc=function(t,e,n,i){for(this.g&&this.b==this.g.b||R(e.element,"writing-mode",this.b?"vertical-rl":"horizontal-tb"),(this.b?this.j:this.h)?this.b?Ip(this,t,e):Op(this,t,e):(this.b?Tp(this,t,e):Ap(this,t,e),this.b?Cp(this,t,e):_p(this,t,e)),(this.b?this.h:this.j)?this.b?Op(this,t,e):Ip(this,t,e):Np(this,t,e),n=0;n<Pp.length;n++)kp(this,t,e.element,Pp[n],i)},gp.prototype.Qd=function(t,e,n,i,r,o,a){this.b?this.I=e.h+e.Od:this.G=e.h+e.yb;var s=(this.b||!i)&&this.h,u=(!this.b||!i)&&this.j;if((u||s)&&(u&&R(e.element,"width","auto"),s&&R(e.element,"height","auto"),i=Od(o,i?i.element:e.element),u&&(this.I=Math.ceil(i.right-i.left-e.I-e.Z-e.Y-e.Za),this.b&&(this.I+=e.Od)),s&&(this.G=i.bottom-i.top-e.J-e.ca-e.S-e.Ba,this.b||(this.G+=e.yb))),(this.b?this.h:this.j)&&Np(this,t,e),(this.b?this.j:this.h)&&((this.b?this.N:this.S)&&(this.b?Tp(this,t,e):Ap(this,t,e)),this.b?Cp(this,t,e):_p(this,t,e)),1<r&&(u=Ep(this,t,"column-rule-width"),i=xp(this,t,"column-rule-style"),o=xp(this,t,"column-rule-color"),0<u&&i&&i!=kn&&o!=Vn)){var l=Ep(this,t,"column-gap"),h=this.b?e.height:e.width,c=this.b?"border-top":"border-left";for(s=1;s<r;s++){var f=(h+l)*s/r-l/2+e.I-u/2,p=e.height+e.J+e.S,d=e.element.ownerDocument.createElement("div");R(d,"position","absolute"),R(d,this.b?"left":"top","0px"),R(d,this.b?"top":"left",f+"px"),R(d,this.b?"height":"width","0px"),R(d,this.b?"width":"height",p+"px"),R(d,c,u+"px "+i.toString()+(o?" "+o.toString():"")),e.element.insertBefore(d,e.element.firstChild)}}for(s=0;s<Fp.length;s++)kp(this,t,e.element,Fp[s],a);for(s=0;s<Lp.length;s++)r=e,a=Lp[s],u=n.l,(i=xp(this,t,a))&&u.push(new Zu(r.element,a,i))},gp.prototype.l=function(t,e){var n,i=this.J,r=this.f.b;for(n in r)Ba(n)&&Ua(i,n,r[n]);if("background-host"==this.f.mc)for(n in e)(n.match(/^background-/)||"writing-mode"==n)&&(i[n]=e[n]);if("layout-host"==this.f.mc)for(n in e)n.match(/^background-/)||"writing-mode"==n||(i[n]=e[n]);for(eu(t,this.f.Pa,null,i),i.content&&(i.content=i.content.Pd(new Rs(t,null,t.xb))),yp(this,t.l),r=(i=h(this.f.children)).next();!r.done;r=i.next())r.value.h(this).l(t,e);hu(t)},g(Rp,gp),Rp.prototype.l=function(t,e){gp.prototype.l.call(this,t,e),this.children.sort(function(t,e){return e.f.ba-t.f.ba||t.f.index-e.f.index})},g(zp,gp),zp.prototype.Y=function(t){var e=this.f.g;return e.ia&&(t=ge(e.f,t,e.ia)),t},zp.prototype.ca=function(){},g(Bp,gp),g(Up,gp),Up.prototype.Y=function(t){var e,n=this.f.f,i=this.style,r=bp(n,i.required,n.h)!==n.h;(r||this.h)&&(t=ge(n,t,e=new ce(n,"has-content",[e=(e=i["flow-from"])?e.Aa(n,n.b):new pe(n,"body")])));return t=Vp(this,t,i["required-partitions"],!1),t=Vp(this,t,i["conflicting-partitions"],!0),r&&(i=ge(n,i=(i=this.F.style.enabled)?i.Aa(n,null):n.j,t),this.F.style.enabled=new Ue(i)),t},Up.prototype.kc=function(t,e,n,i,r){R(e.element,"overflow","hidden"),gp.prototype.kc.call(this,t,e,n,i,r)},g(Hp,_r),Hp.prototype.Qb=function(t,e,n){wa(this.b,t,e,n,this)},Hp.prototype.fe=function(t,e){Nr(this,"E_INVALID_PROPERTY "+t+": "+e.toString())},Hp.prototype.kd=function(t,e){Nr(this,"E_INVALID_PROPERTY_VALUE "+t+": "+e.toString())},Hp.prototype.Sb=function(t,e,n){this.target.b[t]=new La(e,n?50331648:67108864)},g($p,Hp),g(Gp,Hp),Gp.prototype.zd=function(t,e,n){t=new hp(this.f,t,e,n,this.target),Tr(this.oa,new $p(this.f,this.oa,t,this.b))},Gp.prototype.yd=function(t,e,n){t=new lp(this.f,t,e,n,this.target),t=new Gp(this.f,this.oa,t,this.b),Tr(this.oa,t)},g(Kp,Hp),Kp.prototype.zd=function(t,e,n){t=new hp(this.f,t,e,n,this.target),Tr(this.oa,new $p(this.f,this.oa,t,this.b))},Kp.prototype.yd=function(t,e,n){t=new lp(this.f,t,e,n,this.target),t=new Gp(this.f,this.oa,t,this.b),Tr(this.oa,t)},Jp=function(t,e,n){return t.replace(/[uU][rR][lL]\(\s*\"((\\([^0-9a-fA-F]+|[0-9a-fA-F]+\s*)|[^\"\r\n])+)\"/gm,function(t,i){return'url("'+n.oc(i,e)+'"'}).replace(/[uU][rR][lL]\(\s*\'((\\([^0-9a-fA-F]+|[0-9a-fA-F]+\s*)|[^\'\r\n])+)\'/gm,function(t,i){return"url('"+n.oc(i,e)+"'"}).replace(/[uU][rR][lL]\(\s*((\\([^0-9a-fA-F]+|[0-9a-fA-F]+\s*)|[^\"\'\r\n\)\s])+)/gm,function(t,i){return"url("+n.oc(i,e)})};var Zp={"text-indent":"0px","margin-top":"0px","padding-top":"0px","border-top-width":"0px","border-top-style":"none","border-top-color":"transparent","border-top-left-radius":"0px","border-top-right-radius":"0px"},qp={"text-indent":"0px","margin-right":"0px","padding-right":"0px","border-right-width":"0px","border-right-style":"none","border-right-color":"transparent","border-top-right-radius":"0px","border-bottom-right-radius":"0px"},Qp={"margin-top":"0px"},td={"margin-right":"0px"},ed={};var nd=(new DOMParser).parseFromString('<root xmlns="http://www.pyroxy.com/ns/shadow"/>',"text/xml"),id="footnote-marker first-5-lines first-4-lines first-3-lines first-2-lines first-line first-letter before  after".split(" ");function rd(t,e){t.setAttribute("data-adapt-pseudo",e)}function od(t,e,n,i,r){this.style=e,this.element=t,this.b=n,this.g=i,this.h=r,this.f={}}function ad(t,e,n,i,r,o,a,s,u,l,h,c,f){this.Pb={},this.G=t,this.b=e,this.viewport=n,this.D=n.b,this.j=i,this.u=tp(i.Ba.b),this.l=r,this.da=o,this.I=a,this.B=s,this.J=u,this.page=l,this.g=h,this.F=c,this.h=f,this.N=this.w=null,this.f=!1,this.M=null,this.na=0,this.A=null}function sd(t,e,n,i){if(!(t=t._pseudos))return null;var r,o={},a={};for(r in t)a.ed=o[r]={},Cu(a.ed,t[r],i),sm(a.ed,i,t[r]),ku(t[r],e,n,function(t){return function(e,n){Cu(t.ed,n,i),um(n,function(e){Cu(t.ed,e,i)})}}(a)),a={ed:a.ed};return o}function ud(t,e,n,i,r,o){var a=oi("createRefShadow");return t.da.u.load(e).then(function(s){if(s){var u=Lu(s,e);if(u){var l=t.J;if(!(h=l.N[s.url])){var h=l.style.j.g[s.url],c=new It(0,l.jc(),l.ic(),l.u);h=new hh(s,h.g,h.f,c,l.l,h.l,new Gf(l.h,s.url),new Kf(l.h,s.url,h.f,h.b));l.N[s.url]=h}o=new dl(i,u,s,r,o,n,h)}}xi(a,o)}),a.result()}function ld(t,e,n,i,r){var o=t.b;e=xu(i=Su(i,o,t.l,t.f),o,e),n=Eu(i,o,n),Tu(i,r,e,n,function(e,n){var i=n.evaluate(o,e);return"font-family"==e&&(i=Ah(t.I,i)),i});var a=Wp(r.display||bn,r.position,r.float,t.M===t.da.root);return["display","position","float"].forEach(function(t){a[t]&&(r[t]=a[t])}),e}function hd(t,e){for(var n=t.w.M,i=[],r=null,o=t.w.wa,a=-1;n&&1==n.nodeType;){if(!(l=o&&o.root==n)||2==o.type){var s=(o?o.b:t.j).l(n,!1);i.push(s),r=r||B(n)}l?(n=o.oa,o=o.pd):(n=n.parentNode,a++)}for(o=new Ka(n={"font-size":new La(new Pe(n=Ft(t.b,"em",!a),"px"),0)},t.b),a=i.length-1;0<=a;--a){var u,l=i[a];s=[];for(u in l)xa[u]&&s.push(u);s.sort(qn);for(var c=(s=h(s)).next();!c.done;c=s.next()){c=c.value,o.b=c;var f=l[c];f.value!==dn&&(n[c]=f.Pd(o))}}for(var p in e)xa[p]||(n[p]=e[p]);return{lang:r,mb:n}}od.prototype.l=function(t){var e=t.getAttribute("data-adapt-pseudo")||"";if(this.b&&e&&e.match(/after$/)&&(this.style=this.b.l(this.element,!0),this.b=null),t=this.style._pseudos[e]||{},e.match(/^first-/)&&!t["x-first-pseudo"]){var n=1;"first-letter"==e?n=0:(e=e.match(/^first-([0-9]+)-lines$/))&&(n=e[1]-0),t["x-first-pseudo"]=new La(new Me(n),0)}return t},od.prototype.sa=function(t,e){var n=t.getAttribute("data-adapt-pseudo")||"";this.f[n]||(this.f[n]=!0,(n=e.content)&&Xl(n)&&n.fa(new Kl(t,this.g,n,this.h)))},g(ad,et),ad.prototype.clone=function(){return new ad(this.G,this.b,this.viewport,this.j,this.l,this.da,this.I,this.B,this.J,this.page,this.g,this.F,this.h)};var cd={a:"a",sub:"sub",sup:"sup",table:"table",tr:"tr",td:"td",th:"th",code:"code",body:"div",p:"p",v:"p",date:"p",emphasis:"em",strong:"strong",style:"span",strikethrough:"del"};function fd(t,e){return e=N(e,t.da.url),t.F[e]||e}function pd(t,e){var n=ni("POLYFILLED_INHERITED_PROPS").reduce(function(t,e){return t.concat(e())},[].concat(Ea)).filter(function(t){return e[t]});if(n.length){var i=t.w.h;if(t.w.parent){var r;i=t.w.h={};for(r in t.w.parent.h)i[r]=t.w.parent.h[r]}n.forEach(function(t){var n=e[t];if(n){if(n instanceof Me)i[t]=n.L;else if(n instanceof Oe)i[t]=n.name;else if(n instanceof Pe)switch(n.ka){case"dpi":case"dpcm":case"dppx":i[t]=n.L*Nt[n.ka]}else i[t]=n;delete e[t]}})}}function dd(t,e,n){var i=!0,r=oi("createElementView"),o=t.M,a=t.w.wa?t.w.wa.b:t.j,s=a.l(o,!1);if(!t.w.wa){var u=Pu(t.da,o);lm(u,t.w.Sa,0)}var l={};t.w.parent||(u=hd(t,s),s=u.mb,t.w.lang=u.lang);var c=s["float-reference"]&&function(t){switch(t){case"inline":return Wh;case"column":return"column";case"region":return"region";case"page":return"page";default:throw Error("Unknown float-reference: "+t)}}(s["float-reference"].value.toString());if(t.w.parent&&c&&Yh(c)&&(u=hd(t,s),s=u.mb,t.w.lang=u.lang),t.w.b=ld(t,t.w.b,"rtl"===t.w.direction,s,l),a.sa(o,l),pd(t,l),function(t){t.w.lang=B(t.w.M)||t.w.parent&&t.w.parent.lang||t.w.lang}(t),l.direction&&(t.w.direction=l.direction.toString()),(u=l["flow-into"])&&u.toString()!=t.G)return xi(r,!1),r.result();var f=l.display;if(f===kn)return xi(r,!1),r.result();var p=!t.w.parent;return t.w.I=f===ln,function(t,e,n,i,r,o,a,s){var u=oi("createShadows"),l=r.template;return(l instanceof Le?ud(t,l.url,2,e,s,null):ai(null)).then(function(l){var c=null;if("http://www.pyroxy.com/ns/shadow"==e.namespaceURI&&"include"==e.localName){var f=e.getAttribute("href"),p=null;f?p=s?s.da:t.da:s&&(f="http://www.w3.org/1999/xhtml"==s.oa.namespaceURI?s.oa.getAttribute("href"):s.oa.getAttributeNS("http://www.w3.org/1999/xlink","href"),p=s.pd?s.pd.da:t.da),f&&(f=N(f,p.url),c=ud(t,f,3,e,s,l))}c||(c=ai(l));var d=null;c.then(function(n){d=r.display===Rn?ud(t,N("user-agent.xml#table-cell",_),2,e,s,n):ai(n)}),d.then(function(l){var c=sd(i,t.l,t.f,a);if(c){for(var f=[],p=nd.createElementNS("http://www.pyroxy.com/ns/shadow","root"),d=p,b=h(id),g=b.next();!g.done;g=b.next()){var v;if(g=g.value){if(!c[g])continue;if(!("footnote-marker"!=g||n&&t.f))continue;if(g.match(/^first-/)&&(!(v=r.display)||v===bn))continue;if(!("before"!==g&&"after"!==g||(v=c[g].content)&&v!==Cn&&v!==kn))continue;f.push(g),rd(v=nd.createElementNS("http://www.w3.org/1999/xhtml","span"),g)}else v=nd.createElementNS("http://www.pyroxy.com/ns/shadow","content");d.appendChild(v),g.match(/^first-/)&&(d=v)}l=f.length?new dl(e,p,null,s,l,2,new od(e,i,o,a,t.u)):l}xi(u,l)})}),u.result()}(t,o,p,s,l,a,t.b,t.w.wa).then(function(u){t.w.Ja=u,u=l.position;var h=l.float,d=l.clear,b=t.w.b?$n:pn,g=t.w.parent?t.w.parent.b?$n:pn:b,v="true"===o.getAttribute("data-vivliostyle-flow-root");t.w.hd=function(t,e,n,i,r,o,a){return r=r||o||pn,!!a||!!n&&n!==kn||e===He||e===un||t===gn||t===Rn||t===jn||t==ln||(t===Ye||t===En)&&!!i&&i!==Gn||!!o&&r!==o}(f,u,h,l.overflow,b,g,v),t.w.S=u===Nn||u===He||u===un,!function(t){for(t=t.parent;t;){if(t.hd)return!0;t=t.parent}return!1}(t.w)||h===hn||c&&Yh(c)||(d=h=null),b=h===yn||h===On||h===Un||h===Qe||h===mn||h===vn||h===Ze||h===Je||h===Fn||h===hn,h&&(delete l.float,h===hn&&(t.f?(b=!1,l.display=Ye):l.display=bn)),d&&(d===dn&&t.w.parent&&t.w.parent.l&&(d=Ie(t.w.parent.l)),d===yn||d===On||d===Un||d===Qe||d===qe||d===$e||d===In)&&(delete l.clear,l.display&&l.display!=bn&&(t.w.l=d.toString()));var m=f===En&&l["ua-list-item-count"];if((b||l["break-inside"]&&l["break-inside"]!==Ke)&&t.w.j++,f&&f!==bn&&Yp(f)&&t.w.j++,!(d=!b&&!f||Yp(f)))t:switch(f.toString()){case"ruby-base":case"ruby-text":case"ruby-base-container":case"ruby-text-container":d=!0;break t;default:d=!1}t.w.ya=d,t.w.display=f?f.toString():"inline",t.w.Ca=b?h.toString():null,t.w.W=c||Wh,t.w.N=l["float-min-wrap-block"]||null,t.w.ca=l["column-span"],t.w.ya||((d=l["break-after"])&&(t.w.G=d.toString()),(d=l["break-before"])&&(t.w.g=d.toString())),t.w.Z=l["vertical-align"]&&l["vertical-align"].toString()||"baseline",t.w.la=l["caption-side"]&&l["caption-side"].toString()||"top",(d=l["border-collapse"])&&d!==Ie("separate")||(b=l["border-spacing"])&&(b.Ud()?(d=b.values[0],b=b.values[1]):d=b,d.Ac()&&(t.w.sa=Ve(d,t.b)),b.Ac()&&(t.w.ta=Ve(b,t.b))),t.w.Y=l["footnote-policy"],(d=l["x-first-pseudo"])&&(t.w.f=new gl(t.w.parent?t.w.parent.f:null,d.L)),t.w.ya||function(t,e,n,i,r){var o=sd(n,t.l,t.f,r);o&&o["after-if-continues"]&&o["after-if-continues"].content&&(t.w.J=new cm(e,new od(e,n,i,r,t.u)))}(t,o,s,a,t.b),(d=l["white-space"])&&(null!==(d=nl(d.toString()))&&(t.w.uc=d)),(d=l["hyphenate-character"])&&d!==Ke&&(t.w.F=d.Xc),d=l["overflow-wrap"]||["word-wrap"],t.w.B=l["word-break"]===en||d===nn,function(t,e,n,i,r,o){for(var a=ni("RESOLVE_FORMATTING_CONTEXT"),s=0;s<a.length;s++){var u=a[s](t,e,n,i,r,o);if(u){t.C=u;break}}}(t.w,e,f,u,h,p),t.w.parent&&t.w.parent.C&&(e=t.w.parent.C.ff(t.w,e)),t.w.ya||(t.w.u=gd(l),function(t,e,n){for(e=e.firstChild;e;e=e.nextSibling)if(1===e.nodeType){var i={},r=n.l(e,!1);if(ld(t,t.w.b,"rtl"===t.w.direction,r,i),gd(i)){if(t.w.C instanceof Mv&&!kl(t.w,t.w.C))break;n=t.w.parent,t.w.C=new Mv(n&&n.C,t.w.M),jv(t.w.C,t.w.b);break}}}(t,o,a));var w=!1,y=null,x=[],E=o.namespaceURI,S=o.localName;if("http://www.w3.org/1999/xhtml"==E)"html"==S||"body"==S||"script"==S||"link"==S||"meta"==S?S="div":"vide_"==S?S="video":"audi_"==S?S="audio":"object"==S&&(w=!!t.g),o.getAttribute("data-adapt-pseudo")&&s.content&&s.content.value&&s.content.value.url&&(S="img");else if("http://www.idpf.org/2007/ops"==E)S="span",E="http://www.w3.org/1999/xhtml";else if("http://www.gribuser.ru/xml/fictionbook/2.0"==E)E="http://www.w3.org/1999/xhtml","image"==S?(S="div",(u=o.getAttributeNS("http://www.w3.org/1999/xlink","href"))&&"#"==u.charAt(0)&&(u=Lu(t.da,u))&&(y=Cd(t,E,"img"),u="data:"+(u.getAttribute("content-type")||"image/jpeg")+";base64,"+u.textContent.replace(/[ \t\n\t]/g,""),x.push(Pi(y,u)))):S=cd[S],S||(S=t.w.ya?"span":"div");else if("http://www.daisy.org/z3986/2005/ncx/"==E)if(E="http://www.w3.org/1999/xhtml","ncx"==S||"navPoint"==S)S="div";else if("navLabel"==S){if(S="span",h=o.parentNode){for(u=null,h=h.firstChild;h;h=h.nextSibling)if(1==h.nodeType&&("http://www.daisy.org/z3986/2005/ncx/"==(d=h).namespaceURI&&"content"==d.localName)){u=d.getAttribute("src");break}u&&(S="a",(o=o.ownerDocument.createElementNS(E,"a")).setAttribute("href",u))}}else S="span";else"http://www.pyroxy.com/ns/shadow"==E?(E="http://www.w3.org/1999/xhtml",S=t.w.ya?"span":"div"):w=!!t.g;m?e?S="li":(S="div",f=Ye,l.display=f):"body"==S||"li"==S?S="div":"q"==S?S="span":"a"==S&&(u=l["hyperlink-processing"])&&"normal"!=u.toString()&&(S="span"),l.behavior&&"none"!=l.behavior.toString()&&t.g&&(w=!0),o.dataset&&"true"===o.getAttribute("data-math-typeset")&&(w=!0),(w?t.g(o,t.w.parent?t.w.parent.A:null,l):ai(null)).then(function(a){a?w&&(i="true"==a.getAttribute("data-adapt-process-children")):a=Cd(t,E,S),"a"==S&&a.addEventListener("click",t.page.J,!1),y&&(Sd(t,t.w,"inner",y),a.appendChild(y)),"iframe"==a.localName&&"http://www.w3.org/1999/xhtml"==a.namespaceURI&&function(t){t.addEventListener("load",function(){t.contentWindow.navigator.epubReadingSystem={name:"adapt",version:"0.1",layoutStyle:"paginated",hasFeature:function(t){switch(t){case"mouse-events":return!0}return!1}}},!1)}(a);var s=t.w.h["image-resolution"],u=[],h=l.width,c=l.height,f=o.getAttribute("width"),p=o.getAttribute("height");h=h===Ke||!h&&!f,c=c===Ke||!c&&!p;if("http://www.gribuser.ru/xml/fictionbook/2.0"!=o.namespaceURI||"td"==S){for(var d=(f=o.attributes).length,b=(p=null,0);b<d;b++){var g=(k=f[b]).namespaceURI,v=k.localName,k=k.nodeValue;if(g){if("http://www.w3.org/2000/xmlns/"==g)continue;"http://www.w3.org/1999/xlink"==g&&"href"==v&&(k=fd(t,k))}else{if(v.match(/^on/))continue;if("style"==v)continue;if(("id"==v||"name"==v)&&e){k=t.h.Re(k,t.da.url),a.setAttribute(v,k),el(t.page,a,k);continue}if("src"==v||"href"==v||"poster"==v?(k=fd(t,k),"href"===v&&(k=t.h.oc(k,t.da.url))):"srcset"==v&&(k=k.split(",").map(function(e){return fd(t,e.trim())}).join(",")),"poster"===v&&"video"===S&&"http://www.w3.org/1999/xhtml"===E&&h&&c){var C=new Image,T=Pi(C,k);x.push(T),u.push({Rf:C,element:a,Of:T})}}"http://www.w3.org/2000/svg"==E&&/^[A-Z\-]+$/.test(v)&&(v=v.toLowerCase()),bd.includes(v.toLowerCase())&&(k=Jp(k,t.da.url,t.h)),g&&(C=ed[g])&&(v=C+":"+v),"src"!=v||g||"img"!=S&&"input"!=S||"http://www.w3.org/1999/xhtml"!=E?"href"==v&&"image"==S&&"http://www.w3.org/2000/svg"==E&&"http://www.w3.org/1999/xlink"==g?t.page.j.push(Pi(a,k)):g?a.setAttributeNS(g,v,k):a.setAttribute(v,k):p=k}p&&(f=Pi(C="input"===S?new Image:a,p),C!==a&&(a.src=p),h||c?(h&&c&&s&&1!==s&&u.push({Rf:C,element:a,Of:f}),x.push(f)):t.page.j.push(f))}if(delete l.content,(h=l["list-style-image"])&&h instanceof Le&&(h=h.url,x.push(Pi(new Image,h))),function(t,e){ni("PREPROCESS_ELEMENT_STYLE").forEach(function(n){n(t.w,e)})}(t,l),Ed(t,a,l),!t.w.ya&&(h=null,e?n&&(h=t.w.b?td:Qp):h="clone"!==t.w.h["box-decoration-break"]?t.w.b?qp:Zp:t.w.b?td:Qp,h))for(var A in h)R(a,A,h[A]);m&&a.setAttribute("value",l["ua-list-item-count"].stringValue()),t.A=a,x.length?Ii(x).then(function(){0<s&&function(t,e,n,i,r){e.forEach(function(e){if("load"===e.Of.get().get()){var o=e.Rf,a=o.width/n,o=o.height/n;if(e=e.element,0<a&&0<o)if(i["box-sizing"]===tn&&(i["border-left-style"]!==kn&&(a+=Ve(i["border-left-width"],t.b)),i["border-right-style"]!==kn&&(a+=Ve(i["border-right-width"],t.b)),i["border-top-style"]!==kn&&(o+=Ve(i["border-top-width"],t.b)),i["border-bottom-style"]!==kn&&(o+=Ve(i["border-bottom-width"],t.b))),1<n){var s=i["max-width"]||kn,u=i["max-height"]||kn;s===kn&&u===kn?R(e,"max-width",a+"px"):s!==kn&&u===kn?R(e,"width",a+"px"):s===kn&&u!==kn?R(e,"height",o+"px"):"%"!==s.ka?R(e,"max-width",Math.min(a,Ve(s,t.b))+"px"):"%"!==u.ka?R(e,"max-height",Math.min(o,Ve(u,t.b))+"px"):r?R(e,"height",o+"px"):R(e,"width",a+"px")}else 1>n&&(s=i["min-width"]||Jn,u=i["min-height"]||Jn,s.L||u.L?s.L&&!u.L?R(e,"width",a+"px"):!s.L&&u.L?R(e,"height",o+"px"):"%"!==s.ka?R(e,"min-width",Math.max(a,Ve(s,t.b))+"px"):"%"!==u.ka?R(e,"min-height",Math.max(o,Ve(u,t.b))+"px"):r?R(e,"height",o+"px"):R(e,"width",a+"px"):R(e,"min-width",a+"px"))}})}(t,u,s,l,t.w.b),xi(r,i)}):Ei().then(function(){xi(r,i)})})}),r.result()}var bd="color-profile clip-path cursor filter marker marker-start marker-end marker-mid fill stroke mask".split(" ");function gd(t){var e=t["repeat-on-break"];return e!==kn&&(e===Ke&&(e=t.display===Bn?fn:t.display===zn?cn:kn),e&&e!==kn)?e.toString():null}function vd(t){var e=oi("createTextNodeView");return function(t){if(t.w.Qa)return ai(!0);var e,n=e=t.M.textContent,i=oi("preprocessTextContent"),r=ni("PREPROCESS_TEXT_CONTENT"),o=0;return ki(function(){return o>=r.length?ai(!1):r[o++](t.w,n).ea(function(t){return n=t,ai(!0)})}).then(function(){t.w.Qa=fv(e,n,0),xi(i,!0)}),i.result()}(t).then(function(){var n=t.na||0;n=vv(t.w.Qa).substr(n);t.A=document.createTextNode(n),xi(e,!0)}),e.result()}function md(t,e,n,i){return(t.w=e)?(t.M=e.M,t.na=e.na):(t.M=null,t.na=-1),t.A=null,t.w?function(t,e,n){var i=oi("createNodeView"),r=!0;return 1==t.M.nodeType?e=dd(t,e,n):8==t.M.nodeType?(t.A=null,e=ai(!0)):e=vd(t),e.then(function(e){r=e,(t.w.A=t.A)&&(e=t.w.parent?t.w.parent.A:t.N)&&e.appendChild(t.A),xi(i,r)}),i.result()}(t,n,!!i):ai(!0)}function wd(t){if(null==t.wa||"content"!=t.M.localName||"http://www.pyroxy.com/ns/shadow"!=t.M.namespaceURI)return t;var e,n,i=t.Ma,r=t.wa,o=t.parent;r.vf?(n=r.vf,e=r.root,2==(r=r.type)&&(e=e.firstChild)):(n=r.pd,e=r.oa.firstChild,r=2);var a=t.M.nextSibling;return a?(t.M=a,ml(t)):t.Fa?t=t.Fa:e?t=null:(t=t.parent.modify()).K=!0,e?((i=new vl(e,o,i)).wa=n,i.kb=r,i.Fa=t,i):(t.Ma=i,t)}function yd(t,e,n){if(!(e=function(t){var e=t.Ma+1;if(t.K){if(!t.parent)return null;if(3!=t.kb){var n=t.M.nextSibling;if(n)return(t=t.modify()).Ma=e,t.M=n,ml(t),wd(t)}if(t.Fa)return(t=t.Fa.modify()).Ma=e,t;t=t.parent.modify()}else{if(t.Ja&&(n=t.Ja.root,2==t.Ja.type&&(n=n.firstChild),n))return(e=new vl(n,t,e)).wa=t.Ja,e.kb=t.Ja.type,wd(e);if(n=t.M.firstChild)return wd(new vl(n,t,e));1!=t.M.nodeType&&(e+=(n=vv(t.Qa)).length-1-t.na),t=t.modify()}return t.Ma=e,t.K=!0,t}(e))||e.K)return ai(e);var i=oi("nextInTree");return md(t,e,!0,n).then(function(n){e.A&&n||((e=e.modify()).K=!0,e.A||(e.ya=!0)),nt(t,{type:"nextInTree",w:e}),xi(i,e)}),i.result()}var xd={"box-decoration-break":!0,"float-min-wrap-block":!0,"float-reference":!0,"flow-into":!0,"flow-linger":!0,"flow-options":!0,"flow-priority":!0,"footnote-policy":!0,page:!0};function Ed(t,e,n){(r=n["background-image"])&&function t(e,n){if(n instanceof ze)for(var i=n.values,r=0;r<i.length;r++)t(e,i[r]);else n instanceof Le&&(i=n.url,e.page.j.push(Pi(new Image,i)))}(t,r);var i,r=n.position===Nn;for(i in n)if(!xd[i]){var o;(o=(o=n[i]).fa(new jo(t.da.url,t.h))).Ac()&&Ot(o.ka)&&(o=new Pe(Ve(o,t.b),"px")),Yu[i]||r&&Ju[i]?t.page.l.push(new Zu(e,i,o)):R(e,i,o.toString())}}function Sd(t,e,n,i){if(!e.K){var r=(e.wa?e.wa.b:t.j).l(t.M,!1);(r=r._pseudos)&&(r=r[n])&&(n={},e.b=ld(t,e.b,"rtl"===e.direction,r,n),Xl(e=n.content)&&(e.fa(new Kl(i,t.b,e,t.u)),delete n.content),Ed(t,i,n))}}function kd(t,e,n){var i=oi("peelOff"),r=e.f,o=e.na,a=e.K;if(0<n)e.A.textContent=e.A.textContent.substr(0,n),o+=n;else if(!a&&e.A&&!o){var s=e.A.parentNode;s&&s.removeChild(e.A)}for(var u=e.Ma+n,l=[];e.f===r;)l.push(e),e=e.parent;var h=l.pop(),c=h.Fa;return ki(function(){for(;0<l.length;){h=l.pop(),e=new vl(h.M,e,u),l.length||(e.na=o,e.K=a),e.kb=h.kb,e.wa=h.wa,e.Ja=h.Ja,e.Fa=h.Fa?h.Fa:c,c=null;var n=md(t,e,!1);if(n.Xa())return n}return ai(!1)}).then(function(){xi(i,e)}),i.result()}function Cd(t,e,n){return"http://www.w3.org/1999/xhtml"==e?t.D.createElement(n):t.D.createElementNS(e,n)}function Td(t){t&&Sl(t,function(t){var e=t.h["box-decoration-break"];e&&"slice"!==e||(e=t.A,t.b?(R(e,"padding-left","0"),R(e,"border-left","none"),R(e,"border-top-left-radius","0"),R(e,"border-bottom-left-radius","0")):(R(e,"padding-bottom","0"),R(e,"border-bottom","none"),R(e,"border-bottom-left-radius","0"),R(e,"border-bottom-right-radius","0")))})}function Ad(t){this.b=t.h,this.window=t.window}function _d(t,e){var n=e.left,i=e.top;return{left:t.left-n,top:t.top-i,right:t.right-n,bottom:t.bottom-i,width:t.width,height:t.height}}function Nd(t,e){var n=e.getClientRects(),i=t.b.getBoundingClientRect();return Array.from(n).map(function(t){return _d(t,i)},t)}function Od(t,e){return _d(e.getBoundingClientRect(),t.b.getBoundingClientRect())}function Id(t,e){return t.window.getComputedStyle(e,null)}function Pd(t,e,n,i,r){this.window=t,this.fontSize=e,this.b=t.document,this.root=n||this.b.body,(e=this.root.firstElementChild)||((e=this.b.createElement("div")).setAttribute("data-vivliostyle-outer-zoom-box",!0),this.root.appendChild(e)),(n=e.firstElementChild)||((n=this.b.createElement("div")).setAttribute("data-vivliostyle-spread-container",!0),e.appendChild(n));var o=e.nextElementSibling;o||((o=this.b.createElement("div")).setAttribute("data-vivliostyle-layout-box",!0),this.root.appendChild(o)),this.g=e,this.f=n,this.h=o,e=Id(new Ad(this),this.root),this.width=i||parseFloat(e.width)||t.innerWidth,this.height=r||parseFloat(e.height)||t.innerHeight}Pd.prototype.zoom=function(t,e,n){R(this.g,"width",t*n+"px"),R(this.g,"height",e*n+"px"),R(this.f,"width",t+"px"),R(this.f,"height",e+"px"),R(this.f,"transform","scale("+n+")")};var Fd="min-content inline size",Md="fit-content inline size";function Dd(t,e,n){function i(n){return Id(t,e).getPropertyValue(n)}function r(){return R(e,"display","block"),R(e,"position","static"),i(x)}function o(){R(e,"display","inline-block"),R(m,x,"99999999px");var t=i(x);return R(m,x,""),t}function a(){R(e,"display","inline-block"),R(m,x,"0");var t=i(x);return R(m,x,""),t}function s(){var t=r(),e=a(),n=parseFloat(t);return n<=parseFloat(e)?e:(e=o(),n<=parseFloat(e)?t:e)}function u(){throw Error("Getting fill-available block size is not implemented")}var l=e.style.display,h=e.style.position,c=e.style.width,f=e.style.maxWidth,p=e.style.minWidth,d=e.style.height,b=e.style.maxHeight,g=e.style.minHeight,v=e.parentNode,m=e.ownerDocument.createElement("div");R(m,"position",h),v.insertBefore(m,e),m.appendChild(e),R(e,"width","auto"),R(e,"max-width","none"),R(e,"min-width","0"),R(e,"height","auto"),R(e,"max-height","none"),R(e,"min-height","0");var w,y="vertical-rl"===(w=((w=j("writing-mode"))?i(w[0]):null)||i("writing-mode"))||"tb-rl"===w||"vertical-lr"===w||"tb-lr"===w,x=y?"height":"width",E=y?"width":"height",S={};return n.forEach(function(t){var n;switch(t){case"fill-available inline size":n=r();break;case"max-content inline size":n=o();break;case Fd:n=a();break;case Md:n=s();break;case"fill-available block size":n=u();break;case"max-content block size":case"min-content block size":case"fit-content block size":n=i(E);break;case"fill-available width":n=y?u():r();break;case"fill-available height":n=y?r():u();break;case"max-content width":n=y?i(E):o();break;case"max-content height":n=y?o():i(E);break;case"min-content width":n=y?i(E):a();break;case"min-content height":n=y?a():i(E);break;case"fit-content width":n=y?i(E):s();break;case"fit-content height":n=y?s():i(E)}S[t]=parseFloat(n),R(e,"position",h),R(e,"display",l)}),R(e,"width",c),R(e,"max-width",f),R(e,"min-width",p),R(e,"height",d),R(e,"max-height",b),R(e,"min-height",g),v.insertBefore(e,m),v.removeChild(m),S}function Ld(t){var e=(e=t["writing-mode"])&&e.value;return t=(t=t.direction)&&t.value,e===Hn||e!==$n&&t!==Dn?"ltr":"rtl"}var jd={a5:{width:new Pe(148,"mm"),height:new Pe(210,"mm")},a4:{width:new Pe(210,"mm"),height:new Pe(297,"mm")},a3:{width:new Pe(297,"mm"),height:new Pe(420,"mm")},b5:{width:new Pe(176,"mm"),height:new Pe(250,"mm")},b4:{width:new Pe(250,"mm"),height:new Pe(353,"mm")},"jis-b5":{width:new Pe(182,"mm"),height:new Pe(257,"mm")},"jis-b4":{width:new Pe(257,"mm"),height:new Pe(364,"mm")},letter:{width:new Pe(8.5,"in"),height:new Pe(11,"in")},legal:{width:new Pe(8.5,"in"),height:new Pe(14,"in")},ledger:{width:new Pe(11,"in"),height:new Pe(17,"in")}},Rd=new Pe(.24,"pt"),zd=new Pe(3,"mm"),Bd=new Pe(10,"mm"),Ud=new Pe(13,"mm");function Vd(t){var e={width:Wn,height:Yn,$b:Jn,ac:Jn},n=t.size;if(n&&n.value!==Ke){var i=n.value;i.Ud()?(n=i.values[0],i=i.values[1]):(n=i,i=null),n.Ac()?(e.width=n,e.height=i||n):(n=n.name&&jd[n.name.toLowerCase()])&&(i&&i===wn?(e.width=n.height,e.height=n.width):(e.width=n.width,e.height=n.height))}return(n=t.marks)&&n.value!==kn&&(e.ac=Ud),(t=t.bleed)&&t.value!==Ke?t.value&&t.value.Ac()&&(e.$b=t.value):n&&(t=!1,(t=n.value.Ud()?n.value.values.some(function(t){return t===rn}):n.value===rn)&&(e.$b=new Pe(6,"pt"))),e}function Hd(t,e){var n={},i=t.$b.L*Ft(e,t.$b.ka,!1),r=t.ac.L*Ft(e,t.ac.ka,!1),o=i+r,a=t.width;return n.jc=a===Wn?e.$.vc?e.$.vc.width*Ft(e,"px",!1):(e.$.ub?Math.floor(e.Cb/2)-e.$.Dc:e.Cb)-2*o:a.L*Ft(e,a.ka,!1),a=t.height,n.ic=a===Yn?e.$.vc?e.$.vc.height*Ft(e,"px",!1):e.Lc-2*o:a.L*Ft(e,a.ka,!1),n.$b=i,n.ac=r,n.qe=o,n}function $d(t,e,n){return(t=t.createElementNS("http://www.w3.org/2000/svg","svg")).setAttribute("width",e),t.setAttribute("height",n),t.style.position="absolute",t}function Gd(t,e,n){return(t=t.createElementNS("http://www.w3.org/2000/svg",n||"polyline")).setAttribute("stroke","black"),t.setAttribute("stroke-width",e),t.setAttribute("fill","none"),t}var Kd={kh:"top left",lh:"top right",Xg:"bottom left",Yg:"bottom right"};var Xd={jh:"top",Wg:"bottom",pg:"left",qg:"right"};function Wd(t,e,n,i){var r=!1,o=!1,a=t.marks;if(a&&((a=a.value).Ud()?a.values.forEach(function(t){t===rn?r=!0:t===on&&(o=!0)}):a===rn?r=!0:a===on&&(o=!0)),r||o){var s=n.H,u=s.ownerDocument,l=e.$b,h=Ve(Rd,i),c=Ve(zd,i),f=Ve(Bd,i);l&&(t=t["background-color"])&&t.value&&(n.h.style.backgroundColor=t.value.stringValue()),r&&Object.keys(Kd).forEach(function(t){t=function(t,e,n,i,r,o){(a=i)<=r+2*Nt.mm&&(a=r+i/2);var a,s=Math.max(i,a),u=r+s+n/2,l=$d(t,u,u);return i=(a=[[0,r+i],[i,r+i],[i,r+i-a]]).map(function(t){return[t[1],t[0]]}),"top right"!==e&&"bottom right"!==e||(a=a.map(function(t){return[r+s-t[0],t[1]]}),i=i.map(function(t){return[r+s-t[0],t[1]]})),"bottom left"!==e&&"bottom right"!==e||(a=a.map(function(t){return[t[0],r+s-t[1]]}),i=i.map(function(t){return[t[0],r+s-t[1]]})),(u=Gd(t,n)).setAttribute("points",a.map(function(t){return t.join(",")}).join(" ")),l.appendChild(u),(t=Gd(t,n)).setAttribute("points",i.map(function(t){return t.join(",")}).join(" ")),l.appendChild(t),e.split(" ").forEach(function(t){l.style[t]=o+"px"}),l}(u,Kd[t],h,f,l,c),s.appendChild(t)}),o&&Object.keys(Xd).forEach(function(t){t=function(t,e,n,i,r){var o,a=2*i;"top"===e||"bottom"===e?(o=a,a=i):o=i;var s,u=$d(t,o,a),l=Gd(t,n);switch(l.setAttribute("points","0,"+a/2+" "+o+","+a/2),u.appendChild(l),(l=Gd(t,n)).setAttribute("points",o/2+",0 "+o/2+","+a),u.appendChild(l),(t=Gd(t,n,"circle")).setAttribute("cx",o/2),t.setAttribute("cy",a/2),t.setAttribute("r",i/4),u.appendChild(t),e){case"top":s="bottom";break;case"bottom":s="top";break;case"left":s="right";break;case"right":s="left"}return Object.keys(Xd).forEach(function(t){(t=Xd[t])===e?u.style[t]=r+"px":t!==s&&(u.style[t]="0",u.style["margin-"+t]="auto")}),u}(u,Xd[t],h,f,c),s.appendChild(t)})}}var Yd,Jd=(Yd={width:!0,height:!0,"block-size":!0,"inline-size":!0,margin:!0,padding:!0,border:!0,outline:!0,"outline-width":!0,"outline-style":!0,"outline-color":!0},"left right top bottom before after start end block-start block-end inline-start inline-end".split(" ").forEach(function(t){Yd["margin-"+t]=!0,Yd["padding-"+t]=!0,Yd["border-"+t+"-width"]=!0,Yd["border-"+t+"-style"]=!0,Yd["border-"+t+"-color"]=!0}),Yd),Zd={"top-left-corner":{order:1,Wa:!0,Ta:!1,Ua:!0,Va:!0,Ea:null},"top-left":{order:2,Wa:!0,Ta:!1,Ua:!1,Va:!1,Ea:"start"},"top-center":{order:3,Wa:!0,Ta:!1,Ua:!1,Va:!1,Ea:"center"},"top-right":{order:4,Wa:!0,Ta:!1,Ua:!1,Va:!1,Ea:"end"},"top-right-corner":{order:5,Wa:!0,Ta:!1,Ua:!1,Va:!0,Ea:null},"right-top":{order:6,Wa:!1,Ta:!1,Ua:!1,Va:!0,Ea:"start"},"right-middle":{order:7,Wa:!1,Ta:!1,Ua:!1,Va:!0,Ea:"center"},"right-bottom":{order:8,Wa:!1,Ta:!1,Ua:!1,Va:!0,Ea:"end"},"bottom-right-corner":{order:9,Wa:!1,Ta:!0,Ua:!1,Va:!0,Ea:null},"bottom-right":{order:10,Wa:!1,Ta:!0,Ua:!1,Va:!1,Ea:"end"},"bottom-center":{order:11,Wa:!1,Ta:!0,Ua:!1,Va:!1,Ea:"center"},"bottom-left":{order:12,Wa:!1,Ta:!0,Ua:!1,Va:!1,Ea:"start"},"bottom-left-corner":{order:13,Wa:!1,Ta:!0,Ua:!0,Va:!1,Ea:null},"left-bottom":{order:14,Wa:!1,Ta:!1,Ua:!0,Va:!1,Ea:"end"},"left-middle":{order:15,Wa:!1,Ta:!1,Ua:!0,Va:!1,Ea:"center"},"left-top":{order:16,Wa:!1,Ta:!1,Ua:!0,Va:!1,Ea:"start"}},qd=Object.keys(Zd).sort(function(t,e){return Zd[t].order-Zd[e].order});function Qd(t,e,n){for(var i in up.call(this,t,null,"vivliostyle-page-rule-master",[],e,null,0),t=Vd(n),new tb(this.f,this,n,t),this.B={},function(t,e){var n=e._marginBoxes;n&&qd.forEach(function(i){n[i]&&(t.B[i]=new eb(t.f,t,i,e))})}(this,n),this.b.position=new La(Nn,0),this.b.width=new La(t.width,0),this.b.height=new La(t.height,0),n)Jd[i]||"background-clip"===i||(this.b[i]=n[i])}function tb(t,e,n,i){for(var r in hp.call(this,t,null,null,[],e),this.D=i,this.b["z-index"]=new La(new Me(0),0),this.b["flow-from"]=new La(Ie("body"),0),this.b.position=new La(He,0),this.b.overflow=new La(Gn,0),Jd)Jd.hasOwnProperty(r)&&(this.b[r]=n[r])}function eb(t,e,n,i){for(var r in hp.call(this,t,null,null,[],e),this.u=n,t=i._marginBoxes[this.u],i)e=i[r],n=t[r],(xa[r]||n&&n.value===dn)&&(this.b[r]=e);for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e=t[r])&&e.value!==dn&&(this.b[r]=e)}function nb(t,e){zp.call(this,t,e),this.u=null,this.ta={}}function ib(t,e,n,i,r){this.H=t,this.B=r,this.j=n,this.u=!cp(i,e[n?"width":"height"],new se(i,0,"px")),this.size=null}function rb(t){return t.size||(t.size=Dd(t.B,t.H.element,t.j?["max-content width","min-content width"]:["max-content height","min-content height"])),t.size}function ob(t){this.j=t}function ab(t,e,n,i,r,o){ib.call(this,t,e,n,i,r),this.l=o}function sb(t,e,n,i,r,o){var a,s=t.f.f,u={},l={},h={};for(a in e){var c=Zd[a];if(c){var f=e[a],p=t.ta[a],d=new ib(f,p.style,n,s,o);u[c.Ea]=f,l[c.Ea]=p,h[c.Ea]=d}}t=i.start.evaluate(r),i.end.evaluate(r),e=i.va.evaluate(r);var b=ub(h,e),g=!1,v={};Object.keys(u).forEach(function(t){var e=cp(s,l[t].style[n?"max-width":"max-height"],i.va);e&&(e=e.evaluate(r),b[t]>e&&(e=h[t]=new ab(u[t],l[t].style,n,s,o,e),v[t]=e.f(),g=!0))}),g&&(b=ub(h,e),g=!1,["start","center","end"].forEach(function(t){b[t]=v[t]||b[t]}));var m={};Object.keys(u).forEach(function(t){var e=cp(s,l[t].style[n?"min-width":"min-height"],i.va);e&&(e=e.evaluate(r),b[t]<e&&(e=h[t]=new ab(u[t],l[t].style,n,s,o,e),m[t]=e.f(),g=!0))}),g&&(b=ub(h,e),["start","center","end"].forEach(function(t){b[t]=m[t]||b[t]}));var w=t+e,y=t+(t+e);["start","center","end"].forEach(function(t){var e=b[t];if(e){var i=u[t],r=0;switch(t){case"start":r=n?i.left:i.top;break;case"center":r=(y-e)/2;break;case"end":r=w-e}n?zl(i,r,e-Dl(i)-Ll(i)):Rl(i,r,e-Fl(i)-Ml(i))}})}function ub(t,e){var n,i=t.start,r=t.center,o=t.end,a={};r?((n=lb(r,(n=[i,o].filter(function(t){return t})).length?new ob(n):null,e)).Bb&&(a.center=n.Bb),r=(e-(r=n.Bb||r.f()))/2,i&&i.b()&&(a.start=r),o&&o.b()&&(a.end=r)):((i=lb(i,o,e)).Bb&&(a.start=i.Bb),i.Dd&&(a.end=i.Dd));return a}function lb(t,e,n){var i={Bb:null,Dd:null};if(t&&e)if(t.b()&&e.b()){var r=t.g(),o=e.g();0<r&&0<o?((o=r+o)<n?i.Bb=n*r/o:(e=(t=t.h())+(e=e.h()))<n?i.Bb=t+(n-e)*(r-t)/(o-e):0<e&&(i.Bb=n*t/e),0<i.Bb&&(i.Dd=n-i.Bb)):0<r?i.Bb=n:0<o&&(i.Dd=n)}else t.b()?i.Bb=Math.max(n-e.f(),0):e.b()&&(i.Dd=Math.max(n-t.f(),0));else t?t.b()&&(i.Bb=n):e&&e.b()&&(i.Dd=n);return i}function hb(t,e){Up.call(this,t,e),this.marginLeft=this.marginBottom=this.marginRight=this.marginTop=this.Jc=this.Kc=null}function cb(t,e){var n=t.style,i=t.f.f,r=e.start,o=e.end,a=e.va,s=t.f.D[a].Aa(i,null),u=cp(i,n[a],s),l=cp(i,n["margin-"+r],s),h=cp(i,n["margin-"+o],s),c=fp(i,n["padding-"+r],s),f=fp(i,n["padding-"+o],s),p=dp(i,n["border-"+r+"-width"],n["border-"+r+"-style"],s),d=dp(i,n["border-"+o+"-width"],n["border-"+o+"-style"],s),b=me(i,s,ve(i,ve(i,p,c),ve(i,d,f)));return u?(b=me(i,b,u),l||h?l?h=me(i,b,l):l=me(i,b,h):h=l=we(i,b,new pe(i,.5))):(l||(l=i.b),h||(h=i.b),u=me(i,b,ve(i,l,h))),n[r]=new Ue(l),n[o]=new Ue(h),n["margin-"+r]=Jn,n["margin-"+o]=Jn,n["padding-"+r]=new Ue(c),n["padding-"+o]=new Ue(f),n["border-"+r+"-width"]=new Ue(p),n["border-"+o+"-width"]=new Ue(d),n[a]=new Ue(u),n["max-"+a]=new Ue(u),{Gf:me(i,s,ve(i,l,h)),Zf:l,Yf:h}}function fb(t,e){Up.call(this,t,e);var n=e.u;this.u=Zd[n],t.ta[n]=this,this.ua=!0}function pb(t,e,n){function i(t){if(b)return b;b={va:d?d.evaluate(t):null,rb:u?u.evaluate(t):null,sb:l?l.evaluate(t):null};var e=s.evaluate(t),n=0;return[f,h,c,p].forEach(function(e){e&&(n+=e.evaluate(t))}),(null===b.rb||null===b.sb)&&n+b.va+b.rb+b.sb>e&&(null===b.rb&&(b.rb=0),null===b.sb&&(b.rh=0)),null!==b.va&&null!==b.rb&&null!==b.sb&&(b.sb=null),null===b.va&&null!==b.rb&&null!==b.sb?b.va=e-n-b.rb-b.sb:null!==b.va&&null===b.rb&&null!==b.sb?b.rb=e-n-b.va-b.sb:null!==b.va&&null!==b.rb&&null===b.sb?b.sb=e-n-b.va-b.rb:null===b.va?(b.rb=b.sb=0,b.va=e-n):b.rb=b.sb=(e-n-b.va)/2,b}var r=t.style;t=t.f.f;var o=e.De,a=e.Ke;e=e.va;var s=n["margin"+a.charAt(0).toUpperCase()+a.substring(1)],u=pp(t,r["margin-"+o],s),l=pp(t,r["margin-"+a],s),h=fp(t,r["padding-"+o],s),c=fp(t,r["padding-"+a],s),f=dp(t,r["border-"+o+"-width"],r["border-"+o+"-style"],s),p=dp(t,r["border-"+a+"-width"],r["border-"+a+"-style"],s),d=cp(t,r[e],s),b=null;r[e]=new Ue(new he(t,function(){var t=i(this).va;return null===t?0:t},e)),r["margin-"+o]=new Ue(new he(t,function(){var t=i(this).rb;return null===t?0:t},"margin-"+o)),r["margin-"+a]=new Ue(new he(t,function(){var t=i(this).sb;return null===t?0:t},"margin-"+a)),"left"===o?r.left=new Ue(ve(t,n.marginLeft,n.Kc)):"top"===o&&(r.top=new Ue(ve(t,n.marginTop,n.Jc)))}function db(t,e,n,i,r){this.f=t,this.l=e,this.h=n,this.b=i,this.g=r,this.j={},n=new $t(t=this.l,e=new te(t,new ae(t,e=new ue(t,"page-number"),new pe(t,2)),t.b)),t.values["recto-page"]=n,t.values["verso-page"]=e,"ltr"===(this.b.I||Ld(this.g))?(t.values["left-page"]=e,e=new $t(t,e),t.values["right-page"]=e):(n=new $t(t,e),t.values["left-page"]=n,t.values["right-page"]=e)}function bb(t,e){var n,i=[];for(n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r,o=e[n];r=o instanceof La?""+o.value:bb(t,o),i.push(n+r+(o.cb||""))}return i.sort().join("^")}function gb(t,e,n){var i=(n=n.clone({mc:"vivliostyle-page-rule-master"})).b;if(o=e.size){var r=Vd(e),o=o.cb;i.width=Ra(t.b,i.width,new La(r.width,o)),i.height=Ra(t.b,i.height,new La(r.height,o))}return["counter-reset","counter-increment"].forEach(function(t){i[t]&&(e[t]=i[t])}),(n=n.h(t.h)).l(t.f,t.g),jp(n,t.b),n}function vb(t){this.b=null,this.h=t}function mb(t){this.b=null,this.h=t}function wb(t){this.b=null,this.h=t}function yb(t){this.b=null,this.h=t}function xb(t){this.b=null,this.h=t}function Eb(t){this.b=null,this.h=t}function Sb(t,e){qa.call(this,t,e,null,null,null)}function kb(t,e,n,i,r){fu.call(this,t,e,null,n,null,i,!1),this.S=r,this.I=[],this.g="",this.F=[]}function Cb(t){var e;e=t.g||t.F.length?[t.g].concat(t.F.sort()):null,t.I.push({rf:e,ba:t.ba}),t.g="",t.F=[]}function Tb(t,e,n,i){Ar.call(this,t,e,!1),this.g=n,this.b=i}function Ab(t){if(1>=t.length)return!1;var e=t[t.length-1].h;return t.slice(0,t.length-1).every(function(t){return e>t.h})}function _b(t,e){t.b?t.width=e:t.height=e}function Nb(t){return t.b?t.width:t.height}function Ob(t,e){this.md=t,this.Tc=e}function Ib(t,e,n){this.b=t,this.F=e,this.B=n,this.f=Nb(t)}function Pb(t,e){var n=oi("ColumnBalancer#balanceColumns");t.u(e),Mb(t,e),Vl(t.b);var i=[Fb(t,e)];return Ci(function(e){t.l(i)?(t.D(i),t.F().then(function(n){Mb(t,n),Vl(t.b),n?(i.push(Fb(t,n)),_i(e)):Ni(e)})):Ni(e)}).then(function(){var e=i.reduce(function(t,e){return e.Tc<t.Tc?e:t},i[0]);!function(t,e){var n=t.b.element;e.Fb.forEach(function(t){n.appendChild(t.element)}),function(t,e){e.forEach(function(t){this.children.push(t),Nc(t)},t)}(t.B,e.ug)}(t,e.md),_b(t.b,t.f),xi(n,e.md)}),n.result()}function Fb(t,e){return new Ob(e,t.j(e))}function Mb(t,e){var n=function(t){return(t=t.children.splice(0)).forEach(function(t){t.b.forEach(function(t){(t=t.b.element)&&t.parentNode&&t.parentNode.removeChild(t)})}),t}(t.B);e&&(e.ug=n)}function Db(t){var e=t[t.length-1];return!(!e.Tc||(t=t[t.length-2])&&e.Tc>=t.Tc)&&(t=e.md.Fb,(e=Math.max.apply(null,t.map(function(t){return t.h})))>(t=Math.max.apply(null,t.map(function(t){return function(t){var e=oc(t).b;return t.b.length?Math.max.apply(null,t.b.map(function(t){return t=t.b,e?t.width:t.height})):0}(t.l)})))+1)}function Lb(t,e){var n=Math.max.apply(null,t[t.length-1].md.Fb.map(function(t){return isNaN(t.jf)?t.h:t.h-t.jf+1}))-1;n<Nb(e)?_b(e,n):_b(e,Nb(e)-1)}function jb(t,e,n,i){Ib.call(this,n,t,e),this.G=i,this.h=null,this.g=!1}function Rb(t,e){return t.h?Il(t.h,e):!e}function zb(t,e,n){Ib.call(this,n,t,e)}g(Qd,up),Qd.prototype.h=function(t){return new nb(t,this)},g(tb,hp),tb.prototype.h=function(t){return new hb(t,this)},g(eb,hp),eb.prototype.h=function(t){return new fb(t,this)},g(nb,zp),nb.prototype.l=function(t,e){var n,i=this.J;for(n in e)if(Object.prototype.hasOwnProperty.call(e,n))switch(n){case"writing-mode":case"direction":i[n]=e[n]}zp.prototype.l.call(this,t,e)},nb.prototype.Ae=function(){var t=this.style;t.left=Jn,t["margin-left"]=Jn,t["border-left-width"]=Jn,t["padding-left"]=Jn,t["padding-right"]=Jn,t["border-right-width"]=Jn,t["margin-right"]=Jn,t.right=Jn},nb.prototype.Be=function(){var t=this.style;t.top=Jn,t["margin-top"]=Jn,t["border-top-width"]=Jn,t["padding-top"]=Jn,t["padding-bottom"]=Jn,t["border-bottom-width"]=Jn,t["margin-bottom"]=Jn,t.bottom=Jn},nb.prototype.ca=function(t,e,n){e=e.I;var i={start:this.u.marginLeft,end:this.u.marginRight,va:this.u.Kc},r={start:this.u.marginTop,end:this.u.marginBottom,va:this.u.Jc};sb(this,e.top,!0,i,t,n),sb(this,e.bottom,!0,i,t,n),sb(this,e.left,!1,r,t,n),sb(this,e.right,!1,r,t,n)},ib.prototype.b=function(){return this.u},ib.prototype.g=function(){var t=rb(this);return this.j?Dl(this.H)+t["max-content width"]+Ll(this.H):Fl(this.H)+t["max-content height"]+Ml(this.H)},ib.prototype.h=function(){var t=rb(this);return this.j?Dl(this.H)+t["min-content width"]+Ll(this.H):Fl(this.H)+t["min-content height"]+Ml(this.H)},ib.prototype.f=function(){return this.j?Dl(this.H)+this.H.width+Ll(this.H):Fl(this.H)+this.H.height+Ml(this.H)},ob.prototype.b=function(){return this.j.some(function(t){return t.b()})},ob.prototype.g=function(){var t=this.j.map(function(t){return t.g()});return Math.max.apply(null,t)*t.length},ob.prototype.h=function(){var t=this.j.map(function(t){return t.h()});return Math.max.apply(null,t)*t.length},ob.prototype.f=function(){var t=this.j.map(function(t){return t.f()});return Math.max.apply(null,t)*t.length},g(ab,ib),ab.prototype.b=function(){return!1},ab.prototype.g=function(){return this.f()},ab.prototype.h=function(){return this.f()},ab.prototype.f=function(){return this.j?Dl(this.H)+this.l+Ll(this.H):Fl(this.H)+this.l+Ml(this.H)},nb.prototype.kc=function(t,e,n,i,r){nb.ng.kc.call(this,t,e,n,i,r),e.element.setAttribute("data-vivliostyle-page-box",!0)},g(hb,Up),hb.prototype.l=function(t,e){var n,i=this.J;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&(n.match(/^column.*$/)||n.match(/^background-/))&&(i[n]=e[n]);Up.prototype.l.call(this,t,e),n=this.g,i={Kc:this.Kc,Jc:this.Jc,marginTop:this.marginTop,marginRight:this.marginRight,marginBottom:this.marginBottom,marginLeft:this.marginLeft},n.u=i,(n=n.style).width=new Ue(i.Kc),n.height=new Ue(i.Jc),n["padding-left"]=new Ue(i.marginLeft),n["padding-right"]=new Ue(i.marginRight),n["padding-top"]=new Ue(i.marginTop),n["padding-bottom"]=new Ue(i.marginBottom)},hb.prototype.Ae=function(){var t=cb(this,{start:"left",end:"right",va:"width"});this.Kc=t.Gf,this.marginLeft=t.Zf,this.marginRight=t.Yf},hb.prototype.Be=function(){var t=cb(this,{start:"top",end:"bottom",va:"height"});this.Jc=t.Gf,this.marginTop=t.Zf,this.marginBottom=t.Yf},hb.prototype.kc=function(t,e,n,i,r){Up.prototype.kc.call(this,t,e,n,i,r),n.G=e.element,t.ca=parseFloat(n.G.style.width),t.Z=parseFloat(n.G.style.height)},g(fb,Up),(n=fb.prototype).kc=function(t,e,n,i,r){var o=e.element;R(o,"display","flex");var a=xp(this,t,"vertical-align"),s=null;a===Ie("middle")?s="center":a===Ie("top")?s="flex-start":a===Ie("bottom")&&(s="flex-end"),s&&(R(o,"flex-flow",this.b?"row":"column"),R(o,"justify-content",s)),Up.prototype.kc.call(this,t,e,n,i,r)},n.Ea=function(t,e){var n=this.style,i=this.f.f,r=t.start,o=t.end,a=(u="left"===r)?e.Kc:e.Jc,s=cp(i,n[t.va],a),u=u?e.marginLeft:e.marginTop;if("start"===this.u.Ea)n[r]=new Ue(u);else if(s){var l=fp(i,n["margin-"+r],a),h=fp(i,n["margin-"+o],a),c=fp(i,n["padding-"+r],a),f=fp(i,n["padding-"+o],a),p=dp(i,n["border-"+r+"-width"],n["border-"+r+"-style"],a);o=dp(i,n["border-"+o+"-width"],n["border-"+o+"-style"],a),s=ve(i,s,ve(i,ve(i,c,f),ve(i,ve(i,p,o),ve(i,l,h))));switch(this.u.Ea){case"center":n[r]=new Ue(ve(i,u,ye(i,me(i,a,s),new pe(i,2))));break;case"end":n[r]=new Ue(me(i,ve(i,u,a),s))}}},n.Ae=function(){var t=this.g.u;this.u.Ua?pb(this,{De:"right",Ke:"left",va:"width"},t):this.u.Va?pb(this,{De:"left",Ke:"right",va:"width"},t):this.Ea({start:"left",end:"right",va:"width"},t)},n.Be=function(){var t=this.g.u;this.u.Wa?pb(this,{De:"bottom",Ke:"top",va:"height"},t):this.u.Ta?pb(this,{De:"top",Ke:"bottom",va:"height"},t):this.Ea({start:"top",end:"bottom",va:"height"},t)},n.Qd=function(t,e,n,i,r,o,a){Up.prototype.Qd.call(this,t,e,n,i,r,o,a),t=n.I,n=this.f.u,(i=this.u).Ua||i.Va?i.Wa||i.Ta||(i.Ua?t.left[n]=e:i.Va&&(t.right[n]=e)):i.Wa?t.top[n]=e:i.Ta&&(t.bottom[n]=e)},g(vb,Qa),vb.prototype.apply=function(t){t.Z===this.h&&this.b.apply(t)},vb.prototype.f=function(){return 3},vb.prototype.g=function(t){return this.b&&Js(t.od,this.h,this.b),!0},g(mb,Qa),mb.prototype.apply=function(t){1===new ue(this.h,"page-number").evaluate(t.l)&&this.b.apply(t)},mb.prototype.f=function(){return 2},g(wb,Qa),wb.prototype.apply=function(t){new ue(this.h,"left-page").evaluate(t.l)&&this.b.apply(t)},wb.prototype.f=function(){return 1},g(yb,Qa),yb.prototype.apply=function(t){new ue(this.h,"right-page").evaluate(t.l)&&this.b.apply(t)},yb.prototype.f=function(){return 1},g(xb,Qa),xb.prototype.apply=function(t){new ue(this.h,"recto-page").evaluate(t.l)&&this.b.apply(t)},xb.prototype.f=function(){return 1},g(Eb,Qa),Eb.prototype.apply=function(t){new ue(this.h,"verso-page").evaluate(t.l)&&this.b.apply(t)},Eb.prototype.f=function(){return 1},g(Sb,qa),Sb.prototype.apply=function(t){var e=t.l,n=t.F,i=this.style;if($a(e,n,i,t=this.ba,null,null,null),i=i._marginBoxes){var r;n=Va(n,"_marginBoxes");for(r in i)if(i.hasOwnProperty(r)){var o=n[r];o||(o={},n[r]=o),$a(e,o,i[r],t,null,null,null)}}},g(kb,fu),(n=kb.prototype).Vc=function(){this.Tb()},n.Wb=function(t,e){(this.g=e)&&(this.b.push(new vb(e)),this.ba+=65536)},n.qd=function(t,e){switch(e&&Or(this,"E_INVALID_PAGE_SELECTOR :"+t+"("+e.join("")+")"),this.F.push(":"+t),t.toLowerCase()){case"first":this.b.push(new mb(this.f)),this.ba+=256;break;case"left":this.b.push(new wb(this.f)),this.ba+=1;break;case"right":this.b.push(new yb(this.f)),this.ba+=1;break;case"recto":this.b.push(new xb(this.f)),this.ba+=1;break;case"verso":this.b.push(new Eb(this.f)),this.ba+=1;break;default:Or(this,"E_INVALID_PAGE_SELECTOR :"+t)}},n.Sc=function(){Cb(this),fu.prototype.Sc.call(this)},n.La=function(){Cb(this),fu.prototype.La.call(this)},n.Sb=function(t,e,n){if("bleed"!==t&&"marks"!==t||this.I.some(function(t){return!t.rf})){fu.prototype.Sb.call(this,t,e,n);var i=this.mb[t],r=this.S;if("bleed"===t||"marks"===t)r[""]||(r[""]={}),Object.keys(r).forEach(function(e){Ua(r[e],t,i)});else if("size"===t){var o=r[""];this.I.forEach(function(e){var n=new La(i.value,i.cb+e.ba);e=e.rf?e.rf.join(""):"";var a=r[e];a?(n=(e=a[t])?Ra(null,n,e):n,Ua(a,t,n)):(Ua(a=r[e]={},t,n),o&&["bleed","marks"].forEach(function(t){o[t]&&Ua(a,t,o[t])},this))},this)}}},n.Uf=function(t){Js(this.l.od,"*",t)},n.Xf=function(t){return new Sb(this.mb,t)},n.Qe=function(t){var e=Va(this.mb,"_marginBoxes"),n=e[t];n||(n={},e[t]=n),Tr(this.oa,new Tb(this.f,this.oa,this.B,n))},g(Tb,_r),Tb.prototype.Qb=function(t,e,n){wa(this.g,t,e,n,this)},Tb.prototype.kd=function(t,e){Nr(this,"E_INVALID_PROPERTY_VALUE "+t+": "+e.toString())},Tb.prototype.fe=function(t,e){Nr(this,"E_INVALID_PROPERTY "+t+": "+e.toString())},Tb.prototype.Sb=function(t,e,n){Ua(this.b,t,new La(e,n?Sr(this):kr(this)))},Ib.prototype.u=function(){},g(jb,Ib),jb.prototype.u=function(t){var e=t.Fb.reduce(function(t,e){return t+e.h},0);_b(this.b,e/this.G),this.h=t.position},jb.prototype.j=function(t){return Rb(this,t.position)?Ab(t=t.Fb)?1/0:Math.max.apply(null,t.map(function(t){return t.h})):1/0},jb.prototype.l=function(t){return 1===t.length||(this.g?Db(t):Rb(this,(t=t[t.length-1]).md.position)&&!Ab(t.md.Fb)?this.g=!0:Nb(this.b)<this.f)},jb.prototype.D=function(t){this.g?Lb(t,this.b):_b(this.b,Math.min(this.f,Nb(this.b)+.1*this.f))},g(zb,Ib),zb.prototype.j=function(t){return t.Fb.every(function(t){return!t.h})?1/0:function(t){var e=Sv(t);return Sv(t.map(function(t){return(t-=e)*t}))}(t=t.Fb.filter(function(t){return!t.g}).map(function(t){return t.h}))},zb.prototype.l=function(t){return Db(t)},zb.prototype.D=function(t){Lb(t,this.b)};var Bb=new Oi(function(){var t=oi("uaStylesheetBase");return ya.get().then(function(e){var n=N("user-agent-base.css",_);(e=new fu(null,null,null,null,null,e,!0)).Wc("UA"),cu=e.l,no(n,e,null,null).Ga(t)}),t.result()},"uaStylesheetBaseFetcher");function Ub(t,e,n,i,r,o,a,s,u,l){this.j=t,this.f=e,this.b=n,this.g=i,this.I=r,this.D=o,this.B=t.S,this.F=a,this.h=s,this.u=u,this.G=l,this.l=t.l,function(t,e){t.B["has-content"]=e}(this.b,function(t){var e,n,i=this.b;return e=(e=i.b[t])&&(e=e.b[0])?e.qa:null,(n=Wb(this,(n=i.b[t])?n.g:"any"))&&(n=!!(t=i.b[t])&&(0<t.b.length&&t.b[0].qa.f<=this.D)),n&&!!e&&!Yb(this,e)}),function(t,e){t.values["page-number"]=e}(this.b,new he(this.b,function(){return this.ta+this.b.page},"page-number"))}function Vb(t,e,n,i,r){if(t.u.length){var o=new It(0,e,n,i);t=t.u;for(var a={},s=0;s<t.length;s++)$a(o,a,t[s],0,null,null,null);s=a.width,t=a.height;var u=a["text-zoom"];if((s&&t||u)&&(a=Nt.em,(u?u.evaluate(o,"text-zoom"):null)===Pn&&(u=a/i,i=a,e*=u,n*=u),s&&t&&(s=Ve(s.evaluate(o,"width"),o),o=Ve(t.evaluate(o,"height"),o),0<s&&0<o)))return{width:r&&r.ub?2*(s+r.Dc):s,height:o,fontSize:i}}return{width:e,height:n,fontSize:i}}function Hb(t,e,n,i,r,o,a,s,u,l,h,c){for(var f in It.call(this,0,i.width,i.height,i.fontSize),this.style=t,this.da=e,this.lang=e.lang||n,this.viewport=i,this.l={body:!0},this.g=r,this.B=this.b=this.N=this.f=this.F=null,this.D=0,this.Mb=o,this.j=new Th(this.style.B),this.ob={},this.sa=null,this.h=h,this.Zb=new nc(null,null,null,null,null,null,null),this.la={},this.I=c||null,this.Kb=a,this.Jb=s,this.ta=u,this.Lb=l,t.h)(e=t.h[f]["flow-consume"])&&(e.evaluate(this,"flow-consume")==$e?this.l[f]=!0:delete this.l[f]);this.xb={},this.Ba=this.ua=0}function $b(t){var e=oi("StyleInstance.init"),n=new Gf(t.h,t.da.url),i=new Kf(t.h,t.da.url,t.style.f,t.style.b);t.f=new hh(t.da,t.style.g,t.style.f,t,t.l,t.style.l,n,i),i.h=t.f,function(t,e){t.N=e;for(var n=0;n<t.J.length;n++)Gb(t.N,t.J[n],t.G[t.J[n].b])}(t.f,t),t.N={},t.N[t.da.url]=t.f;var r=function(t){for(var e=0;!t.I&&wh(t,e+=5e3,0)!=Number.POSITIVE_INFINITY;);return t.F}(t.f);for(t.I||(t.I=Ld(r)),t.F=new Rp(t.style.I),n=new Zs(t.style.g,t,n,i),t.F.l(n,r),jp(t.F,t),t.sa=new db(n,t.style.b,t.F,t,r),r=[],i=(n=h(t.style.D)).next();!i.done;i=n.next())(!(i=i.value).ia||i.ia.evaluate(t))&&(i=new kh(i=Sh(i.Ec,t)),r.push(i));(function(t,e,n){for(var i=[],r=(e=h(e)).next();!r.done;r=e.next())(r=r.value).src&&r.b?i.push(Oh(t,r,n)):C.b("E_FONT_FACE_INVALID");return Ii(i)})(t.Mb,r,t.j).Ga(e);var o=t.style.G;return Object.keys(o).forEach(function(t){var e=Hd(Vd(o[t]),this);this.xb[t]={width:e.jc+2*e.qe,height:e.ic+2*e.qe}},t),e.result()}function Gb(t,e,n){(t=t.b)&&(t.f[e.b]||(t.f[e.b]=n),(n=t.b[e.b])||(n=new _l,t.b[e.b]=n),n.b.push(new Al(new Cl({pa:[{node:e.element,kb:pl,wa:null,Ja:null,Fa:null,Sa:0}],na:0,K:!1,Qa:null}),e)))}function Kb(t,e){for(var n=Number.POSITIVE_INFINITY,i=0;i<e.b.length;i++){for(var r=e.b[i].b.f,o=r.pa[0].node,a=r.na,s=r.K,u=0;o.ownerDocument!=t.da.b;)u++,o=r.pa[u].node,s=!1,a=0;(r=Fu(t.da,o,a,s))<n&&(n=r)}return n}function Xb(t,e,n){if(!e)return 0;var i,r=Number.POSITIVE_INFINITY;for(i in t.l){var o=e.b[i];if(!(n||o&&o.b.length)&&t.b){(o=t.f).S=i;for(var a=0;null!=o.S&&wh(o,a+=5e3,0)!=Number.POSITIVE_INFINITY;);o=t.b.b[i],e!=t.b&&o&&(o=o.clone(),e.b[i]=o)}o&&((o=Kb(t,o))<r&&(r=o))}return r}function Wb(t,e){switch(e){case"left":case"right":case"recto":case"verso":return new ue(t.style.b,e+"-page").evaluate(t);default:return!0}}function Yb(t,e){if(r=(o=t.B.f)[e.b].f){var n=e.f,i=o[r].b;if(!i.length||n<i[0])return!1;var r,o=Y(i.length,function(t){return i[t]>n})-1,a=(o=i[o],Kb(t,r=t.B.b[r]));return!(o<a)&&(a<o||!Wb(t,r.g))}return!1}function Jb(t,e,n){var i=t.b.b[n];if(!i||!Wb(t,i.g))return ai(!0);i.g="any",function(t,e,n){(t=t.b.f[n]).C||(t.C=new Hc(null)),e.kf=t.C}(t,e,n),Of(e),t.l[n]&&0<e.Cb.length&&(e.Kb=!1);var r=oi("layoutColumn");return function(t){var e=t.l,n=mc(e),i=oi("layoutDeferredPageFloats"),r=!1,o=0;return Ci(function(i){if(o===n.length)Ni(i);else{var a=n[o++],s=a.ja,u=Pc(s),l=u.xf(s,e);l&&tc(l,s)?_i(i):lc(e,s)||vc(e,s)?(gc(e,a),Ni(i)):uf(t,a,u,null,l).then(function(t){t?(t=kc(e.parent))?Ni(i):(kc(e)&&!t&&(r=!0,e.Qc=!1),_i(i)):Ni(i)})}}).then(function(){r&&Sc(e),xi(i,!0)}),i.result()}(e).then(function(){if(kc(e.l))xi(r,!0);else{var o=[],a=[],s=!0;Ci(function(r){if(!function(t,e){return pc(t,function(t){return t.g&&t.Ob[0].ja.f===e})}(e.l,n))for(var u={};0<i.b.length-a.length;){for(u.index=0;a.includes(u.index);)u.index++;if(u.selected=i.b[u.index],u.selected.qa.f>t.D||Yb(t,u.selected.qa))break;for(var l=u.index+1;l<i.b.length;l++)if(!a.includes(l)){var h=i.b[l];if(h.qa.f>t.D||Yb(t,h.qa))break;al(h.qa,u.selected.qa)&&(u.selected=h,u.index=l)}if(u.qa=u.selected.qa,u.Oa=!0,Ff(e,u.selected.b,s,i.f).then(function(t){return function(n){if(kc(e.l))Ni(r);else if(s=!1,t.selected.qa.u&&(null===n||t.qa.h)&&o.push(t.index),t.qa.h)a.push(t.index),Ni(r);else{var u,l=!!n||!!e.g;0<wc(e.l).length&&e.xb?n?(u=n.clone()).f=e.xb:u=new Cl(e.xb):u=null,e.g&&u?(t.selected.b=u,i.f=e.g,e.g=null):(a.push(t.index),(n||u)&&(t.selected.b=n||u,o.push(t.index)),e.g&&(i.g=Mh(e.g))),l?Ni(r):(e.Kb=!1,t.Oa?t.Oa=!1:_i(r))}}}(u)),u.Oa)return void(u.Oa=!1);u={selected:u.selected,qa:u.qa,index:u.index,Oa:u.Oa}}Ni(r)}).then(function(){if(!kc(e.l)){i.b=i.b.filter(function(t,e){return o.includes(e)||!a.includes(e)}),"column"===i.f&&(i.f=null),Mf(e);var t=function(t){var e=oc(t).b;return t.b.reduce(function(t,n){var i=Gl(n.b);return e?Math.min(t,i.V):Math.max(t,i.R)},e?1/0:0)}(e.l);Pf(e,t)}xi(r,!0)})}}),r.result()}function Zb(t,e,n,i,r,o,a,s,u,l,h,c,f,p,d){var b,g=e.b?e.j&&e.N:e.h&&e.S,v=o.element,m=new nc(u,"column",null,s,null,null,null),w=t.b.clone(),y=oi("createAndLayoutColumn");return Ci(function(e){var y=new jc([new ep(t.h,t.b.page-1)].concat(function t(e){return(e.parent?t(e.parent):[]).concat(e.D)}(m)));if(1<l){var x=t.viewport.b.createElement("div");R(x,"position","absolute"),v.appendChild(x),(b=new $c(x,p,t.g,y,m)).Kb=d,b.b=o.b,b.Mb=o.Mb,b.Rd=o.Rd,o.b?(y=a*(c+h)+o.J,zl(b,o.I,o.width),Rl(b,y,c)):(y=a*(c+h)+o.I,Rl(b,o.J,o.height),zl(b,y,c)),b.F=n,b.G=i}else(function(t,e){t.element=e.element,t.left=e.left,t.top=e.top,t.marginLeft=e.marginLeft,t.marginRight=e.marginRight,t.marginTop=e.marginTop,t.marginBottom=e.marginBottom,t.Z=e.Z,t.Za=e.Za,t.ca=e.ca,t.Ba=e.Ba,t.I=e.I,t.Y=e.Y,t.J=e.J,t.S=e.S,t.width=e.width,t.height=e.height,t.F=e.F,t.G=e.G,t.Lb=e.Lb,t.ob=e.ob,t.h=e.h,t.Rd=e.Rd,t.Mb=e.Mb,t.b=e.b})(b=new $c(v,p,t.g,y,m),o);b.ob=g?[]:r.concat(),b.Lb=f,ac(m,b),0<=b.width?Jb(t,b,s).then(function(){kc(m)||xc(m),kc(b.l)&&!kc(u)?(b.l.Qc=!1,t.b=w.clone(),b.element!==v&&v.removeChild(b.element),_i(e)):Ni(e)}):(xc(m),Ni(e))}).then(function(){xi(y,b)}),y.result()}function qb(t,e,n,i,r,o,a,s,u,l){function h(){return c.b=f.clone(),function(t,e,n,i,r,o,a,s,u,l,h,c){var f=oi("layoutFlowColumns"),p=t.b.clone(),d=Ep(n,t,"column-gap"),b=1<h?Ep(n,t,"column-width"):u.width,g=Sp(n,t),v=Mo(xp(n,t,"shape-inside"),0,0,u.width,u.height,t),m=new ad(l,t,t.viewport,t.f,g,t.da,t.j,t.style.F,t,e,t.Kb,t.Jb,t.Lb),w=0,y=null,x=[];return Ci(function(e){Zb(t,n,i,r,o,u,w++,l,s,h,d,b,v,m,c).then(function(n){kc(a)?(x=null,Ni(e)):((n.g&&"column"!==n.g||w===h)&&!kc(s)&&xc(s),kc(s)?(w=0,t.b=p.clone(),s.Qc=!1,s.g?(x=null,Ni(e)):_i(e)):(y=n,x[w-1]=y,y.g&&"column"!=y.g&&(w=h,"region"!=y.g&&(t.la[l]=!0)),w<h?_i(e):Ni(e)))})}).then(function(){xi(f,x)}),f.result()}(c,e,n,i,r,o,a,p,s,u,l,d).ea(function(t){return ai(t?{Fb:t,position:c.b}:null)})}var c=t,f=c.b.clone(),p=function(t,e,n,i,r){return new nc(e,"region",i,r,null,xp(n,t,"writing-mode")||null,t=xp(n,t,"direction")||null)}(c,a,n,s,u),d=!0;return h().ea(function(t){if(!t)return ai(null);if(1>=l)return ai(t.Fb);var e=xp(n,c,"column-fill")||Xe;return(e=function(t,e,n,i,r,o,a){return e===Ke?null:(o=!(!(o=o[o.length-1])||!o.g),!a.b.length||o?new jb(n,i,r,t):e===We?new zb(n,i,r):null)}(l,e,h,p,s,t.Fb,c.b.b[u]))?(d=!1,a.g=!0,p.g=!0,Pb(e,t).ea(function(t){return a.g=!1,a.Qc=!1,p.g=!1,c.b=t.position,ai(t.Fb)})):ai(t.Fb)})}function Qb(t,e,n,i,r,o,a,s){if(function(t){t.I=0,t.G=0}(n),(h=xp(n,t,"enabled"))&&h!==Kn)return ai(!0);var u=oi("layoutContainer"),l=xp(n,t,"wrap-flow")===Ke,h=xp(n,t,"flow-from"),c=t.viewport.b.createElement("div"),f=xp(n,t,"position");R(c,"position",f?f.name:"absolute"),i.insertBefore(c,i.firstChild);var p=new Pl(c);p.b=n.b,p.ob=a,n.kc(t,p,e,t.j,t.g),p.F=r,p.G=o,r+=p.left+p.marginLeft+p.Z,o+=p.top+p.marginTop+p.ca,(n instanceof hb||n instanceof zp&&!(n instanceof nb))&&ac(s,p);var d=!1;if(h&&h.Vf())if(t.la[h.toString()])kc(s)||n.Qd(t,p,e,null,1,t.g,t.j),h=ai(!0);else{var b=oi("layoutContainer.inner"),g=h.toString(),v=Ep(n,t,"column-count");qb(t,e,n,r,o,a,s,p,g,v).then(function(i){if(!kc(s)){var r=i[0];r.element===c&&(p=r),p.h=Math.max.apply(null,i.map(function(t){return t.h})),n.Qd(t,p,e,r,v,t.g,t.j),(i=t.b.b[g])&&"region"===i.f&&(i.f=null)}xi(b,!0)}),h=b.result()}else{if((h=xp(n,t,"content"))&&Xl(h)){f="span",h.url&&(f="img");var m=t.viewport.b.createElement(f);h.fa(new Kl(m,t,h,tp(t.h))),c.appendChild(m),"img"==f&&function(t,e,n,i){for(var r=0;r<Dp.length;r++)kp(t,e,n,Dp[r],i)}(n,t,m,t.j),function(t,e,n,i){for(var r=0;r<Mp.length;r++)kp(t,e,n.element,Mp[r],i)}(n,t,p,t.j)}else n.ua&&(i.removeChild(c),d=!0);d||n.Qd(t,p,e,null,1,t.g,t.j),h=ai(!0)}return h.then(function(){if(kc(s))xi(u,!0);else{if(!n.h||0<Math.floor(p.h)){if(!d&&!l){var h=xp(n,t,"shape-outside");h=$l(p,h,t);a.push(h)}}else if(!n.children.length)return i.removeChild(c),void xi(u,!0);var f=n.children.length-1;ki(function(){for(;0<=f;){var i=n.children[f--];if((i=Qb(t,e,i,c,r,o,a,s)).Xa())return i.ea(function(){return ai(!kc(s))});if(kc(s))break}return ai(!1)}).then(function(){xi(u,!0)})}}),u.result()}function tg(t,e,n){var i=e.H===e.h;t.la={},n?(t.b=n.clone(),gh(t.f,n.g)):(t.b=new Ol,gh(t.f,-1)),t.lang&&e.h.setAttribute("lang",t.lang),(n=t.b).page++,Pt(t,t.style.b),t.B=n.clone();var r=i?{}:function(t){var e={};return eu(t.f,[],"",e),hu(t.f),e}(t.sa),o=function(t,e){var n=t.b,i=Xb(t,n);if(i==Number.POSITIVE_INFINITY)return null;for(var r,o=t.F.children,a=0;a<o.length;a++)if("vivliostyle-page-rule-master"!==(r=o[a]).f.mc){var s=1;(u=xp(r,t,"utilization"))&&u.hf()&&(s=u.L);var u=Ft(t,"em",!1),l=t.jc()*t.ic();for(u in t.D=wh(t.f,i,Math.ceil(s*l/(u*u))),s=t,u=void 0,n.b)if((l=n.b[u])&&0<l.b.length){var c=l.b[0].qa;if(Kb(s,l)===c.f){t:switch(c=l.g,c){case"left":case"right":case"recto":case"verso":break t;default:c=null}l.g=Mh(Fh(c,l.b[0].qa.g))}}for(l in t.B=n.clone(),u=(s=t).b.page,l=void 0,s.b.b)for(var f=(c=s.b.b[l]).b.length-1;0<=f;f--){var p=c.b[f];0>p.qa.wb&&p.qa.f<s.D&&(p.qa.wb=u)}if(Pt(t,t.style.b),!(s=xp(r,t,"enabled"))||s===Kn){for(i in n=t,C.debug("Location - page",n.b.page),C.debug("  current:",i),C.debug("  lookup:",n.D),i=void 0,n.b.b)for(a=(o=h(n.b.b[i].b)).next();!a.done;a=o.next())C.debug("  Chunk",i+":",a.value.qa.f);return i=t.sa,o=r,r=e,n=o.f,Object.keys(r).length?(o=n,a=bb(i,r),o=o.j+"^"+a,(a=i.j[o])||("background-host"===n.mc?((r=new Qd((n=i).l,n.h.f,r).h(n.h)).l(n.f,n.g),jp(r,n.b),a=r):a=gb(i,r,n),i.j[o]=a),(r=a.f).f.g=r,r=a):(n.f.g=n,r=o),r}}throw Error("No enabled page masters")}(t,r);if(!o)return ai(null);var a=0;if(!i){!function(t,e){(t.F=e)?t.H.setAttribute("data-vivliostyle-auto-page-width",!0):t.H.removeAttribute("data-vivliostyle-auto-page-width")}(e,o.f.b.width.value===Wn),function(t,e){(t.D=e)?t.H.setAttribute("data-vivliostyle-auto-page-height",!0):t.H.removeAttribute("data-vivliostyle-auto-page-height")}(e,o.f.b.height.value===Yn),t.h.j=e,function(t,e,n){var i,r;if(t.G=Hf(t.b),(a=e["counter-reset"])&&(a=a.evaluate(n))&&(i=Lo(a,!0)),i)for(var o in i){var a=t,s=o,u=i[o];a.b[s]?a.b[s].push(u):a.b[s]=[u]}for(var l in(e=e["counter-increment"])&&(n=e.evaluate(n))&&(r=Lo(n,!1)),r?"page"in r||(r.page=1):r={page:1},r)t.b[l]||(e=l,(n=t).b[e]?n.b[e].push(0):n.b[e]=[0]),(n=t.b[l])[n.length-1]+=r[l]}(t.h,r,t);var s=Hd(Vd(r),t);!function(t,e,n){t.Y=e.jc,t.S=e.ic,t.Ba=e.jc+2*e.qe,t.ua=e.ic+2*e.qe,n.H.style.width=t.Ba+"px",n.H.style.height=t.ua+"px",n.h.style.left=e.ac+"px",n.h.style.right=e.ac+"px",n.h.style.top=e.ac+"px",n.h.style.bottom=e.ac+"px",n.h.style.padding=e.$b+"px",n.h.style.paddingTop=e.$b+.01+"px"}(t,s,e),Wd(r,s,e,t),a=s.ac+s.$b}r=!i&&xp(o,t,"writing-mode")||pn,t.G=r!=pn;s=xp(o,t,"direction")||Sn;var u=new nc(t.Zb,"page",null,null,null,r,s),l=oi("layoutNextPage");return Ci(function(n){Qb(t,e,o,e.h,a,a,[],u).then(function(){kc(u)||xc(u),kc(u)?(t.b=t.B.clone(),u.Qc=!1,_i(n)):Ni(n)})}).then(function(){if(o.ca(t,e,t.g),!i){var r=new ue(o.f.f,"left-page");e.b=r.evaluate(t)?"left":"right",function(t){var e,n=t.b.page;for(e in t.b.b)for(var i=t.b.b[e],r=i.b.length-1;0<=r;r--){var o=i.b[r];0<=o.qa.wb&&o.qa.wb+o.qa.l-1<=n&&i.b.splice(r,1)}}(t),n=t.b,Object.keys(n.b).forEach(function(e){var i=(e=n.b[e]).f;!i||"page"!==i&&Wb(t,i)||(e.f=null)})}t.b=t.B=null,n.g=t.f.b,function(t,e,n){Object.keys(t.g).forEach(function(t){for(var e=this.g[t],n=0;n<e.length;)this.H.contains(e[n])?n++:e.splice(n,1);e.length||delete this.g[t]},t);for(var i=t.l,r=0;r<i.length;r++){var o=i[r];(o.target!==t.H||"transform"!==o.name||t.F||t.D)&&R(o.target,o.name,o.value.toString())}for(r=Od(n,t.H),t.f.width=r.width,t.f.height=r.height,r=0;r<e.length;r++)if(n=e[r],o=t.g[n.sd],i=t.g[n.Hg],o&&i&&(o=Qu(o,n.action)))for(var a=0;a<i.length;a++)i[a].addEventListener(n.event,o,!1)}(e,t.style.j.N[t.da.url],t.g),function(t,e){for(var n in t.l){var i=e.b[n];if(i&&0<i.b.length)return!1}return!0}(t,n)&&(n=null),xi(l,n)}),l.result()}function eg(t,e,n,i){fu.call(this,t.j,t,e,n,i,t.h,!n),this.g=t,this.F=!1}function ng(t){var e,n=t.getAttribute("content");if(!n)return"";for(t={};e=n.match(/^,?\s*([-A-Za-z_.][-A-Za-z_0-9.]*)\s*=\s*([-+A-Za-z_0-9.]*)\s*/);)n=n.substr(e[0].length),t[e[1]]=e[2];return n=t.width-0,t=t.height-0,n&&t?"@-epubx-viewport{width:"+n+"px;height:"+t+"px;}":""}function ig(t){Cr.call(this),this.h=t,this.j=new Tt(null),this.u=new Tt(this.j),this.G=new ap(this.j),this.J=new eg(this,null,null,null),this.N=0,this.B=[],this.D={},this.l={},this.I=[],this.F={},this.b=this.J}function rg(t,e){return sg(e,t)}function og(t){wr.call(this,rg,"document"),this.S=t,this.I={},this.u={},this.g={},this.N={},this.l=null,this.b=[],this.J=!1}function ag(t,e,n){!function(t,e,n){t.b.splice(0),e&&e.forEach(t.Y,t),n&&n.forEach(t.Z,t)}(t,e,n);var i=N("user-agent.xml",_),r=oi("OPSDocStore.init");return ya.get().then(function(e){t.l=e,Bb.get().then(function(){t.load(i).then(function(){t.J=!0,xi(r,!0)})})}),r.result()}function sg(t,e){var n=oi("OPSDocStore.load"),i=e.url,r=i.endsWith("?viv-toc-box");return zu(e,t).then(function(e){if(e){if(t.J)for(var o=ni("PREPROCESS_SINGLE_DOCUMENT"),a=0;a<o.length;a++)try{o[a](e.b)}catch(t){C.b("Error during single document preprocessing:",t)}o=[];var s=e.b.getElementsByTagNameNS("http://www.idpf.org/2007/ops","trigger");for(a=0;a<s.length;a++){var u=(c=s[a]).getAttributeNS("http://www.w3.org/2001/xml-events","observer"),l=c.getAttributeNS("http://www.w3.org/2001/xml-events","event"),h=c.getAttribute("action"),c=c.getAttribute("ref");u&&l&&h&&c&&o.push({Hg:u,event:l,action:h,sd:c})}t.N[i]=o;var f=[];if(f.push({url:N("user-agent-page.css",_),text:null,qb:"UA",Pa:null,media:null}),a=e.l,!r&&a)for(a=a.firstChild;a;a=a.nextSibling)1==a.nodeType&&(s=(o=a).namespaceURI,u=o.localName,"http://www.w3.org/1999/xhtml"==s?"style"==u?(s=o.getAttribute("class"),u=o.getAttribute("media"),l=o.getAttribute("title"),f.push({url:i,text:o.textContent,qb:"Author",Pa:l?s:null,media:u})):"link"==u?(l=o.getAttribute("rel"),s=o.getAttribute("class"),u=o.getAttribute("media"),("stylesheet"==l||"alternate stylesheet"==l&&s)&&(l=N(l=o.getAttribute("href"),i),o=o.getAttribute("title"),f.push({url:l,text:null,Pa:o?s:null,media:u,qb:"Author"}))):"meta"==u&&"viewport"==o.getAttribute("name")&&f.push({url:i,text:ng(o),qb:"Author",Pa:null,media:null}):"http://www.gribuser.ru/xml/fictionbook/2.0"==s?"stylesheet"==u&&"text/css"==o.getAttribute("type")&&f.push({url:i,text:o.textContent,qb:"Author",Pa:null,media:null}):"http://example.com/sse"==s&&"property"===u&&(s=o.getElementsByTagName("name")[0])&&"stylesheet"===s.textContent&&(o=o.getElementsByTagName("value")[0])&&(l=N(o.textContent,i),f.push({url:l,text:null,Pa:null,media:null,qb:"Author"})));if(!r)for(a=0;a<t.b.length;a++)f.push(t.b[a]);var p="";for(a=0;a<f.length;a++)p+=f[a].url,p+="^",f[a].text&&(p+=f[a].text),p+="^";var d=t.I[p];d?(t.g[i]=d,xi(n,e)):((a=t.u[p])||(a=new Oi(function(){var e=oi("fetchStylesheet"),n=0,i=new ig(t.l);return ki(function(){if(n<f.length){var t=f[n++];return i.Wc(t.qb),null!==t.text?eo(t.text,i,t.url,t.Pa,t.media).Hc(!0):no(t.url,i,t.Pa,t.media)}return ai(!1)}).then(function(){d=new Ub(t,i.j,i.u,i.J.l,i.G,i.B,i.D,i.l,i.I,i.F),t.I[p]=d,delete t.u[p],xi(e,d)}),e.result()},"FetchStylesheet "+i),t.u[p]=a,a.start()),a.get().then(function(r){t.g[i]=r,xi(n,e)}))}else xi(n,null)}),n.result()}function ug(t){return String.fromCharCode(t>>>24&255,t>>>16&255,t>>>8&255,255&t)}function lg(t){(i=new U).append(t);var e=55-t.length&63;for(i.append("");0<e;)e--,i.append("\0");i.append("\0\0\0\0"),i.append(ug(8*t.length)),t=i.toString();for(var n,i=[1732584193,4023233417,2562383102,271733878,3285377520],r=(e=[],0);r<t.length;r+=64){for(n=0;16>n;n++){var o=t.substr(r+4*n,4);e[n]=(255&o.charCodeAt(0))<<24|(255&o.charCodeAt(1))<<16|(255&o.charCodeAt(2))<<8|255&o.charCodeAt(3)}for(;80>n;n++)o=e[n-3]^e[n-8]^e[n-14]^e[n-16],e[n]=o<<1|o>>>31;o=i[0];var a,s=i[1],u=i[2],l=i[3],h=i[4];for(n=0;80>n;n++)a=20>n?1518500249+(s&u|~s&l):40>n?1859775393+(s^u^l):60>n?2400959708+(s&u|s&l|u&l):3395469782+(s^u^l),a+=(o<<5|o>>>27)+h+e[n],h=l,l=u,u=s<<30|s>>>2,s=o,o=a;i[0]=i[0]+o|0,i[1]=i[1]+s|0,i[2]=i[2]+u|0,i[3]=i[3]+l|0,i[4]=i[4]+h|0}return i}function hg(t,e,n,i,r,o,a,s,u,l){this.b=t,this.url=e,this.lang=n,this.f=i,this.l=r,this.$=mt(o),this.$.ub=!1,this.u=a,this.j=s,this.h=u,this.g=l,this.nb=this.page=null}function cg(t){var e=t.target,n=""==e.textContent;e.textContent=n?"":"";var i=e.parentNode;for(e.setAttribute("aria-expanded",n?"true":"false"),i.setAttribute("aria-expanded",n?"true":"false"),e=i.firstChild;e;){if(1===e.nodeType){var r=e,o=r.getAttribute("data-adapt-class");if("toc-container"===o){if(r.setAttribute("aria-hidden",n?"false":"true"),r.firstChild){e=r.firstChild;continue}}else if("toc-node"===o&&(r.style.height=n?"auto":"0px",2<=r.children.length&&(r.children[1].tabIndex=n?0:-1),3<=r.children.length&&(r.children[0].tabIndex=n?0:-1,!n&&""==(o=r.children[0]).textContent))){o.textContent="",o.setAttribute("aria-expanded","false"),r.setAttribute("aria-expanded","false"),e=r.children[2];continue}}for(;!e.nextSibling&&e.parentNode!==i;)e=e.parentNode;e=e.nextSibling}t.stopPropagation()}function fg(){var t;og.call(this,(t=this,function(e){return t.B[e]})),this.h=new wr(zu,"document"),this.F=new wr(yr,"text"),this.G={},this.la={},this.B={},this.D={}}function pg(t,e,n){return t.F.load(e,n,void 0)}function dg(t,e,n){var i=oi("loadPubDoc");return vr(e,null,"HEAD").then(function(r){if(400<=r.status)bg(t,e,n).then(function(t){t?xi(i,t):(C.error("Failed to fetch a source document from "+e+" ("+r.status+(r.statusText?" "+r.statusText:"")+")"),xi(i,null))});else if(r.status||r.responseXML||r.responseText||r.vd||r.contentType||!/\/[^\/.]+(?:[#?]|$)/.test(e)||(e=e.replace(/([#?]|$)/,"/$1")),"application/oebps-package+xml"==r.contentType||/\.opf(?:[#?]|$)/.test(e)){(a=h(e.match(/^((?:.*\/)?)([^\/]*)$/))).next();var o=a.next().value,a=a.next().value;gg(t,o,a,n).Ga(i)}else"application/ld+json"==r.contentType||"application/webpub+json"==r.contentType||"application/audiobook+json"==r.contentType||"application/json"==r.contentType||/\.json(?:ld)?(?:[#?]|$)/.test(e)?pg(t,e,!0).then(function(n){if(n){var r=new Tg(t,e);Og(r,n).then(function(){xi(i,r)})}else C.error("Received an empty response for "+e+". This may be caused by the server not allowing cross-origin resource sharing (CORS)."),xi(i,null)}):function(t,e){var n=oi("loadWebPub");return t.load(e).then(function(i){if(i)if(i.b.querySelector("a[href='META-INF/'],a[href$='/META-INF/']"))xi(n,null);else{var r=i.b,o=new Tg(t,e);r.body&&r.body.setAttribute("data-vivliostyle-primary-entry",!0);var a=r.querySelector("link[rel='publication'],link[rel='manifest'][type='application/webpub+json']");if(a){var s=a.getAttribute("href");/^#/.test(s)?(a=JSON.parse(r.getElementById(s.substr(1)).textContent),Og(o,a,r).then(function(){xi(n,o)})):pg(t,a.href||a.getAttribute("href")).then(function(t){Og(o,t,r).then(function(){xi(n,o)})})}else Og(o,{},r).then(function(){o.Yb&&o.Yb.src===i.url&&!r.querySelector("[role=doc-toc], [role=directory], nav, .toc, #toc")&&(o.Yb=null),xi(n,o)})}else C.error("Received an empty response for "+e+". This may be caused by the server not allowing cross-origin resource sharing (CORS).")}),n.result()}(t,e).then(function(r){r?xi(i,r):bg(t,e,n).then(function(t){t?xi(i,t):(C.error("Failed to load "+e+"."),xi(i,null))})})}),i.result()}function bg(t,e,n){var i=oi("loadEPUBDoc");return e.endsWith("/")||(e+="/"),n&&t.F.fetch(e+"?r=list"),t.h.fetch(e+"META-INF/encryption.xml"),t.h.load(e+"META-INF/container.xml",void 0,void 0).then(function(r){if(r)for(var o=(r=h(r=Wu(Xu(Xu(Xu(new Hu([r.b]),"container"),"rootfiles"),"rootfile"),"full-path"))).next();!o.done;o=r.next())if(o=o.value)return void gg(t,e,o,n).Ga(i);xi(i,null)}),i.result()}function gg(t,e,n,i){var r=e+n,o=t.G[r];if(o)return ai(o);var a=oi("loadOPF");return t.h.load(r,!0,"Failed to fetch EPUB OPF "+r).then(function(n){n?t.h.load(e+"META-INF/encryption.xml",void 0,void 0).then(function(s){(i?pg(t,e+"?r=list"):ai(null)).then(function(i){(function(t,e,n,i,r){t.j=e;var o=Xu(new Hu([e.b]),"package");(u=Wu(o,"unique-identifier")[0])&&(u=Lu(e,e.url+"#"+u))&&(t.N=u.textContent.replace(/[ \n\r\t]/g,""));var a={};for(var s in t.u=tt(Xu(Xu(o,"manifest"),"item").X,function(n){var i=new vg,r=e.url;if(i.id=n.getAttribute("id"),i.src=N(n.getAttribute("href"),r),i.g=n.getAttribute("media-type"),r=n.getAttribute("properties")){r=r.split(/\s+/);for(var o={},s=0;s<r.length;s++)o[r[s]]=!0;i.l=o}return(n=n.getAttribute("fallback"))&&!Cg[i.g]&&(a[i.src]=n),!t.Yb&&i.l.nav&&(t.Yb=i),!t.ca&&i.l["cover-image"]&&(t.ca=i),i}),t.g=Z(t.u,mg),t.D=Z(t.u,function(e){return Ag(t,e.src)}),a)for(u=s;u=t.g[a[u]];){if(Cg[u.g]){t.Y[s]=u.src;break}u=u.src}t.b=tt(Xu(Xu(o,"spine"),"itemref").X,function(e,n){var i=e.getAttribute("idref");return(i=t.g[i])&&(i.j=e,i.P=n),i}),(s=Wu(Xu(o,"spine"),"toc")[0])&&(t.lf=t.g[s]);if(s=Wu(Xu(o,"spine"),"page-progression-direction")[0]){t:switch(s){case"ltr":s="ltr";break t;case"rtl":s="rtl";break t;default:throw Error("unknown PageProgression: "+s)}t.J=s}var u=n?Wu(Xu(Xu($u(Xu(Xu(new Hu([n.b]),"encryption"),"EncryptedData"),Uu()),"CipherData"),"CipherReference"),"URI"):[],l=Xu(Xu(o,"bindings"),"mediaType").X;for(n=0;n<l.length;n++){var c=l[n].getAttribute("handler");(s=l[n].getAttribute("media-type"))&&c&&t.g[c]&&(t.Z[s]=t.g[c].src)}if(t.f=function(t,e){function n(t){if(t&&(t=t.match(/^\s*(([^:]*):)?(\S+)\s*$/))){var e=t[2]?i[t[2]]:"http://idpf.org/epub/vocab/package/#";if(e)return e+t[3]}return null}var i;if(e){for(var r in i={},wg)i[r]=wg[r];for(;r=e.match(/^\s*([A-Z_a-z\u007F-\uFFFF][-.A-Z_a-z0-9\u007F-\uFFFF]*):\s*(\S+)/);)e=e.substr(r[0].length),i[r[1]]=r[2]}else i=wg;var o=1,a=Q(r=Ku(function(t){return Gu(t,function(t,e){for(var n=t.firstChild;n;n=n.nextSibling)1==n.nodeType&&e(n)})}(t),function(t){if("meta"==t.localName){var e=n(t.getAttribute("property"));if(e)return{name:e,value:t.textContent,id:t.getAttribute("id"),order:o++,Pe:t.getAttribute("refines"),lang:null,scheme:n(t.getAttribute("scheme"))}}else if("http://purl.org/dc/elements/1.1/"==t.namespaceURI)return{name:wg.dcterms+t.localName,order:o++,lang:t.getAttribute("xml:lang"),value:t.textContent,id:t.getAttribute("id"),Pe:null,scheme:null};return null}),function(t){return t.Pe});r=function t(e){return function(t,e){var n,i={};for(n in t)i[n]=e(t[n],n);return i}(e,function(e){return tt(e,function(e){var n={v:e.value,o:e.order};if(e.sh&&(n.s=e.scheme),e.id||e.lang){var i=a[e.id];(i||e.lang)&&(e.lang&&(e={name:yg,value:e.lang,lang:null,id:null,Pe:e.id,scheme:null,order:e.order},i?i.push(e):i=[e]),i=Q(i,function(t){return t.name}),n.r=t(i))}return n})})}(Q(r,function(t){return t.Pe?null:t.name}));var s=null;return r[yg]&&(s=r[yg][0].v),function t(e){for(var n in e){var i=e[n];i.sort(Sg(n,s));for(var r=0;r<i.length;r++){var o=i[r].r;o&&t(o)}}}(r),r}(Xu(o,"metadata"),Wu(o,"prefix")[0]),t.f[yg]&&(t.lang=t.f[yg][0].v),t.f[Eg]&&(t.F="pre-paginated"===t.f[Eg][0].v),!i){if(0<u.length&&t.N)for(i=function(t){var e=function(t){var e=lg(t);t=[];for(var n=(e=h(e)).next();!n.done;n=e.next())n=n.value,t.push(n>>>24&255,n>>>16&255,n>>>8&255,255&n);return t}(t);return function(t){var n,i,r=oi("deobfuscator");return t.slice?(n=t.slice(0,1040),i=t.slice(1040,t.size)):(n=t.webkitSlice(0,1040),i=t.webkitSlice(1040,t.size-1040)),function(t){var e=oi("readBlob"),n=new FileReader,i=Ti(e,n);return n.addEventListener("load",function(){i.tb(n.result)},!1),n.readAsArrayBuffer(t),e.result()}(n).then(function(t){t=new DataView(t);for(var n=0;n<t.byteLength;n++){var o=t.getUint8(n),o=o^e[n%20];t.setUint8(n,o)}xi(r,mr([t,i]))}),r.result()}}(t.N),n=0;n<u.length;n++)t.h.B[t.G+u[n]]=i;return t.F&&_g(t),ai(!0)}if(o=new U,l={},0<u.length&&t.N)for(s="1040:"+function(t){t=lg(t);for(var e=new U,n=0;n<t.length;n++)e.append(ug(t[n]));for(t=e.toString(),e=new U,n=0;n<t.length;n++)e.append((256|t.charCodeAt(n)).toString(16).substr(1));return e.toString()}(t.N),n=0;n<u.length;n++)l[u[n]]=s;for(n=0;n<i.length;n++){var f=i[n];if(c=f.n){var p=decodeURI(c),u=t.D[p];s=null,u&&(u.B=0!=f.m,u.u=f.c,u.g&&(s=u.g.replace(/\s+/g,""))),u=l[p],(s||u)&&(o.append(c),o.append(" "),o.append(s||"application/octet-stream"),u&&(o.append(" "),o.append(u)),o.append("\n"))}}return _g(t),vr(r,"","POST",o.toString(),"text/plain")})(o=new Tg(t,e),n,s,i,e+"?r=manifest").then(function(){t.G[r]=o,t.la[e]=o,xi(a,o)})})}):C.error("Received an empty response for EPUB OPF "+r+". This may be caused by the server not allowing cross-origin resource sharing (CORS).")}),a.result()}function vg(){this.id=null,this.src="",this.j=this.h=this.g=null,this.P=-1,this.u=0,this.B=null,this.f=this.b=0,this.nc=this.wb=null,this.l=q}function mg(t){return t.id}g(Hb,It),g(eg,fu),(n=eg.prototype).ce=function(){},n.be=function(t,e,n){t=new up(this.g.u,t,e,n,this.g.G,this.ia,kr(this.oa)),Tr(this.g,new Kp(t.f,this.g,t,this.B))},n.Fc=function(t){t=t.Mc,this.ia&&(t=ge(this.f,this.ia,t)),Tr(this.g,new eg(this.g,t,this,this.G))},n.Zd=function(){Tr(this.g,new mu(this.f,this.oa))},n.ae=function(){var t={};this.g.B.push({Ec:t,ia:this.ia}),Tr(this.g,new wu(this.f,this.oa,null,t,this.g.h))},n.$d=function(t){var e=this.g.l[t];e||(e={},this.g.l[t]=e),Tr(this.g,new wu(this.f,this.oa,null,e,this.g.h))},n.ee=function(){var t={};this.g.I.push(t),Tr(this.g,new wu(this.f,this.oa,this.ia,t,this.g.h))},n.wd=function(t){var e=this.g.D;if(t){var n=Va(e,"_pseudos");(e=n[t])||(e={},n[t]=e)}Tr(this.g,new wu(this.f,this.oa,null,e,this.g.h))},n.de=function(){this.F=!0,this.Tb()},n.Vc=function(){var t=new kb(this.g.u,this.g,this,this.B,this.g.F);Tr(this.g,t),t.Vc()},n.La=function(){if(fu.prototype.La.call(this),this.F){this.F=!1;var t,e="R"+this.g.N++,n=Ie(e);t=this.ia?new ja(n,0,this.ia):new La(n,0),Ha(this.mb,"region-id").push(t),this.dc(),e=new eg(this.g,this.ia,this,e),Tr(this.g,e),e.La()}},g(ig,Cr),ig.prototype.error=function(t){C.b("CSS parser:",t)},g(og,wr),og.prototype.Y=function(t){var e=t.url;e&&(e=N(O(e),A)),this.b.push({url:e,text:t.text,qb:"Author",Pa:null,media:null})},og.prototype.Z=function(t){var e=t.url;e&&(e=N(O(e),A)),this.b.push({url:e,text:t.text,qb:"User",Pa:null,media:null})},hg.prototype.Ge=function(t){var e=this.u.Ge(t);return function(t,n,i){var r=i.behavior;if(r)switch(r.toString()){case"body-child":t.parentElement.getAttribute("data-vivliostyle-primary-entry")&&(t.querySelector("[role=doc-toc], [role=directory], nav li a, .toc, #toc")||(i.display=kn));break;case"toc-node-anchor":i.color=dn,i["text-decoration"]=kn;break;case"toc-node":i.display=Ye,i.margin=Jn,i.padding=Jn,i["padding-inline-start"]=new Pe(1.25,"em");break;case"toc-node-first-child":i.display=gn,i.margin=new Pe(.2,"em"),i["vertical-align"]=Un,i.color=dn,i["text-decoration"]=kn}if(!r||"toc-node"!=r.toString()&&"toc-container"!=r.toString())return e(t,n,i);(i=t.firstChild)&&1!==i.nodeType&&""===i.textContent.trim()&&t.replaceChild(t.ownerDocument.createComment(i.textContent),i);var o=n.getAttribute("data-adapt-class");if("toc-node"==o){var a=n.firstChild;""!=a.textContent&&(a.textContent="",R(a,"cursor","pointer"),a.addEventListener("click",cg,!1),a.setAttribute("role","button"),a.setAttribute("aria-expanded","false"),n.setAttribute("aria-expanded","false"),"0px"!==n.style.height&&(a.tabIndex=0))}return(i=n.ownerDocument.createElement("div")).setAttribute("data-adapt-process-children","true"),"toc-node"==r.toString()?((a=n.ownerDocument.createElement("div")).textContent="",R(a,"margin","0.2em 0 0 -1em"),R(a,"margin-inline-start","-1em"),R(a,"margin-inline-end","0"),R(a,"display","inline-block"),R(a,"width","1em"),R(a,"text-align","center"),R(a,"vertical-align","top"),R(a,"cursor","default"),R(a,"font-family","Menlo,sans-serif"),i.appendChild(a),R(i,"overflow","hidden"),i.setAttribute("data-adapt-class","toc-node"),i.setAttribute("role","treeitem"),"toc-node"==o||"toc-container"==o?(R(i,"height","0px"),(t=t.firstElementChild)&&"a"===t.localName&&(t.tabIndex=-1)):n.setAttribute("role","tree")):"toc-node"==o&&(i.setAttribute("data-adapt-class","toc-container"),i.setAttribute("role","group"),i.setAttribute("aria-hidden","true")),ai(i)}},hg.prototype.Uc=function(t,e,n,i,r){var o=this;if(this.page)return ai(this.page);var a=this,s=oi("showTOC"),u=new tl(t,t);return this.page=u,this.b.load(this.url+"?viv-toc-box").then(function(i){(l=o.b.f[o.url])&&l.body&&l.body.getAttribute("data-vivliostyle-primary-entry")&&i.body.setAttribute("data-vivliostyle-primary-entry",!0);var l,h=Vb(l=a.b.g[i.url],n,1e5,r);e=new Pd(e.window,h.fontSize,e.root,h.width,h.height);var c=new Hb(l,i,a.lang,e,a.f,a.l,a.Ge(i),a.j,0,a.h,a.g);a.nb=c,c.$=a.$,$b(c).then(function(){tg(c,u,null).then(function(){Array.from(u.H.querySelectorAll("[data-vivliostyle-toc-box]>*>*>*>*>*[style*='display: none']")).forEach(function(t){t.setAttribute("aria-hidden","true"),t.setAttribute("hidden","hidden")}),function t(e,n,i){if(i--)for(n=n.firstChild;n;n=n.nextSibling)if(1==n.nodeType){var r=n;"auto"!=z(r,"height","auto")&&(R(r,"height","auto"),t(e,r,i)),"absolute"==z(r,"position","static")&&(R(r,"position","relative"),t(e,r,i))}}(a,t,2),xi(s,u)})})}),s.result()},hg.prototype.Td=function(){this.page&&(this.page.H.style.visibility="hidden",this.page.H.setAttribute("aria-hidden","true"))},hg.prototype.Rc=function(){return!!this.page&&"visible"===this.page.H.style.visibility},g(fg,og),fg.prototype.load=function(t){var e=T(t);if(t=this.D[e])return t.Xa()?t:ai(t.get());var n=oi("EPUBDocStore.load");return(t=fg.ng.load.call(this,e,!0,"Failed to fetch a source document from "+e)).then(function(t){t?xi(n,t):e.startsWith("data:")?C.error("Failed to load "+e+". Invalid data."):e.startsWith("http:")&&A.startsWith("https:")?C.error("Failed to load "+e+'. Mixed Content ("http:" content on "https:" context) is not allowed.'):C.error("Received an empty response for "+e+". This may be caused by the server not allowing cross-origin resource sharing (CORS).")}),n.result()};var wg={dcterms:"http://purl.org/dc/terms/",marc:"http://id.loc.gov/vocabulary/",media:"http://www.idpf.org/epub/vocab/overlays/#",rendition:"http://www.idpf.org/vocab/rendition/#",onix:"http://www.editeur.org/ONIX/book/codelists/current.html#",xsd:"http://www.w3.org/2001/XMLSchema#"},yg=wg.dcterms+"language",xg=wg.dcterms+"title",Eg=wg.rendition+"layout";function Sg(t,e){var n={};return function(i,r){var o,a,s=i.r||n,u=r.r||n;return t==xg&&(o="main"==s["http://idpf.org/epub/vocab/package/#title-type"])!=(a="main"==u["http://idpf.org/epub/vocab/package/#title-type"])?o?-1:1:(o=parseInt(s["http://idpf.org/epub/vocab/package/#display-seq"],10),isNaN(o)&&(o=Number.MAX_VALUE),a=parseInt(u["http://idpf.org/epub/vocab/package/#display-seq"],10),isNaN(a)&&(a=Number.MAX_VALUE),o!=a?o-a:t!=yg&&e&&(o=(s[yg]||s["http://idpf.org/epub/vocab/package/#alternate-script"])==e)!=(a=(u[yg]||u["http://idpf.org/epub/vocab/package/#alternate-script"])==e)?o?-1:1:i.o-r.o)}}function kg(){var t=window.MathJax;return t?t.Hub:null}var Cg={"application/xhtml+xml":!0,"image/jpeg":!0,"image/png":!0,"image/svg+xml":!0,"image/gif":!0,"audio/mp3":!0};function Tg(t,e){this.h=t,this.D=this.g=this.b=this.u=this.j=null,this.G=e,this.N=null,this.Z={},this.lang=null,this.l=0,this.F=!1,this.S=!0,this.B=null,this.f={},this.ca=this.Yb=this.lf=null,this.Y={},this.J=null,this.I=function(t){function e(){}return e.prototype.Re=function(t,e){return"viv-id-"+X(e+(t?"#"+t:""),":")},e.prototype.oc=function(e,n){if(r=e.match(/^([^#]*)#?(.*)$/)){var i=r[1]||n,r=r[2];if(i&&t.u.some(function(t){return t.src===i}))return"#"+this.Re(r,i)}return e},e.prototype.Kg=function(t){return"#"===t.charAt(0)&&(t=t.substring(1)),t.indexOf("viv-id-")||(t=t.substring(7)),(t=function(t){var e="string"==typeof(e=":")?e:"\\u",n=new RegExp(X(e)+"[0-9a-fA-F]{4}","g");return t.replace(n,function(t){var n="string"==typeof(n=e)?n:"\\u";return t.indexOf(n)?t:String.fromCharCode(parseInt(t.substring(n.length),16))})}(t).match(/^([^#]*)#?(.*)$/))?[t[1],t[2]]:[]},new e}(this),kg()&&(Sa["http://www.w3.org/1998/Math/MathML"]=!0)}function Ag(t,e){if(e.startsWith("data:"))return e===t.G?"":e;if(t.G){var n=N("",t.G);return e===n||e+"/"===n?"":("/"!=n.charAt(n.length-1)&&(n+="/"),e.substr(0,n.length)==n?decodeURI(e.substr(n.length)):null)}return e}function _g(t){for(var e=0,n=h(t.b),i=n.next();!i.done;i=n.next()){i=i.value;var r=t.F?1:Math.ceil(i.u/1024);i.b=e,i.f=r,e+=r}t.l=e,t.B&&t.B(t.l)}function Ng(t,e,n){t.g={},t.D={},t.u=[],t.b=t.u;var i=t.j=new Iu(null,"",(new DOMParser).parseFromString("<spine></spine>","text/xml"));return e.forEach(function(t){var e=new vg;e.P=t.index,e.id="item"+(t.index+1),e.src=t.url,e.wb=t.wb,e.nc=t.nc;var n=i.b.createElement("itemref");n.setAttribute("idref",e.id),i.root.appendChild(n),e.j=n,this.g[e.id]=e,null==(n=Ag(this,t.url))&&(n=t.url),this.D[n]=e,this.u.push(e)},t),n?function(t,e,n){var i=oi("EPUBDocStore.load");return e=T(e),(t.D[e]=sg(t,{status:200,statusText:"",url:e,contentType:n.contentType,responseText:null,responseXML:n,vd:null})).Ga(i),i.result()}(t.h,e[0].url,n):ai(null)}function Og(t,e,n){e.readingProgression&&(t.J=e.readingProgression),void 0===t.f&&(t.f={});var i=n&&n.title||e.name||e.metadata&&e.metadata.title;i&&(t.f[xg]=[{v:i}]);var r=Ag(t,t.G);!e.readingOrder&&n&&null!==r&&(e.readingOrder=[encodeURI(r)],Array.from(n.querySelectorAll("[role=doc-toc] a[href],[role=directory] a[href],nav li a[href],.toc a[href],#toc a[href]")).forEach(function(n){n=T(n.href||n.getAttribute("href"));var i=Ag(t,n);n=null!==i?encodeURI(i):n,-1==e.readingOrder.indexOf(n)&&e.readingOrder.push(n)}));var o=[],a=0,s=-1;[e.readingOrder,e.resources].forEach(function(n){n instanceof Array&&n.forEach(function(n){var i=e.readingOrder.includes(n),r="string"==typeof n?n:n.url||n.href,u="string"==typeof n?"":n.oh||n.href&&n.type||"";(i||"text/html"===u||"application/xhtml+xml"===u||/(^|\/)([^\/]+\.(x?html|htm|xht)|[^\/.]*)([#?]|$)/.test(r))&&(i={url:N(O(r),t.G),index:a++,wb:null,nc:null},"contents"===n.rel&&-1===s&&(s=i.index),o.push(i))})});var u=oi("initWithWebPubManifest");return Ng(t,o).then(function(){-1!==s&&(t.Yb=t.u[s]),t.Yb||(t.Yb=t.D[r]),xi(u,!0)}),u.result()}function Ig(t,e){return si("resolveFragment",function(n){if(e){var i,r=new bt;if(function(t,e){if(!(s=e.match(/^#?epubcfi\((.*)\)$/)))throw Error("E_CFI_NOT_CFI");for(var n=s[1],i=0,r=[];;)switch(n.charAt(i)){case"/":if(i++,!(s=n.substr(i).match(/^(0|[1-9][0-9]*)(\[([-a-zA-Z_0-9.\u007F-\uFFFF]+)(;([^\]]|\^\])*)?\])?/)))throw Error("E_CFI_NUMBER_EXPECTED");i+=s[0].length;var o=parseInt(s[1],10),a=s[3],s=ct(s[4]);r.push(new pt(o,a,P(s.s)));break;case":":if(i++,!(s=n.substr(i).match(/^(0|[1-9][0-9]*)(\[((([^\];,]|\^[\];,])*)(,(([^\];,]|\^[\];,])*))?)(;([^]]|\^\])*)?\])?/)))throw Error("E_CFI_NUMBER_EXPECTED");i+=s[0].length,o=parseInt(s[1],10),(a=s[4])&&(a=ht(a));var u=s[7];u&&(u=ht(u)),s=ct(s[10]),r.push(new dt(o,a,u,P(s.s)));break;case"!":i++,r.push(new ft);break;case"~":case"@":case"":return void(t.pa=r);default:throw Error("E_CFI_PARSE_ERROR")}}(r,e),t.j){var o=gt(r,t.j.b);if(1!=o.node.nodeType||o.K||!o.sd)return void xi(n,null);var a=o.node,s=a.getAttribute("idref");if("itemref"!=a.localName||!s||!t.g[s])return void xi(n,null);i=t.g[s],r=o.sd}else i=t.b[0];t.h.load(i.src).then(function(t){var e=gt(r,t.b);t=Fu(t,e.node,e.offset,e.K),xi(n,{P:i.P,Da:t,aa:-1})})}else xi(n,null)},function(t,n){C.b(n,"Cannot resolve fragment:",e),xi(t,null)})}function Pg(t,e){return{page:t,position:{P:t.P,aa:e,Da:t.offset}}}function Fg(t,e,n,i,r){this.O=t,this.viewport=e,this.j=n,this.l=r,this.Ib=[],this.g=[],this.$=mt(i),this.h=new Ad(e),this.f=new Jf(t.I),this.wf=!1}function Mg(t,e){var n=t.Ib[e.P];return n?n.Ka[e.aa]:null}function Dg(t,e,n){var i=oi("renderSinglePage"),r=function(t,e,n){var i=e.nb.viewport,r=i.b.createElement("div");r.setAttribute("data-vivliostyle-page-container",!0),r.setAttribute("role","region"),r.style.position="absolute",r.style.top="0",r.style.left="0",Au||(r.style.visibility="hidden",r.setAttribute("aria-hidden","true")),i.h.appendChild(r);var o=i.b.createElement("div");o.setAttribute("data-vivliostyle-bleed-box",!0),r.appendChild(o);var a=new tl(r,o);return a.P=e.item.P,a.position=n,a.offset=Xb(e.nb,n),a.offset||(e=t.O.I.Re("",e.item.src),o.setAttribute("id",e),el(a,o,e)),i!==t.viewport&&(t=io(null,new cr(xt(t.viewport.width,t.viewport.height,i.width,i.height),null)),a.l.push(new Zu(r,"transform",t))),a}(t,e,n);return tg(e.nb,r,n).then(function(o){var a=(n=o)?n.page-1:e.jb.length-1;if(function(t,e,n,i){n.H.style.display="none",n.H.style.visibility="visible",n.H.style.position="",n.H.style.top="",n.H.style.left="",n.H.setAttribute("data-vivliostyle-page-side",n.b);var r=e.Ka[i];if(n.u=!e.item.P&&!i,e.Ka[i]=n,t.O.S){if(!i&&0<e.item.P){var o=t.O.b[e.item.P-1];e.item.b=o.b+o.f}e.item.f=e.Ka.length,t.O.l=t.O.b.reduce(function(t,e){return t+e.f},0),t.O.B&&t.O.B(t.O.l)}if(r)e.nb.viewport.f.replaceChild(n.H,r.H),nt(r,{type:"replaced",target:null,currentTarget:null,ag:n});else{if(r=null,0<i)r=e.Ka[i-1].H.nextElementSibling;else for(o=e.item.P+1;o<t.Ib.length;o++){var a=t.Ib[o];if(a&&a.Ka[0]){r=a.Ka[0].H;break}}e.nb.viewport.f.insertBefore(n.H,r)}t.l({width:e.nb.Ba,height:e.nb.ua},e.nb.xb,e.item.P,e.nb.ta+i)}(t,e,r,a),function(t,e,n){if(0<(o=Object.keys(t.j.g)).length){var i=Hf(t.b);o.forEach(function(t){this.B[t]=i;var r=this.D[t];if(r&&r.aa<n&&(r=this.h[t])){var o,a=this.f[t];for(a||(a=this.f[t]=[]);o=r.shift();)o.ud=!1,a.push(o)}this.D[t]={P:e,aa:n}},t)}for(var r,o=t.G;r=t.u.shift();){r.Le=o,r.P=e,r.aa=n;var a=void 0;r.ud?(a=t.h[r.Gc])||(a=t.h[r.Gc]=[]):(a=t.f[r.Gc])||(a=t.f[r.Gc]=[]),a.every(function(t){return!(r===t||t&&r.Gc===t.Gc&&r.ud===t.ud&&r.P===t.P&&r.aa===t.aa)})&&a.push(r)}t.j=null}(t.f,r.P,a),o=null,n){var s=e.jb[n.page];e.jb[n.page]=n,s&&e.Ka[n.page]&&(Il(n,s)||(o=Dg(t,e,n)))}o||(o=ai(!0)),o.then(function(){var o=function(t,e){var n=[];Object.keys(e.g).forEach(function(t){(t=this.f[t])&&(n=n.concat(t))},t),n.sort(function(t,e){return t.P-e.P||t.aa-e.aa});var i=[],r=null;return n.forEach(function(t){r&&r.P===t.P&&r.aa===t.aa?r.Yd.push(t):(r={P:t.P,aa:t.aa,Le:t.Le,Yd:[t]},i.push(r))}),i}(t.f,r),s=0;Ci(function(e){if(++s>o.length)Ni(e);else{var n=o[s-1];n.Yd=n.Yd.filter(function(t){return!t.ud}),n.Yd.length?$g(t,n.P).then(function(i){i?(function(t,e){t.F.push(t.b),t.b=Hf(e)}(t.f,n.Le),function(t,e){t.I.push(t.g),t.g=e}(t.f,n.Yd),Dg(t,i,i.jb[n.aa]).then(function(n){var i=t.f;i.b=i.F.pop(),(i=t.f).g=i.I.pop(),(i=n.Xd.position).P===r.P&&i.aa===a&&(r=n.Xd.page),_i(e)})):_i(e)}):_i(e)}}).then(function(){r.H.parentElement||(r=e.Ka[a]),r.B=!n&&e.item.P===t.O.b.length-1,r.B&&function(t,e){var n=t.b.page[0];Array.from(e.root.querySelectorAll("[data-vivliostyle-pages-counter]")).forEach(function(t){var e=t.getAttribute("data-vivliostyle-pages-counter"),i=this.Ne.findIndex(function(t){return t.Mc.g===e});t.textContent=this.Ne[i].format([n])},t)}(t.f,t.viewport),xi(i,{Xd:Pg(r,a),bg:n})})})}),i.result()}function Lg(t,e){var n=t.aa,i=-1;return 0>n?(i=t.Da,n=(n=Y(e.jb.length,function(t){return Xb(e.nb,e.jb[t],!0)>i}))===e.jb.length?e.complete?e.jb.length-1:Number.POSITIVE_INFINITY:n-1):n===Number.POSITIVE_INFINITY&&-1!==t.Da&&(i=t.Da),{P:t.P,aa:n,Da:i}}function jg(t,e,n){var i=oi("findPage");return $g(t,e.P).then(function(r){if(r){var o,a=null;Ci(function(i){var s=Lg(e,r);o=s.aa,(a=r.Ka[o])?Ni(i):r.complete?(o=r.jb.length-1,a=r.Ka[o],Ni(i)):n?Rg(t,s).then(function(t){t&&(a=t.page,o=t.position.aa),Ni(i)}):Si(100).then(function(){_i(i)})}).then(function(){xi(i,Pg(a,o))})}else xi(i,null)}),i.result()}function Rg(t,e){var n=oi("renderPage");return $g(t,e.P).then(function(i){if(i){var r=Lg(e,i),o=r.aa,a=r.Da,s=i.Ka[o];s?xi(n,Pg(s,o)):Ci(function(e){if(o<i.jb.length)Ni(e);else if(i.complete)o=i.jb.length-1,Ni(e);else{var n=i.jb[i.jb.length-1];Dg(t,i,n).then(function(t){var r=t.Xd.page;(n=t.bg)?0<=a&&Xb(i.nb,n)>a?(s=r,o=i.jb.length-2,Ni(e)):_i(e):(s=r,o=t.Xd.position.aa,i.complete=!0,Ni(e))})}}).then(function(){s=s||i.Ka[o];var e=i.jb[o];s?xi(n,Pg(s,o)):Dg(t,i,e).then(function(t){t.bg||(i.complete=!0),xi(n,t.Xd)})})}else xi(n,null)}),n.result()}function zg(t,e,n){var i=oi("renderPagesUpto");e||(e={P:0,aa:0,Da:0});var r,o=e.P,a=e.aa,s=0;return n&&(s=o),Ci(function(n){Rg(t,{P:s,aa:s===o?a:Number.POSITIVE_INFINITY,Da:s===o?e.Da:-1}).then(function(t){r=t,++s>o?Ni(n):_i(n)})}).then(function(){xi(i,r)}),i.result()}function Bg(t,e,n){return e="left"===e.b,t="ltr"===t.fc(n),!e&&t||e&&!t}function Ug(t,e,n){var i=oi("navigateToEPage");return function(t,e){return si("resolveEPage",function(n){if(0>=e)xi(n,{P:0,Da:0,aa:-1});else if(t.S){var i=t.b.findIndex(function(t){return!t.b&&!t.f||t.b<=e&&t.b+t.f>e});-1==i&&(i=t.b.length-1);var r=t.b[i];r&&r.f||(r=t.b[--i]),xi(n,{P:i,Da:-1,aa:Math.floor(e-r.b)})}else{var o=Y(t.b.length,function(n){return(n=t.b[n]).b+n.f>e});o==t.b.length&&o--;var a=t.b[o];t.h.load(a.src).then(function(t){(e-=a.b)>a.f&&(e=a.f);var i=0;0<e&&(t=Mu(t),(i=Math.round(t*e/a.f))==t&&i--),xi(n,{P:o,Da:i,aa:-1})})}},function(t,n){C.b(n,"Cannot resolve epage:",e),xi(t,null)})}(t.O,e).then(function(e){e?jg(t,e,n).Ga(i):xi(i,null)}),i.result()}function Vg(t,e,n,i){C.debug("Navigate to",e);var r=Ag(t.O,T(e));if(!r){if(t.O.j&&e.match(/^#epubcfi\(/))r=Ag(t.O,t.O.j.url);else if("#"===e.charAt(0)){var o=t.O.I.Kg(e);t.O.j?null==(r=Ag(t.O,o[0]))&&(r=o[0]):r=o[0],e=o[0]+(o[1]?"#"+o[1]:"")}if(null==r)return ai(null)}var a=t.O.D[r];if(!a)return t.O.j&&r==Ag(t.O,t.O.j.url)&&0<=(r=e.indexOf("#"))?function(t,e,n){var i=oi("navigateToCFI");return Ig(t.O,e).then(function(e){e?jg(t,e,n).Ga(i):xi(i,null)}),i.result()}(t,e.substr(r+1),i):ai(null);var s=oi("navigateTo");return $g(t,a.P).then(function(r){if(r){var o=Lu(r.da,e);o?jg(t,{P:a.P,aa:-1,Da:Pu(r.da,o)},i).Ga(s):n.P!==a.P?jg(t,{P:a.P,aa:0,Da:-1},i).Ga(s):xi(s,null)}else xi(s,null)}),s.result()}function Hg(t,e,n,i){if(a=kg()){var r=i.ownerDocument,o=r.createElement("span");i.appendChild(o),function t(e,n,i){if(n){if(1===n.nodeType&&"mglyph"===n.tagName)for(var r=h(n.attributes),o=r.next();!o.done;o=r.next())if("src"===(o=o.value).name){var a=N(o.nodeValue,i.url);o.namespaceURI?n.setAttributeNS(o.namespaceURI,o.name,a):n.setAttribute(o.name,a)}n.firstChild&&t(e,n.firstChild,i),n.nextSibling&&t(e,n.nextSibling,i)}}(t,n=r.importNode(n,!0),e),o.appendChild(n),(t=a.queue).Push(["Typeset",a,o]);var a,s=Ti(a=oi("makeMathJaxView"));return t.Push(function(){s.tb(o)}),a.result()}return ai(null)}function $g(t,e){if(-1===e||e>=t.O.b.length)return ai(null);var n=t.Ib[e];if(n)return ai(n);var i=oi("getPageViewItem");if(o=t.g[e]){var r=Ti(i);return o.push(r),i.result()}var o=t.g[e]=[],a=t.O.b[e],s=t.O.h;return s.load(a.src).then(function(r){a.h=r.b.title;var u=s.g[r.url],l=t.Ge(r),h=t.viewport,c=Vb(u,h.width,h.height,h.fontSize,t.$);c.width==h.width&&c.height==h.height&&c.fontSize==h.fontSize||(h=new Pd(h.window,c.fontSize,h.root,c.width,c.height)),c=t.Ib[e-1],null!==a.wb?c=a.wb-1:(!(0<e)||c&&c.complete?c=c?c.nb.ta+c.Ka.length:0:(c=a.b||e,t.O.F||c%2||c++),null!==a.nc&&(c+=a.nc)),function(t,e){var n=t.b.page;n&&n.length?n[n.length-1]=e:t.b.page=[e]}(t.f,c);var f=new Hb(u,r,t.O.lang,h,t.h,t.j,l,t.O.Y,c,t.O.I,t.f,t.O.J);f.$=t.$,u=t.O.f&&t.O.f[xg],f.yb=u&&u[0]&&u[0].v||"",f.fb=a.h||"",$b(f).then(function(){n={item:a,da:r,nb:f,jb:[null],Ka:[],complete:!1},t.Ib[e]=n,xi(i,n),o.forEach(function(t){t.tb(n)})})}),i.result()}(n=Fg.prototype).fc=function(t){return this.O.J?this.O.J:(t=this.Ib[t?t.P:0])?t.nb.I:null},n.Rb=function(){return zg(this,{P:this.O.b.length-1,aa:Number.POSITIVE_INFINITY,Da:-1},!1)},n.xg=function(t,e){return jg(this,{P:0,aa:0,Da:-1},e)},n.Ag=function(t,e){return jg(this,{P:this.O.b.length-1,aa:Number.POSITIVE_INFINITY,Da:-1},e)},n.nextPage=function(t,e){var n=this,i=this,r=t.P,o=t.aa,a=oi("nextPage");return $g(i,r).then(function(t){if(t){if(t.complete&&o==t.jb.length-1){if(r>=i.O.b.length-1)return void xi(a,null);r++,o=0;var s=n.Ib[r],u=s&&s.Ka[0];t=t.Ka[t.Ka.length-1],u&&t&&u.b==t.b&&(s.Ka.forEach(function(t){t.H&&t.H.remove()}),n.Ib[r]=null,n.g[r]=null)}else o++;jg(i,{P:r,aa:o,Da:-1},e).Ga(a)}else xi(a,null)}),a.result()},n.Oe=function(t,e){var n=t.P,i=t.aa;if(i)i--;else{if(!n)return ai(null);n--,i=Number.POSITIVE_INFINITY}return jg(this,{P:n,aa:i,Da:-1},e)},n.Gg=function(t,e){var n=Mg(this,t);if(!n)return ai(null);var i=Bg(this,n,t),r=this.nextPage(t,e);if(i)return r;var o=this;return r.ea(function(t){if(t){if(t.page.b===n.b)return r;var i=o.nextPage(t.position,e);return i.ea(function(t){return t?i:r})}return ai(null)})},n.Jg=function(t,e){var n=Mg(this,t);if(!n)return ai(null);var i=Bg(this,n,t),r=this.Oe(t,e),o=n.H.previousElementSibling;if(i){var a=this;return r.ea(function(t){return t?t.page.b===n.b||t.page.H!==o?r:a.Oe(t.position,e):ai(null)})}return r},n.Ge=function(t){var e=this;return function(n,i){var r;if("object"==n.localName&&"http://www.w3.org/1999/xhtml"==n.namespaceURI){if(r=null,o=n.getAttribute("data")){var o=N(o,t.url);if(!(s=n.getAttribute("media-type"))){var a=Ag(e.O,o);a&&(a=e.O.D[a])&&(s=a.g)}if(s&&(a=e.O.Z[s])){(r=e.viewport.b.createElement("iframe")).style.border="none";o=G(o);var s,u=G(s);for((s=new U).append(a),s.append("?src="),s.append(o),s.append("&type="),s.append(u),a=n.firstChild;a;a=a.nextSibling)1==a.nodeType&&("param"==(u=a).localName&&"http://www.w3.org/1999/xhtml"==u.namespaceURI&&(o=u.getAttribute("name"),u=u.getAttribute("value"),o&&u&&(s.append("&"),s.append(encodeURIComponent(o)),s.append("="),s.append(encodeURIComponent(u)))));r.setAttribute("src",s.toString()),(s=n.getAttribute("width"))&&r.setAttribute("width",s),(s=n.getAttribute("height"))&&r.setAttribute("height",s)}}r||(r=e.viewport.b.createElement("span")).setAttribute("data-adapt-process-children","true"),r=ai(r)}else if("http://www.w3.org/1998/Math/MathML"==n.namespaceURI)r=Hg(e,t,n,i);else if("http://example.com/sse"==n.namespaceURI){switch(r=i?i.ownerDocument:e.viewport.b,s=n.localName){case"t":case"tab":case"ec":case"nt":case"fraction":case"comment":case"mark":s="span";break;case"ruby":case"rp":case"rt":break;default:s="div"}(r=r.createElement(s)).setAttribute("data-adapt-process-children","true"),r=ai(r)}else r=n.dataset&&"true"==n.dataset.mathTypeset?Hg(e,t,n,i):ai(null);return r}},n.Uc=function(t){var e=(i=this.O).Yb||i.lf;if(this.wf=t,!e)return ai(null);if(this.b&&this.b.page)return this.b.page.H.style.visibility="visible",this.b.page.H.setAttribute("aria-hidden","false"),ai(this.b.page);var n=oi("showTOC");this.b||(this.b=new hg(i.h,e.src,i.lang,this.h,this.j,this.$,this,i.Y,i.I,this.f)),t=this.viewport;var i=Math.min(350,Math.round(.67*t.width)-16),r=(e=t.height-6,t.b.createElement("div"));return t.root.appendChild(r),r.style.visibility="hidden",r.style.width=i+10+"px",r.style.maxHeight=e+"px",r.setAttribute("data-vivliostyle-toc-box","true"),r.setAttribute("role","navigation"),this.b.Uc(r,t,i,e,this.viewport.fontSize).then(function(t){r.style.visibility="visible",r.setAttribute("aria-hidden","false"),xi(n,t)}),n.result()},n.Td=function(){this.b&&this.b.Td()},n.Rc=function(){return!!this.b&&this.b.Rc()};var Gg={fh:"singlePage",gh:"spread",Vg:"autoSpread"};function Kg(t,e,n,i){var r=this;this.window=t,this.ge=e,e.setAttribute("data-vivliostyle-viewer-viewport",!0),Au&&e.setAttribute("data-vivliostyle-debug",!0),e.setAttribute("data-vivliostyle-viewer-status","loading"),this.Ba=n,this.ua=i,t=t.document,this.sa=new _h(t.head,e),this.u="loading",this.J=[],this.O=null,this.hc=this.Ya=!1,this.f=this.j=this.g=this.B=null,this.fontSize=16,this.zoom=1,this.D=!1,this.S="singlePage",this.ca=!1,this.Rb=!0,this.$={fontFamily:"serif",lineHeight:1.25,margin:8,xe:!1,pe:25,we:!1,Ie:!1,ub:!1,Dc:1,af:{vivliostyle:!0,print:!0},vc:void 0},this.Z=[],this.I=function(){},this.h=function(){},this.Y=function(){r.Ya=!0,r.I()},this.Me=this.Me.bind(this),this.F=function(){},this.G=t.getElementById("vivliostyle-page-rules"),this.N=!1,this.l=null,this.la={loadPublication:this.rg,loadXML:this.sg,configure:this.$e,moveTo:this.ta,toc:this.Uc},function(t){k(1,function(e){Xg(t,{t:"debug",content:e})}),k(2,function(e){Xg(t,{t:"info",content:e})}),k(3,function(e){Xg(t,{t:"warn",content:e})}),k(4,function(e){Xg(t,{t:"error",content:e})})}(this)}function Xg(t,e){e.i=t.Ba,t.ua(e)}function Wg(t,e){t.u!==e&&(t.u=e,t.ge.setAttribute("data-vivliostyle-viewer-status",e),Xg(t,{t:"readystatechange"}))}function Yg(t,e){return uv(t),(e?Ig(t.O,e).ea(function(e){return t.f=e,ai(!0)}):ai(!0)).ea(function(){return Nv.b("beforeRender"),lv(t)})}function Jg(t,e){var n,i=parseFloat(e),r=/[a-z]+$/;if("string"==typeof e&&(n=e.match(r))){if("em"===(r=n[0])||"rem"===r)return i*t.fontSize;if("ex"===r)return i*Nt.ex*t.fontSize/Nt.em;if(r=Nt[r])return i*r}return i}function Zg(t,e){var n=[];t.g&&n.push(t.g),t.j&&(n.push(t.j.left),n.push(t.j.right)),n.forEach(function(t){t&&e(t)})}function qg(t){Zg(t,function(e){e.removeEventListener("hyperlink",t.F,!1),e.removeEventListener("replaced",t.Me,!1)})}function Qg(t){qg(t),Zg(t,function(t){R(t.H,"display","none"),t.H.setAttribute("aria-hidden","true")}),t.g=null,t.j=null}function tv(t,e){e.addEventListener("hyperlink",t.F,!1),e.addEventListener("replaced",t.Me,!1),R(e.H,"visibility","visible"),R(e.H,"display","block"),e.H.setAttribute("aria-hidden","false")}function ev(t){var e=oi("reportPosition");return function(t,e,n){var i=t.b[e],r=oi("getCFI");return t.h.load(i.src).then(function(t){var e=Du(t,n),o=null;e&&(t=Fu(t,e,0,!1),vt(o=new bt,e,n-t),i.j&&vt(o,i.j,0),o=o.toString()),xi(r,o)}),r.result()}(t.O,t.f.P,t.f.Da).then(function(n){var i=t.g;(t.ca&&0<i.j.length?Ii(i.j):ai(!0)).then(function(){(function(t,e,n){var i=oi("sendLocationNotification"),r={t:"nav",first:e.u,last:e.B,metadata:t.O.f,docTitle:t.O.b[e.P].h};return function(t,e){var n=t.b[e.P];if(t.S)return ai(n.b+e.aa);if(0>=e.Da)return ai(n.b);var i=oi("getEPage");return t.h.load(n.src).then(function(t){t=Mu(t),xi(i,n.b+Math.min(t,e.Da)*n.f/t)}),i.result()}(t.O,t.f).then(function(e){r.epage=e,r.epageCount=t.O.l,n&&(r.cfi=n),Xg(t,r),xi(i,!0)}),i.result()})(t,i,n).Ga(e)})}),e.result()}function nv(t){var e=t.ge;if(t.B){var n=t.B;return e.style.marginLeft=n.marginLeft+"px",e.style.marginRight=n.marginRight+"px",e.style.marginTop=n.marginTop+"px",e.style.marginBottom=n.marginBottom+"px",new Pd(t.window,t.fontSize,e,n.width,n.height)}return new Pd(t.window,t.fontSize,e)}function iv(t,e,n){return t.hc=!1,qg(t),t.$.ub?function(t,e,n){var i=oi("getCurrentSpread"),r=Mg(t,e);if(!r)return ai({left:null,right:null});var o="left"===r.b;return(Bg(t,r,e)?t.Oe(e,n):t.nextPage(e,n)).then(function(n){var r=Mg(t,e);(n=n&&n.page)&&n.b===r.b&&(n=null),xi(i,o?{left:r,right:n}:{left:n,right:r})}),i.result()}(t.b,t.f,n).ea(function(n){if(Qg(t),t.j=n,n.left&&n.right){var i=parseFloat(n.left.H.style.width),r=parseFloat(n.right.H.style.width);i&&r&&i!==r&&(i<r?n.left.H.style.marginLeft=r-i+"px":n.right.H.style.marginRight=i-r+"px")}return n.left&&(tv(t,n.left),n.right?n.left.H.removeAttribute("data-vivliostyle-unpaired-page"):n.left.H.setAttribute("data-vivliostyle-unpaired-page",!0)),n.right&&(tv(t,n.right),n.left?n.right.H.removeAttribute("data-vivliostyle-unpaired-page"):n.right.H.setAttribute("data-vivliostyle-unpaired-page",!0)),n=rv(t,n),t.viewport.zoom(n.width,n.height,t.D?av(t,n):t.zoom),t.g=e,ai(null)}):(function(t,e){Qg(t),t.g=e,e.H.style.marginLeft="",e.H.style.marginRight="",tv(t,e)}(t,e),t.viewport.zoom(e.f.width,e.f.height,t.D?av(t,e.f):t.zoom),t.g=e,ai(null))}function rv(t,e){var n=0,i=0;return e.left&&(n+=e.left.f.width,i=e.left.f.height),e.right&&(n+=e.right.f.width,i=Math.max(i,e.right.f.height)),e.left&&e.right&&(n+=2*t.$.Dc,n+=Math.abs(e.left.f.width-e.right.f.width)),{width:n,height:i}}(n=Kg.prototype).rg=function(t){Nv.f("beforeRender"),Wg(this,"loading");var e=t.url,n=t.fragment,i=!!t.zipmeta,r=t.authorStyleSheet,o=t.userStyleSheet;this.viewport=null;var a=oi("loadPublication"),s=this;return s.$e(t).then(function(){var t=new fg;ag(t,r,o).then(function(){var r=N(O(e),s.window.location.href);s.J=[r],dg(t,r,i).then(function(t){t?(s.O=t,Yg(s,n).then(function(){xi(a,!0)})):xi(a,!1)})})}),a.result()},n.sg=function(t){Nv.f("beforeRender"),Wg(this,"loading");var e=t.url,n=t.document,i=t.fragment,r=t.authorStyleSheet,o=t.userStyleSheet;this.viewport=null;var a=oi("loadXML"),s=this;return s.$e(t).then(function(){var t=new fg;ag(t,r,o).then(function(){var r=e.map(function(t,e){return{url:N(O(t.url),s.window.location.href),index:e,wb:t.wb,nc:t.nc}});s.J=r.map(function(t){return t.url}),s.O=new Tg(t,""),Ng(s.O,r,n).then(function(){Yg(s,i).then(function(){xi(a,!0)})})})}),a.result()},n.$e=function(t){if("boolean"==typeof t.autoresize&&(t.autoresize?(this.B=null,this.window.addEventListener("resize",this.Y,!1),this.Ya=!0):this.window.removeEventListener("resize",this.Y,!1)),"number"==typeof t.fontSize){var e=t.fontSize;5<=e&&72>=e&&this.fontSize!=e&&(this.fontSize=e,this.Ya=!0)}return"object"==typeof t.viewport&&t.viewport&&(200<=(e={marginLeft:Jg(this,(e=t.viewport)["margin-left"])||0,marginRight:Jg(this,e["margin-right"])||0,marginTop:Jg(this,e["margin-top"])||0,marginBottom:Jg(this,e["margin-bottom"])||0,width:Jg(this,e.width)||0,height:Jg(this,e.height)||0}).width||200<=e.height)&&(this.window.removeEventListener("resize",this.Y,!1),this.B=e,this.Ya=!0),"boolean"==typeof t.hyphenate&&(this.$.xe=t.hyphenate,this.Ya=!0),"boolean"==typeof t.horizontal&&(this.$.we=t.horizontal,this.Ya=!0),"boolean"==typeof t.nightMode&&(this.$.Ie=t.nightMode,this.Ya=!0),"number"==typeof t.lineHeight&&(this.$.lineHeight=t.lineHeight,this.Ya=!0),"number"==typeof t.columnWidth&&(this.$.pe=t.columnWidth,this.Ya=!0),"string"==typeof t.fontFamily&&(this.$.fontFamily=t.fontFamily,this.Ya=!0),"boolean"==typeof t.load&&(this.ca=t.load),"boolean"==typeof t.renderAllPages&&(this.Rb=t.renderAllPages),"string"==typeof t.userAgentRootURL&&(A=t.userAgentRootURL.replace(/resources\/?$/,""),_=t.userAgentRootURL),"string"==typeof t.rootURL&&(A=t.rootURL,_=A+"resources/"),"string"==typeof t.pageViewMode&&t.pageViewMode!==this.S&&(this.S=t.pageViewMode,this.Ya=!0),"number"==typeof t.pageBorder&&t.pageBorder!==this.$.Dc&&(this.viewport=null,this.$.Dc=t.pageBorder,this.Ya=!0),"number"==typeof t.zoom&&t.zoom!==this.zoom&&(this.zoom=t.zoom,this.hc=!0),"boolean"==typeof t.fitToScreen&&t.fitToScreen!==this.D&&(this.D=t.fitToScreen,this.hc=!0),"object"==typeof t.defaultPaperSize&&"number"==typeof t.defaultPaperSize.width&&"number"==typeof t.defaultPaperSize.height&&(this.viewport=null,this.$.vc=t.defaultPaperSize,this.Ya=!0),function(t,e){ni("CONFIGURATION").forEach(function(n){n=n(e),t.Ya=n.Ya||t.Ya,t.hc=n.hc||t.hc})}(this,t),ai(!0)},n.Me=function(t){var e=this.g,n=this.j,i=t.target;n?n.left!==i&&n.right!==i||iv(this,t.ag):e===t.target&&iv(this,t.ag)},n.Lg=function(t,e,n,i){this.Z[i]=t,function(t,e){if(!t.N&&t.G){var n="";Object.keys(e).forEach(function(t){n+="@page "+t+"{margin:0;size:",t=e[t],n+=t.width+"px "+t.height+"px;}"}),t.G.textContent=n,t.N=!0}}(this,e)};var ov={$g:"fit inside viewport"};function av(t,e){return Math.min(t.viewport.width/e.width,t.viewport.height/e.height)}function sv(){this.name="RenderingCanceledError",this.message="Page rendering has been canceled",this.stack=Error().stack}function uv(t){if(t.l){var e=t.l;if(gi(e,new sv),e!==ii&&e.b){e.b.g=!0;var n=new pi(e);e.l="interrupt",e.b=n,e.f.tb(n)}}t.l=null}function lv(t){if(t.Ya=!1,t.hc=!1,function(t){var e,n=nv(t);t:switch(t.S){case"singlePage":e=!1;break t;case"spread":e=!0;break t;default:e=1.45<=n.width/n.height&&800<n.width}var i=t.$.ub!==e;if(t.$.ub=e,t.ge.setAttribute("data-vivliostyle-spread-view",e),t.B||!t.viewport||t.viewport.fontSize!=t.fontSize)return!1;if(!i&&n.width==t.viewport.width&&n.height==t.viewport.height||!i&&n.width==t.viewport.width&&n.height!=t.viewport.height&&/Android|iPhone|iPad|iPod/.test(navigator.userAgent))return!0;if(e=t.b&&function(t){return t.Ib.some(function(t){return t&&0<t.Ka.length})}(t.b)){t:{for(i=(e=h(t.b.Ib)).next();!i.done;i=e.next())if(i=i.value)for(var r=(i=h(i.Ka)).next();!r.done;r=i.next())if((r=r.value).F&&r.D){e=!0;break t}e=!1}e=!e}return!!e&&(t.viewport.width=n.width,t.viewport.height=n.height,t.hc=!0)}(t))return ai(!0);Wg(t,"loading"),uv(t);var e=fi(ii.f,function(){return si("resize",function(n){t.O?(t.l=e,Nv.f("render (resize)"),function(t){var e=!1,n=!1;if(t.b){e=t.b.Rc(),n=t.b.wf,t.b.Td();for(var i=t.b,r=h(i.Ib),o=r.next();!o.done;o=r.next())(o=o.value)&&o.Ka.splice(0);for(i=i.viewport.root;i.lastChild;)i.removeChild(i.lastChild)}t.G&&(t.G.textContent="",t.N=!1),t.viewport=nv(t),R((i=t.viewport).g,"width",""),R(i.g,"height",""),R(i.f,"width",""),R(i.f,"height",""),R(i.f,"transform",""),t.b=new Fg(t.O,t.viewport,t.sa,t.$,t.Lg.bind(t)),e&&t.h({a:"toc",v:"show",autohide:n})}(t),t.f&&(t.f.aa||t.f.Da)&&(t.f.aa=-1),function(t,e){t.S=e||t.F}(t.O,t.Rb),zg(t.b,t.f,!t.Rb).then(function(i){i?(t.f=i.position,iv(t,i.page,!0).then(function(){Wg(t,"interactive"),function(t,e){if(t.B=e,t.S)return t.F&&!t.l&&_g(t),ai(!0);var n=0,i=0,r=oi("countEPages");return Ci(function(e){if(i===t.b.length)Ni(e);else{var r=t.b[i++];r.b=n,t.h.load(r.src).then(function(i){var o=1800,a=i.lang||t.lang;a&&a.match(/^(ja|ko|zh)/)&&(o/=3),r.f=Math.ceil(Mu(i)/o),n+=r.f,t.l=n,t.B&&t.B(t.l),_i(e)})}}).Ga(r),r.result()}(t.O,function(e){e={t:"nav",epageCount:e,first:t.g.u,last:t.g.B,metadata:t.O.f,docTitle:t.O.b[t.f.P].h},(t.g.u||!t.f.aa&&t.O.b[t.f.P].b)&&(e.epage=t.O.b[t.f.P].b),Xg(t,e)}).then(function(){ev(t).then(function(i){(t.Rb?t.b.Rb():ai(null)).then(function(){t.l===e&&(t.l=null),Nv.b("render (resize)"),t.Rb&&Wg(t,"complete"),Xg(t,{t:"loaded"}),xi(n,i)})})})})):xi(n,!1)})):xi(n,!1)},function(t,e){if(!(e instanceof sv))throw e;Nv.b("render (resize)"),C.debug(e.message)})});return ai(!0)}function hv(t){return"string"==typeof t?JSON.parse(t):t}function cv(t,e){var n=hv(e),i=null;!function(t){var e,n=fi;ii?e=ii.f:(e=ri)||(e=new hi(new li)),n(e,t,void 0)}(function(){var e=oi("commandLoop"),r=ii.f;return t.F=function(e){var n="#"===e.href.charAt(0)||t.J.some(function(t){return e.href.substr(0,t.length)==t});if(n){e.preventDefault();var i={t:"hyperlink",href:e.href,internal:n};fi(r,function(){return Xg(t,i),ai(!0)})}},Ci(function(e){if(t.Ya)lv(t).then(function(){_i(e)});else if(t.hc)t.g&&iv(t,t.g).then(function(){_i(e)});else if(n){var r=n;n=null,function(t,e){var n=e.a||"";return si("runCommand",function(i){var r=t.la[n];r?r.call(t,e).then(function(){Xg(t,{t:"done",a:n}),xi(i,!0)}):(C.error("No such action:",n),xi(i,!0))},function(t,e){C.error(e,"Error during action:",n),xi(t,!0)})}(t,r).then(function(){_i(e)})}else r=oi("waitForCommand"),i=Ti(r,self),r.result().then(function(){_i(e)})}).Ga(e),e.result()}),t.I=function(){var t=i;t&&(i=null,t.tb())},t.h=function(e){return!n&&(n=hv(e),t.I(),!0)},t.window.adapt_command=t.h}function fv(t,e,n){if(t==e)return t?[[0,t]]:[];(0>n||t.length<n)&&(n=null);var i=dv(t,e),r=t.substring(0,i),o=(i=bv(t=t.substring(i),e=e.substring(i)),t.substring(t.length-i));return t=function(t,e){var n;if(!t)return[[1,e]];if(!e)return[[-1,t]];n=t.length>e.length?t:e;var i=t.length>e.length?e:t;if(-1!=(r=n.indexOf(i)))return n=[[1,n.substring(0,r)],[0,i],[1,n.substring(r+i.length)]],t.length>e.length&&(n[0][0]=n[2][0]=-1),n;if(1==i.length)return[[-1,t],[1,e]];if(o=function(t,e){function n(t,e,n){for(var i,r,o,a,s=t.substring(n,n+Math.floor(t.length/4)),u=-1,l="";-1!=(u=e.indexOf(s,u+1));){var h=dv(t.substring(n),e.substring(u)),c=bv(t.substring(0,n),e.substring(0,u));l.length<c+h&&(l=e.substring(u-c,u)+e.substring(u,u+h),i=t.substring(0,n-c),r=t.substring(n+h),o=e.substring(0,u-c),a=e.substring(u+h))}return 2*l.length>=t.length?[i,r,o,a,l]:null}var i=t.length>e.length?t:e,r=t.length>e.length?e:t;if(4>i.length||2*r.length<i.length)return null;var o,a,s=n(i,r,Math.ceil(i.length/4)),i=n(i,r,Math.ceil(i.length/2));if(!s&&!i)return null;o=i?s&&s[4].length>i[4].length?s:i:s;return t.length>e.length?(s=o[0],i=o[1],r=o[2],a=o[3]):(r=o[0],a=o[1],s=o[2],i=o[3]),[s,i,r,a,o[4]]}(t,e))return i=o[1],r=o[3],n=o[4],o=fv(o[0],o[2]),i=fv(i,r),o.concat([[0,n]],i);t:{n=t.length;for(var i=e.length,r=Math.ceil((n+i)/2),o=2*r,a=Array(o),s=Array(o),u=0;u<o;u++)a[u]=-1,s[u]=-1;a[r+1]=0,s[r+1]=0;for(var u=n-i,l=!!(u%2),h=0,c=0,f=0,p=0,d=0;d<r;d++){for(var b=-d+h;b<=d-c;b+=2){for(var g,v=r+b,m=(g=b==-d||b!=d&&a[v-1]<a[v+1]?a[v+1]:a[v-1]+1)-b;g<n&&m<i&&t.charAt(g)==e.charAt(m);)g++,m++;if(a[v]=g,g>n)c+=2;else if(m>i)h+=2;else if(l&&(0<=(v=r+u-b)&&v<o&&-1!=s[v])){var w=n-s[v];if(g>=w){n=pv(t,e,g,m);break t}}}for(b=-d+f;b<=d-p;b+=2){for(v=r+b,w=b==-d||b!=d&&s[v-1]<s[v+1]?s[v+1]:s[v-1]+1,g=w-b;w<n&&g<i&&t.charAt(n-w-1)==e.charAt(i-g-1);)w++,g++;if(s[v]=w,w>n)p+=2;else if(g>i)f+=2;else if(!l&&(0<=(v=r+u-b)&&v<o&&-1!=a[v]&&(g=a[v],m=r+g-v,g>=(w=n-w)))){n=pv(t,e,g,m);break t}}}n=[[-1,t],[1,e]]}return n}(t=t.substring(0,t.length-i),e=e.substring(0,e.length-i)),r&&t.unshift([0,r]),o&&t.push([0,o]),function t(e){e.push([0,""]);for(var n,i=0,r=0,o=0,a="",s="";i<e.length;)switch(e[i][0]){case 1:o++,s+=e[i][1],i++;break;case-1:r++,a+=e[i][1],i++;break;case 0:1<r+o?(r&&o&&((n=dv(s,a))&&(0<i-r-o&&0==e[i-r-o-1][0]?e[i-r-o-1][1]+=s.substring(0,n):(e.splice(0,0,[0,s.substring(0,n)]),i++),s=s.substring(n),a=a.substring(n)),(n=bv(s,a))&&(e[i][1]=s.substring(s.length-n)+e[i][1],s=s.substring(0,s.length-n),a=a.substring(0,a.length-n))),r?o?e.splice(i-r-o,r+o,[-1,a],[1,s]):e.splice(i-r,r+o,[-1,a]):e.splice(i-o,r+o,[1,s]),i=i-r-o+(r?1:0)+(o?1:0)+1):i&&0==e[i-1][0]?(e[i-1][1]+=e[i][1],e.splice(i,1)):i++,r=o=0,s=a=""}""===e[e.length-1][1]&&e.pop();r=!1;for(i=1;i<e.length-1;)0==e[i-1][0]&&0==e[i+1][0]&&(e[i][1].substring(e[i][1].length-e[i-1][1].length)==e[i-1][1]?(e[i][1]=e[i-1][1]+e[i][1].substring(0,e[i][1].length-e[i-1][1].length),e[i+1][1]=e[i-1][1]+e[i+1][1],e.splice(i-1,1),r=!0):e[i][1].substring(0,e[i+1][1].length)==e[i+1][1]&&(e[i-1][1]+=e[i+1][1],e[i][1]=e[i][1].substring(e[i+1][1].length)+e[i+1][1],e.splice(i+1,1),r=!0)),i++;r&&t(e)}(t),null!=n&&(t=function(t,e){var n;t:{var i=t;if(0!==e){var r=0;for(n=0;n<i.length;n++){var o=i[n];if(-1===o[0]||0===o[0]){var a=r+o[1].length;if(e===a){n=[n+1,i];break t}if(e<a){i=i.slice(),a=e-r,r=[o[0],o[1].slice(0,a)],o=[o[0],o[1].slice(a)],i.splice(n,1,r,o),n=[n+1,i];break t}r=a}}throw Error("cursor_pos is out of bounds!")}n=[0,i]}return i=n[1],n=n[0],r=i[n],o=i[n+1],null==r||0!==r[0]?t:null!=o&&r[1]+o[1]===o[1]+r[1]?(i.splice(n,2,o,r),gv(i,n,2)):null!=o&&0===o[1].indexOf(r[1])?(i.splice(n,2,[o[0],r[1]],[0,r[1]]),0<(r=o[1].slice(r[1].length)).length&&i.splice(n+2,0,[o[0],r]),gv(i,n,3)):t}(t,n)),function(t){function e(t){return 55296<=t.charCodeAt(t.length-1)&&56319>=t.charCodeAt(t.length-1)}function n(t){return 56320<=t.charCodeAt(0)&&57343>=t.charCodeAt(0)}for(var i=!1,r=2;r<t.length;r+=1)0===t[r-2][0]&&e(t[r-2][1])&&-1===t[r-1][0]&&n(t[r-1][1])&&1===t[r][0]&&n(t[r][1])&&(i=!0,t[r-1][1]=t[r-2][1].slice(-1)+t[r-1][1],t[r][1]=t[r-2][1].slice(-1)+t[r][1],t[r-2][1]=t[r-2][1].slice(0,-1));if(!i)return t;for(i=[],r=0;r<t.length;r+=1)0<t[r][1].length&&i.push(t[r]);return i}(t)}function pv(t,e,n,i){var r=t.substring(n),o=e.substring(i);return t=fv(t.substring(0,n),e.substring(0,i)),r=fv(r,o),t.concat(r)}function dv(t,e){if(!t||!e||t.charAt(0)!=e.charAt(0))return 0;for(var n=0,i=Math.min(t.length,e.length),r=i,o=0;n<r;)t.substring(o,r)==e.substring(o,r)?o=n=r:i=r,r=Math.floor((i-n)/2+n);return r}function bv(t,e){if(!t||!e||t.charAt(t.length-1)!=e.charAt(e.length-1))return 0;for(var n=0,i=Math.min(t.length,e.length),r=i,o=0;n<r;)t.substring(t.length-r,t.length-o)==e.substring(e.length-r,e.length-o)?o=n=r:i=r,r=Math.floor((i-n)/2+n);return r}function gv(t,e,n){for(n=e+n-1;0<=n&&n>=e-1;n--)if(n+1<t.length){var i=t[n],r=t[n+1];i[0]===r[1]&&t.splice(n,2,[i[0],i[1]+r[1]])}return t}function vv(t){return t.reduce(function(t,e){return e[0]===fv.b?t:t+e[1]},"")}function mv(t,e,n){var i=0,r=0;return t.some(function(t){for(var o=0;o<t[1].length;o++){switch(t[0]*n){case fv.f:i++;break;case fv.b:i--,r++;break;case fv.g:r++}if(r>e)return!0}return!1}),Math.max(Math.min(e,r-1)+i,0)}function wv(t,e,n,i,r){Jh.call(this,t,e,"block-end",null,n,r),this.g=i}function yv(t,e,n,i){Qh.call(this,t,"block-end",e,n,i)}function xv(t){this.f=t}function Ev(){}function Sv(t){return t.reduce(function(t,e){return t+e},0)/t.length}function kv(t,e){this.g(t,"end",e)}function Cv(t,e){this.g(t,"start",e)}function Tv(t,e,n){n||(n=this.j.now());var i,r=this.h[t];for(r||(r=this.h[t]=[]),t=r.length-1;0<=t&&(!(i=r[t])||i[e]);t--)i=null;i||(i={},r.push(i)),i[e]=n}function Av(){}function _v(t){this.j=t,this.h={},this.registerEndTiming=this.b=this.registerStartTiming=this.f=this.g=Av}g(sv,Error),Kg.prototype.fc=function(){return this.b?this.b.fc(this.f):null},Kg.prototype.ta=function(t){var e=this;if("complete"!==this.u&&"next"!==t.where&&Wg(this,"loading"),"string"==typeof t.where){switch(t.where){case"next":t=this.$.ub?this.b.Gg:this.b.nextPage;break;case"previous":t=this.$.ub?this.b.Jg:this.b.Oe;break;case"last":t=this.b.Ag;break;case"first":t=this.b.xg;break;default:return ai(!0)}if(t){var n=t;t=function(){return n.call(e.b,e.f,!e.Rb)}}}else if("number"==typeof t.epage){var i=t.epage;t=function(){return Ug(e.b,i,!e.Rb)}}else{if("string"!=typeof t.url)return ai(!0);var r=t.url;t=function(){return Vg(e.b,r,e.f,!e.Rb)}}var o=oi("moveTo");return t.call(e.b).then(function(t){var n;if(t){e.f=t.position;var i=oi("moveTo.showCurrent");n=i.result(),iv(e,t.page,!e.Rb).then(function(){ev(e).Ga(i)})}else n=ai(!0);n.then(function(t){"loading"===e.u&&Wg(e,"interactive"),xi(o,t)})}),o.result()},Kg.prototype.Uc=function(t){var e=!!t.autohide;t=t.v;var n=this.b.Rc(),i=e!=this.b.wf&&"hide"!=t;if(n){if("show"==t&&!i)return ai(!0)}else if("hide"==t)return ai(!0);if(n&&"show"!=t)return this.b.Td(),ai(!0);var r=this,o=oi("showTOC");return this.b.Uc(e).then(function(t){t&&(i&&(t.Pb={}),e&&t.addEventListener("hyperlink",function(){r.b.Td()},!1),t.addEventListener("hyperlink",r.F,!1)),xi(o,!0)}),o.result()},fv.f=1,fv.b=-1,fv.g=0,g(wv,Jh),wv.prototype.df=function(t){return!(t instanceof wv)},g(yv,Qh),yv.prototype.Ia=function(){return 1/0},yv.prototype.f=function(t){return t instanceof wv||this.Ia()<t.Ia()},xv.prototype.b=function(t){return!hl(t=El(t),this.f.b)},(n=Ev.prototype).Ff=function(t){return"footnote"===t.Ca},n.Ef=function(t){return t instanceof wv},n.Lf=function(t,e){var n="region",i=sc(e,n);return Ec(sc(e,"page"),i)&&(n="page"),n=new wv(i=El(t),n,e.h,t.Y,t.N),e.le(n),ai(n)},n.Mf=function(t,e,n,i){return new yv(t[0].ja.W,t,n,i)},n.xf=function(t,e){return sc(e,t.W).b.filter(function(t){return t instanceof yv})[0]||null},n.Bf=function(t,e,n){t.$f=!0,t.ve=!1;var i=t.element,r=n.j;e=e.b;var o=n.j.w&&"rtl"===n.j.w.direction,a={},s=r.B._pseudos;if(e=ld(r,e,o,r.B,a),s&&s.before){var u={},l=Cd(r,"http://www.w3.org/1999/xhtml","span");rd(l,"before"),i.appendChild(l),ld(r,e,o,s.before,u),delete u.content,Ed(r,l,u)}delete a.content,Ed(r,i,a),t.b=e,Uf(t,i),(r=Id(n.f,i))&&(t.marginLeft=rf(r.marginLeft),t.Z=rf(r.borderLeftWidth),t.I=rf(r.paddingLeft),t.marginTop=rf(r.marginTop),t.ca=rf(r.borderTopWidth),t.J=rf(r.paddingTop),t.marginRight=rf(r.marginRight),t.Za=rf(r.borderRightWidth),t.Y=rf(r.paddingRight),t.marginBottom=rf(r.marginBottom),t.Ba=rf(r.borderBottomWidth),t.S=rf(r.paddingBottom)),(n=Id(n.f,i))&&(t.width=rf(n.width),t.height=rf(n.height))},n.og=function(t,e){switch(t.g){case xn:!function t(e,n,i){i===e.W?e.D.push(n):t(ic(e,i),n,i)}(e,new xv(t),t.W)}},Ic.push(new Ev),_v.prototype.l=function(){var t=this.h,e="";Object.keys(t).forEach(function(n){for(var i=t[n],r=i.length,o=0;o<r;o++){var a=i[o];e+=n,1<r&&(e+="("+o+")"),e+=" => start: "+a.start+", end: "+a.end+", duration: "+(a.end-a.start)+"\n"}}),C.g(e)},_v.prototype.u=function(){this.registerEndTiming=this.b=this.registerStartTiming=this.f=this.g=Av},_v.prototype.B=function(){this.g=Tv,this.registerStartTiming=this.f=Cv,this.registerEndTiming=this.b=kv};var Nv,Ov={now:Date.now},Iv=Nv=new _v(window&&window.performance||Ov);function Pv(t){return(t=t.C)&&t instanceof Mv?t:null}function Fv(t,e){t&&function(t,e){for(var n=t;n;n=n.parent){var i=n.C;i&&i instanceof Mv&&!kl(n,i)&&e(i,n)}}(t.K?t.parent:t,function(t,n){t instanceof _m||e.B.push(new Zv(n))})}function Mv(t,e){this.parent=t,this.j=e,this.b=null}function Dv(t,e){var n=Lv(t,e);return n?n.A:null}function Lv(t,e){do{if(!kl(e,t)&&e.M===t.j)return e}while(e=e.parent);return null}function jv(t,e){t.b||Rv.some(function(e){return e.root===t.j&&(t.b=e.elements,!0)})||(t.b=new zv(e,t.j),Rv.push({root:t.j,elements:t.b}))}Tv.call(Iv,"load_vivliostyle","start",void 0),b("vivliostyle.profile.profiler",Iv),_v.prototype.printTimings=_v.prototype.l,_v.prototype.disable=_v.prototype.u,_v.prototype.enable=_v.prototype.B,Mv.prototype.We=function(){return"Repetitive elements owner formatting context (vivliostyle.repetitiveelements.RepetitiveElementsOwnerFormattingContext)"},Mv.prototype.ff=function(t,e){return e},Mv.prototype.Ye=function(){},Mv.prototype.Xe=function(){};var Rv=[];function zv(t,e){this.N=t,this.yc=this.zc=this.u=this.D=this.l=this.B=null,this.G=this.I=0,this.Bc=this.Cc=!1,this.gd=this.re=!0,this.j=!1,this.Z=e,this.J=this.g=null,this.S=[],this.Y=[]}function Bv(t,e){t.zc||(t.zc=cl(e),t.B=e.M,t.D=e.A)}function Uv(t,e){t.yc||(t.yc=cl(e),t.l=e.M,t.u=e.A)}function Vv(t,e,n,i,r){var o=n.A,a=n.A.ownerDocument.createElement("div");o.appendChild(a);var s=new zh(r,a,n),u=s.za.g;return s.za.g=null,t.h=!0,Bh(s,new Cl(e)).ea(function(){if(t.h=!1,o.removeChild(a),o)for(;a.firstChild;){var e=a.firstChild;a.removeChild(e),e.setAttribute("data-adapt-spec","1"),i?o.insertBefore(e,i):o.appendChild(e)}return s.za.g=u,ai(!0)})}function Hv(t,e){return $v(e,t.Y,function(){return Gv(t.J,e,!1)})}function $v(t,e,n){var i=e.filter(function(e){return e.w.M===t.M&&e.w.K===t.K});return 0<i.length?i[0].result:(n=n(t),e.push({w:t,result:n}),n)}function Gv(t,e,n){for(var i=[];t;t=t.parentNode){if(e.M===t)return e.K;i.push(t)}for(t=e.M;t;t=t.parentNode){var r=i.indexOf(t);if(0<=r)return!!n&&!r;for(r=t;r;r=r.previousElementSibling)if(i.includes(r))return!0}return e.K}function Kv(t){return!!(!t.Bc&&t.re&&t.yc||!t.Cc&&t.gd&&t.zc)}function Xv(t){this.C=t}function Wv(t){this.C=t}function Yv(t){this.C=t}function Jv(t){this.C=t}function Zv(t){this.w=Lv(t.C,t)}function qv(t){Uh.call(this),this.C=t}function Qv(t){this.C=t}function tm(){}function em(t){for(var e=[],n=t;n;n=n.Md)n.B.forEach(function(n){if(n instanceof Zv){var i=n.w.C.b;e.push(i)}n instanceof pm&&(i=new dm(n.w,n.f),e.push(i)),n instanceof ew&&iw(n,t).forEach(function(t){e.push(t)})});return e}zv.prototype.b=function(t){var e=0;return t&&!this.f(t)?e:((!this.Bc||t&&Hv(this,t))&&(e+=this.G),this.Cc||(e+=this.I),e)},zv.prototype.F=function(t){var e=0;return t&&!this.f(t)?e:(t&&Hv(this,t)&&(e+=this.G),this.gd||(e+=this.I),e)},zv.prototype.f=function(t){var e=this;return $v(t,this.S,function(){return Gv(e.Z,t,!0)})},Xv.prototype.b=function(){},Xv.prototype.f=function(t){return!!t},Xv.prototype.g=function(t,e,n,i){return(t=this.C.b)&&!t.j&&(t.D&&(t.I=Vf(t.D,n,t.N),t.D=null),t.u&&(t.G=Vf(t.u,n,t.N),t.u=null),t.j=!0),i},Wv.prototype.b=function(){},Wv.prototype.f=function(){return!0},Wv.prototype.g=function(t,e,n,i){return i},g(Yv,Xv),Yv.prototype.b=function(t,e){Xv.prototype.b.call(this,t,e);var n=oi("BlockLayoutProcessor.doInitialLayout");return jh(new Lh(new Qv(t.C),e.j),t).Ga(n),n.result()},Yv.prototype.f=function(){return!1},g(Jv,Wv),Jv.prototype.b=function(t,e){return kl(t,this.C)||t.K||e.B.unshift(new Zv(t)),function(t,e){var n=t.C,i=oi("doLayout");return bm(yd(e.j,t,!1),e).then(function(t){var r=t;Ci(function(t){for(var i={};r;){if(i.Oa=!0,_f(e,r,!1).then(function(i){return function(o){r=o,kc(e.l)?Ni(t):e.g?Ni(t):r&&e.u&&r&&r.xa?Ni(t):r&&r.K&&r.M==n.j?Ni(t):i.Oa?i.Oa=!1:_i(t)}}(i)),i.Oa)return void(i.Oa=!1);i={Oa:i.Oa}}Ni(t)}).then(function(){xi(i,r)})}),i.result()}(t,e)},(n=Zv.prototype).ke=function(t,e){var n=this.w.C.b;return!(n&&!Df(this.w.A)&&Kv(n))||!(e&&!t||t&&t.xa)},n.nd=function(){var t=this.w.C.b;return!(!t||!Kv(t))&&(!t.Bc&&t.re&&t.yc?t.Bc=!0:!t.Cc&&t.gd&&t.zc&&(t.Cc=!0),!0)},n.cd=function(t,e,n,i){(n=this.w.C.b)&&t&&i.u&&(!e||Hv(n,e))&&(n.Bc=!1,n.re=!1)},n.Na=function(t,e){var n=this.w.C,i=this.w.C.b;if(!i)return ai(!0);var r=this.w;return function(t,e,n){var i=t.b;return i&&(t=Lv(t,e)).A?!i.zc||i.Cc?ai(!0):Vv(i,i.zc,t,t.A.firstChild,n):ai(!0)}(n,r,e).ea(function(){return function(t,e,n){var i=t.b;return i&&!i.Bc&&(t=Lv(t,e)).A?!i.yc||i.Bc?ai(!0):Vv(i,i.yc,t,null,n):ai(!0)}(n,r,e).ea(function(){return i.Cc=i.Bc=!1,i.re=!0,i.gd=!0,ai(!0)})})},n.se=function(t){return t instanceof Zv&&this.w.C===t.w.C},n.ue=function(){return 10},g(qv,Uh),qv.prototype.qf=function(t){var e=this.C.b;return kl(t,this.C)||e.j?(kl(t,this.C)||t.K||!e||(e.Cc=!1,e.gd=!1),new Jv(this.C)):new Yv(this.C)},g(Qv,Rh),Qv.prototype.Cd=function(t){var e=this.C,n=t.w,i=e.b;if(n.parent&&e.j===n.parent.M){switch(n.u){case"header":if(!i.zc)return Bv(i,n),ai(!0);n.u="none";break;case"footer":if(!i.yc)return Uv(i,n),ai(!0);n.u="none"}i.g||(i.g=n.M)}return Rh.prototype.Cd.call(this,t)},Qv.prototype.tc=function(t){var e=this.C,n=t.w;return n.M===e.j&&(e.b.J=t.ld&&t.ld.M,t.Vb=!0),"header"===n.u||"footer"===n.u?ai(!0):Rh.prototype.tc.call(this,t)},g(tm,Rf),tm.prototype.je=function(t,e,n){if(Gc(e,t))return Af(e,t);var i=t.C;return Dv(i,t)?(n&&Fv(t.parent,e),kl(t,i)?Rf.prototype.je.call(this,t,e,n):Vh(new qv(i),t,e)):qc(e,t)},tm.prototype.Ze=function(t){var e=Pv(t).b;return!!e&&(e.h||e.B!==t.M&&e.l!==t.M||t.A.parentNode.removeChild(t.A),!1)},tm.prototype.Na=function(t,e,n,i){return Rf.prototype.Na.call(this,t,e,n,i)},tm.prototype.Fd=function(t,e,n,i){Rf.prototype.Fd(t,e,n,i)};var nm=new tm;function im(t,e){if(!t||!t.J||t.K||Gc(e,t))return ai(t);var n=t.J;return fm(n,e,t).ea(function(i){var r=t.A;r.appendChild(i);var o=Vf(i,e,t.b);return r.removeChild(i),e.B.push(new pm(t,n,o)),ai(t)})}function rm(t,e,n){this.b=t,this.f=e,this.Nb=n}function om(t){this.b=t}function am(t){this.b=t}function sm(t,e,n){um(n,function(n){Cu(t,n,e)})}function um(t,e){var n=t._viewConditionalStyles;n&&n.forEach(function(t){t.Cg.matches()&&e(t.Mg)})}function lm(t,e,n){var i=hm;(!i[t]||i[t].cb<=n)&&(i[t]={Sa:e,cb:n})}ei("RESOLVE_LAYOUT_PROCESSOR",function(t){return t instanceof Mv&&!(t instanceof _m)?nm:null}),rm.prototype.matches=function(){var t=hm[this.b];return!!t&&null!=t.Sa&&ds(t.Sa,this.f,this.Nb)},om.prototype.matches=function(){return this.b.some(function(t){return t.matches()})},am.prototype.matches=function(){return this.b.every(function(t){return t.matches()})};var hm={};function cm(t,e){this.b=e,this.M=t}function fm(t,e,n){var i=n.A.ownerDocument.createElement("div"),r=new zh(e,i,n),o=r.za.g;return r.za.g=null,Bh(r,function(t){var e=nd.createElementNS("http://www.w3.org/1999/xhtml","div");return rd(e,"after-if-continues"),t=new dl(t.M,e,null,null,null,3,t.b),new Cl({pa:[{node:e,kb:t.type,wa:t,Ja:null,Fa:null}],na:0,K:!1,Qa:null})}(t)).ea(function(){t.b.f["after-if-continues"]=!1,r.za.g=o;var e=i.firstChild;return R(e,"display","block"),ai(e)})}function pm(t,e,n){this.w=t,this.b=e,this.f=n}function dm(t,e){this.w=t,this.g=e}function bm(t,e){return t.ea(function(t){return im(t,e)})}function gm(t,e,n){var i=t.w,r=i.display,o=i.parent?i.parent.display:null,a=!1;if("inline-table"===o&&!(i.C instanceof _m))for(var s=i.parent;s;s=s.parent)if(s.C instanceof _m){a=s.C===e;break}return a||"table-row"===r&&!vm(o)&&"table"!==o&&"inline-table"!==o||"table-cell"===r&&"table-row"!==o&&!vm(o)&&"table"!==o&&"inline-table"!==o||i.C instanceof _m&&i.C!==e?qc(n,i).ea(function(e){return t.w=e,ai(!0)}):null}function vm(t){return"table-row-group"===t||"table-header-group"===t||"table-footer-group"===t}function mm(t,e){this.rowIndex=t,this.M=e,this.b=[]}function wm(t,e,n){this.rowIndex=t,this.Ra=e,this.g=n,this.f=n.colSpan||1,this.rowSpan=n.rowSpan||1,this.height=0,this.b=null}function ym(t,e,n){this.rowIndex=t,this.Ra=e,this.bc=n}function xm(t,e,n){this.g=t,this.b=n,this.lc=new zh(t,e,n),this.f=!1}function Em(t,e){this.A=t,this.b=e}function Sm(t,e,n,i){Uc.call(this,t,e,n,i),this.C=t.C,this.rowIndex=this.l=null}function km(t){return t.l||(t.l=function(t){return Pm(t.C,null!=t.rowIndex?t.rowIndex:t.rowIndex=Om(t.C,t.position.M)).map(t.C.Sd,t.C)}(t).map(function(t){return t.ec()})),t.l}function Cm(t,e,n){this.rowIndex=t,this.j=e,this.C=n,this.h=null}function Tm(t){return t.h||(t.h=Am(t).map(function(t){return t.ec()})),t.h}function Am(t){return Im(t.C,t.rowIndex).map(t.C.Sd,t.C)}function _m(t,e){Mv.call(this,t,e),this.F=e,this.u=!1,this.G=-1,this.N=0,this.I=[],this.J=this.B=null,this.S=0,this.g=[],this.l=[],this.f=[],this.D=null,this.h=[],this.b=null}function Nm(t,e){var n=t.l[e];return n||(n=t.l[e]=[]),n}function Om(t,e){return t.g.findIndex(function(t){return e===t.M})}function Im(t,e){return Nm(t,e).reduce(function(t,e){return e.bc!==t[t.length-1]?t.concat(e.bc):t},[])}function Pm(t,e){return Im(t,e).filter(function(t){return t.rowIndex+t.rowSpan-1>e})}function Fm(t){return 0>t.G&&(t.G=Math.max.apply(null,t.g.map(function(t){return t.b.reduce(function(t,e){return t+e.f},0)}))),t.G}function Mm(t,e){t.B.forEach(function(t){t instanceof Zv&&e.push(t.w.C.b),t instanceof ew&&iw(t,null).forEach(function(t){e.push(t)})})}function Dm(t){this.f=t}function Lm(t,e,n){var i=0;return t.f.forEach(function(t){t=zc(e,t),i=Math.max(i,n(t))}),i}function jm(t,e){this.C=t,this.h=e,this.rowIndex=-1,this.Ra=0,this.g=!1,this.f=[]}function Rm(t,e){var n=e.w;n&&n.A&&!vf(n)&&t.f.push(n.clone())}function zm(t,e){0<t.f.length&&pf(t.h,e.w,t.f),t.f=[]}function Bm(t,e){this.gc=!0,this.C=t,this.f=e,this.l=!1,this.b=-1,this.g=0,this.u=e.u,e.u=!1}(n=pm.prototype).ke=function(t,e){return!(e&&!t||t&&t.xa)},n.nd=function(){return!1},n.cd=function(){},n.Na=function(t,e){var n=this;return new dm(this.w,this.f).f(t)?fm(this.b,e,this.w).ea(function(t){return n.w.A.appendChild(t),ai(!0)}):ai(!0)},n.se=function(t){return t instanceof pm&&this.b==t.b},n.ue=function(){return 9},dm.prototype.b=function(t){return this.f(t)?this.g:0},dm.prototype.F=function(t){return this.b(t)},dm.prototype.f=function(t){if(!t)return!1;var e=t.wa?t.wa.oa:t.M;if(e===this.w.M)return!!t.K;for(t=e.parentNode;t;t=t.parentNode)if(t===this.w.M)return!0;return!1},xm.prototype.ec=function(){var t=this.b.A,e=this.b.Z;"middle"!==e&&"bottom"!==e||R(t,"vertical-align","top");var n=this.lc.ec(!0);return R(t,"vertical-align",e),n},g(Sm,Uc),Sm.prototype.f=function(t,e){var n=Uc.prototype.f.call(this,t,e);return e<this.b()?null:km(this).every(function(t){return!!t.w})?n:null},Sm.prototype.b=function(){var t=Uc.prototype.b.call(this);return km(this).forEach(function(e){t+=e.Eb.b()}),t},g(Cm,Rc),Cm.prototype.f=function(t,e){if(e<this.b())return null;var n=Am(this),i=Tm(this),r=i.every(function(t){return!!t.w})&&i.some(function(t,e){var i=n[e].lc,r=t.w,o=i.tf[0];return!(o.A===r.A&&o.K===r.K&&o.na===r.na||hl(El(r),i.za.xb))});return this.j.xa=i.some(function(t){return t.w&&t.w.xa}),r?this.j:null},Cm.prototype.b=function(){var t=this.C,e=0;return function(t){return Math.min.apply(null,t.b.map(function(t){return t.height}))}(t.g[this.rowIndex])>t.N/2||(e+=10),Tm(this).forEach(function(t){e+=t.Eb.b()}),e},g(_m,Mv),(n=_m.prototype).We=function(){return"Table formatting context (vivliostyle.table.TableFormattingContext)"},n.ff=function(t,e){if(!e)return e;switch(t.display){case"table-row":return!this.h.length;case"table-cell":return!this.h.some(function(e){return e.Id.pa[0].node===t.M});default:return e}},n.Sd=function(t){return this.f[t.rowIndex]&&this.f[t.rowIndex][t.Ra]},n.Ye=function(){return[].concat(this.h)},n.Xe=function(t){this.h=t},Dm.prototype.b=function(t){return Lm(this,t,function(t){return t.current})},Dm.prototype.F=function(t){return Lm(this,t,function(t){return t.He})},g(jm,Rh),(n=jm.prototype).Cd=function(t){var e=this.C;if(n=gm(t,e,this.h))return n;zm(this,t);var n=t.w,i=e.b;switch(n.display){case"table":e.S=n.sa;break;case"table-caption":e.I.push(new Em(n.A,n.la));break;case"table-header-group":return i.zc||(this.b=!0,Bv(i,n)),ai(!0);case"table-footer-group":return i.yc||(this.b=!0,Uv(i,n)),ai(!0);case"table-row":this.b||(this.g=!0,this.rowIndex++,this.Ra=0,e.g[this.rowIndex]=new mm(this.rowIndex,n.M),i.g||(i.g=n.M))}return Rh.prototype.Cd.call(this,t)},n.tc=function(t){var e=this.C,n=t.w,i=n.display,r=this.h.f;if(zm(this,t),n.M===e.F)i=Id(r,Dv(e,n)),e.N=parseFloat(i[e.u?"height":"width"]),e.b.J=t.ld&&t.ld.M,t.Vb=!0;else switch(i){case"table-header-group":case"table-footer-group":if(this.b)return this.b=!1,ai(!0);break;case"table-row":this.b||(e.D=n.A,this.g=!1);break;case"table-cell":if(!this.b){this.g||(this.rowIndex++,this.Ra=0,this.g=!0),i=this.rowIndex,n=new wm(this.rowIndex,this.Ra,n.A),(r=e.g[i])||(e.g[i]=new mm(i,null),r=e.g[i]),r.b.push(n);r=i+n.rowSpan;for(var o=Nm(e,i),a=0;o[a];)a++;for(;i<r;i++){o=Nm(e,i);for(var s=a;s<a+n.f;s++){var u=o[s]=new ym(i,s,n);n.b||(n.b=u)}}this.Ra++}}return Rh.prototype.tc.call(this,t)},n.uf=function(t){Rm(this,t)},n.Df=function(t){Rm(this,t)},n.kg=function(t){Rm(this,t)},n.Cf=function(t){Rm(this,t)},g(Bm,Rh);var Um={"table-caption":!0,"table-column-group":!0,"table-column":!0};function Vm(t,e,n,i){var r=e.rowIndex,o=e.Ra,a=n.A;if(1<e.f){R(a,"box-sizing","border-box");for(var s=t.C.J,u=0,l=0;l<e.f;l++)u+=s[e.b.Ra+l];u+=t.C.S*(e.f-1),R(a,t.C.u?"height":"width",u+"px")}return e=a.ownerDocument.createElement("div"),a.appendChild(e),n=new xm(t.f,e,n),(a=(t=t.C).f[r])||(a=t.f[r]=[]),a[o]=n,1===i.f.pa.length&&i.f.K&&(n.f=!0),Bh(n.lc,i).Hc(!0)}function Hm(t,e){if(t.j||t.h)return ai(!0);var n=e.w,i=t.C;return 0>t.b?t.b=Om(i,n.M):t.b++,t.g=0,t.l=!0,function(t,e){var n=t.C,i=function(t){var e=t.C.h;if(!e.length)return[];var n=[],i=0;do{var r=e[i],o=r.bc.rowIndex;if(o<t.b){var a=n[o];a||(a=n[o]=[]),a.push(r),e.splice(i,1)}else i++}while(i<e.length);return n}(t),r=i.reduce(function(t){return t+1},0);if(0===r)return ai(!0);var o=t.f.j,a=e.w;a.A.parentNode.removeChild(a.A);var s=oi("layoutRowSpanningCellsFromPreviousFragment"),u=ai(!0),l=0,h=[];return i.forEach(function(t){var e=this;u=u.ea(function(){var i=fl(t[0].Id.pa[1],a.parent);return md(o,i,!1).ea(function(){function a(t){for(;u<t;){if(!h.includes(u)){var e=i.A.ownerDocument.createElement("td");R(e,"padding","0"),i.A.appendChild(e)}u++}}var s=ai(!0),u=0;return t.forEach(function(t){var e=this;s=s.ea(function(){var n=t.bc;a(n.b.Ra);var s=t.Id,c=fl(s.pa[0],i);return c.na=s.na,c.K=s.K,c.Sa=s.pa[0].Sa+1,md(o,c,!1).ea(function(){for(var i=t.Hf,o=0;o<n.f;o++)h.push(u+o);return u+=n.f,Vm(e,n,c,i).ea(function(){return c.A.rowSpan=n.rowIndex+n.rowSpan-e.b+r-l,ai(!0)})})})},e),s.ea(function(){return a(Fm(n)),l++,ai(!0)})})})},t),u.then(function(){md(o,a,!0,e.Gd).then(function(){xi(s,!0)})}),s.result()}(t,e).ea(function(){return function(t){t.C.g[t.b].b.forEach(function(e){var n=t.C.h[e.Ra];n&&n.bc.b.Ra==e.b.Ra&&(e=n.Id.pa[0],lm(n=Pu(t.f.j.da,e.node),e.Sa+1,1))})}(t),kf(t.f,e.ld,null,!0,e.dd)&&!Pm(i,t.b-1).length&&(t.f.u=t.u,n.xa=!0,e.Vb=!0),ai(!0)})}Bm.prototype.lg=function(t){if(e=gm(t,this.C,this.f))return e;var e=t.w,n=this.C.b,i=e.display;return"table-header-group"===i&&n&&n.B===e.M?(this.j=!0,ai(!0)):"table-footer-group"===i&&n&&n.l===e.M?(this.h=!0,ai(!0)):"table-row"===i?Hm(this,t):"table-cell"===i?function(t,e){if(t.j||t.h)return ai(!0);var n=e.w;t.l||(0>t.b?t.b=0:t.b++,t.g=0,t.l=!0);var i=t.C.g[t.b].b[t.g],r=yl(n).modify();r.K=!0,e.w=r;var o=oi("startTableCell");return function(t,e){var n=t.C.h[0];return!!n&&n.bc.b.Ra===e}(t,i.b.Ra)?(r=t.C.h.shift(),n.Sa=r.Id.pa[0].Sa+1,r=ai(r.Hf)):r=Zc(t.f,n,e.Gd).ea(function(t){return t.A&&n.A.removeChild(t.A),ai(new Cl(cl(t)))}),r.then(function(r){Vm(t,i,n,r).then(function(){t.tc(e),t.g++,xi(o,!0)})}),o.result()}(this,t):ai(!0)},Bm.prototype.Nf=function(t){return"table-row"===(t=t.w).display&&(this.l=!1,this.j||this.h||((t=yl(t).modify()).K=!1,this.f.N.push(new Cm(this.b,t,this.C)))),ai(!0)},Bm.prototype.tc=function(t){var e=t.w,n=this.C.b,i=e.display;if("table-header-group"===i?n&&!n.h&&n.B===e.M?(this.j=!1,e.A.parentNode.removeChild(e.A)):R(e.A,"display","table-row-group"):"table-footer-group"===i&&(n&&!n.h&&n.l===e.M?(this.h=!1,e.A.parentNode.removeChild(e.A)):R(e.A,"display","table-row-group")),i&&Um[i])e.A.parentNode.removeChild(e.A);else{if(e.M!==this.C.F)return Rh.prototype.tc.call(this,t);e.xa=Sf(this.f,e,null),this.f.u=this.u,t.Vb=!0}return ai(!0)};var $m=[];function Gm(){}function Km(t){var e=[];for(t=t.firstElementChild;t;)"colgroup"===t.localName&&e.push(t),t=t.nextElementSibling;return e}function Xm(t,e,n){var i=t.u,r=t.D;if(r){t.D=null;var o=r.ownerDocument.createDocumentFragment(),a=Fm(t);if(0<a){var s=t.J=function(t,e,n,i){for(var r=t.ownerDocument,o=r.createElement("tr"),a=[],s=0;s<e;s++){var u=r.createElement("td");o.appendChild(u),a.push(u)}return t.parentNode.insertBefore(o,t.nextSibling),e=a.map(function(t){return t=Od(i,t),n?t.height:t.width}),t.parentNode.removeChild(o),e}(r,a,i,n.f);(function(t,e,n,i){if(t.length<n){var r=i.ownerDocument.createElement("colgroup");for(e.push(r),e=t.length;e<n;e++){var o=i.ownerDocument.createElement("col");r.appendChild(o),t.push(o)}}})(r=function(t){var e=[];return t.forEach(function(t){var n=t.span;t.removeAttribute("span");for(var i=t.firstElementChild;i;){if("col"===i.localName){var r=i.span;for(i.removeAttribute("span"),n-=r;1<r--;){var o=i.cloneNode(!0);t.insertBefore(o,i),e.push(o)}e.push(i)}i=i.nextElementSibling}for(;0<n--;)i=t.ownerDocument.createElement("col"),t.appendChild(i),e.push(i)}),e}(n=Km(e)),n,a,e),r.forEach(function(t,e){R(t,i?"height":"width",s[e]+"px")}),n.forEach(function(t){o.appendChild(t.cloneNode(!0))})}t.B=o}}function Wm(t,e,n){var i=e.C;i.u=e.b,jv(i,e.b);var r=function(t){var e=$m.findIndex(function(e){return e.root===t});return(e=$m[e])?e.Og:null}(e.M);!function(t){var e=$m.findIndex(function(e){return e.root===t});0<=e&&$m.splice(e,1)}(e.M);var o=oi("TableLayoutProcessor.doInitialLayout"),a=yl(e);return jh(new Lh(new jm(e.C,n),n.j),e).then(function(t){var s=t.A,u=Od(n.f,s);u=(u=n.b?u.left:u.bottom)+(n.b?-1:1)*zc(e,em(n)).current;Kc(n,u)||r&&r.tg?(Xm(i,s,n),function(t,e){t.g.forEach(function(t){t.b.forEach(function(t){var n=Od(e,t.g);t.g=null,t.height=this.u?n.width:n.height},this)},t)}(i,n.f),xi(o,null)):(n.N.push(new qm(a)),xi(o,t))}.bind(t)),o.result()}function Ym(t,e){if(t.B&&e){var n=Km(e);n&&n.forEach(function(t){e.removeChild(t)})}}function Jm(t,e){Uh.call(this),this.g=e,this.b=t}function Zm(t,e){this.C=t,this.h=e}function qm(t){Uc.call(this,t,null,t.xa,0)}function Qm(t){this.b=t}function tw(t){this.C=t}function ew(t){Zv.call(this,t),this.b=[]}function nw(t,e){return function(t,e){var n=Number.MAX_VALUE;t&&"table-row"===t.display&&(n=Om(e,t.M)+1);for(var n=Math.min(e.f.length,n),i=[],r=0;r<n;r++)e.f[r]&&e.f[r].forEach(function(t){t&&i.push({yg:t,Eb:t.ec().w})});return i}(t,e).map(function(t){return{Kd:t.yg.lc.za.B,Eb:t.Eb}})}function iw(t,e){var n=t.w.C,i=function(t,e){if(!e)return null;var n=null,i=0;t:for(;i<t.f.length;i++)if(t.f[i])for(var r=0;r<t.f[i].length;r++)if(t.f[i][r]&&e===t.f[i][r].lc.za){n=t.g[i].b[r];break t}if(!n)return null;for(;i<t.l.length;i++)for(;r<t.l[i].length;r++){var o=t.l[i][r];if(o.bc===n)return{rowIndex:o.rowIndex,Ra:o.Ra}}return null}(n,e);return i?function(t,e){var n=[];return t.l.reduce(function(i,r,o){return o>=e.rowIndex?i:!(r=t.Sd(r[e.Ra].bc))||n.includes(r)?i:(Mm(r.lc.za,i),n.push(r),i)},[])}(n,i):function(t){var e=[];return t.g.forEach(function(n){n.b.forEach(function(n,i){e[i]||(e[i]={Jf:[],elements:[]});var r=e[i],o=t.Sd(n);o&&!r.Jf.includes(o)&&(Mm(o.lc.za,r.elements),r.Jf.push(o))})}),[new Dm(e.map(function(t){return t.elements}))]}(n)}(n=Gm.prototype).je=function(t,e,n){var i=t.C;return Dv(i,t)?(n&&Fv(t.parent,e),Vh(new Jm(i,this),t,e)):qc(e,t)},n.Kf=function(t,e,n,i){return new Sm(t,e,n,i)},n.Ze=function(){return!1},n.Af=function(){return!1},n.Na=function(t,e,n,i){var r=e.C;if("table-row"===e.display){var o,a=Om(r,e.M);if(r.h=[],(o=e.K?Pm(r,a):Im(r,a)).length){var s=oi("TableLayoutProcessor.finishBreak"),u=0;return Ci(function(t){if(u===o.length)Ni(t);else{var e=o[u++],n=r.Sd(e),i=n.ec().w,s=n.b,l=El(s),h=new Cl(El(i));r.h.push({Id:l,Hf:h,bc:e}),s=s.A,Td(n.b),a<e.rowIndex+e.rowSpan-1&&(s.rowSpan=a-e.rowIndex+1),n.f?_i(t):n.lc.Na(i,!1,!0).then(function(){var e=r.b;if(e){var o=r.u,a=n.g,s=n.lc.za.element,u=n.b.A,l=Od(a.f,u);u=af(a,u);o?R(s,"max-width",(e=l.right-a.la-e.b(i)-u.right)+"px"):R(s,"max-height",(e=a.la-e.b(i)-l.top-u.top)+"px"),R(s,"overflow","hidden")}_i(t)})}}).then(function(){Nf(t,e,!1),Td(e),r.f=[],xi(s,!0)}),s.result()}}return r.f=[],zf.Na(t,e,n,i)},n.Fd=function(t,e,n,i){Rf.prototype.Fd(t,e,n,i)},g(Jm,Uh),Jm.prototype.qf=function(t){var e=this.b.b;return e&&e.j?(t.M===this.b.F&&!t.K&&e&&(e.Cc=!1,e.gd=!1),new tw(this.b)):new Zm(this.b,this.g)},Jm.prototype.Jd=function(t){Uh.prototype.Jd.call(this,t),Ym(this.b,Dv(this.b,t))},Jm.prototype.ie=function(t,e){Uh.prototype.ie.call(this,t,e),this.b.f=[]},g(Zm,Xv),Zm.prototype.b=function(t,e){return Xv.prototype.b.call(this,t,e),Wm(this.h,t,e)},g(qm,Uc),qm.prototype.b=function(){if(!this.h)throw Error("EdgeBreakPosition.prototype.updateEdge not called");return(this.j?3:0)+(this.position.parent?this.position.parent.j:0)},qm.prototype.u=function(t){t.B.push(new Qm(this.position.M))},(n=Qm.prototype).ke=function(){return!1},n.nd=function(){return!0},n.cd=function(t,e){$m.push({root:e.M,Og:{tg:!0}})},n.Na=function(){return ai(!0)},n.se=function(t){return t instanceof Qm&&t.b===this.b},n.ue=function(){return 0},g(tw,Wv),tw.prototype.b=function(t,e){var n=this.C.b;if(n&&!Hv(n,t)){var i=new ew(t);e.B.some(function(t){return i.se(t)})||e.B.unshift(i)}return function(t,e){var n=t.C,i=Dv(n,t),r=i.firstChild;return function(t,e,n){var i=t.I;i.forEach(function(t,r){t&&(e.insertBefore(t.A,n),"top"===t.b&&(i[r]=null))})}(n,i,r),n.B&&!Km(i).length&&i.insertBefore(n.B.cloneNode(!0),r),n=new Lh(n=new Bm(n,e),e.j),i=oi("TableFormattingContext.doLayout"),jh(n,t).Ga(i),i.result()}(t,e)},g(ew,Zv),(n=ew.prototype).ke=function(t,e,n){var i=this.w.C.b;return!(i&&!n.Md&&!Df(this.w.A)&&Kv(i))||!(e&&!t||t&&t.xa)},n.nd=function(t){return!!nw(t,this.w.C).some(function(e){return e.Kd.some(function(e){return e.nd(t)})})||Zv.prototype.nd.call(this,t)},n.cd=function(t,e,n,i){var r=this.w.C;this.b=nw(e,r),this.b.forEach(function(e){e.Kd.forEach(function(r){r.cd(t,e.Eb,n,i)})}),t||(Ym(r,Dv(r,this.w)),function(t){if(t&&"table-row"===t.display&&t.A)for(;t.A.previousElementSibling;){var e=t.A.previousElementSibling;e.parentNode&&e.parentNode.removeChild(e)}}(n)),Zv.prototype.cd.call(this,t,e,n,i)},n.Na=function(t,e){var n=this,i=oi("finishBreak"),r=this.b.reduce(function(t,e){return t.concat(e.Kd.map(function(t){return{vg:t,Eb:e.Eb}}))},[]),o=0;return ki(function(){if(o<r.length){var t=r[o++];return t.vg.Na(t.Eb,e).Hc(!0)}return ai(!1)}).then(function(){xi(i,!0)}),i.result().ea(function(){return Zv.prototype.Na.call(n,t,e)})},n.se=function(t){return t instanceof ew&&this.w.C===t.w.C};var rw=new Gm;function ow(t){function e(t){return"number"==typeof t?t:null}function n(t){return"string"==typeof t?{url:t,wb:null,nc:null}:{url:t.url,wb:e(t.startPage),nc:e(t.skipPagesBefore)}}return Array.isArray(t)?t.map(n):t?[n(t)]:null}function aw(t){var e={};return Object.keys(t).forEach(function(n){var i=t[n];switch(n){case"autoResize":e.autoresize=i;break;case"pageBorderWidth":e.pageBorder=i;break;default:e[n]=i}}),e}function sw(t,e){Au=t.debug,this.g=!1,this.h=t,this.gb=new Kg(t.window||window,t.viewportElement,"main",this.wg.bind(this)),this.f={autoResize:!0,fontSize:16,pageBorderWidth:1,renderAllPages:!0,pageViewMode:"autoSpread",zoom:1,fitToScreen:!1,defaultPaperSize:void 0},e&&this.jg(e),this.b=new et,Object.defineProperty(this,"readyState",{get:function(){return this.gb.u}})}function uw(t,e,n,i,r){function o(t){if(t)return t.map(function(t){return{url:t.url||null,text:t.text||null}})}var a=o((i=i||{}).authorStyleSheet),s=o(i.userStyleSheet);r&&Object.assign(t.f,r),e=Object.assign({a:e?"loadXML":"loadPublication",userAgentRootURL:t.h.userAgentRootURL,url:ow(e)||n,document:i.documentObject,fragment:i.fragment,authorStyleSheet:a,userStyleSheet:s},aw(t.f)),t.g?t.gb.h(e):(t.g=!0,cv(t.gb,e))}ei("RESOLVE_FORMATTING_CONTEXT",function(t,e,n){return e&&n===Ln?new _m((e=t.parent)?e.C:null,t.M):null}),ei("RESOLVE_LAYOUT_PROCESSOR",function(t){return t instanceof _m?rw:null}),Array.from||(Array.from=function(t,e,n){e&&n&&(e=e.bind(n)),n=[];for(var i=t.length,r=0;r<i;r++)n[r]=e?e(t[r],r):t[r];return n}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(t,e){if(null==this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var n,i=Object(this),r=i.length>>>0,o=0;o<r;o++)if(n=i[o],t.call(e,n,o,i))return o;return-1},enumerable:!1,configurable:!1,writable:!1}),Object.assign||(Object.assign=function(t,e){return e?(Object.keys(e).forEach(function(n){t[n]=e[n]}),t):t}),(n=sw.prototype).jg=function(t){var e=Object.assign({a:"configure"},aw(t));this.gb.h(e),Object.assign(this.f,t)},n.wg=function(t){var e={type:t.t};Object.keys(t).forEach(function(n){"t"!==n&&(e[n]=t[n])}),nt(this.b,e)},n.Pg=function(t,e){this.b.addEventListener(t,e,!1)},n.Sg=function(t,e){this.b.removeEventListener(t,e,!1)},n.Bg=function(t,e,n){t||nt(this.b,{type:"error",content:"No URL specified"}),uw(this,t,null,e,n)},n.Qg=function(t,e,n){t||nt(this.b,{type:"error",content:"No URL specified"}),uw(this,null,t,e,n)},n.fc=function(){return this.gb.fc()},n.Eg=function(t,e){if("epage"===t)this.gb.h({a:"moveTo",epage:e});else{var n;t:switch(t){case"left":n="ltr"===this.fc()?"previous":"next";break t;case"right":n="ltr"===this.fc()?"next":"previous";break t;default:n=t}this.gb.h({a:"moveTo",where:n})}},n.Dg=function(t){this.gb.h({a:"moveTo",url:t})},n.Rc=function(){return this.gb.b&&this.gb.b.O&&(this.gb.b.O.Yb||this.gb.b.O.lf)?!!this.gb.b.Rc():null},n.Uc=function(t,e){this.gb.h({a:"toc",v:null==t?"toggle":t?"show":"hide",autohide:e})},n.Rg=function(t){t:{var e=this.gb;if(!e.g)throw Error("no page exists.");switch(t){case"fit inside viewport":t=av(e,e.$.ub?rv(e,e.j):e.g.f);break t;default:throw Error("unknown zoom type: "+t)}}return t},n.zg=function(){return this.gb.Z},b("vivliostyle.viewer.Viewer",sw),sw.prototype.setOptions=sw.prototype.jg,sw.prototype.addListener=sw.prototype.Pg,sw.prototype.removeListener=sw.prototype.Sg,sw.prototype.loadDocument=sw.prototype.Bg,sw.prototype.loadPublication=sw.prototype.Qg,sw.prototype.getCurrentPageProgression=sw.prototype.fc,sw.prototype.navigateToPage=sw.prototype.Eg,sw.prototype.navigateToInternalUrl=sw.prototype.Dg,sw.prototype.isTOCVisible=sw.prototype.Rc,sw.prototype.showTOC=sw.prototype.Uc,sw.prototype.queryZoomFactor=sw.prototype.Rg,sw.prototype.getPageSizes=sw.prototype.zg,b("vivliostyle.viewer.ZoomType",ov),ov.FIT_INSIDE_VIEWPORT="fit inside viewport",b("vivliostyle.viewer.PageViewMode",Gg),Gg.SINGLE_PAGE="singlePage",Gg.SPREAD="spread",Gg.AUTO_SPREAD="autoSpread",Tv.call(Nv,"load_vivliostyle","end",void 0);var lw=16,hw="ltr";function cw(t){window.adapt_command(t)}function fw(){cw({a:"moveTo",where:"ltr"===hw?"previous":"next"})}function pw(){cw({a:"moveTo",where:"ltr"===hw?"next":"previous"})}function dw(t){var e=t.key,n=t.keyIdentifier,i=t.location;"End"===e||"End"===n?(cw({a:"moveTo",where:"last"}),t.preventDefault()):"Home"===e||"Home"===n?(cw({a:"moveTo",where:"first"}),t.preventDefault()):"ArrowUp"===e||"Up"===e||"Up"===n?(cw({a:"moveTo",where:"previous"}),t.preventDefault()):"ArrowDown"===e||"Down"===e||"Down"===n?(cw({a:"moveTo",where:"next"}),t.preventDefault()):"ArrowRight"===e||"Right"===e||"Right"===n?(pw(),t.preventDefault()):"ArrowLeft"===e||"Left"===e||"Left"===n?(fw(),t.preventDefault()):"0"===e||"U+0030"===n?(cw({a:"configure",fontSize:Math.round(lw)}),t.preventDefault()):"t"===e||"U+0054"===n?(cw({a:"toc",v:"toggle",autohide:!0}),t.preventDefault()):"+"===e||"Add"===e||"U+002B"===n||"U+00BB"===n||"U+004B"===n&&i===KeyboardEvent.b?(lw*=1.2,cw({a:"configure",fontSize:Math.round(lw)}),t.preventDefault()):("-"===e||"Subtract"===e||"U+002D"===n||"U+00BD"===n||"U+004D"===n&&i===KeyboardEvent.b)&&(lw/=1.2,cw({a:"configure",fontSize:Math.round(lw)}),t.preventDefault())}function bw(t){switch(t.t){case"loaded":t=t.viewer;var e=hw=t.fc();t.ge.setAttribute("data-vivliostyle-page-progression",e),t.ge.setAttribute("data-vivliostyle-spread-view",t.$.ub),window.addEventListener("keydown",dw,!1),document.body.setAttribute("data-vivliostyle-viewer-status","complete"),(t=document.getElementById("vivliostyle-page-navigation-left")).addEventListener("click",fw,!1),(e=document.getElementById("vivliostyle-page-navigation-right")).addEventListener("click",pw,!1),[t,e].forEach(function(t){t.setAttribute("data-vivliostyle-ui-state","attention"),window.setTimeout(function(){t.removeAttribute("data-vivliostyle-ui-state")},1e3)});break;case"nav":(t=t.cfi)&&location.replace(function(t,e){var n=new RegExp("#(.*&)?"+X("f")+"=([^#&]*)"),i=t.match(n);return i?(n=i[2].length,i=i.index+i[0].length-n,t.substr(0,i)+e+t.substr(i+n)):t.match(/#/)?t+"&f="+e:t+"#f="+e}(location.href,G(t||"")));break;case"hyperlink":t.internal&&cw({a:"moveTo",url:t.href})}}return b("vivliostyle.viewerapp.main",function(t){var e,n=t&&t.fragment||I("f"),i=t&&t.pubURL||I("b"),r=t&&t.xmlURL||I("x"),o=t&&t.defaultPageWidth||I("w"),a=t&&t.defaultPageHeight||I("h"),s=t&&t.defaultPageSize||I("size"),u=t&&t.orientation||I("orientation"),l=I("spread"),h=(l=t&&t.spreadView||!!l&&"false"!=l,t&&t.viewportElement||document.body);if(t={a:i?"loadPublication":"loadXML",url:i||r,autoresize:!0,fragment:n,renderAllPages:!0,userAgentRootURL:t&&t.uaRoot||null,document:t&&t.document||null,userStyleSheet:t&&t.userStyleSheet||null,spreadView:l,pageBorder:1},o&&a)e=o+" "+a;else{switch(s){case"A5":o="148mm",a="210mm";break;case"A4":o="210mm",a="297mm";break;case"A3":o="297mm",a="420mm";break;case"B5":o="176mm",a="250mm";break;case"B4":o="250mm",a="353mm";break;case"letter":o="8.5in",a="11in";break;case"legal":o="8.5in",a="14in";break;case"ledger":o="11in",a="17in"}o&&a&&(e=s,"landscape"===u&&(e=e?e+" landscape":null,s=o,o=a,a=s))}o&&a&&(t.viewport={width:o,height:a},(s=document.createElement("style")).textContent="@page { size: "+e+"; margin: 0; }",document.head.appendChild(s)),cv(new Kg(window,h,"main",bw),t)}),e.vivliostyle}.bind(window))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(t,e,n){"use strict";var i,r=t("knockout"),o=(i=r)&&i.__esModule?i:{default:i},a="ontouchstart"in window;o.default.bindingHandlers.menuButton={init:function(t,e){o.default.unwrap(e())&&(a?(t.addEventListener("touchstart",function(){o.default.utils.toggleDomNodeCssClass(t,"hover active",!0)}),t.addEventListener("touchend",function(){o.default.utils.toggleDomNodeCssClass(t,"hover active",!1)})):(t.addEventListener("mouseover",function(){o.default.utils.toggleDomNodeCssClass(t,"hover",!0)}),t.addEventListener("mousedown",function(){o.default.utils.toggleDomNodeCssClass(t,"active",!0)}),t.addEventListener("mouseup",function(){o.default.utils.toggleDomNodeCssClass(t,"active",!1)}),t.addEventListener("mouseout",function(){o.default.utils.toggleDomNodeCssClass(t,"hover",!1),o.default.utils.toggleDomNodeCssClass(t,"active",!1),window.getSelection().removeAllRanges()})))}}},{knockout:1}],4:[function(t,e,n){"use strict";var i,r=t("knockout"),o=(i=r)&&i.__esModule?i:{default:i},a="ontouchstart"in window,s=null,u=null,l=null;o.default.bindingHandlers.swipePages={init:function(t,e){a&&o.default.unwrap(e())&&(t.addEventListener("touchstart",function(t){if(!(t.touches.length>1||window.visualViewport&&window.visualViewport.scale>1)){var e=document.getElementById("vivliostyle-viewer-viewport");e&&e.scrollWidth>e.clientWidth||(s=t.touches[0].clientX,u=t.touches[0].clientY)}}),t.addEventListener("touchmove",function(t){if(!(t.touches.length>1)&&null!==s&&null!==u){var e=t.touches[0].clientX-s,n=t.touches[0].clientY-u;Math.abs(e)>Math.abs(n)&&(l=e<0?document.getElementById("vivliostyle-page-navigation-right"):document.getElementById("vivliostyle-page-navigation-left")),Math.abs(e)+Math.abs(n)>=16&&(l&&(l.click(),o.default.utils.toggleDomNodeCssClass(l,"active",!0)),s=null,u=null)}}),t.addEventListener("touchend",function(t){l&&o.default.utils.toggleDomNodeCssClass(l,"active",!1),l=null,s=null,u=null}))}}},{knockout:1}],5:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var r,o=t("../models/message-queue"),a=(r=o)&&r.__esModule?r:{default:r},s={DEBUG:"debug",INFO:"info",WARN:"warn",ERROR:"error"},u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.logLevel=s.ERROR}return i(t,[{key:"setLogLevel",value:function(t){this.logLevel=t}},{key:"debug",value:function(t){this.logLevel===s.DEBUG&&a.default.push({type:"debug",content:t})}},{key:"info",value:function(t){this.logLevel!==s.DEBUG&&this.logLevel!==s.INFO||a.default.push({type:"info",content:t})}},{key:"warn",value:function(t){this.logLevel!==s.DEBUG&&this.logLevel!==s.INFO&&this.logLevel!==s.WARN||a.default.push({type:"warn",content:t})}},{key:"error",value:function(t){this.logLevel!==s.DEBUG&&this.logLevel!==s.INFO&&this.logLevel!==s.WARN&&this.logLevel!==s.ERROR||a.default.push({type:"error",content:t})}}]),t}();u.LogLevel=s;var l=new u;u.getLogger=function(){return l},n.default=u,e.exports=n.default},{"../models/message-queue":8}],6:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var r=i(t("vivliostyle")),o=i(t("./models/vivliostyle")),a=i(t("./vivliostyle-viewer"));o.default.setInstance(r.default),a.default.start()},{"./models/vivliostyle":12,"./vivliostyle-viewer":23,vivliostyle:2}],7:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function r(t){return t&&t.__esModule?t:{default:t}}var o=r(t("knockout")),a=r(t("../stores/url-parameters")),s=r(t("./page-style")),u=r(t("../utils/string-util"));var l=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n,i,r,u,l,h=(n=a.default.getParameter("b"),i=a.default.getParameter("x"),r=a.default.getParameter("f"),u=a.default.getParameter("style"),l=a.default.getParameter("userStyle"),{bookUrl:n[0]||null,xUrl:!n[0]&&i.length&&i[0]?i:null,fragment:r[0]||null,authorStyleSheet:u.length?u:[],userStyleSheet:l.length?l:[]});this.bookUrl=o.default.observable(h.bookUrl||""),this.xUrl=o.default.observable(h.xUrl||null),this.fragment=o.default.observable(h.fragment||""),this.authorStyleSheet=o.default.observable(h.authorStyleSheet),this.userStyleSheet=o.default.observable(h.userStyleSheet),this.pageStyle=new s.default,this.dataUserStyleIndex=-1,this.fragment.subscribe(function(t){if(/^epubcfi\(\/([246]\/)?2!\)/.test(t))a.default.removeParameter("f");else{var e=t.replace(/[\s+&?=#\u007F-\uFFFF]+/g,encodeURIComponent);a.default.setParameter("f",e)}}),h.userStyleSheet.find(function(t,n){if(/^data:,.*?\/\*(?:<|%3C)viewer(?:>|%3E)\*\//.test(t)){e.dataUserStyleIndex=n;var i=t.replace(/^data:,/,"").replace(/%(?![0-9A-Fa-f]{2})/g,"%25"),r=decodeURIComponent(i);return e.pageStyle.cssText(r),!0}return!1}),this.pageStyle.cssText.subscribe(function(t){e.updateUserStyleSheetFromCSSText(t)})}return i(t,[{key:"toObject",value:function(){function t(t){return t.map(function(t){return{url:t}})}var e=t(this.userStyleSheet());return this.pageStyle.pageSizeMode()==s.default.Mode.DEFAULT&&e.unshift({text:"@page{size:auto}"}),{fragment:this.fragment(),authorStyleSheet:t(this.authorStyleSheet()),userStyleSheet:e}}},{key:"updateUserStyleSheetFromCSSText",value:function(t){null==t&&(t=this.pageStyle.toCSSText());var e=this.userStyleSheet();if((!t||/^\s*(\/\*.*?\*\/\s*)*$/.test(t))&&e.length<=(-1==this.dataUserStyleIndex?0:1))return e.pop(),this.dataUserStyleIndex=-1,this.userStyleSheet(e),void a.default.removeParameter("userStyle");var n="data:,"+u.default.percentEncodeForDataURI(t.trim());-1==this.dataUserStyleIndex?(e.push(n),this.dataUserStyleIndex=e.length-1):e[this.dataUserStyleIndex]=n,this.userStyleSheet(e),a.default.setParameter("userStyle",n,this.dataUserStyleIndex)}}]),t}();n.default=l,e.exports=n.default},{"../stores/url-parameters":14,"../utils/string-util":17,"./page-style":9,knockout:1}],8:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=t("knockout"),o=(i=r)&&i.__esModule?i:{default:i};n.default=new function(){return o.default.observableArray()},e.exports=n.default},{knockout:1}],9:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var o,a=t("knockout"),s=(o=a)&&o.__esModule?o:{default:o},u={DEFAULT:"",AUTO:"auto",PRESET:"preset",CUSTOM:"custom",ZERO:"0"},l=[{name:"A5",description:"A5"},{name:"A4",description:"A4"},{name:"A3",description:"A3"},{name:"B5",description:"B5 (ISO)"},{name:"B4",description:"B4 (ISO)"},{name:"JIS-B5",description:"B5 (JIS)"},{name:"JIS-B4",description:"B4 (JIS)"},{name:"letter",description:"letter"},{name:"legal",description:"legal"},{name:"ledger",description:"ledger"}],h={customWidth:"210mm",customHeight:"297mm",customMargin:"10%",baseFontSize:"12pt",baseLineHeight:"1.2",baseFontFamily:"serif",viewerFontSize:16},c=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.pageSizeMode=s.default.observable(u.DEFAULT),this.presetSize=s.default.observable(l[1]),this.isLandscape=s.default.observable(!1),this.customWidth=s.default.observable(h.customWidth),this.customHeight=s.default.observable(h.customHeight),this.pageSizeImportant=s.default.observable(!1),this.pageMarginMode=s.default.observable(u.DEFAULT),this.customMargin=s.default.observable(h.customMargin),this.pageMarginImportant=s.default.observable(!1),this.firstPageMarginZero=s.default.observable(!1),this.firstPageMarginZeroImportant=s.default.observable(!1),this.forceHtmlBodyMarginZero=s.default.observable(!1),this.widowsOrphans=s.default.observable(""),this.widowsOrphansImportant=s.default.observable(!1),this.imageMaxSizeToFitPage=s.default.observable(!1),this.imageMaxSizeToFitPageImportant=s.default.observable(!1),this.imageKeepAspectRatio=s.default.observable(!1),this.imageKeepAspectRatioImportant=s.default.observable(!1),this.baseFontSize=s.default.observable(h.baseFontSize),this.baseFontSizeSpecified=s.default.observable(!1),this.baseFontSizeImportant=s.default.observable(!1),this.baseLineHeight=s.default.observable(h.baseLineHeight),this.baseLineHeightSpecified=s.default.observable(!1),this.baseLineHeightImportant=s.default.observable(!1),this.baseFontFamily=s.default.observable(h.baseFontFamily),this.baseFontFamilySpecified=s.default.observable(!1),this.baseFontFamilyImportant=s.default.observable(!1),this.allImportant=s.default.observable(!1),this.pageOtherStyle=s.default.observable(""),this.firstPageOtherStyle=s.default.observable(""),this.rootOtherStyle=s.default.observable(""),this.beforeOtherStyle=s.default.observable(""),this.afterOtherStyle=s.default.observable(""),this.viewerFontSize=null,this.setViewerFontSizeObservable=function(t){n.viewerFontSize=t;var e=document.getElementsByName("vivliostyle-settings_viewer-font-size")[0];e&&(e.value=n.fontSizePxToPercent(t(),100,5))},this.viewerFontSizePercent=s.default.pureComputed({read:function(){return this.viewerFontSize?this.fontSizePxToPercent(this.viewerFontSize(),100,5):100},write:function(t){if(this.viewerFontSize){var e=parseFloat(t),n=e&&this.fontSizePercentToPx(e);if(!n||n<5||n>72){var i=document.getElementsByName("vivliostyle-settings_viewer-font-size")[0];i&&(i.value="100"),n=h.viewerFontSize}this.viewerFontSize(n)}},owner:this}),this.cssText=s.default.pureComputed({read:this.toCSSText,write:this.fromCSSText,owner:this}),this.allImportant.subscribe(function(t){n.pageSizeImportant(t),n.pageMarginImportant(t),n.firstPageMarginZeroImportant(t),n.widowsOrphansImportant(t),n.imageMaxSizeToFitPageImportant(t),n.imageKeepAspectRatioImportant(t),n.baseFontSizeImportant(t),n.baseLineHeightImportant(t),n.baseFontFamilyImportant(t)}),this.pageStyleRegExp=new RegExp("^((?:\\n|.)*?)\\/\\*<viewer>\\*\\/\\s*(?:@page\\s*\\{\\s*(?:size:\\s*([^\\s!;{}]+)(?:\\s+([^\\s!;{}]+))?\\s*(!important)?(?:;|(?=[\\s{}]))\\s*)?(?:margin:\\s*([^\\s!;{}]+(?:\\s+[^\\s!;{}]+)?(?:\\s+[^\\s!;{}]+)?(?:\\s+[^\\s!;{}]+)?)\\s*(!important)?(?:;|(?=[\\s{}]))\\s*)?((?:[^{}]+|\\{[^{}]*\\})*)\\}\\s*)?(?:@page\\s*:first\\s*\\{\\s*(margin:\\s*0(?:\\w+|%)?\\s*(!important)?(?:;|(?=[\\s{}]))\\s*)?((?:[^{}]+|\\{[^{}]*\\})*)\\}\\s*)?((?:html|:root),\\s*body\\s*\\{\\s*margin:\\s*0(?:\\w+|%)?\\s*!important(?:;|(?=[\\s{}]))\\s*\\}\\s*)?(?:(?:html|:root)\\s*\\{\\s*(?:font-size:\\s*(calc\\([^()]+\\)|[^\\s!;{}]+)\\s*(!important)?(?:;|(?=[\\s{}]))\\s*)?(?:line-height:\\s*([^\\s!;{}]+)\\s*(!important)?(?:;|(?=[\\s{}]))\\s*)?(?:font-family:\\s*([^!;{}]+)\\s*(!important)?(?:;|(?=[\\s{}]))\\s*)?([^{}]*)\\}\\s*)?(?:body\\s*\\{\\s*(?:[-\\w]+:\\s*inherit\\s*!important(?:;|(?=[\\s{}]))\\s*)+\\}\\s*)?(?:\\*\\s*\\{\\s*widows:\\s*(1|999)\\s*(!important)?(?:;|(?=[\\s{}]))\\s*orphans:\\s*\\19\\s*\\20(?:;|(?=[\\s{}]))\\s*\\}\\s*)?(?:img,\\s*svg\\s*\\{\\s*(max-inline-size:\\s*100%\\s*(!important)?(?:;|(?=[\\s{}]))\\s*max-block-size:\\s*100vb\\s*\\22(?:;|(?=[\\s{}]))\\s*)?(object-fit:\\s*contain\\s*(!important)?(?:;|(?=[\\s{}]))\\s*)?\\}\\s*)?((?:\\n|.)*)$"),e&&this.copyFrom(e)}return r(t,[{key:"fontSizePxToPercent",value:function(t,e,n){var i=t/h.viewerFontSize*(e||100);return n&&(i=i.toPrecision(n).replace(/(?:\.0*|(\.\d*?)0+)$/,"$1")),i}},{key:"fontSizePercentToPx",value:function(t,e,n){var i=t/(e||100)*h.viewerFontSize;return n&&(i=i.toPrecision(n).replace(/(?:\.0*|(\.\d*?)0+)$/,"$1")),i}},{key:"fromCSSText",value:function(t){var e=this,n=this.pageStyleRegExp.exec(t);if(n)!function(){var t=i(n,26),r=t[1],o=t[2],a=t[3],s=t[4],h=t[5],c=t[6],f=t[7],p=t[8],d=t[9],b=t[10],g=t[11],v=t[12],m=t[13],w=t[14],y=t[15],x=t[16],E=t[17],S=t[18],k=t[19],C=t[20],T=t[21],A=t[22],_=t[23],N=t[24],O=t[25],I=0,P=0;if(e.beforeOtherStyle(r),"landscape"==o||"portrait"==o?(e.isLandscape("landscape"==o),o=a,a=null):"landscape"!=a&&"portrait"!=a||(e.isLandscape("landscape"==a),a=null),null!=o){if(null==a)if("auto"==o)e.pageSizeMode(u.AUTO);else{var F=l.find(function(t){return t.name.toLowerCase()==o.toLowerCase()});F?(e.pageSizeMode(u.PRESET),e.presetSize(F)):(e.pageSizeMode(u.CUSTOM),e.customWidth(o),e.customHeight(o))}else e.pageSizeMode(u.CUSTOM),e.customWidth(o),e.customHeight(a);e.pageSizeImportant(!!s),s?I++:P++}else e.pageSizeMode(u.DEFAULT);null!=h?(e.pageMarginMode("0"==h?u.ZERO:u.CUSTOM),"0"==h?e.pageMarginMode(u.ZERO):(e.pageMarginMode(u.CUSTOM),e.customMargin(h)),e.pageMarginImportant(!!c),c?I++:P++):e.pageMarginMode(u.DEFAULT),f=f||"",e.pageOtherStyle(f),p?(e.firstPageMarginZero(!0),e.firstPageMarginZeroImportant(!!d),d?I++:P++):e.firstPageMarginZero(!1),b=b||"",e.firstPageOtherStyle(b),g?e.forceHtmlBodyMarginZero(!0):e.forceHtmlBodyMarginZero(!1),null!=v?(v=v.replace(/^\s*calc\([.\d]+\s*\*\s*([.\d]+\w+)\)\s*$/,"$1"),e.baseFontSizeSpecified(!0),e.baseFontSize(v),e.baseFontSizeImportant(!!m),m?I++:P++):e.baseFontSizeSpecified(!1),null!=w?(e.baseLineHeightSpecified(!0),e.baseLineHeight(w),e.baseLineHeightImportant(!!y),y?I++:P++):e.baseLineHeightSpecified(!1),null!=x?(x=x.trim(),e.baseFontFamilySpecified(!0),e.baseFontFamily(x),e.baseFontFamilyImportant(!!E),E?I++:P++):e.baseFontFamilySpecified(!1),S=S||"",e.rootOtherStyle(S),null!=k?(e.widowsOrphans(k),e.widowsOrphansImportant(!!C),C?I++:P++):e.widowsOrphans(u.DEFAULT),T?(e.imageMaxSizeToFitPage(!0),e.imageMaxSizeToFitPageImportant(!!A),A?I++:P++):e.imageMaxSizeToFitPage(!1),_?(e.imageKeepAspectRatio(!0),e.imageKeepAspectRatioImportant(!!N),N?I++:P++):e.imageKeepAspectRatio(!1),O=O.replace(/\/\*<\/?viewer>\*\/\n?/g,"")||"",e.afterOtherStyle(O),e.allImportant(I>0&&0==P)}();else{var r=t.replace(/\/\*<\/?viewer>\*\/\n?/g,"")||"";this.afterOtherStyle(r)}}},{key:"toCSSText",value:function(){function t(t){return t?" !important":""}var e=this.beforeOtherStyle();if(e+="/*<viewer>*/\n",this.pageSizeMode()!=u.DEFAULT||this.pageMarginMode()!=u.DEFAULT||this.pageOtherStyle()){if(e+="@page { ",this.pageSizeMode()!=u.DEFAULT){switch(e+="size: ",this.pageSizeMode()){case u.AUTO:e+="auto";break;case u.PRESET:e+=this.presetSize().name,this.isLandscape()&&(e+=" landscape");break;case u.CUSTOM:e+=this.customWidth()+" "+this.customHeight();break;default:throw new Error("Unknown pageSizeMode "+this.pageSizeMode())}e+=t(this.pageSizeImportant())+"; "}if(this.pageMarginMode()!=u.DEFAULT){switch(e+="margin: ",this.pageMarginMode()){case u.AUTO:e+="auto";break;case u.ZERO:e+="0";break;case u.CUSTOM:e+=""+this.customMargin();break;default:throw new Error("Unknown pageMarginMode "+this.pageMarginMode())}e+=t(this.pageMarginImportant())+"; "}e+=this.pageOtherStyle(),e+="}\n"}if((this.firstPageMarginZero()||this.firstPageOtherStyle())&&(e+="@page :first { ",this.firstPageMarginZero()&&(e+="margin: 0"+t(this.firstPageMarginZeroImportant())+"; "),e+=this.firstPageOtherStyle(),e+="}\n"),this.forceHtmlBodyMarginZero()&&(e+=":root, body { margin: 0 !important; }\n"),this.baseFontSizeSpecified()||this.baseLineHeightSpecified()||this.baseFontFamilySpecified()||this.rootOtherStyle()){e+=":root { ";var n=this.baseFontSize();if(this.baseFontSizeSpecified())if(this.viewerFontSize&&this.viewerFontSize()!=h.viewerFontSize&&!n.endsWith("%"))e+="font-size: calc("+this.fontSizePxToPercent(this.viewerFontSize(),1,5)+" * "+n+")"+t(this.baseFontSizeImportant())+"; ";else e+="font-size: "+this.baseFontSize()+t(this.baseFontSizeImportant())+"; ";this.baseLineHeightSpecified()&&(e+="line-height: "+this.baseLineHeight()+t(this.baseLineHeightImportant())+"; "),this.baseFontFamilySpecified()&&(e+="font-family: "+this.baseFontFamily()+t(this.baseFontFamilyImportant())+"; "),e+=this.rootOtherStyle(),e+="}\n"}return(this.baseFontSizeSpecified()&&this.baseFontSizeImportant()||this.baseLineHeightSpecified()&&this.baseLineHeightImportant()||this.baseFontFamilySpecified()&&this.baseFontFamilyImportant())&&(e+="body { ",this.baseFontSizeSpecified()&&this.baseFontSizeImportant()&&(e+="font-size: inherit !important; "),this.baseLineHeightSpecified()&&this.baseLineHeightImportant()&&(e+="line-height: inherit !important; "),this.baseFontFamilySpecified()&&this.baseFontFamilyImportant()&&(e+="font-family: inherit !important; "),e+="}\n"),this.widowsOrphans()&&(e+="* { ",e+="widows: "+this.widowsOrphans()+t(this.widowsOrphansImportant())+"; ",e+="orphans: "+this.widowsOrphans()+t(this.widowsOrphansImportant())+"; ",e+="}\n"),(this.imageMaxSizeToFitPage()||this.imageKeepAspectRatio())&&(e+="img, svg { ",this.imageMaxSizeToFitPage()&&(e+="max-inline-size: 100%"+t(this.imageMaxSizeToFitPageImportant())+"; ",e+="max-block-size: 100vb"+t(this.imageMaxSizeToFitPageImportant())+"; "),this.imageKeepAspectRatio()&&(e+="object-fit: contain"+t(this.imageKeepAspectRatioImportant())+"; "),e+="}\n"),e+="/*</viewer>*/\n",e+=this.afterOtherStyle()}},{key:"copyFrom",value:function(t){this.pageSizeMode(t.pageSizeMode()),this.presetSize(t.presetSize()),this.isLandscape(t.isLandscape()),this.customWidth(t.customWidth()),this.customHeight(t.customHeight()),this.pageSizeImportant(t.pageSizeImportant()),this.pageMarginMode(t.pageMarginMode()),this.customMargin(t.customMargin()),this.pageMarginImportant(t.pageMarginImportant()),this.firstPageMarginZero(t.firstPageMarginZero()),this.firstPageMarginZeroImportant(t.firstPageMarginZeroImportant()),this.forceHtmlBodyMarginZero(t.forceHtmlBodyMarginZero()),this.widowsOrphans(t.widowsOrphans()),this.widowsOrphansImportant(t.widowsOrphansImportant()),this.imageMaxSizeToFitPage(t.imageMaxSizeToFitPage()),this.imageMaxSizeToFitPageImportant(t.imageMaxSizeToFitPageImportant()),this.imageKeepAspectRatio(t.imageKeepAspectRatio()),this.imageKeepAspectRatioImportant(t.imageKeepAspectRatioImportant()),this.baseFontSize(t.baseFontSize()),this.baseFontSizeSpecified(t.baseFontSizeSpecified()),this.baseFontSizeImportant(t.baseFontSizeImportant()),this.baseLineHeight(t.baseLineHeight()),this.baseLineHeightSpecified(t.baseLineHeightSpecified()),this.baseLineHeightImportant(t.baseLineHeightImportant()),this.baseFontFamily(t.baseFontFamily()),this.baseFontFamilySpecified(t.baseFontFamilySpecified()),this.baseFontFamilyImportant(t.baseFontFamilyImportant()),this.allImportant(t.allImportant()),this.pageOtherStyle(t.pageOtherStyle()),this.firstPageOtherStyle(t.firstPageOtherStyle()),this.rootOtherStyle(t.rootOtherStyle()),this.beforeOtherStyle(t.beforeOtherStyle()),this.afterOtherStyle(t.afterOtherStyle()),this.viewerFontSize&&t.viewerFontSize&&this.viewerFontSize(t.viewerFontSize())}},{key:"equivalentTo",value:function(t){return this.pageSizeMode()===t.pageSizeMode()&&((this.pageSizeMode()!==u.PRESET||this.presetSize()===t.presetSize())&&((this.pageSizeMode()!==u.PRESET||this.isLandscape()===t.isLandscape())&&((this.pageSizeMode()!==u.CUSTOM||this.customWidth()===t.customWidth())&&((this.pageSizeMode()!==u.CUSTOM||this.customHeight()===t.customHeight())&&(this.pageSizeImportant()===t.pageSizeImportant()&&(this.pageMarginMode()===t.pageMarginMode()&&((this.pageMarginMode()!==u.CUSTOM||this.customMargin()===t.customMargin())&&(this.pageMarginImportant()===t.pageMarginImportant()&&(this.firstPageMarginZero()===t.firstPageMarginZero()&&(this.firstPageMarginZeroImportant()===t.firstPageMarginZeroImportant()&&(this.forceHtmlBodyMarginZero()===t.forceHtmlBodyMarginZero()&&(this.widowsOrphans()===t.widowsOrphans()&&(this.widowsOrphansImportant()===t.widowsOrphansImportant()&&(this.imageMaxSizeToFitPage()===t.imageMaxSizeToFitPage()&&(this.imageMaxSizeToFitPageImportant()===t.imageMaxSizeToFitPageImportant()&&(this.imageKeepAspectRatio()===t.imageKeepAspectRatio()&&(this.imageKeepAspectRatioImportant()===t.imageKeepAspectRatioImportant()&&(this.baseFontSizeSpecified()===t.baseFontSizeSpecified()&&((!this.baseFontSizeSpecified()||this.baseFontSize()===t.baseFontSize())&&(this.baseFontSizeImportant()===t.baseFontSizeImportant()&&(this.baseLineHeightSpecified()===t.baseLineHeightSpecified()&&((!this.baseLineHeightSpecified()||this.baseLineHeight()===t.baseLineHeight())&&(this.baseLineHeightImportant()===t.baseLineHeightImportant()&&(this.baseFontFamilySpecified()===t.baseFontFamilySpecified()&&((!this.baseFontFamilySpecified()||this.baseFontFamily()===t.baseFontFamily())&&(this.baseFontFamilyImportant()===t.baseFontFamilyImportant()&&(this.allImportant()===t.allImportant()&&(this.pageOtherStyle()===t.pageOtherStyle()&&(this.firstPageOtherStyle()===t.firstPageOtherStyle()&&(this.rootOtherStyle()===t.rootOtherStyle()&&(this.beforeOtherStyle()===t.beforeOtherStyle()&&(this.afterOtherStyle()===t.afterOtherStyle()&&!(!this.viewerFontSize!=!t.viewerFontSize||this.viewerFontSize&&this.viewerFontSize()!==t.viewerFontSize())))))))))))))))))))))))))))))))))}}]),t}();c.Mode=u,c.Constants=h,c.PresetSize=c.prototype.PresetSize=l,n.default=c,e.exports=n.default},{knockout:1}],10:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var r,o=t("../models/vivliostyle"),a=(r=o)&&r.__esModule?r:{default:r},s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return i(t,[{key:"toSpreadViewString",value:function(){switch(this){case u.SPREAD:return"true";case u.SINGLE_PAGE:return"false";case u.AUTO_SPREAD:return"auto";default:throw new Error("Invalid PageViewMode")}}},{key:"toString",value:function(){switch(this){case u.SPREAD:return"spread";case u.SINGLE_PAGE:return"singlePage";case u.AUTO_SPREAD:return"autoSpread";default:throw new Error("Invalid PageViewMode")}}}]),t}(),u={AUTO_SPREAD:new s,SINGLE_PAGE:new s,SPREAD:new s,defaultMode:function(){return this.AUTO_SPREAD},fromSpreadViewString:function(t){switch(t){case"true":return this.SPREAD;case"false":return this.SINGLE_PAGE;case"auto":default:return this.AUTO_SPREAD}},of:function(t){switch(t){case a.default.viewer.PageViewMode.SPREAD:return this.SPREAD;case a.default.viewer.PageViewMode.SINGLE_PAGE:return this.SINGLE_PAGE;case a.default.viewer.PageViewMode.AUTO_SPREAD:return this.AUTO_SPREAD;default:throw new Error("Invalid PageViewMode name: "+t)}}};n.default=u,e.exports=n.default},{"../models/vivliostyle":12}],11:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function o(t){return t&&t.__esModule?t:{default:t}}var a=o(t("knockout")),s=o(t("../stores/url-parameters")),u=o(t("./page-view-mode")),l=o(t("./zoom-options"));function h(){return{renderAllPages:s.default.hasParameter("x"),fontSize:16,profile:!1,pageViewMode:u.default.defaultMode(),zoom:l.default.createDefaultOptions()}}var c=function(){function t(e){var n,r,o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderAllPages=a.default.observable(),this.fontSize=a.default.observable(),this.profile=a.default.observable(),this.pageViewMode=a.default.observable(),this.zoom=a.default.observable(),e?this.copyFrom(e):(n=h(),r=function(){var t=s.default.getParameter("renderAllPages")[0],e=s.default.getParameter("fontSize")[0],n=/^([\d.]+)(?:(%25|%)|\/([\d.]+))?$/.exec(e),r=null;if(n){var o=i(n,4),a=o[1],l=o[2],h=o[3];r=parseFloat(a),(l||h)&&(r=16*r/(l?100:parseFloat(h))),r<5&&(r=5),r>72&&(r=72)}return{renderAllPages:"true"===t||"false"!==t&&null,fontSize:r,profile:"true"===s.default.getParameter("profile")[0],pageViewMode:u.default.fromSpreadViewString(s.default.getParameter("spread")[0])}}(),o.renderAllPages(null!==r.renderAllPages?r.renderAllPages:n.renderAllPages),o.fontSize(r.fontSize||n.fontSize),o.profile(r.profile||n.profile),o.pageViewMode(r.pageViewMode||n.pageViewMode),o.zoom(n.zoom),o.pageViewMode.subscribe(function(t){t===n.pageViewMode?s.default.removeParameter("spread"):s.default.setParameter("spread",t.toSpreadViewString())}),o.renderAllPages.subscribe(function(t){t===n.renderAllPages?s.default.removeParameter("renderAllPages"):s.default.setParameter("renderAllPages",t.toString())}),o.fontSize.subscribe(function(t){"number"==typeof t&&(t=t.toPrecision(10).replace(/(?:\.0*|(\.\d*?)0+)$/,"$1")),t==n.fontSize?s.default.removeParameter("fontSize"):s.default.setParameter("fontSize",t+"/"+n.fontSize)}))}return r(t,[{key:"copyFrom",value:function(t){this.renderAllPages(t.renderAllPages()),this.fontSize(t.fontSize()),this.profile(t.profile()),this.pageViewMode(t.pageViewMode()),this.zoom(t.zoom())}},{key:"toObject",value:function(){return{renderAllPages:this.renderAllPages(),fontSize:this.fontSize(),pageViewMode:this.pageViewMode().toString(),zoom:this.zoom().zoom,fitToScreen:this.zoom().fitToScreen}}}]),t}();c.getDefaultValues=h,n.default=c,e.exports=n.default},{"../stores/url-parameters":14,"./page-view-mode":10,"./zoom-options":13,knockout:1}],12:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.viewer=null,this.constants=null,this.profile=null}return i(t,[{key:"setInstance",value:function(t){this.viewer=t.viewer,this.constants=t.constants,this.profile=t.profile}}]),t}();n.default=new r,e.exports=n.default},{}],13:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(t,e,n){for(var i=!0;i;){var r=t,o=e,a=n;i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(r);if(null===l)return;t=l,e=o,n=a,i=!0,s=l=void 0}},r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s,u=t("../models/vivliostyle"),l=(s=u)&&s.__esModule?s:{default:s},h=function(){function t(e){a(this,t),this.zoom=e}return r(t,[{key:"zoomIn",value:function(t){return new f(1.25*this.getCurrentZoomFactor(t))}},{key:"zoomOut",value:function(t){return new f(.8*this.getCurrentZoomFactor(t))}},{key:"zoomToActualSize",value:function(){return new f(1)}}],[{key:"createDefaultOptions",value:function(){return new c}},{key:"createFromZoomFactor",value:function(t){return new f(t)}}]),t}(),c=function(t){function e(){a(this,e),i(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,1)}return o(e,h),r(e,[{key:"toggleFitToScreen",value:function(){return new f(1)}},{key:"getCurrentZoomFactor",value:function(t){return t.queryZoomFactor(l.default.viewer.ZoomType.FIT_INSIDE_VIEWPORT)}},{key:"fitToScreen",get:function(){return!0}}]),e}(),f=function(t){function e(){a(this,e),i(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return o(e,h),r(e,[{key:"toggleFitToScreen",value:function(){return new c}},{key:"getCurrentZoomFactor",value:function(t){return this.zoom}},{key:"fitToScreen",get:function(){return!1}}]),e}();n.default=h,e.exports=n.default},{"../models/vivliostyle":12}],14:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var r,o=t("../utils/string-util"),a=(r=o)&&r.__esModule?r:{default:r};function s(t){return new RegExp("[#&]"+a.default.escapeUnicodeString(t)+"=([^&]*)","g")}var u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.history=window?window.history:{},this.location=window?window.location:{href:""},this.storedUrl=this.location.href}return i(t,[{key:"getBaseURL",value:function(){var t=this.location.href;return(t=t.replace(/#.*$/,"")).replace(/\/[^\/]*$/,"/")}},{key:"hasParameter",value:function(t){var e=this.location.href;return s(t).test(e)}},{key:"getParameter",value:function(t){for(var e=this.location.href,n=s(t),i=[],r=void 0;r=n.exec(e);)i.push(r[1]);return i}},{key:"setParameter",value:function(t,e,n){var i=this.location.href,r=void 0,o=s(t),a=o.exec(i);if(a&&n)for(;n-- >=1;)a=o.exec(i);if(a){var u=a[1].length,l=a.index+a[0].length-u;r=i.substring(0,l)+e+i.substring(l+u)}else r=i+(i.match(/[#&]$/)?"":i.match(/#/)?"&":"#")+t+"="+e;this.history.replaceState?this.history.replaceState(null,"",r):this.location.href=r,this.storedUrl=r}},{key:"removeParameter",value:function(t,e){var n=this.location.href,i=void 0,r=s(t),o=r.exec(n);if(o&&e&&(o=r.exec(n)),o){for(i=n;o;o=r.exec(i)){var a=o.index+o[0].length;i="#"==o[0].charAt(0)?i.substring(0,o.index+1)+i.substring(a+1):i.substring(0,o.index)+i.substring(a),r.lastIndex-=o[0].length}i=i.replace(/^(.*?)[#&]$/,"$1"),this.history.replaceState?this.history.replaceState(null,"",i):this.location.href=i}this.storedUrl=i}}]),t}();n.default=new u,e.exports=n.default},{"../utils/string-util":17}],15:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i={Unidentified:"Unidentified",ArrowDown:"ArrowDown",ArrowLeft:"ArrowLeft",ArrowRight:"ArrowRight",ArrowUp:"ArrowUp",Home:"Home",End:"End",PageDown:"PageDown",PageUp:"PageUp",Escape:"Escape",Enter:"Enter",Space:" "};n.default={Keys:i,identifyKeyFromEvent:function(t){var e=t.key,n=t.keyIdentifier,r=t.location;return e===i.ArrowDown||"Down"===e||"Down"===n?t.metaKey?i.End:i.ArrowDown:e===i.ArrowLeft||"Left"===e||"Left"===n?i.ArrowLeft:e===i.ArrowRight||"Right"===e||"Right"===n?i.ArrowRight:e===i.ArrowUp||"Up"===e||"Up"===n?t.metaKey?i.Home:i.ArrowUp:e===i.Escape||"Esc"===e||"U+001B"===n?i.Escape:e===i.Enter||"Enter"===n?i.Enter:e===i.Space||"U+0020"===n?i.Space:"0"===e||"U+0030"===n?"0":"+"===e||"Add"===e||"U+002B"===n||"U+00BB"===n||"U+004B"===n&&r===KeyboardEvent.DOM_KEY_LOCATION_NUMPAD?"+":"-"===e||"Subtract"===e||"U+002D"===n||"U+00BD"===n||"U+004D"===n&&r===KeyboardEvent.DOM_KEY_LOCATION_NUMPAD?"-":e||n||i.Unidentified}},e.exports=n.default},{}],16:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=t("knockout"),o=(i=r)&&i.__esModule?i:{default:i},a={readonlyObservable:function(t){var e=o.default.observable(t);return{getter:o.default.pureComputed(function(){return e()}),value:e}}};n.default=a,e.exports=n.default},{knockout:1}],17:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={escapeUnicodeChar:function(t){return"\\u"+(65536|t.charCodeAt(0)).toString(16).substring(1)},escapeUnicodeString:function(t){return t.replace(/[^-a-zA-Z0-9_]/g,this.escapeUnicodeChar)},percentEncodeAmpersandAndUnencodedPercent:function(t){return t.replace(/%(?![0-9A-Fa-f]{2})/g,"%25").replace(/&/g,"%26")},percentEncodeAmpersandAndPercent:function(t){return t.replace(/%/g,"%25").replace(/&/g,"%26")},percentDecodeAmpersandAndPercent:function(t){return t.replace(/%26/g,"&").replace(/%25/g,"%")},percentEncodeForDataURI:function(t){return encodeURI(t).replace(/#/g,"%23").replace(/&/g,"%26")}},e.exports=n.default},{}],18:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var r,o=t("knockout"),a=(r=o)&&r.__esModule?r:{default:r},s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.list=e,this.visible=a.default.pureComputed(function(){return e().length>0})}return i(t,[{key:"getDisplayMessage",value:function(t){var e=t.error,n=e&&(e.toString()||e.frameTrace||e.stack);return n&&(n=n.split("\n",1)[0]),n||(n=t.messages.join("\n")),n}}]),t}();n.default=s,e.exports=n.default},{knockout:1}],19:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function r(t){return t&&t.__esModule?t:{default:t}}var o=r(t("knockout")),a=r(t("../models/viewer-options")),s=t("../utils/key-util"),u=r(t("../models/vivliostyle")),l=function(){function t(e,n,i,r){var a=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.viewerOptions_=e,this.viewer_=n,this.settingsPanel_=i,this.justClicked=!1,this.isDisabled=o.default.pureComputed(function(){return a.settingsPanel_.opened()&&!a.settingsPanel_.pinned()||!a.viewer_.state.navigatable()});var s=o.default.pureComputed(function(){return r.disablePageNavigation||a.isDisabled()});s.subscribe(function(t){var e=document.getElementById("vivliostyle-page-number");e&&(e.disabled=t)}),this.isPageNumberDisabled=o.default.pureComputed(function(){return s()}),this.isNavigateToPreviousDisabled=o.default.pureComputed(function(){return!!s()||void 0!==a.viewer_.state.status&&a.viewer_.firstPage()}),this.isNavigateToNextDisabled=o.default.pureComputed(function(){return!!s()||void 0!==a.viewer_.state.status&&((!a.viewerOptions_.renderAllPages()||a.viewer_.state.status()==u.default.constants.ReadyState.COMPLETE)&&a.viewer_.lastPage())}),this.isNavigateToLeftDisabled=o.default.pureComputed(function(){return!!s()||void 0!==a.viewer_.state.pageProgression&&(a.viewer_.state.pageProgression()===u.default.constants.PageProgression.LTR?a.isNavigateToPreviousDisabled():a.isNavigateToNextDisabled())}),this.isNavigateToRightDisabled=o.default.pureComputed(function(){return!!s()||void 0!==a.viewer_.state.pageProgression&&(a.viewer_.state.pageProgression()===u.default.constants.PageProgression.LTR?a.isNavigateToNextDisabled():a.isNavigateToPreviousDisabled())}),this.isNavigateToFirstDisabled=this.isNavigateToPreviousDisabled,this.isNavigateToLastDisabled=o.default.pureComputed(function(){return!!s()||void 0!==a.viewer_.state.status&&(!(!a.viewerOptions_.renderAllPages()||a.viewer_.state.status()==u.default.constants.ReadyState.COMPLETE)||a.viewer_.lastPage())}),this.hidePageNavigation=!!r.disablePageNavigation;var l=o.default.pureComputed(function(){return r.disableZoom||a.isDisabled()});this.isZoomOutDisabled=l,this.isZoomInDisabled=l,this.isZoomToActualSizeDisabled=l,this.isToggleFitToScreenDisabled=l,this.hideZoom=!!r.disableZoom,this.fitToScreen=o.default.pureComputed(function(){return e.zoom().fitToScreen});var h=o.default.pureComputed(function(){return r.disableFontSizeChange||a.isDisabled()});this.isIncreaseFontSizeDisabled=o.default.pureComputed(function(){return!!h()||a.viewerOptions_.fontSize()>=72}),this.isDecreaseFontSizeDisabled=o.default.pureComputed(function(){return!!h()||a.viewerOptions_.fontSize()<=5}),this.isDefaultFontSizeDisabled=h,this.hideFontSizeChange=!!r.disableFontSizeChange,this.isTOCToggleDisabled=o.default.pureComputed(function(){return r.disableTOCNavigation||a.isDisabled()||null==a.viewer_.tocVisible()}),this.hideTOCNavigation=!!r.disableTOCNavigation,this.pageNumber=o.default.pureComputed({read:function(){return this.viewer_.epageToPageNumber(this.viewer_.epage())},write:function(t){var e=this,n=this.viewer_.epage(),i=this.viewer_.epageToPageNumber(n),r=parseFloat(t.replace(/[-]/g,function(t){return String.fromCharCode(t.charCodeAt(0)-65248)}))||0;if(/^[-+]/.test(t)&&(r=i+r),r<1)r=1;else{var o=this.viewer_.epageCount();this.viewerOptions_.renderAllPages()?r>o&&(r=o):r>o+1&&(r=o+1)}var a=this.viewer_.epageFromPageNumber(r),s=document.getElementById("vivliostyle-page-number");s.value=r,this.viewer_.navigateToEPage(a),setTimeout(function(){e.viewer_.state.status()!=u.default.constants.ReadyState.LOADING&&e.viewer_.epage()===n&&(s.value=i),document.getElementById("vivliostyle-viewer-viewport").focus()},10)},owner:this}),this.totalPages=o.default.pureComputed(function(){var t=a.viewer_.epageCount();if(!t)return t;var e=a.pageNumber();return a.viewer_.lastPage()?t=e:e>=t&&t++,t}),["navigateToPrevious","navigateToNext","navigateToLeft","navigateToRight","navigateToFirst","navigateToLast","zoomIn","zoomOut","zoomToActualSize","toggleFitToScreen","increaseFontSize","decreaseFontSize","defaultFontSize","onclickViewport","toggleTOC"].forEach(function(t){a[t]=a[t].bind(a)})}return i(t,[{key:"navigateToPrevious",value:function(){return!this.isNavigateToPreviousDisabled()&&(this.viewer_.navigateToPrevious(),!0)}},{key:"navigateToNext",value:function(){return!this.isNavigateToNextDisabled()&&(this.viewer_.navigateToNext(),!0)}},{key:"navigateToLeft",value:function(){return!this.isNavigateToLeftDisabled()&&(this.viewer_.navigateToLeft(),!0)}},{key:"navigateToRight",value:function(){return!this.isNavigateToRightDisabled()&&(this.viewer_.navigateToRight(),!0)}},{key:"navigateToFirst",value:function(){return!this.isNavigateToFirstDisabled()&&(this.viewer_.navigateToFirst(),!0)}},{key:"navigateToLast",value:function(){return!this.isNavigateToLastDisabled()&&(this.viewer_.navigateToLast(),!0)}},{key:"zoomIn",value:function(){if(this.isZoomInDisabled())return!1;var t=this.viewerOptions_.zoom();return this.viewerOptions_.zoom(t.zoomIn(this.viewer_)),!0}},{key:"zoomOut",value:function(){if(this.isZoomOutDisabled())return!1;var t=this.viewerOptions_.zoom();return this.viewerOptions_.zoom(t.zoomOut(this.viewer_)),!0}},{key:"zoomToActualSize",value:function(){if(this.isZoomToActualSizeDisabled())return!1;var t=this.viewerOptions_.zoom();return this.viewerOptions_.zoom(t.zoomToActualSize()),!0}},{key:"toggleFitToScreen",value:function(){if(this.isToggleFitToScreenDisabled())return!1;var t=this.viewerOptions_.zoom();return this.viewerOptions_.zoom(t.toggleFitToScreen()),!0}},{key:"increaseFontSize",value:function(){if(this.isIncreaseFontSizeDisabled())return!1;var t=this.viewerOptions_.fontSize();return t=t<10?Math.floor(t)+1:t<20?2*(Math.floor(t/2)+1):t<40?4*(Math.floor(t/4)+1):t<72?8*(Math.floor(t/8)+1):72,this.viewerOptions_.fontSize(t),this.updateFontSizeSettings(),!0}},{key:"decreaseFontSize",value:function(){if(this.isDecreaseFontSizeDisabled())return!1;var t=this.viewerOptions_.fontSize();return t=t>40?8*(Math.ceil(t/8)-1):t>20?4*(Math.ceil(t/4)-1):t>10?2*(Math.ceil(t/2)-1):t>5?Math.ceil(t)-1:5,this.viewerOptions_.fontSize(t),this.updateFontSizeSettings(),!0}},{key:"defaultFontSize",value:function(){if(this.isDefaultFontSizeDisabled())return!1;var t=a.default.getDefaultValues().fontSize;return this.viewerOptions_.fontSize(t),this.updateFontSizeSettings(),!0}},{key:"updateFontSizeSettings",value:function(){this.settingsPanel_.state.viewerOptions.fontSize(this.viewerOptions_.fontSize()),this.viewer_.documentOptions_.pageStyle.baseFontSizeSpecified()&&(this.viewer_.documentOptions_.updateUserStyleSheetFromCSSText(),this.viewer_.loadDocument(this.viewer_.documentOptions_,this.viewerOptions_))}},{key:"onclickViewport",value:function(){if(this.settingsPanel_.justClicked)return!0;if(this.viewer_.tocVisible()&&!this.viewer_.tocPinned()){var t=document.querySelector("[data-vivliostyle-toc-box]");t&&!t.contains(document.activeElement)&&this.toggleTOC()}return this.settingsPanel_.opened()&&!this.settingsPanel_.pinned()&&this.settingsPanel_.close(),!0}},{key:"toggleTOC",value:function(){var t=this;if(this.isTOCToggleDisabled())return!1;var e=function(){var e=0;document.getElementById("vivliostyle-menu-item_toc-toggle");return t.viewer_.tocVisible()?t.justClicked?(t.viewer_.showTOC(!0,!1),t.justClicked=!1):(e&&(clearInterval(e),e=0),t.viewer_.showTOC(!1),t.justClicked=!0,setTimeout(function(){t.justClicked&&(document.getElementById("vivliostyle-viewer-viewport").focus(),t.justClicked=!1)},300)):(t.justClicked?(t.viewer_.showTOC(!0,!1),t.justClicked=!1):(t.viewer_.showTOC(!0,!0),t.justClicked=!0),e=setInterval(function(){var n=document.querySelector("[data-vivliostyle-toc-box]");n&&"visible"===n.style.visibility&&(n.tabIndex=0,n.focus(),clearInterval(e),e=0),t.justClicked=!1},300)),{v:!0}}();return"object"==typeof e?e.v:void 0}},{key:"navigateTOC",value:function(t){var e=Array.from(document.querySelectorAll("[data-vivliostyle-toc-box]>*>*>*>*>*:not([hidden]) [tabindex='0'],[data-vivliostyle-toc-box]>*>*>*>*>*:not([hidden]) a[href]:not([tabindex='-1'])")),n=e.indexOf(document.activeElement),i=function(t){return e[t]&&"button"===e[t].getAttribute("role")},r=function(t){return e[t]&&"true"===e[t].getAttribute("aria-expanded")};switch(t){case s.Keys.ArrowLeft:if(-1==n){n=e.length-1;break}if(!i(n)&&i(n-1)&&n--,i(n)&&r(n))e[n].click();else for(var o=n-1;o>=0;o--)if(i(o)&&e[o].parentElement.contains(e[n])){n=o;break}break;case s.Keys.ArrowRight:if(-1==n){n=0;break}!i(n)&&i(n-1)&&n--,i(n)&&(r(n)?n+=2:e[n].click());break;case s.Keys.ArrowDown:n++;break;case s.Keys.ArrowUp:if(-1==n){n=e.length-1;break}n>0&&i(--n)&&n--;break;case s.Keys.Home:n=0;break;case s.Keys.End:n=e.length-1;break;case s.Keys.Space:!i(n)&&i(n-1)&&n--,i(n)&&e[n].click()}return i(n)&&n++,e[n]&&e[n].focus(),!0}},{key:"handleKey",value:function(t){if(this.settingsPanel_.opened()&&this.settingsPanel_.settingsToggle.contains(document.activeElement))return!0;var e=document.getElementById("vivliostyle-page-number"),n=document.getElementById("vivliostyle-viewer-viewport"),i=n.scrollWidth>n.clientWidth,r=n.scrollHeight>n.clientHeight,o=e===document.activeElement,a=this.viewer_.tocVisible()&&!o&&n!=document.activeElement;switch(t){case"+":return o||!this.increaseFontSize();case"-":return o||!this.decreaseFontSize();case"0":return o||!this.defaultFontSize();case"1":return o||!this.zoomToActualSize();case s.Keys.ArrowLeft:return a?!this.navigateTOC(t):o||i||!this.navigateToLeft();case s.Keys.ArrowRight:return a?!this.navigateTOC(t):o||i||!this.navigateToRight();case s.Keys.ArrowDown:return a?!this.navigateTOC(t):(n.focus(),r||!this.navigateToNext());case s.Keys.ArrowUp:return a?!this.navigateTOC(t):(n.focus(),r||!this.navigateToPrevious());case s.Keys.PageDown:return!!a||(n.focus(),!this.navigateToNext());case s.Keys.PageUp:return!!a||(n.focus(),!this.navigateToPrevious());case s.Keys.Home:return a?!this.navigateTOC(t):(n.focus(),!this.navigateToFirst());case s.Keys.End:return a?!this.navigateTOC(t):(n.focus(),!this.navigateToLast());case"o":case"O":return n.focus(),!this.zoomOut();case"i":case"I":return n.focus(),!this.zoomIn();case"f":case"F":return n.focus(),!this.toggleFitToScreen();case"g":case"G":return e.focus(),!1;case"t":case"T":return n.focus(),!this.toggleTOC();case s.Keys.Escape:return this.viewer_.tocVisible()?!this.toggleTOC():(n.focus(),!0);case s.Keys.Space:return a?!this.navigateTOC(t):"button"!==document.activeElement.getAttribute("role")||(document.activeElement.click(),!1);default:return!0}}}]),t}();n.default=l,e.exports=n.default},{"../models/viewer-options":11,"../models/vivliostyle":12,"../utils/key-util":15,knockout:1}],20:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function r(t){return t&&t.__esModule?t:{default:t}}var o=r(t("knockout")),a=r(t("../models/viewer-options")),s=r(t("../models/page-style")),u=r(t("../models/page-view-mode")),l=t("../utils/key-util"),h=function(){function t(e,n,i,r,l){var h=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.viewerOptions_=e,this.documentOptions_=n,this.viewer_=i,this.isPageStyleChangeDisabled=!!l.disablePageStyleChange,this.isOverrideDocumentStyleSheetDisabled=this.isPageStyleChangeDisabled,this.isPageViewModeChangeDisabled=!!l.disablePageViewModeChange,this.isRenderAllPagesChangeDisabled=!!l.disableRenderAllPagesChange,this.justClicked=!1,this.settingsToggle=document.getElementById("vivliostyle-menu-item_settings-toggle"),this.opened=o.default.observable(!1),this.pinned=o.default.observable(!1),this.state={viewerOptions:new a.default(e),pageStyle:new s.default(n.pageStyle),pageViewMode:o.default.pureComputed({read:function(){return h.state.viewerOptions.pageViewMode().toString()},write:function(t){h.state.viewerOptions.pageViewMode(u.default.of(t))}}),renderAllPages:o.default.pureComputed({read:function(){return h.state.viewerOptions.renderAllPages()},write:function(t){h.state.viewerOptions.renderAllPages(t)}})},this.state.pageStyle.setViewerFontSizeObservable(this.state.viewerOptions.fontSize),this.defaultPageStyle=new s.default,["close","toggle","apply","cancel","resetUserStyle"].forEach(function(t){this[t]=this[t].bind(this)},this),r.visible.subscribe(function(t){t&&this.close()},this)}return i(t,[{key:"close",value:function(){this.opened(!1),this.pinned(!1);var t=document.getElementById("vivliostyle-viewer-viewport");return t&&t.focus(),!0}},{key:"toggle",value:function(){var t=this;this.opened()?this.justClicked?(this.justClicked=!1,this.pinned(!0)):(this.close(),this.justClicked=!0,setTimeout(function(){t.justClicked=!1},300)):(this.viewer_.tocPinned()||this.viewer_.showTOC(!1),this.opened(!0),this.justClicked?(this.justClicked=!1,this.pinned(!0)):(this.pinned(!1),this.justClicked=!0,this.focusToFirstItem(),setTimeout(function(){t.justClicked=!1},300)))}},{key:"apply",value:function(){this.state.renderAllPages()===this.viewerOptions_.renderAllPages()&&this.state.pageStyle.equivalentTo(this.documentOptions_.pageStyle)?this.viewerOptions_.copyFrom(this.state.viewerOptions):(this.documentOptions_.pageStyle.copyFrom(this.state.pageStyle),this.documentOptions_.pageStyle.baseFontSizeSpecified()&&this.documentOptions_.updateUserStyleSheetFromCSSText(),this.viewer_.loadDocument(this.documentOptions_,this.state.viewerOptions)),this.pinned()?this.focusToFirstItem():this.close()}},{key:"cancel",value:function(){this.state.viewerOptions.copyFrom(this.viewerOptions_),this.state.pageStyle.copyFrom(this.documentOptions_.pageStyle),this.close()}},{key:"resetUserStyle",value:function(){return this.state.pageStyle.copyFrom(this.defaultPageStyle),this.state.viewerOptions.fontSize(a.default.getDefaultValues().fontSize),setTimeout(function(){document.getElementsByName("vivliostyle-settings_reset-user-style")[0].checked=!1},200),!0}},{key:"focusToFirstItem",value:function(t){var e=t||this.settingsToggle,n=["input","textarea","summary"].includes(e.localName)?e:Array.from(e.getElementsByTagName("input")).find(function(t){return!t.disabled&&("radio"!=t.type||t.checked)});if(n){for(var i=n.parentElement;i&&i!=this.settingsToggle;i=i.parentElement)"details"==i.localName&&(i.open=!0);n.focus()}}},{key:"handleKey",value:function(t){var e=this.opened()&&this.settingsToggle.contains(document.activeElement),n=e&&("text"==document.activeElement.type||"select"==document.activeElement.localName),i=e&&"textarea"==document.activeElement.localName,r=e&&!n&&!i;switch(t){case l.Keys.Escape:return this.opened()&&(this.cancel(),this.close()),!0;case"s":case"S":return!(!this.opened()||r||!e)||(this.toggle(),!1);case"p":case"P":return!r||(this.focusToFirstItem(document.getElementById("vivliostyle-settings_page-view-and-rendering").firstElementChild),!1);case"v":case"V":return!r||(this.focusToFirstItem(document.getElementById("vivliostyle-settings_page-view-mode")),!1);case"a":case"A":return!r||(this.focusToFirstItem(document.getElementsByName("vivliostyle-settings_render-all-pages")[0]),!1);case"u":case"U":return!r||(this.focusToFirstItem(document.getElementById("vivliostyle-settings_user-style").firstElementChild),!1);case"z":case"Z":return!r||(this.focusToFirstItem(document.getElementById("vivliostyle-settings_page-size")),!1);case"m":case"M":return!r||(this.focusToFirstItem(document.getElementById("vivliostyle-settings_page-margin")),!1);case"b":case"B":return!r||(this.focusToFirstItem(document.getElementById("vivliostyle-settings_page-breaks")),!1);case"i":case"I":return!r||(this.focusToFirstItem(document.getElementById("vivliostyle-settings_images")),!1);case"t":case"T":return!r||(this.focusToFirstItem(document.getElementById("vivliostyle-settings_text")),!1);case"o":case"O":return!r||(this.focusToFirstItem(document.getElementsByName("vivliostyle-settings_override-document-stylesheets")[0]),!1);case"c":case"C":return!r||(this.focusToFirstItem(document.getElementsByName("vivliostyle-settings_css-details")[0]),!1);case"r":case"R":return!r||(this.focusToFirstItem(document.getElementsByName("vivliostyle-settings_reset-user-style")[0]),!1);case l.Keys.Enter:return!(n||r&&"vivliostyle-menu-button_apply"!==document.activeElement.id&&"vivliostyle-menu-button_reset"!==document.activeElement.id)||(document.getElementById("vivliostyle-menu-button_apply").focus(),!1);default:return!0}}}]),t}();n.default=h,e.exports=n.default},{"../models/page-style":9,"../models/page-view-mode":10,"../models/viewer-options":11,"../utils/key-util":15,knockout:1}],21:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(t("../models/vivliostyle")),o=i(t("../models/document-options")),a=i(t("../models/viewer-options")),s=i(t("../models/message-queue")),u=i(t("./viewer")),l=i(t("./navigation")),h=i(t("./settings-panel")),c=i(t("./message-dialog")),f=i(t("../utils/key-util")),p=i(t("../utils/string-util")),d=i(t("../stores/url-parameters"));n.default=function(){var t=this;this.documentOptions=new o.default,this.viewerOptions=new a.default,this.documentOptions.pageStyle.setViewerFontSizeObservable(this.viewerOptions.fontSize),this.viewerOptions.profile()&&r.default.profile.profiler.enable(),this.isDebug="true"===d.default.getParameter("debug")[0],this.viewerSettings={userAgentRootURL:d.default.getBaseURL()+"resources/",viewportElement:document.getElementById("vivliostyle-viewer-viewport"),debug:this.isDebug},d.default.getParameter("b")[0]&&(d.default.removeParameter("b",!0),d.default.removeParameter("x")),d.default.removeParameter("f",!0),d.default.removeParameter("spread",!0),d.default.removeParameter("renderAllPages",!0),d.default.removeParameter("fontSize",!0),d.default.removeParameter("profile",!0),d.default.removeParameter("debug",!0),this.viewer=new u.default(this.viewerSettings,this.viewerOptions),this.viewer.inputUrl.subscribe(function(t){""!=t?(d.default.hasParameter("b")||d.default.history.pushState&&d.default.history.pushState(null,""),t=t.startsWith("<")?"data:,"+p.default.percentEncodeForDataURI(t):p.default.percentEncodeAmpersandAndUnencodedPercent(t),d.default.setParameter("b",t)):d.default.removeParameter("b")}),this.messageDialog=new c.default(s.default),this.settingsPanel=new h.default(this.viewerOptions,this.documentOptions,this.viewer,this.messageDialog,{disablePageStyleChange:!1,disablePageViewModeChange:!1,disableRenderAllPagesChange:!1}),this.navigation=new l.default(this.viewerOptions,this.viewer,this.settingsPanel,{disableTOCNavigation:!1,disablePageNavigation:!1,disableZoom:!1,disableFontSizeChange:!1}),this.handleKey=function(e,n){var i=f.default.identifyKeyFromEvent(n);if("vivliostyle-input-url"===document.activeElement.id)return"Enter"!==i||13!==n.keyCode||(t.documentOptions.bookUrl(d.default.getParameter("b")[0]),t.viewer.loadDocument(t.documentOptions),!1);if("Home"!==i&&"End"!==i&&(n.ctrlKey||n.metaKey)||n.altKey||n.shiftKey)return!0;var r=t.settingsPanel.handleKey(i);return r&&(r=t.navigation.handleKey(i)),r},this.viewer.loadDocument(this.documentOptions),window.onhashchange=function(){window.location.href!=d.default.storedUrl&&window.location.reload()}},e.exports=n.default},{"../models/document-options":7,"../models/message-queue":8,"../models/viewer-options":11,"../models/vivliostyle":12,"../stores/url-parameters":14,"../utils/key-util":15,"../utils/string-util":17,"./message-dialog":18,"./navigation":19,"./settings-panel":20,"./viewer":22}],22:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function r(t){return t&&t.__esModule?t:{default:t}}var o=r(t("knockout")),a=r(t("../utils/observable-util")),s=r(t("../logging/logger")),u=r(t("../models/vivliostyle")),l=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.viewerOptions_=n,this.documentOptions_=null,this.viewer_=new u.default.viewer.Viewer(e,n.toObject());var i=this.state_={status:a.default.readonlyObservable(u.default.constants.ReadyState.LOADING),pageProgression:a.default.readonlyObservable(u.default.constants.PageProgression.LTR)};this.state={status:i.status.getter.extend({rateLimit:{timeout:100,method:"notifyWhenChangesStop"},notify:"always"}),navigatable:o.default.pureComputed(function(){return i.status.value()&&i.status.value()!==u.default.constants.ReadyState.LOADING}),pageProgression:i.pageProgression.getter},this.epage=o.default.observable(),this.epageCount=o.default.observable(),this.firstPage=o.default.observable(),this.lastPage=o.default.observable(),this.tocVisible=o.default.observable(),this.tocPinned=o.default.observable(),this.inputUrl=o.default.observable(""),this.setupViewerEventHandler(),this.setupViewerOptionSubscriptions()}return i(t,[{key:"setupViewerEventHandler",value:function(){var t=this,e=s.default.getLogger();this.viewer_.addListener("debug",function(t){e.debug(t.content)}),this.viewer_.addListener("info",function(t){e.info(t.content)}),this.viewer_.addListener("warn",function(t){e.warn(t.content)}),this.viewer_.addListener("error",function(t){e.error(t.content)}),this.viewer_.addListener("readystatechange",function(){var e=t.viewer_.readyState;e!==u.default.constants.ReadyState.INTERACTIVE&&e!==u.default.constants.ReadyState.COMPLETE||t.state_.pageProgression.value(t.viewer_.getCurrentPageProgression()),t.state_.status.value(e)}),this.viewer_.addListener("loaded",function(){t.viewerOptions_.profile()&&u.default.profile.profiler.printTimings()}),this.viewer_.addListener("nav",function(e){var n=e.cfi,i=e.first,r=e.last,o=e.epage,a=e.epageCount,s=e.metadata,u=e.docTitle;if(n&&t.documentOptions_.fragment(n),void 0!==i&&t.firstPage(i),void 0!==r&&t.lastPage(r),void 0!==o&&t.epage(o),void 0!==a&&t.epageCount(a),s||u){var l=s&&s["http://purl.org/dc/terms/title"],h=l&&l[0]&&l[0].v;h?!u||u===h||t.firstPage()||/\.xhtml$/.test(u)?document.title=h:document.title=u+" | "+h:document.title=u||"Vivliostyle Viewer"}var c=t.tocVisible(),f=t.viewer_.isTOCVisible();c&&!f||t.tocVisible(f)}),this.viewer_.addListener("hyperlink",function(e){e.internal?(t.navigateToInternalUrl(e.href),t.tocVisible()&&t.tocVisible(!1),document.getElementById("vivliostyle-viewer-viewport").focus()):window.location.href=e.href})}},{key:"setupViewerOptionSubscriptions",value:function(){o.default.computed(function(){var t=this.viewerOptions_.toObject();this.viewer_.setOptions(t)},this).extend({rateLimit:0})}},{key:"loadDocument",value:function(t,e){this.state_.status.value(u.default.constants.ReadyState.LOADING),e&&this.viewerOptions_.copyFrom(e),this.documentOptions_=t,t.xUrl()?this.viewer_.loadDocument(t.xUrl(),t.toObject(),this.viewerOptions_.toObject()):t.bookUrl()?this.viewer_.loadPublication?this.viewer_.loadPublication(t.bookUrl(),t.toObject(),this.viewerOptions_.toObject()):this.viewer_.loadEPUB(t.bookUrl(),t.toObject(),this.viewerOptions_.toObject()):this.state_.status.value("")}},{key:"navigateToPrevious",value:function(){this.viewer_.navigateToPage("previous")}},{key:"navigateToNext",value:function(){this.viewer_.navigateToPage("next")}},{key:"navigateToLeft",value:function(){this.viewer_.navigateToPage("left")}},{key:"navigateToRight",value:function(){this.viewer_.navigateToPage("right")}},{key:"navigateToFirst",value:function(){this.viewer_.navigateToPage("first")}},{key:"navigateToLast",value:function(){this.viewer_.navigateToPage("last")}},{key:"navigateToEPage",value:function(t){this.viewer_.navigateToPage("epage",t)}},{key:"navigateToInternalUrl",value:function(t){this.viewer_.navigateToInternalUrl(t)}},{key:"queryZoomFactor",value:function(t){return this.viewer_.queryZoomFactor(t)}},{key:"epageToPageNumber",value:function(t){if(t||0==t)return Math.round(t+1)}},{key:"epageFromPageNumber",value:function(t){if(t||0==t)return t-1}},{key:"showTOC",value:function(t,e){if(null!=this.viewer_.isTOCVisible()){var n=null==t?!this.tocVisible():t;this.tocVisible(n),this.tocPinned(!!n&&!e),this.viewer_.showTOC(n,e)}}}]),t}();n.default=l,e.exports=n.default},{"../logging/logger":5,"../models/vivliostyle":12,"../utils/observable-util":16,knockout:1}],23:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(t("knockout")),o=(i(t("./bindings/menuButton.js")),i(t("./bindings/swipePages.js")),i(t("./viewmodels/viewer-app")));n.default={start:function(){function t(){r.default.applyBindings(new o.default)}window.__loaded?t():window.onload=t}},e.exports=n.default},{"./bindings/menuButton.js":3,"./bindings/swipePages.js":4,"./viewmodels/viewer-app":21,knockout:1}]},{},[6]);