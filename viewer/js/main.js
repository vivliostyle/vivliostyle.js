!function(){return function t(e,n,i){function r(a,s){if(!n[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var h=n[a]={exports:{}};e[a][0].call(h.exports,function(t){return r(e[a][1][t]||t)},h,h.exports,t,e,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}}()({1:[function(t,e,n){!function(t){var i=this||(0,eval)("this"),r=i.document,o=i.navigator,a=i.jQuery,s=i.JSON;a||"undefined"==typeof jQuery||(a=jQuery),function(t){"function"==typeof define&&define.amd?define(["exports","require"],t):t("object"==typeof n&&"object"==typeof e?e.exports||n:i.ko={})}(function(e,n){function u(t,e){return(null===t||typeof t in w)&&t===e}function l(e,n){var i;return function(){i||(i=E.a.setTimeout(function(){i=t,e()},n))}}function h(t,e){var n;return function(){clearTimeout(n),n=E.a.setTimeout(t,e)}}function c(t,e){e&&"change"!==e?"beforeChange"===e?this.oc(t):this.bb(t,e):this.pc(t)}function p(t,e){null!==e&&e.s&&e.s()}function f(t,e){var n=this.pd,i=n[A];i.qa||(this.Pb&&this.kb[e]?(n.tc(e,t,this.kb[e]),this.kb[e]=null,--this.Pb):i.F[e]||n.tc(e,t,i.G?{da:t}:n.Zc(t)),t.Ka&&t.fd())}var d,v,g,m,y,b,E=void 0!==e?e:{};E.b=function(t,e){for(var n=t.split("."),i=E,r=0;r<n.length-1;r++)i=i[n[r]];i[n[n.length-1]]=e},E.J=function(t,e,n){t[e]=n},E.version="3.5.0",E.b("version",E.version),E.options={deferUpdates:!1,useOnlyNativeEvents:!1,foreachHidesDestroyed:!1},E.a=function(){function e(t,e){for(var n in t)h.call(t,n)&&e(n,t[n])}function n(t,e){if(e)for(var n in e)h.call(e,n)&&(t[n]=e[n]);return t}function u(t,e){return t.__proto__=e,t}function l(t,e,n,i){var r=t[e].match(y)||[];E.a.C(n.match(y),function(t){E.a.Oa(r,t,i)}),t[e]=r.join(" ")}var h=Object.prototype.hasOwnProperty,c={__proto__:[]}instanceof Array,p="function"==typeof Symbol,f={},d={};f[o&&/Firefox\/2/i.test(o.userAgent)?"KeyboardEvent":"UIEvents"]=["keyup","keydown","keypress"],f.MouseEvents="click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave".split(" "),e(f,function(t,e){if(e.length)for(var n=0,i=e.length;n<i;n++)d[e[n]]=t});var v,g={propertychange:!0},m=r&&function(){for(var e=3,n=r.createElement("div"),i=n.getElementsByTagName("i");n.innerHTML="\x3c!--[if gt IE "+ ++e+"]><i></i><![endif]--\x3e",i[0];);return 4<e?e:t}(),y=/\S+/g;return{Ic:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],C:function(t,e,n){for(var i=0,r=t.length;i<r;i++)e.call(n,t[i],i,t)},A:"function"==typeof Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e)}:function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},Lb:function(e,n,i){for(var r=0,o=e.length;r<o;r++)if(n.call(i,e[r],r,e))return e[r];return t},hb:function(t,e){var n=E.a.A(t,e);0<n?t.splice(n,1):0===n&&t.shift()},vc:function(t){var e=[];return t&&E.a.C(t,function(t){0>E.a.A(e,t)&&e.push(t)}),e},Mb:function(t,e,n){var i=[];if(t)for(var r=0,o=t.length;r<o;r++)i.push(e.call(n,t[r],r));return i},fb:function(t,e,n){var i=[];if(t)for(var r=0,o=t.length;r<o;r++)e.call(n,t[r],r)&&i.push(t[r]);return i},gb:function(t,e){if(e instanceof Array)t.push.apply(t,e);else for(var n=0,i=e.length;n<i;n++)t.push(e[n]);return t},Oa:function(t,e,n){var i=E.a.A(E.a.$b(t),e);0>i?n&&t.push(e):n||t.splice(i,1)},Ba:c,extend:n,setPrototypeOf:u,zb:c?u:n,O:e,Ha:function(t,e,n){if(!t)return t;var i,r={};for(i in t)h.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r},Sb:function(t){for(;t.firstChild;)E.removeNode(t.firstChild)},Xb:function(t){for(var e=((t=E.a.la(t))[0]&&t[0].ownerDocument||r).createElement("div"),n=0,i=t.length;n<i;n++)e.appendChild(E.na(t[n]));return e},Ca:function(t,e){for(var n=0,i=t.length,r=[];n<i;n++){var o=t[n].cloneNode(!0);r.push(e?E.na(o):o)}return r},ua:function(t,e){if(E.a.Sb(t),e)for(var n=0,i=e.length;n<i;n++)t.appendChild(e[n])},Wc:function(t,e){var n=t.nodeType?[t]:t;if(0<n.length){for(var i=n[0],r=i.parentNode,o=0,a=e.length;o<a;o++)r.insertBefore(e[o],i);for(o=0,a=n.length;o<a;o++)E.removeNode(n[o])}},Ua:function(t,e){if(t.length){for(e=8===e.nodeType&&e.parentNode||e;t.length&&t[0].parentNode!==e;)t.splice(0,1);for(;1<t.length&&t[t.length-1].parentNode!==e;)t.length--;if(1<t.length){var n=t[0],i=t[t.length-1];for(t.length=0;n!==i;)t.push(n),n=n.nextSibling;t.push(i)}}return t},Yc:function(t,e){7>m?t.setAttribute("selected",e):t.selected=e},Cb:function(e){return null===e||e===t?"":e.trim?e.trim():e.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},Td:function(t,e){return t=t||"",!(e.length>t.length)&&t.substring(0,e.length)===e},ud:function(t,e){if(t===e)return!0;if(11===t.nodeType)return!1;if(e.contains)return e.contains(1!==t.nodeType?t.parentNode:t);if(e.compareDocumentPosition)return 16==(16&e.compareDocumentPosition(t));for(;t&&t!=e;)t=t.parentNode;return!!t},Rb:function(t){return E.a.ud(t,t.ownerDocument.documentElement)},jd:function(t){return!!E.a.Lb(t,E.a.Rb)},P:function(t){return t&&t.tagName&&t.tagName.toLowerCase()},zc:function(t){return E.onError?function(){try{return t.apply(this,arguments)}catch(t){throw E.onError&&E.onError(t),t}}:t},setTimeout:function(t,e){return setTimeout(E.a.zc(t),e)},Fc:function(t){setTimeout(function(){throw E.onError&&E.onError(t),t},0)},H:function(t,e,n){var i=E.a.zc(n);if(n=g[e],E.options.useOnlyNativeEvents||n||!a)if(n||"function"!=typeof t.addEventListener){if(void 0===t.attachEvent)throw Error("Browser doesn't support addEventListener or attachEvent");var r=function(e){i.call(t,e)},o="on"+e;t.attachEvent(o,r),E.a.I.za(t,function(){t.detachEvent(o,r)})}else t.addEventListener(e,i,!1);else v||(v="function"==typeof a(t).on?"on":"bind"),a(t)[v](e,i)},Fb:function(t,e){if(!t||!t.nodeType)throw Error("element must be a DOM node when calling triggerEvent");var n;if(n=!("input"!==E.a.P(t)||!t.type||"click"!=e.toLowerCase())&&("checkbox"==(n=t.type)||"radio"==n),E.options.useOnlyNativeEvents||!a||n)if("function"==typeof r.createEvent){if("function"!=typeof t.dispatchEvent)throw Error("The supplied element doesn't support dispatchEvent");(n=r.createEvent(d[e]||"HTMLEvents")).initEvent(e,!0,!0,i,0,0,0,0,0,!1,!1,!1,!1,0,t),t.dispatchEvent(n)}else if(n&&t.click)t.click();else{if(void 0===t.fireEvent)throw Error("Browser doesn't support triggering events");t.fireEvent("on"+e)}else a(t).trigger(e)},c:function(t){return E.N(t)?t():t},$b:function(t){return E.N(t)?t.w():t},Eb:function(t,e,n){var i;e&&("object"==typeof t.classList?(i=t.classList[n?"add":"remove"],E.a.C(e.match(y),function(e){i.call(t.classList,e)})):"string"==typeof t.className.baseVal?l(t.className,"baseVal",e,n):l(t,"className",e,n))},Ab:function(e,n){var i=E.a.c(n);null!==i&&i!==t||(i="");var r=E.h.firstChild(e);!r||3!=r.nodeType||E.h.nextSibling(r)?E.h.ua(e,[e.ownerDocument.createTextNode(i)]):r.data=i,E.a.zd(e)},Xc:function(t,e){if(t.name=e,7>=m)try{var n=t.name.replace(/[&<>'"]/g,function(t){return"&#"+t.charCodeAt(0)+";"});t.mergeAttributes(r.createElement("<input name='"+n+"'/>"),!1)}catch(t){}},zd:function(t){9<=m&&(t=1==t.nodeType?t:t.parentNode).style&&(t.style.zoom=t.style.zoom)},vd:function(t){if(m){var e=t.style.width;t.style.width=0,t.style.width=e}},Od:function(t,e){t=E.a.c(t),e=E.a.c(e);for(var n=[],i=t;i<=e;i++)n.push(i);return n},la:function(t){for(var e=[],n=0,i=t.length;n<i;n++)e.push(t[n]);return e},Da:function(t){return p?Symbol(t):t},Xd:6===m,Yd:7===m,W:m,Kc:function(t,e){for(var n=E.a.la(t.getElementsByTagName("input")).concat(E.a.la(t.getElementsByTagName("textarea"))),i="string"==typeof e?function(t){return t.name===e}:function(t){return e.test(t.name)},r=[],o=n.length-1;0<=o;o--)i(n[o])&&r.push(n[o]);return r},Md:function(t){return"string"==typeof t&&(t=E.a.Cb(t))?s&&s.parse?s.parse(t):new Function("return "+t)():null},fc:function(t,e,n){if(!s||!s.stringify)throw Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return s.stringify(E.a.c(t),e,n)},Nd:function(t,n,i){var o=(i=i||{}).params||{},a=i.includeFields||this.Ic,s=t;if("object"==typeof t&&"form"===E.a.P(t)){s=t.action;for(var u=a.length-1;0<=u;u--)for(var l=E.a.Kc(t,a[u]),h=l.length-1;0<=h;h--)o[l[h].name]=l[h].value}n=E.a.c(n);var c=r.createElement("form");for(var p in c.style.display="none",c.action=s,c.method="post",n)(t=r.createElement("input")).type="hidden",t.name=p,t.value=E.a.fc(E.a.c(n[p])),c.appendChild(t);e(o,function(t,e){var n=r.createElement("input");n.type="hidden",n.name=t,n.value=e,c.appendChild(n)}),r.body.appendChild(c),i.submitter?i.submitter(c):c.submit(),setTimeout(function(){c.parentNode.removeChild(c)},0)}}}(),E.b("utils",E.a),E.b("utils.arrayForEach",E.a.C),E.b("utils.arrayFirst",E.a.Lb),E.b("utils.arrayFilter",E.a.fb),E.b("utils.arrayGetDistinctValues",E.a.vc),E.b("utils.arrayIndexOf",E.a.A),E.b("utils.arrayMap",E.a.Mb),E.b("utils.arrayPushAll",E.a.gb),E.b("utils.arrayRemoveItem",E.a.hb),E.b("utils.cloneNodes",E.a.Ca),E.b("utils.createSymbolOrString",E.a.Da),E.b("utils.extend",E.a.extend),E.b("utils.fieldsIncludedWithJsonPost",E.a.Ic),E.b("utils.getFormFields",E.a.Kc),E.b("utils.objectMap",E.a.Ha),E.b("utils.peekObservable",E.a.$b),E.b("utils.postJson",E.a.Nd),E.b("utils.parseJson",E.a.Md),E.b("utils.registerEventHandler",E.a.H),E.b("utils.stringifyJson",E.a.fc),E.b("utils.range",E.a.Od),E.b("utils.toggleDomNodeCssClass",E.a.Eb),E.b("utils.triggerEvent",E.a.Fb),E.b("utils.unwrapObservable",E.a.c),E.b("utils.objectForEach",E.a.O),E.b("utils.addOrRemoveItem",E.a.Oa),E.b("utils.setTextContent",E.a.Ab),E.b("unwrap",E.a.c),Function.prototype.bind||(Function.prototype.bind=function(t){var e=this;if(1===arguments.length)return function(){return e.apply(t,arguments)};var n=Array.prototype.slice.call(arguments,1);return function(){var i=n.slice(0);return i.push.apply(i,arguments),e.apply(t,i)}}),E.a.g=new function(){var e,n,i=0,r="__ko__"+(new Date).getTime(),o={};return E.a.W?(e=function(e,n){var a=e[r];if(!a||"null"===a||!o[a]){if(!n)return t;a=e[r]="ko"+i++,o[a]={}}return o[a]},n=function(t){var e=t[r];return!!e&&(delete o[e],t[r]=null,!0)}):(e=function(t,e){var n=t[r];return!n&&e&&(n=t[r]={}),n},n=function(t){return!!t[r]&&(delete t[r],!0)}),{get:function(t,n){var i=e(t,!1);return i&&i[n]},set:function(n,i,r){(n=e(n,r!==t))&&(n[i]=r)},Tb:function(t,n,i){return(t=e(t,!0))[n]||(t[n]=i)},clear:n,Z:function(){return i+++r}}},E.b("utils.domData",E.a.g),E.b("utils.domData.clear",E.a.g.clear),E.a.I=new function(){function e(e,n){var i=E.a.g.get(e,r);return i===t&&n&&(i=[],E.a.g.set(e,r,i)),i}function n(t){if(n=e(t,!1))for(var n=n.slice(0),r=0;r<n.length;r++)n[r](t);E.a.g.clear(t),E.a.I.cleanExternalData(t),s[t.nodeType]&&i(t.childNodes,!0)}function i(t,e){for(var i,r=[],o=0;o<t.length;o++)if((!e||8===t[o].nodeType)&&(n(r[r.length]=i=t[o]),t[o]!==i))for(;o--&&-1==E.a.A(r,t[o]););}var r=E.a.g.Z(),o={1:!0,8:!0,9:!0},s={1:!0,9:!0};return{za:function(t,n){if("function"!=typeof n)throw Error("Callback must be a function");e(t,!0).push(n)},xb:function(n,i){var o=e(n,!1);o&&(E.a.hb(o,i),0==o.length&&E.a.g.set(n,r,t))},na:function(t){return o[t.nodeType]&&(n(t),s[t.nodeType]&&i(t.getElementsByTagName("*"))),t},removeNode:function(t){E.na(t),t.parentNode&&t.parentNode.removeChild(t)},cleanExternalData:function(t){a&&"function"==typeof a.cleanData&&a.cleanData([t])}}},E.na=E.a.I.na,E.removeNode=E.a.I.removeNode,E.b("cleanNode",E.na),E.b("removeNode",E.removeNode),E.b("utils.domNodeDisposal",E.a.I),E.b("utils.domNodeDisposal.addDisposeCallback",E.a.I.za),E.b("utils.domNodeDisposal.removeDisposeCallback",E.a.I.xb),d=[0,"",""],y={thead:v=[1,"<table>","</table>"],tbody:v,tfoot:v,tr:[2,"<table><tbody>","</tbody></table>"],td:g=[3,"<table><tbody><tr>","</tr></tbody></table>"],th:g,option:m=[1,"<select multiple='multiple'>","</select>"],optgroup:m},b=8>=E.a.W,E.a.ta=function(t,e){var n;if(a){if(a.parseHTML)n=a.parseHTML(t,e)||[];else if((n=a.clean([t],e))&&n[0]){for(var o=n[0];o.parentNode&&11!==o.parentNode.nodeType;)o=o.parentNode;o.parentNode&&o.parentNode.removeChild(o)}}else{(n=e)||(n=r),o=n.parentWindow||n.defaultView||i;var s,u=E.a.Cb(t).toLowerCase(),l=n.createElement("div");for(s=(u=u.match(/^(?:\x3c!--.*?--\x3e\s*?)*?<([a-z]+)[\s>]/))&&y[u[1]]||d,u=s[0],s="ignored<div>"+s[1]+t+s[2]+"</div>","function"==typeof o.innerShiv?l.appendChild(o.innerShiv(s)):(b&&n.body.appendChild(l),l.innerHTML=s,b&&l.parentNode.removeChild(l));u--;)l=l.lastChild;n=E.a.la(l.lastChild.childNodes)}return n},E.a.Ld=function(t,e){var n=E.a.ta(t,e);return n.length&&n[0].parentElement||E.a.Xb(n)},E.a.dc=function(e,n){if(E.a.Sb(e),null!==(n=E.a.c(n))&&n!==t)if("string"!=typeof n&&(n=n.toString()),a)a(e).html(n);else for(var i=E.a.ta(n,e.ownerDocument),r=0;r<i.length;r++)e.appendChild(i[r])},E.b("utils.parseHtmlFragment",E.a.ta),E.b("utils.setHtml",E.a.dc),E.aa=function(){var e={};return{Wb:function(t){if("function"!=typeof t)throw Error("You can only pass a function to ko.memoization.memoize()");var n=(4294967296*(1+Math.random())|0).toString(16).substring(1)+(4294967296*(1+Math.random())|0).toString(16).substring(1);return e[n]=t,"\x3c!--[ko_memo:"+n+"]--\x3e"},ad:function(n,i){var r=e[n];if(r===t)throw Error("Couldn't find any memo with ID "+n+". Perhaps it's already been unmemoized.");try{return r.apply(null,i||[]),!0}finally{delete e[n]}},bd:function(t,e){var n=[];!function t(e,n){if(e)if(8==e.nodeType)null!=(i=E.aa.Tc(e.nodeValue))&&n.push({sd:e,Jd:i});else if(1==e.nodeType)for(var i=0,r=e.childNodes,o=r.length;i<o;i++)t(r[i],n)}(t,n);for(var i=0,r=n.length;i<r;i++){var o=n[i].sd,a=[o];e&&E.a.gb(a,e),E.aa.ad(n[i].Jd,a),o.nodeValue="",o.parentNode&&o.parentNode.removeChild(o)}},Tc:function(t){return(t=t.match(/^\[ko_memo\:(.*?)\]$/))?t[1]:null}}}(),E.b("memoization",E.aa),E.b("memoization.memoize",E.aa.Wb),E.b("memoization.unmemoize",E.aa.ad),E.b("memoization.parseMemoText",E.aa.Tc),E.b("memoization.unmemoizeDomNodeAndDescendants",E.aa.bd),E.ma=function(){function t(){if(o)for(var t,e=o,i=0;s<o;)if(t=n[s++]){if(s>e){if(5e3<=++i){s=o,E.a.Fc(Error("'Too much recursion' after processing "+i+" task groups."));break}e=o}try{t()}catch(t){E.a.Fc(t)}}}function e(){t(),s=o=n.length=0}var n=[],o=0,a=1,s=0;return{scheduler:i.MutationObserver?function(t){var e=r.createElement("div");return new MutationObserver(t).observe(e,{attributes:!0}),function(){e.classList.toggle("foo")}}(e):r&&"onreadystatechange"in r.createElement("script")?function(t){var e=r.createElement("script");e.onreadystatechange=function(){e.onreadystatechange=null,r.documentElement.removeChild(e),e=null,t()},r.documentElement.appendChild(e)}:function(t){setTimeout(t,0)},yb:function(t){return o||E.ma.scheduler(e),n[o++]=t,a++},cancel:function(t){(t-=a-o)>=s&&t<o&&(n[t]=null)},resetForTesting:function(){var t=o-s;return s=o=n.length=0,t},Rd:t}}(),E.b("tasks",E.ma),E.b("tasks.schedule",E.ma.yb),E.b("tasks.runEarly",E.ma.Rd),E.Ta={throttle:function(t,e){t.throttleEvaluation=e;var n=null;return E.$({read:t,write:function(i){clearTimeout(n),n=E.a.setTimeout(function(){t(i)},e)}})},rateLimit:function(t,e){var n,i,r;"number"==typeof e?n=e:(n=e.timeout,i=e.method),t.Hb=!1,r="function"==typeof i?i:"notifyWhenChangesStop"==i?h:l,t.tb(function(t){return r(t,n,e)})},deferred:function(e,n){if(!0!==n)throw Error("The 'deferred' extender only accepts the value 'true', because it is not supported to turn deferral off once enabled.");e.Hb||(e.Hb=!0,e.tb(function(n){var i,r=!1;return function(){if(!r){E.ma.cancel(i),i=E.ma.yb(n);try{r=!0,e.notifySubscribers(t,"dirty")}finally{r=!1}}}}))},notify:function(t,e){t.equalityComparer="always"==e?null:u}};var w={undefined:1,boolean:1,number:1,string:1};E.b("extenders",E.Ta),E.gc=function(t,e,n){this.da=t,this.kc=e,this.lc=n,this.Ib=!1,this.ab=this.Jb=null,E.J(this,"dispose",this.s),E.J(this,"disposeWhenNodeIsRemoved",this.l)},E.gc.prototype.s=function(){this.Ib||(this.ab&&E.a.I.xb(this.Jb,this.ab),this.Ib=!0,this.lc(),this.da=this.kc=this.lc=this.Jb=this.ab=null)},E.gc.prototype.l=function(t){this.Jb=t,E.a.I.za(t,this.ab=this.s.bind(this))},E.R=function(){E.a.zb(this,T),T.ob(this)};var T={ob:function(t){t.S={change:[]},t.rc=1},subscribe:function(t,e,n){var i=this;n=n||"change";var r=new E.gc(i,e?t.bind(e):t,function(){E.a.hb(i.S[n],r),i.cb&&i.cb(n)});return i.Qa&&i.Qa(n),i.S[n]||(i.S[n]=[]),i.S[n].push(r),r},notifySubscribers:function(t,e){if("change"===(e=e||"change")&&this.Gb(),this.Wa(e)){var n="change"===e&&this.dd||this.S[e].slice(0);try{E.v.wc();for(var i,r=0;i=n[r];++r)i.Ib||i.kc(t)}finally{E.v.end()}}},mb:function(){return this.rc},Cd:function(t){return this.mb()!==t},Gb:function(){++this.rc},tb:function(t){var e,n,i,r,o,a=this,s=E.N(a);a.bb||(a.bb=a.notifySubscribers,a.notifySubscribers=c);var u=t(function(){a.Ka=!1,s&&r===a&&(r=a.mc?a.mc():a());var t=n||o&&a.qb(i,r);o=n=e=!1,t&&a.bb(i=r)});a.pc=function(t,n){n&&a.Ka||(o=!n),a.dd=a.S.change.slice(0),a.Ka=e=!0,r=t,u()},a.oc=function(t){e||(i=t,a.bb(t,"beforeChange"))},a.qc=function(){o=!0},a.fd=function(){a.qb(i,a.w(!0))&&(n=!0)}},Wa:function(t){return this.S[t]&&this.S[t].length},Ad:function(t){if(t)return this.S[t]&&this.S[t].length||0;var e=0;return E.a.O(this.S,function(t,n){"dirty"!==t&&(e+=n.length)}),e},qb:function(t,e){return!this.equalityComparer||!this.equalityComparer(t,e)},toString:function(){return"[object Object]"},extend:function(t){var e=this;return t&&E.a.O(t,function(t,n){var i=E.Ta[t];"function"==typeof i&&(e=i(e,n)||e)}),e}};E.J(T,"init",T.ob),E.J(T,"subscribe",T.subscribe),E.J(T,"extend",T.extend),E.J(T,"getSubscriptionsCount",T.Ad),E.a.Ba&&E.a.setPrototypeOf(T,Function.prototype),E.R.fn=T,E.Pc=function(t){return null!=t&&"function"==typeof t.subscribe&&"function"==typeof t.notifySubscribers},E.b("subscribable",E.R),E.b("isSubscribable",E.Pc),E.U=E.v=function(){function t(t){i.push(n),n=t}function e(){n=i.pop()}var n,i=[],r=0;return{wc:t,end:e,ac:function(t){if(n){if(!E.Pc(t))throw Error("Only subscribable things can act as dependencies");n.nd.call(n.od,t,t.ed||(t.ed=++r))}},K:function(n,i,r){try{return t(),n.apply(i,r||[])}finally{e()}},pa:function(){if(n)return n.o.pa()},Va:function(){if(n)return n.o.Va()},rb:function(){if(n)return n.rb},o:function(){if(n)return n.o}}}(),E.b("computedContext",E.U),E.b("computedContext.getDependenciesCount",E.U.pa),E.b("computedContext.getDependencies",E.U.Va),E.b("computedContext.isInitial",E.U.rb),E.b("computedContext.registerDependency",E.U.ac),E.b("ignoreDependencies",E.Wd=E.v.K);var N=E.a.Da("_latestValue");E.sa=function(t){function e(){return 0<arguments.length?(e.qb(e[N],arguments[0])&&(e.xa(),e[N]=arguments[0],e.wa()),this):(E.v.ac(e),e[N])}return e[N]=t,E.a.Ba||E.a.extend(e,E.R.fn),E.R.fn.ob(e),E.a.zb(e,S),E.options.deferUpdates&&E.Ta.deferred(e,!0),e};var S={equalityComparer:u,w:function(){return this[N]},wa:function(){this.notifySubscribers(this[N],"spectate"),this.notifySubscribers(this[N])},xa:function(){this.notifySubscribers(this[N],"beforeChange")}};E.a.Ba&&E.a.setPrototypeOf(S,E.R.fn);var _=E.sa.Na="__ko_proto__";S[_]=E.sa,E.N=function(t){if((t="function"==typeof t&&t[_])&&t!==S[_]&&t!==E.o.fn[_])throw Error("Invalid object that looks like an observable; possibly from another Knockout instance");return!!t},E.Ya=function(t){return"function"==typeof t&&(t[_]===S[_]||t[_]===E.o.fn[_]&&t.Mc)},E.b("observable",E.sa),E.b("isObservable",E.N),E.b("isWriteableObservable",E.Ya),E.b("isWritableObservable",E.Ya),E.b("observable.fn",S),E.J(S,"peek",S.w),E.J(S,"valueHasMutated",S.wa),E.J(S,"valueWillMutate",S.xa),E.Ia=function(t){if("object"!=typeof(t=t||[])||!("length"in t))throw Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");return t=E.sa(t),E.a.zb(t,E.Ia.fn),t.extend({trackArrayChanges:!0})},E.Ia.fn={remove:function(t){for(var e=this.w(),n=[],i="function"!=typeof t||E.N(t)?function(e){return e===t}:t,r=0;r<e.length;r++){var o=e[r];if(i(o)){if(0===n.length&&this.xa(),e[r]!==o)throw Error("Array modified during remove; cannot remove item");n.push(o),e.splice(r,1),r--}}return n.length&&this.wa(),n},removeAll:function(e){if(e===t){var n=this.w(),i=n.slice(0);return this.xa(),n.splice(0,n.length),this.wa(),i}return e?this.remove(function(t){return 0<=E.a.A(e,t)}):[]},destroy:function(t){var e=this.w(),n="function"!=typeof t||E.N(t)?function(e){return e===t}:t;this.xa();for(var i=e.length-1;0<=i;i--){var r=e[i];n(r)&&(r._destroy=!0)}this.wa()},destroyAll:function(e){return e===t?this.destroy(function(){return!0}):e?this.destroy(function(t){return 0<=E.a.A(e,t)}):[]},indexOf:function(t){var e=this();return E.a.A(e,t)},replace:function(t,e){var n=this.indexOf(t);0<=n&&(this.xa(),this.w()[n]=e,this.wa())},sorted:function(t){var e=this().slice(0);return t?e.sort(t):e.sort()},reversed:function(){return this().slice(0).reverse()}},E.a.Ba&&E.a.setPrototypeOf(E.Ia.fn,E.sa.fn),E.a.C("pop push reverse shift sort splice unshift".split(" "),function(t){E.Ia.fn[t]=function(){var e=this.w();this.xa(),this.yc(e,t,arguments);var n=e[t].apply(e,arguments);return this.wa(),n===e?this:n}}),E.a.C(["slice"],function(t){E.Ia.fn[t]=function(){var e=this();return e[t].apply(e,arguments)}}),E.Oc=function(t){return E.N(t)&&"function"==typeof t.remove&&"function"==typeof t.push},E.b("observableArray",E.Ia),E.b("isObservableArray",E.Oc),E.Ta.trackArrayChanges=function(e,n){function i(){function t(){if(l){var t,n=[].concat(e.w()||[]);e.Wa("arrayChange")&&((!u||1<l)&&(u=E.a.Ob(o,n,e.Nb)),t=u),o=n,u=null,l=0,t&&t.length&&e.notifySubscribers(t,"arrayChange")}}s?t():(s=!0,a=e.notifySubscribers,e.notifySubscribers=function(t,e){return e&&"change"!==e||++l,a.apply(this,arguments)},o=[].concat(e.w()||[]),u=null,r=e.subscribe(t))}if(e.Nb={},n&&"object"==typeof n&&E.a.extend(e.Nb,n),e.Nb.sparse=!0,!e.yc){var r,o,a,s=!1,u=null,l=0,h=e.Qa,c=e.cb;e.Qa=function(t){h&&h.call(e,t),"arrayChange"===t&&i()},e.cb=function(n){c&&c.call(e,n),"arrayChange"!==n||e.Wa("arrayChange")||(a&&(e.notifySubscribers=a,a=t),r&&r.s(),r=null,s=!1,o=t)},e.yc=function(t,e,n){function i(t,e,n){return r[r.length]={status:t,value:e,index:n}}if(s&&!l){var r=[],o=t.length,a=n.length,h=0;switch(e){case"push":h=o;case"unshift":for(e=0;e<a;e++)i("added",n[e],h+e);break;case"pop":h=o-1;case"shift":o&&i("deleted",t[h],h);break;case"splice":e=Math.min(Math.max(0,0>n[0]?o+n[0]:n[0]),o),o=1===a?o:Math.min(e+(n[1]||0),o),a=e+a-2,h=Math.max(o,a);for(var c=[],p=[],f=2;e<h;++e,++f)e<o&&p.push(i("deleted",t[e],e)),e<a&&c.push(i("added",n[f],e));E.a.Jc(p,c);break;default:return}u=r}}}};var A=E.a.Da("_state");E.o=E.$=function(e,n,i){function r(){if(0<arguments.length){if("function"!=typeof o)throw Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return o.apply(a.lb,arguments),this}return a.qa||E.v.ac(r),(a.ka||a.G&&r.Xa())&&r.ha(),a.X}if("object"==typeof e?i=e:(i=i||{},e&&(i.read=e)),"function"!=typeof i.read)throw Error("Pass a function that returns the value of the ko.computed");var o=i.write,a={X:t,ra:!0,ka:!0,pb:!1,hc:!1,qa:!1,vb:!1,G:!1,Vc:i.read,lb:n||i.owner,l:i.disposeWhenNodeIsRemoved||i.l||null,Sa:i.disposeWhen||i.Sa,Qb:null,F:{},V:0,Hc:null};return r[A]=a,r.Mc="function"==typeof o,E.a.Ba||E.a.extend(r,E.R.fn),E.R.fn.ob(r),E.a.zb(r,I),i.pure?(a.vb=!0,a.G=!0,E.a.extend(r,x)):i.deferEvaluation&&E.a.extend(r,C),E.options.deferUpdates&&E.Ta.deferred(r,!0),a.l&&(a.hc=!0,a.l.nodeType||(a.l=null)),a.G||i.deferEvaluation||r.ha(),a.l&&r.ja()&&E.a.I.za(a.l,a.Qb=function(){r.s()}),r};var I={equalityComparer:u,pa:function(){return this[A].V},Va:function(){var t=[];return E.a.O(this[A].F,function(e,n){t[n.La]=n.da}),t},Ub:function(t){if(!this[A].V)return!1;var e=this.Va();return-1!==E.a.A(e,t)||!!E.a.Lb(e,function(e){return e.Ub&&e.Ub(t)})},tc:function(t,e,n){if(this[A].vb&&e===this)throw Error("A 'pure' computed must not be called recursively");this[A].F[t]=n,n.La=this[A].V++,n.Ma=e.mb()},Xa:function(){var t,e,n=this[A].F;for(t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&(e=n[t],this.Ja&&e.da.Ka||e.da.Cd(e.Ma)))return!0},Id:function(){this.Ja&&!this[A].pb&&this.Ja(!1)},ja:function(){var t=this[A];return t.ka||0<t.V},Qd:function(){this.Ka?this[A].ka&&(this[A].ra=!0):this.Gc()},Zc:function(t){if(t.Hb){var e=t.subscribe(this.Id,this,"dirty"),n=t.subscribe(this.Qd,this);return{da:t,s:function(){e.s(),n.s()}}}return t.subscribe(this.Gc,this)},Gc:function(){var t=this,e=t.throttleEvaluation;e&&0<=e?(clearTimeout(this[A].Hc),this[A].Hc=E.a.setTimeout(function(){t.ha(!0)},e)):t.Ja?t.Ja(!0):t.ha(!0)},ha:function(t){var e=this[A],n=e.Sa,i=!1;if(!e.pb&&!e.qa){if(e.l&&!E.a.Rb(e.l)||n&&n()){if(!e.hc)return void this.s()}else e.hc=!1;e.pb=!0;try{i=this.yd(t)}finally{e.pb=!1}return i}},yd:function(e){var n=this[A],i=!1,r=n.vb?t:!n.V;i={pd:this,kb:n.F,Pb:n.V},E.v.wc({od:i,nd:f,o:this,rb:r}),n.F={},n.V=0;var o=this.xd(n,i);return n.V?i=this.qb(n.X,o):(this.s(),i=!0),i&&(n.G?this.Gb():this.notifySubscribers(n.X,"beforeChange"),n.X=o,this.notifySubscribers(n.X,"spectate"),!n.G&&e&&this.notifySubscribers(n.X),this.qc&&this.qc()),r&&this.notifySubscribers(n.X,"awake"),i},xd:function(t,e){try{var n=t.Vc;return t.lb?n.call(t.lb):n()}finally{E.v.end(),e.Pb&&!t.G&&E.a.O(e.kb,p),t.ra=t.ka=!1}},w:function(t){var e=this[A];return(e.ka&&(t||!e.V)||e.G&&this.Xa())&&this.ha(),e.X},tb:function(t){E.R.fn.tb.call(this,t),this.mc=function(){return this[A].G||(this[A].ra?this.ha():this[A].ka=!1),this[A].X},this.Ja=function(t){this.oc(this[A].X),this[A].ka=!0,t&&(this[A].ra=!0),this.pc(this,!t)}},s:function(){var e=this[A];!e.G&&e.F&&E.a.O(e.F,function(t,e){e.s&&e.s()}),e.l&&e.Qb&&E.a.I.xb(e.l,e.Qb),e.F=t,e.V=0,e.qa=!0,e.ra=!1,e.ka=!1,e.G=!1,e.l=t,e.Sa=t,e.Vc=t,this.Mc||(e.lb=t)}},x={Qa:function(t){var e=this,n=e[A];if(!n.qa&&n.G&&"change"==t){if(n.G=!1,n.ra||e.Xa())n.F=null,n.V=0,e.ha()&&e.Gb();else{var i=[];E.a.O(n.F,function(t,e){i[e.La]=t}),E.a.C(i,function(t,i){var r=n.F[t],o=e.Zc(r.da);o.La=i,o.Ma=r.Ma,n.F[t]=o}),e.Xa()&&e.ha()&&e.Gb()}n.qa||e.notifySubscribers(n.X,"awake")}},cb:function(e){var n=this[A];n.qa||"change"!=e||this.Wa("change")||(E.a.O(n.F,function(t,e){e.s&&(n.F[t]={da:e.da,La:e.La,Ma:e.Ma},e.s())}),n.G=!0,this.notifySubscribers(t,"asleep"))},mb:function(){var t=this[A];return t.G&&(t.ra||this.Xa())&&this.ha(),E.R.fn.mb.call(this)}},C={Qa:function(t){"change"!=t&&"beforeChange"!=t||this.w()}};E.a.Ba&&E.a.setPrototypeOf(I,E.R.fn);var O=E.sa.Na;I[O]=E.o,E.Nc=function(t){return"function"==typeof t&&t[O]===I[O]},E.Ed=function(t){return E.Nc(t)&&t[A]&&t[A].vb},E.b("computed",E.o),E.b("dependentObservable",E.o),E.b("isComputed",E.Nc),E.b("isPureComputed",E.Ed),E.b("computed.fn",I),E.J(I,"peek",I.w),E.J(I,"dispose",I.s),E.J(I,"isActive",I.ja),E.J(I,"getDependenciesCount",I.pa),E.J(I,"getDependencies",I.Va),E.wb=function(t,e){return"function"==typeof t?E.o(t,e,{pure:!0}):((t=E.a.extend({},t)).pure=!0,E.o(t,e))},E.b("pureComputed",E.wb),function(){function e(i,r,o){if(o=o||new n,"object"!=typeof(i=r(i))||null===i||i===t||i instanceof RegExp||i instanceof Date||i instanceof String||i instanceof Number||i instanceof Boolean)return i;var a=i instanceof Array?[]:{};return o.save(i,a),function(t,e){if(t instanceof Array){for(var n=0;n<t.length;n++)e(n);"function"==typeof t.toJSON&&e("toJSON")}else for(n in t)e(n)}(i,function(n){var s=r(i[n]);switch(typeof s){case"boolean":case"number":case"string":case"function":a[n]=s;break;case"object":case"undefined":var u=o.get(s);a[n]=u!==t?u:e(s,r,o)}}),a}function n(){this.keys=[],this.values=[]}E.$c=function(t){if(0==arguments.length)throw Error("When calling ko.toJS, pass the object you want to convert.");return e(t,function(t){for(var e=0;E.N(t)&&10>e;e++)t=t();return t})},E.toJSON=function(t,e,n){return t=E.$c(t),E.a.fc(t,e,n)},n.prototype={constructor:n,save:function(t,e){var n=E.a.A(this.keys,t);0<=n?this.values[n]=e:(this.keys.push(t),this.values.push(e))},get:function(e){return 0<=(e=E.a.A(this.keys,e))?this.values[e]:t}}}(),E.b("toJS",E.$c),E.b("toJSON",E.toJSON),E.Vd=function(t,e,n){function i(e){var i=E.wb(t,n).extend({Ga:"always"}),r=i.subscribe(function(t){t&&(r.s(),e(t))});return i.notifySubscribers(i.w()),r}return"function"!=typeof Promise||e?i(e.bind(n)):new Promise(i)},E.b("when",E.Vd),E.u={L:function(e){switch(E.a.P(e)){case"option":return!0===e.__ko__hasDomDataOptionValue__?E.a.g.get(e,E.f.options.Yb):7>=E.a.W?e.getAttributeNode("value")&&e.getAttributeNode("value").specified?e.value:e.text:e.value;case"select":return 0<=e.selectedIndex?E.u.L(e.options[e.selectedIndex]):t;default:return e.value}},ya:function(e,n,i){switch(E.a.P(e)){case"option":"string"==typeof n?(E.a.g.set(e,E.f.options.Yb,t),"__ko__hasDomDataOptionValue__"in e&&delete e.__ko__hasDomDataOptionValue__,e.value=n):(E.a.g.set(e,E.f.options.Yb,n),e.__ko__hasDomDataOptionValue__=!0,e.value="number"==typeof n?n:"");break;case"select":""!==n&&null!==n||(n=t);for(var r,o=-1,a=0,s=e.options.length;a<s;++a)if((r=E.u.L(e.options[a]))==n||""===r&&n===t){o=a;break}(i||0<=o||n===t&&1<e.size)&&(e.selectedIndex=o,6===E.a.W&&E.a.setTimeout(function(){e.selectedIndex=o},0));break;default:null!==n&&n!==t||(n=""),e.value=n}}},E.b("selectExtensions",E.u),E.b("selectExtensions.readValue",E.u.L),E.b("selectExtensions.writeValue",E.u.ya),E.m=function(){function t(t){123===(t=E.a.Cb(t)).charCodeAt(0)&&(t=t.slice(1,-1));var e,n=[],a=(t+="\n,").match(i),s=[],u=0;if(1<a.length){for(var l,h=0;l=a[h];++h){var c=l.charCodeAt(0);if(44===c){if(0>=u){n.push(e&&s.length?{key:e,value:s.join("")}:{unknown:e||s.join("")}),e=u=0,s=[];continue}}else if(58===c){if(!u&&!e&&1===s.length){e=s.pop();continue}}else{if(47===c&&1<l.length&&(47===l.charCodeAt(1)||42===l.charCodeAt(1)))continue;47===c&&h&&1<l.length?(c=a[h-1].match(r))&&!o[c[0]]&&(a=(t=t.substr(t.indexOf(l)+1)).match(i),h=-1,l="/"):40===c||123===c||91===c?++u:41===c||125===c||93===c?--u:e||s.length||34!==c&&39!==c||(l=l.slice(1,-1))}s.push(l)}if(0<u)throw Error("Unbalanced parentheses, braces, or brackets")}return n}var e=["true","false","null","undefined"],n=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i,i=RegExp("\"(?:\\\\.|[^\"])*\"|'(?:\\\\.|[^'])*'|`(?:\\\\.|[^`])*`|/\\*(?:[^*]|\\*+[^*/])*\\*+/|//.*\n|/(?:\\\\.|[^/])+/w*|[^\\s:,/][^,\"'`{}()/:[\\]]*[^\\s,\"'`{}()/:[\\]]|[^\\s]","g"),r=/[\])"'A-Za-z0-9_$]+$/,o={in:1,return:1,typeof:1},a={};return{Ra:[],va:a,Zb:t,ub:function(i,r){function o(t,i){var r;if(!h){var c=E.getBindingHandler(t);if(c&&c.preprocess&&!(i=c.preprocess(i,t,o)))return;(c=a[t])&&(r=i,0<=E.a.A(e,r)?r=!1:(c=r.match(n),r=null!==c&&(c[1]?"Object("+c[1]+")"+c[2]:r)),c=r),c&&u.push("'"+("string"==typeof a[t]?a[t]:t)+"':function(_z){"+r+"=_z}")}l&&(i="function(){return "+i+" }"),s.push("'"+t+"':"+i)}var s=[],u=[],l=(r=r||{}).valueAccessors,h=r.bindingParams,c="string"==typeof i?t(i):i;return E.a.C(c,function(t){o(t.key||t.unknown,t.value)}),u.length&&o("_ko_property_writers","{"+u.join(",")+" }"),s.join(",")},Hd:function(t,e){for(var n=0;n<t.length;n++)if(t[n].key==e)return!0;return!1},$a:function(t,e,n,i,r){t&&E.N(t)?!E.Ya(t)||r&&t.w()===i||t(i):(t=e.get("_ko_property_writers"))&&t[n]&&t[n](i)}}}(),E.b("expressionRewriting",E.m),E.b("expressionRewriting.bindingRewriteValidators",E.m.Ra),E.b("expressionRewriting.parseObjectLiteral",E.m.Zb),E.b("expressionRewriting.preProcessBindings",E.m.ub),E.b("expressionRewriting._twoWayBindings",E.m.va),E.b("jsonExpressionRewriting",E.m),E.b("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",E.m.ub),function(){function t(t){return 8==t.nodeType&&a.test(o?t.text:t.nodeValue)}function e(t){return 8==t.nodeType&&s.test(o?t.text:t.nodeValue)}function n(n,i){for(var r=n,o=1,a=[];r=r.nextSibling;){if(e(r)&&(E.a.g.set(r,l,!0),0==--o))return a;a.push(r),t(r)&&o++}if(!i)throw Error("Cannot find closing comment tag to match: "+n.nodeValue);return null}function i(t,e){var i=n(t,e);return i?0<i.length?i[i.length-1].nextSibling:t.nextSibling:null}var o=r&&"\x3c!--test--\x3e"===r.createComment("test").text,a=o?/^\x3c!--\s*ko(?:\s+([\s\S]+))?\s*--\x3e$/:/^\s*ko(?:\s+([\s\S]+))?\s*$/,s=o?/^\x3c!--\s*\/ko\s*--\x3e$/:/^\s*\/ko\s*$/,u={ul:!0,ol:!0},l="__ko_matchedEndComment__";E.h={ea:{},childNodes:function(e){return t(e)?n(e):e.childNodes},Ea:function(e){if(t(e))for(var n=0,i=(e=E.h.childNodes(e)).length;n<i;n++)E.removeNode(e[n]);else E.a.Sb(e)},ua:function(e,n){if(t(e)){E.h.Ea(e);for(var i=e.nextSibling,r=0,o=n.length;r<o;r++)i.parentNode.insertBefore(n[r],i)}else E.a.ua(e,n)},Uc:function(e,n){t(e)?e.parentNode.insertBefore(n,e.nextSibling):e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n)},Vb:function(e,n,i){i?t(e)?e.parentNode.insertBefore(n,i.nextSibling):i.nextSibling?e.insertBefore(n,i.nextSibling):e.appendChild(n):E.h.Uc(e,n)},firstChild:function(n){if(t(n))return!n.nextSibling||e(n.nextSibling)?null:n.nextSibling;if(n.firstChild&&e(n.firstChild))throw Error("Found invalid end comment, as the first child of "+n);return n.firstChild},nextSibling:function(n){if(t(n)&&(n=i(n)),n.nextSibling&&e(n.nextSibling)){var r=n.nextSibling;if(e(r)&&!E.a.g.get(r,l))throw Error("Found end comment without a matching opening comment, as child of "+n);return null}return n.nextSibling},Bd:t,Ud:function(t){return(t=(o?t.text:t.nodeValue).match(a))?t[1]:null},Rc:function(n){if(u[E.a.P(n)]){var r=n.firstChild;if(r)do{if(1===r.nodeType){var o,a=null;if(o=r.firstChild)do{if(a)a.push(o);else if(t(o)){var s=i(o,!0);s?o=s:a=[o]}else e(o)&&(a=[o])}while(o=o.nextSibling);if(o=a)for(a=r.nextSibling,s=0;s<o.length;s++)a?n.insertBefore(o[s],a):n.appendChild(o[s])}}while(r=r.nextSibling)}}}}(),E.b("virtualElements",E.h),E.b("virtualElements.allowedBindings",E.h.ea),E.b("virtualElements.emptyNode",E.h.Ea),E.b("virtualElements.insertAfter",E.h.Vb),E.b("virtualElements.prepend",E.h.Uc),E.b("virtualElements.setDomNodeChildren",E.h.ua),E.ga=function(){this.md={}},E.a.extend(E.ga.prototype,{nodeHasBindings:function(t){switch(t.nodeType){case 1:return null!=t.getAttribute("data-bind")||E.i.getComponentNameForNode(t);case 8:return E.h.Bd(t);default:return!1}},getBindings:function(t,e){var n=(n=this.getBindingsString(t,e))?this.parseBindingsString(n,e,t):null;return E.i.sc(n,t,e,!1)},getBindingAccessors:function(t,e){var n=(n=this.getBindingsString(t,e))?this.parseBindingsString(n,e,t,{valueAccessors:!0}):null;return E.i.sc(n,t,e,!0)},getBindingsString:function(t){switch(t.nodeType){case 1:return t.getAttribute("data-bind");case 8:return E.h.Ud(t);default:return null}},parseBindingsString:function(t,e,n,i){try{var r,o=this.md,a=t+(i&&i.valueAccessors||"");if(!(r=o[a])){var s,u="with($context){with($data||{}){return{"+E.m.ub(t,i)+"}}}";s=new Function("$context","$element",u),r=o[a]=s}return r(e,n)}catch(e){throw e.message="Unable to parse bindings.\nBindings value: "+t+"\nMessage: "+e.message,e}}}),E.ga.instance=new E.ga,E.b("bindingProvider",E.ga),function(){function e(t){var e=(t=E.a.g.get(t,w))&&t.M;e&&(t.M=null,e.Sc())}function n(t,n,i){this.node=t,this.xc=n,this.ib=[],this.T=!1,n.M||E.a.I.za(t,e),i&&i.M&&(i.M.ib.push(t),this.Kb=i)}function o(t){return function(){return t}}function s(t){return t()}function u(t){return E.a.Ha(E.v.K(t),function(e,n){return function(){return t()[n]}})}function l(t,e,n){return"function"==typeof t?u(t.bind(null,e,n)):E.a.Ha(t,o)}function h(t,e){return u(this.getBindings.bind(this,t,e))}function c(t,e){var n=E.h.firstChild(e);if(n){var i,r=E.ga.instance,o=r.preprocessNode;if(o){for(;i=n;)n=E.h.nextSibling(i),o.call(r,i);n=E.h.firstChild(e)}for(;i=n;)n=E.h.nextSibling(i),p(t,i)}E.j.Ga(e,E.j.T)}function p(t,e){var n=t,i=1===e.nodeType;i&&E.h.Rc(e),(i||E.ga.instance.nodeHasBindings(e))&&(n=f(e,null,t).bindingContextForDescendants),n&&!y[E.a.P(e)]&&c(n,e)}function f(e,n,i){var r,o=E.a.g.Tb(e,w,{}),a=o.gd;if(!n){if(a)throw Error("You cannot apply bindings multiple times to the same element.");o.gd=!0}if(a||(o.context=i),n&&"function"!=typeof n)r=n;else{var u=E.ga.instance,l=u.getBindingAccessors||h,c=E.$(function(){return(r=n?n(i,e):l.call(u,e,i))&&(i[v]&&i[v](),i[m]&&i[m]()),r},null,{l:e});r&&c.ja()||(c=null)}var p,f=i;if(r){var d=function(){return E.a.Ha(c?c():r,s)},g=c?function(t){return function(){return s(c()[t])}}:function(t){return r[t]};d.get=function(t){return r[t]&&s(g(t))},d.has=function(t){return t in r},E.j.T in r&&E.j.subscribe(e,E.j.T,function(){var t=(0,r[E.j.T])();if(t){var n=E.h.childNodes(e);n.length&&t(n,E.Dc(n[0]))}}),E.j.oa in r&&(f=E.j.Bb(e,i),E.j.subscribe(e,E.j.oa,function(){var t=(0,r[E.j.oa])();t&&E.h.firstChild(e)&&t(e)})),o=function(t){var e=[],n={},i=[];return E.a.O(t,function r(o){if(!n[o]){var a=E.getBindingHandler(o);a&&(a.after&&(i.push(o),E.a.C(a.after,function(e){if(t[e]){if(-1!==E.a.A(i,e))throw Error("Cannot combine the following bindings, because they have a cyclic dependency: "+i.join(", "));r(e)}}),i.length--),e.push({key:o,Lc:a})),n[o]=!0}}),e}(r),E.a.C(o,function(n){var i=n.Lc.init,o=n.Lc.update,a=n.key;if(8===e.nodeType&&!E.h.ea[a])throw Error("The binding '"+a+"' cannot be used with virtual elements");try{"function"==typeof i&&E.v.K(function(){var n=i(e,g(a),d,f.$data,f);if(n&&n.controlsDescendantBindings){if(p!==t)throw Error("Multiple bindings ("+p+" and "+a+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");p=a}}),"function"==typeof o&&E.$(function(){o(e,g(a),d,f.$data,f)},null,{l:e})}catch(t){throw t.message='Unable to process binding "'+a+": "+r[a]+'"\nMessage: '+t.message,t}})}return{shouldBindDescendants:o=p===t,bindingContextForDescendants:o&&f}}function d(e,n){return e&&e instanceof E.fa?e:new E.fa(e,t,t,n)}var v=E.a.Da("_subscribable"),g=E.a.Da("_ancestorBindingInfo"),m=E.a.Da("_dataDependency");E.f={};var y={script:!0,textarea:!0,template:!0};E.getBindingHandler=function(t){return E.f[t]};var b={};E.fa=function(e,n,i,r,o){function a(){var t=c?h():h,e=E.a.c(t);return n?(E.a.extend(u,n),g in n&&(u[g]=n[g])):(u.$parents=[],u.$root=e,u.ko=E),u[v]=s,l?e=u.$data:(u.$rawData=t,u.$data=e),i&&(u[i]=e),r&&r(u,n,e),n&&n[v]&&!E.U.o().Ub(n[v])&&n[v](),p&&(u[m]=p),u.$data}var s,u=this,l=e===b,h=l?t:e,c="function"==typeof h&&!E.N(h),p=o&&o.dataDependency;o&&o.exportDependencies?a():((s=E.wb(a)).w(),s.ja()?s.equalityComparer=null:u[v]=t)},E.fa.prototype.createChildContext=function(t,e,n,i){if(!i&&e&&"object"==typeof e&&(e=(i=e).as,n=i.extend),e&&i&&i.noChildContext){var r="function"==typeof t&&!E.N(t);return new E.fa(b,this,null,function(i){n&&n(i),i[e]=r?t():t},i)}return new E.fa(t,this,e,function(t,e){t.$parentContext=e,t.$parent=e.$data,t.$parents=(e.$parents||[]).slice(0),t.$parents.unshift(t.$parent),n&&n(t)},i)},E.fa.prototype.extend=function(t,e){return new E.fa(b,this,null,function(e){E.a.extend(e,"function"==typeof t?t(e):t)},e)};var w=E.a.g.Z();n.prototype.Sc=function(){this.Kb&&this.Kb.M&&this.Kb.M.rd(this.node)},n.prototype.rd=function(t){E.a.hb(this.ib,t),!this.ib.length&&this.T&&this.Bc()},n.prototype.Bc=function(){this.T=!0,this.xc.M&&!this.ib.length&&(this.xc.M=null,E.a.I.xb(this.node,e),E.j.Ga(this.node,E.j.oa),this.Sc())},E.j={T:"childrenComplete",oa:"descendantsComplete",subscribe:function(t,e,n,i){return(t=E.a.g.Tb(t,w,{})).Fa||(t.Fa=new E.R),t.Fa.subscribe(n,i,e)},Ga:function(e,n){var i=E.a.g.get(e,w);if(i&&(i.Fa&&i.Fa.notifySubscribers(e,n),n==E.j.T))if(i.M)i.M.Bc();else if(i.M===t&&i.Fa&&i.Fa.Wa(E.j.oa))throw Error("descendantsComplete event not supported for bindings on this node")},Bb:function(t,e){var i=E.a.g.Tb(t,w,{});return i.M||(i.M=new n(t,i,e[g])),e[g]==i?e:e.extend(function(t){t[g]=i})}},E.Sd=function(t){return(t=E.a.g.get(t,w))&&t.context},E.eb=function(t,e,n){return 1===t.nodeType&&E.h.Rc(t),f(t,e,d(n))},E.kd=function(t,e,n){return n=d(n),E.eb(t,l(e,n,t),n)},E.Pa=function(t,e){1!==e.nodeType&&8!==e.nodeType||c(d(t),e)},E.uc=function(t,e,n){if(!a&&i.jQuery&&(a=i.jQuery),2>arguments.length){if(!(e=r.body))throw Error("ko.applyBindings: could not find document.body; has the document been loaded?")}else if(!e||1!==e.nodeType&&8!==e.nodeType)throw Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");p(d(t,n),e)},E.Cc=function(e){return!e||1!==e.nodeType&&8!==e.nodeType?t:E.Sd(e)},E.Dc=function(e){return(e=E.Cc(e))?e.$data:t},E.b("bindingHandlers",E.f),E.b("bindingEvent",E.j),E.b("bindingEvent.subscribe",E.j.subscribe),E.b("bindingEvent.startPossiblyAsyncContentBinding",E.j.Bb),E.b("applyBindings",E.uc),E.b("applyBindingsToDescendants",E.Pa),E.b("applyBindingAccessorsToNode",E.eb),E.b("applyBindingsToNode",E.kd),E.b("contextFor",E.Cc),E.b("dataFor",E.Dc)}(),function(t){function e(e,i){var a,s=Object.prototype.hasOwnProperty.call(r,e)?r[e]:t;s?s.subscribe(i):((s=r[e]=new E.R).subscribe(i),n(e,function(t,n){var i=!(!n||!n.synchronous);o[e]={definition:t,Fd:i},delete r[e],a||i?s.notifySubscribers(t):E.ma.yb(function(){s.notifySubscribers(t)})}),a=!0)}function n(t,e){i("getConfig",[t],function(n){n?i("loadComponent",[t,n],function(t){e(t,n)}):e(null,null)})}function i(e,n,r,o){o||(o=E.i.loaders.slice(0));var a=o.shift();if(a){var s=a[e];if(s){var u=!1;if(s.apply(a,n.concat(function(t){u?r(null):null!==t?r(t):i(e,n,r,o)}))!==t&&(u=!0,!a.suppressLoaderExceptions))throw Error("Component loaders must supply values by invoking the callback, not by returning values synchronously.")}else i(e,n,r,o)}else r(null)}var r={},o={};E.i={get:function(n,i){var r=Object.prototype.hasOwnProperty.call(o,n)?o[n]:t;r?r.Fd?E.v.K(function(){i(r.definition)}):E.ma.yb(function(){i(r.definition)}):e(n,i)},Ac:function(t){delete o[t]},nc:i},E.i.loaders=[],E.b("components",E.i),E.b("components.get",E.i.get),E.b("components.clearCachedDefinition",E.i.Ac)}(),function(){function t(t,e,n,i){function r(){0==--s&&i(o)}var o={},s=2,u=n.template;n=n.viewModel,u?a(e,u,function(e){E.i.nc("loadTemplate",[t,e],function(t){o.template=t,r()})}):r(),n?a(e,n,function(e){E.i.nc("loadViewModel",[t,e],function(t){o[l]=t,r()})}):r()}function e(t){switch(E.a.P(t)){case"script":return E.a.ta(t.text);case"textarea":return E.a.ta(t.value);case"template":if(o(t.content))return E.a.Ca(t.content.childNodes)}return E.a.Ca(t.childNodes)}function o(t){return i.DocumentFragment?t instanceof DocumentFragment:t&&11===t.nodeType}function a(t,e,r){"string"==typeof e.require?n||i.require?(n||i.require)([e.require],r):t("Uses require, but no AMD loader is present"):r(e)}function s(t){return function(e){throw Error("Component '"+t+"': "+e)}}var u={};E.i.register=function(t,e){if(!e)throw Error("Invalid configuration for "+t);if(E.i.sb(t))throw Error("Component "+t+" is already registered");u[t]=e},E.i.sb=function(t){return Object.prototype.hasOwnProperty.call(u,t)},E.i.unregister=function(t){delete u[t],E.i.Ac(t)},E.i.Ec={getConfig:function(t,e){e(E.i.sb(t)?u[t]:null)},loadComponent:function(e,n,i){var r=s(e);a(r,n,function(n){t(e,r,n,i)})},loadTemplate:function(t,n,a){if(t=s(t),"string"==typeof n)a(E.a.ta(n));else if(n instanceof Array)a(n);else if(o(n))a(E.a.la(n.childNodes));else if(n.element)if(n=n.element,i.HTMLElement?n instanceof HTMLElement:n&&n.tagName&&1===n.nodeType)a(e(n));else if("string"==typeof n){var u=r.getElementById(n);u?a(e(u)):t("Cannot find element with ID "+n)}else t("Unknown element type: "+n);else t("Unknown template value: "+n)},loadViewModel:function(t,e,n){!function t(e,n,i){if("function"==typeof n)i(function(t){return new n(t)});else if("function"==typeof n[l])i(n[l]);else if("instance"in n){var r=n.instance;i(function(){return r})}else"viewModel"in n?t(e,n.viewModel,i):e("Unknown viewModel value: "+n)}(s(t),e,n)}};var l="createViewModel";E.b("components.register",E.i.register),E.b("components.isRegistered",E.i.sb),E.b("components.unregister",E.i.unregister),E.b("components.defaultLoader",E.i.Ec),E.i.loaders.push(E.i.Ec),E.i.cd=u}(),function(){function t(t,n){if(i=t.getAttribute("params")){var i=e.parseBindingsString(i,n,t,{valueAccessors:!0,bindingParams:!0}),r=(i=E.a.Ha(i,function(e){return E.o(e,null,{l:t})}),E.a.Ha(i,function(e){var n=e.w();return e.ja()?E.o({read:function(){return E.a.c(e())},write:E.Ya(n)&&function(t){e()(t)},l:t}):n}));return Object.prototype.hasOwnProperty.call(r,"$raw")||(r.$raw=i),r}return{$raw:{}}}E.i.getComponentNameForNode=function(t){var e=E.a.P(t);if(E.i.sb(e)&&(-1!=e.indexOf("-")||"[object HTMLUnknownElement]"==""+t||8>=E.a.W&&t.tagName===e))return e},E.i.sc=function(e,n,i,r){if(1===n.nodeType){var o=E.i.getComponentNameForNode(n);if(o){if((e=e||{}).component)throw Error('Cannot use the "component" binding on a custom element matching a component');var a={name:o,params:t(n,i)};e.component=r?function(){return a}:a}}return e};var e=new E.ga;9>E.a.W&&(E.i.register=function(t){return function(e){return t.apply(this,arguments)}}(E.i.register),r.createDocumentFragment=function(t){return function(){var e,n=t(),i=E.i.cd;for(e in i);return n}}(r.createDocumentFragment))}(),function(){var t=0;E.f.component={init:function(e,n,i,r,o){function a(){var t=s&&s.dispose;"function"==typeof t&&t.call(s),l&&l.s(),u=s=l=null}var s,u,l,h=E.a.la(E.h.childNodes(e));return E.h.Ea(e),E.a.I.za(e,a),E.o(function(){var i,r,c=E.a.c(n());if("string"==typeof c?i=c:(i=E.a.c(c.name),r=E.a.c(c.params)),!i)throw Error("No component name specified");var p=E.j.Bb(e,o),f=u=++t;E.i.get(i,function(t){if(u===f){if(a(),!t)throw Error("Unknown component '"+i+"'");!function(t,e,n){if(!(e=e.template))throw Error("Component '"+t+"' has no template");t=E.a.Ca(e),E.h.ua(n,t)}(i,t,e);var n=function(t,e,n){var i=t.createViewModel;return i?i.call(t,e,n):e}(t,r,{element:e,templateNodes:h});t=p.createChildContext(n,{extend:function(t){t.$component=n,t.$componentTemplateNodes=h}}),n&&n.koDescendantsComplete&&(l=E.j.subscribe(e,E.j.oa,n.koDescendantsComplete,n)),s=n,E.Pa(t,e)}})},null,{l:e}),{controlsDescendantBindings:!0}}},E.h.ea.component=!0}();var k={class:"className",for:"htmlFor"};E.f.attr={update:function(e,n){var i=E.a.c(n())||{};E.a.O(i,function(n,i){i=E.a.c(i);var r=n.indexOf(":"),o=(r="lookupNamespaceURI"in e&&0<r&&e.lookupNamespaceURI(n.substr(0,r)),!1===i||null===i||i===t);o?r?e.removeAttributeNS(r,n):e.removeAttribute(n):i=i.toString(),8>=E.a.W&&n in k?(n=k[n],o?e.removeAttribute(n):e[n]=i):o||(r?e.setAttributeNS(r,n,i):e.setAttribute(n,i)),"name"===n&&E.a.Xc(e,o?"":i)})}},E.f.checked={after:["value","attr"],init:function(e,n,i){function r(){var r=e.checked,u=o();if(!E.U.rb()&&(r||!s&&!E.U.pa())){var c=E.v.K(n);if(l){var f=h?c.w():c,d=p;p=u,d!==u?r&&(E.a.Oa(f,u,!0),E.a.Oa(f,d,!1)):E.a.Oa(f,u,r),h&&E.Ya(c)&&c(f)}else a&&(u===t?u=r:r||(u=t)),E.m.$a(c,i,"checked",u,!0)}}var o=E.wb(function(){return i.has("checkedValue")?E.a.c(i.get("checkedValue")):c?i.has("value")?E.a.c(i.get("value")):e.value:void 0}),a="checkbox"==e.type,s="radio"==e.type;if(a||s){var u=n(),l=a&&E.a.c(u)instanceof Array,h=!(l&&u.push&&u.splice),c=s||l,p=l?o():t;s&&!e.name&&E.f.uniqueName.init(e,function(){return!0}),E.o(r,null,{l:e}),E.a.H(e,"click",r),E.o(function(){var i=E.a.c(n()),r=o();l?(e.checked=0<=E.a.A(i,r),p=r):e.checked=a&&r===t?!!i:o()===i},null,{l:e}),u=t}}},E.m.va.checked=!0,E.f.checkedValue={update:function(t,e){t.value=E.a.c(e())}},E.f.class={update:function(t,e){var n=E.a.Cb(E.a.c(e()));E.a.Eb(t,t.__ko__cssValue,!1),t.__ko__cssValue=n,E.a.Eb(t,n,!0)}},E.f.css={update:function(t,e){var n=E.a.c(e());null!==n&&"object"==typeof n?E.a.O(n,function(e,n){n=E.a.c(n),E.a.Eb(t,e,n)}):E.f.class.update(t,e)}},E.f.enable={update:function(t,e){var n=E.a.c(e());n&&t.disabled?t.removeAttribute("disabled"):n||t.disabled||(t.disabled=!0)}},E.f.disable={update:function(t,e){E.f.enable.update(t,function(){return!E.a.c(e())})}},E.f.event={init:function(t,e,n,i,r){var o=e()||{};E.a.O(o,function(o){"string"==typeof o&&E.a.H(t,o,function(t){var a,s=e()[o];if(s){try{var u=E.a.la(arguments);i=r.$data,u.unshift(i),a=s.apply(i,u)}finally{!0!==a&&(t.preventDefault?t.preventDefault():t.returnValue=!1)}!1===n.get(o+"Bubble")&&(t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation())}})})}},E.f.foreach={Qc:function(t){return function(){var e=t(),n=E.a.$b(e);return n&&"number"!=typeof n.length?(E.a.c(e),{foreach:n.data,as:n.as,noChildContext:n.noChildContext,includeDestroyed:n.includeDestroyed,afterAdd:n.afterAdd,beforeRemove:n.beforeRemove,afterRender:n.afterRender,beforeMove:n.beforeMove,afterMove:n.afterMove,templateEngine:E.ba.Na}):{foreach:e,templateEngine:E.ba.Na}}},init:function(t,e){return E.f.template.init(t,E.f.foreach.Qc(e))},update:function(t,e,n,i,r){return E.f.template.update(t,E.f.foreach.Qc(e),n,i,r)}},E.m.Ra.foreach=!1,E.h.ea.foreach=!0,E.f.hasfocus={init:function(t,e,n){function i(i){t.__ko_hasfocusUpdating=!0;var r=t.ownerDocument;if("activeElement"in r){var o;try{o=r.activeElement}catch(t){o=r.body}i=o===t}r=e(),E.m.$a(r,n,"hasfocus",i,!0),t.__ko_hasfocusLastValue=i,t.__ko_hasfocusUpdating=!1}var r=i.bind(null,!0),o=i.bind(null,!1);E.a.H(t,"focus",r),E.a.H(t,"focusin",r),E.a.H(t,"blur",o),E.a.H(t,"focusout",o),t.__ko_hasfocusLastValue=!1},update:function(t,e){var n=!!E.a.c(e());t.__ko_hasfocusUpdating||t.__ko_hasfocusLastValue===n||(n?t.focus():t.blur(),!n&&t.__ko_hasfocusLastValue&&t.ownerDocument.body.focus(),E.v.K(E.a.Fb,null,[t,n?"focusin":"focusout"]))}},E.m.va.hasfocus=!0,E.f.hasFocus=E.f.hasfocus,E.m.va.hasFocus="hasfocus",E.f.html={init:function(){return{controlsDescendantBindings:!0}},update:function(t,e){E.a.dc(t,e())}},function(){function t(t,e,n){E.f[t]={init:function(t,i,r,o,a){var s,u,l,h,c,p={};if(e){o=r.get("as");var f=r.get("noChildContext");p={as:o,noChildContext:f,exportDependencies:c=!(o&&f)}}return h=(l="render"==r.get("completeOn"))||r.has(E.j.oa),E.o(function(){var r,o=E.a.c(i()),f=!n!=!o,d=!u;(c||f!==s)&&(h&&(a=E.j.Bb(t,a)),f&&(e&&!c||(p.dataDependency=E.U.o()),r=e?a.createChildContext("function"==typeof o?o:i,p):E.U.pa()?a.extend(null,p):a),d&&E.U.pa()&&(u=E.a.Ca(E.h.childNodes(t),!0)),f?(d||E.h.ua(t,E.a.Ca(u)),E.Pa(r,t)):(E.h.Ea(t),l||E.j.Ga(t,E.j.T)),s=f)},null,{l:t}),{controlsDescendantBindings:!0}}},E.m.Ra[t]=!1,E.h.ea[t]=!0}t("if"),t("ifnot",!1,!0),t("with",!0)}(),E.f.let={init:function(t,e,n,i,r){return e=r.extend(e),E.Pa(e,t),{controlsDescendantBindings:!0}}},E.h.ea.let=!0;var L={};E.f.options={init:function(t){if("select"!==E.a.P(t))throw Error("options binding applies only to SELECT elements");for(;0<t.length;)t.remove(0);return{controlsDescendantBindings:!0}},update:function(e,n,i){function r(){return E.a.fb(e.options,function(t){return t.selected})}function o(t,e,n){var i=typeof e;return"function"==i?e(t):"string"==i?t[e]:n}function a(t,n){if(d&&h)E.u.ya(e,E.a.c(i.get("value")),!0);else if(f.length){var r=0<=E.a.A(f,E.u.L(n[0]));E.a.Yc(n[0],r),d&&!r&&E.v.K(E.a.Fb,null,[e,"change"])}}var s=e.multiple,u=0!=e.length&&s?e.scrollTop:null,l=E.a.c(n()),h=i.get("valueAllowUnset")&&i.has("value"),c=i.get("optionsIncludeDestroyed");n={};var p,f=[];h||(s?f=E.a.Mb(r(),E.u.L):0<=e.selectedIndex&&f.push(E.u.L(e.options[e.selectedIndex]))),l&&(void 0===l.length&&(l=[l]),p=E.a.fb(l,function(e){return c||e===t||null===e||!E.a.c(e._destroy)}),i.has("optionsCaption")&&null!==(l=E.a.c(i.get("optionsCaption")))&&l!==t&&p.unshift(L));var d=!1;n.beforeRemove=function(t){e.removeChild(t)},l=a,i.has("optionsAfterRender")&&"function"==typeof i.get("optionsAfterRender")&&(l=function(e,n){a(0,n),E.v.K(i.get("optionsAfterRender"),null,[n[0],e!==L?e:t])}),E.a.cc(e,p,function(n,r,a){return a.length&&(f=!h&&a[0].selected?[E.u.L(a[0])]:[],d=!0),r=e.ownerDocument.createElement("option"),n===L?(E.a.Ab(r,i.get("optionsCaption")),E.u.ya(r,t)):(a=o(n,i.get("optionsValue"),n),E.u.ya(r,E.a.c(a)),n=o(n,i.get("optionsText"),a),E.a.Ab(r,n)),[r]},n,l),E.v.K(function(){h?E.u.ya(e,E.a.c(i.get("value")),!0):(s?f.length&&r().length<f.length:f.length&&0<=e.selectedIndex?E.u.L(e.options[e.selectedIndex])!==f[0]:f.length||0<=e.selectedIndex)&&E.a.Fb(e,"change")}),E.a.vd(e),u&&20<Math.abs(u-e.scrollTop)&&(e.scrollTop=u)}},E.f.options.Yb=E.a.g.Z(),E.f.selectedOptions={after:["options","foreach"],init:function(t,e,n){E.a.H(t,"change",function(){var i=e(),r=[];E.a.C(t.getElementsByTagName("option"),function(t){t.selected&&r.push(E.u.L(t))}),E.m.$a(i,n,"selectedOptions",r)})},update:function(t,e){if("select"!=E.a.P(t))throw Error("values binding applies only to SELECT elements");var n=E.a.c(e()),i=t.scrollTop;n&&"number"==typeof n.length&&E.a.C(t.getElementsByTagName("option"),function(t){var e=0<=E.a.A(n,E.u.L(t));t.selected!=e&&E.a.Yc(t,e)}),t.scrollTop=i}},E.m.va.selectedOptions=!0,E.f.style={update:function(e,n){var i=E.a.c(n()||{});E.a.O(i,function(n,i){if(null!==(i=E.a.c(i))&&i!==t&&!1!==i||(i=""),a)a(e).css(n,i);else if(/^--/.test(n))e.style.setProperty(n,i);else{n=n.replace(/-(\w)/g,function(t,e){return e.toUpperCase()});var r=e.style[n];e.style[n]=i,i===r||e.style[n]!=r||isNaN(i)||(e.style[n]=i+"px")}})}},E.f.submit={init:function(t,e,n,i,r){if("function"!=typeof e())throw Error("The value for a submit binding must be a function");E.a.H(t,"submit",function(n){var i,o=e();try{i=o.call(r.$data,t)}finally{!0!==i&&(n.preventDefault?n.preventDefault():n.returnValue=!1)}})}},E.f.text={init:function(){return{controlsDescendantBindings:!0}},update:function(t,e){E.a.Ab(t,e())}},E.h.ea.text=!0,function(){if(i&&i.navigator){var e,n,r,o,a,s=function(t){if(t)return parseFloat(t[1])},u=i.navigator.userAgent;(e=i.opera&&i.opera.version&&parseInt(i.opera.version()))||(a=s(u.match(/Edge\/([^ ]+)$/)))||s(u.match(/Chrome\/([^ ]+)/))||(n=s(u.match(/Version\/([^ ]+) Safari/)))||(r=s(u.match(/Firefox\/([^ ]+)/)))||(o=E.a.W||s(u.match(/MSIE ([^ ]+)/)))||(o=s(u.match(/rv:([^ )]+)/)))}if(8<=o&&10>o)var l=E.a.g.Z(),h=E.a.g.Z(),c=function(t){var e=this.activeElement;(e=e&&E.a.g.get(e,h))&&e(t)},p=function(t,e){var n=t.ownerDocument;E.a.g.get(n,l)||(E.a.g.set(n,l,!0),E.a.H(n,"selectionchange",c)),E.a.g.set(t,h,e)};E.f.textInput={init:function(i,s,u){function l(t,e){E.a.H(i,t,e)}function h(){f||(d=i.value,f=E.a.setTimeout(c,4))}function c(){clearTimeout(f),d=f=t;var e=i.value;v!==e&&(v=e,E.m.$a(s(),u,"textInput",e))}var f,d,v=i.value,g=9==E.a.W?h:c,m=!1;o&&l("keypress",c),11>o&&l("propertychange",function(t){m||"value"!==t.propertyName||g(t)}),8==o&&(l("keyup",c),l("keydown",c)),p&&(p(i,g),l("dragend",h)),(!o||9<=o)&&l("input",g),5>n&&"textarea"===E.a.P(i)?(l("keydown",h),l("paste",h),l("cut",h)):11>e?l("keydown",h):4>r?(l("DOMAutoComplete",c),l("dragdrop",c),l("drop",c)):a&&"number"===i.type&&l("keydown",h),l("change",c),l("blur",c),E.o(function e(){var n=E.a.c(s());null!==n&&n!==t||(n=""),d!==t&&n===d?E.a.setTimeout(e,4):i.value!==n&&(m=!0,i.value=n,m=!1,v=i.value)},null,{l:i})}},E.m.va.textInput=!0,E.f.textinput={preprocess:function(t,e,n){n("textInput",t)}}}(),E.f.uniqueName={init:function(t,e){if(e()){var n="ko_unique_"+ ++E.f.uniqueName.qd;E.a.Xc(t,n)}}},E.f.uniqueName.qd=0,E.f.using={init:function(t,e,n,i,r){var o;return n.has("as")&&(o={as:n.get("as"),noChildContext:n.get("noChildContext")}),e=r.createChildContext(e,o),E.Pa(e,t),{controlsDescendantBindings:!0}}},E.h.ea.using=!0,E.f.value={after:["options","foreach"],init:function(e,n,i){var r=E.a.P(e),o="input"==r;if(!o||"checkbox"!=e.type&&"radio"!=e.type){var a=["change"],s=i.get("valueUpdate"),u=!1,l=null;s&&("string"==typeof s&&(s=[s]),E.a.gb(a,s),a=E.a.vc(a));var h,c=function(){l=null,u=!1;var t=n(),r=E.u.L(e);E.m.$a(t,i,"value",r)};!E.a.W||!o||"text"!=e.type||"off"==e.autocomplete||e.form&&"off"==e.form.autocomplete||-1!=E.a.A(a,"propertychange")||(E.a.H(e,"propertychange",function(){u=!0}),E.a.H(e,"focus",function(){u=!1}),E.a.H(e,"blur",function(){u&&c()})),E.a.C(a,function(t){var n=c;E.a.Td(t,"after")&&(n=function(){l=E.u.L(e),E.a.setTimeout(c,0)},t=t.substring(5)),E.a.H(e,t,n)}),h=o&&"file"==e.type?function(){var i=E.a.c(n());null===i||i===t||""===i?e.value="":E.v.K(c)}:function(){var o=E.a.c(n()),a=E.u.L(e);null!==l&&o===l?E.a.setTimeout(h,0):o===a&&a!==t||("select"===r?(a=i.get("valueAllowUnset"),E.u.ya(e,o,a),a||o===E.u.L(e)||E.v.K(c)):E.u.ya(e,o))},E.o(h,null,{l:e})}else E.eb(e,{checkedValue:n})},update:function(){}},E.m.va.value=!0,E.f.visible={update:function(t,e){var n=E.a.c(e()),i="none"!=t.style.display;n&&!i?t.style.display="":!n&&i&&(t.style.display="none")}},E.f.hidden={update:function(t,e){E.f.visible.update(t,function(){return!E.a.c(e())})}},function(t){E.f[t]={init:function(e,n,i,r,o){return E.f.event.init.call(this,e,function(){var e={};return e[t]=n(),e},i,r,o)}}}("click"),E.ca=function(){},E.ca.prototype.renderTemplateSource=function(){throw Error("Override renderTemplateSource")},E.ca.prototype.createJavaScriptEvaluatorBlock=function(){throw Error("Override createJavaScriptEvaluatorBlock")},E.ca.prototype.makeTemplateSource=function(t,e){if("string"==typeof t){var n=(e=e||r).getElementById(t);if(!n)throw Error("Cannot find template with ID "+t);return new E.B.D(n)}if(1==t.nodeType||8==t.nodeType)return new E.B.ia(t);throw Error("Unknown template type: "+t)},E.ca.prototype.renderTemplate=function(t,e,n,i){return t=this.makeTemplateSource(t,i),this.renderTemplateSource(t,e,n,i)},E.ca.prototype.isTemplateRewritten=function(t,e){return!1===this.allowTemplateRewriting||this.makeTemplateSource(t,e).data("isRewritten")},E.ca.prototype.rewriteTemplate=function(t,e,n){e=e((t=this.makeTemplateSource(t,n)).text()),t.text(e),t.data("isRewritten",!0)},E.b("templateEngine",E.ca),E.ic=function(){function t(t,e,n,i){t=E.m.Zb(t);for(var r=E.m.Ra,o=0;o<t.length;o++){var a=t[o].key;if(Object.prototype.hasOwnProperty.call(r,a)){var s=r[a];if("function"==typeof s){if(a=s(t[o].value))throw Error(a)}else if(!s)throw Error("This template engine does not support the '"+a+"' binding within its templates")}}return n="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+E.m.ub(t,{valueAccessors:!0})+" } })()},'"+n.toLowerCase()+"')",i.createJavaScriptEvaluatorBlock(n)+e}var e=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'|[^>]*))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi,n=/\x3c!--\s*ko\b\s*([\s\S]*?)\s*--\x3e/g;return{wd:function(t,e,n){e.isTemplateRewritten(t,n)||e.rewriteTemplate(t,function(t){return E.ic.Kd(t,e)},n)},Kd:function(i,r){return i.replace(e,function(e,n,i,o,a){return t(a,n,i,r)}).replace(n,function(e,n){return t(n,"\x3c!-- ko --\x3e","#comment",r)})},ld:function(t,e){return E.aa.Wb(function(n,i){var r=n.nextSibling;r&&r.nodeName.toLowerCase()===e&&E.eb(r,t,i)})}}}(),E.b("__tr_ambtns",E.ic.ld),function(){E.B={},E.B.D=function(t){if(this.D=t){var e=E.a.P(t);this.Db="script"===e?1:"textarea"===e?2:"template"==e&&t.content&&11===t.content.nodeType?3:4}},E.B.D.prototype.text=function(){var t=1===this.Db?"text":2===this.Db?"value":"innerHTML";if(0==arguments.length)return this.D[t];var e=arguments[0];"innerHTML"===t?E.a.dc(this.D,e):this.D[t]=e};var e=E.a.g.Z()+"_";E.B.D.prototype.data=function(t){if(1===arguments.length)return E.a.g.get(this.D,e+t);E.a.g.set(this.D,e+t,arguments[1])};var n=E.a.g.Z();E.B.D.prototype.nodes=function(){var e=this.D;if(0==arguments.length){var i=E.a.g.get(e,n)||{},r=i.jb||(3===this.Db?e.content:4===this.Db?e:t);return r&&!i.hd||(i=this.text())&&(r=E.a.Ld(i,e.ownerDocument),this.text(""),E.a.g.set(e,n,{jb:r,hd:!0})),r}E.a.g.set(e,n,{jb:arguments[0]})},E.B.ia=function(t){this.D=t},E.B.ia.prototype=new E.B.D,E.B.ia.prototype.constructor=E.B.ia,E.B.ia.prototype.text=function(){if(0==arguments.length){var e=E.a.g.get(this.D,n)||{};return e.jc===t&&e.jb&&(e.jc=e.jb.innerHTML),e.jc}E.a.g.set(this.D,n,{jc:arguments[0]})},E.b("templateSources",E.B),E.b("templateSources.domElement",E.B.D),E.b("templateSources.anonymousTemplate",E.B.ia)}(),function(){function e(t,e,n){var i;for(e=E.h.nextSibling(e);t&&(i=t)!==e;)n(i,t=E.h.nextSibling(i))}function n(t,n){if(t.length){var i=t[0],r=t[t.length-1],o=i.parentNode,a=E.ga.instance,s=a.preprocessNode;if(s){if(e(i,r,function(t,e){var n=t.previousSibling,o=s.call(a,t);o&&(t===i&&(i=o[0]||e),t===r&&(r=o[o.length-1]||n))}),t.length=0,!i)return;i===r?t.push(i):(t.push(i,r),E.a.Ua(t,o))}e(i,r,function(t){1!==t.nodeType&&8!==t.nodeType||E.uc(n,t)}),e(i,r,function(t){1!==t.nodeType&&8!==t.nodeType||E.aa.bd(t,[n])}),E.a.Ua(t,o)}}function i(t){return t.nodeType?t:0<t.length?t[0]:null}function r(t,e,r,o,s){s=s||{};var u=(t&&i(t)||r||{}).ownerDocument,l=s.templateEngine||a;if(E.ic.wd(r,l,u),"number"!=typeof(r=l.renderTemplate(r,o,s,u)).length||0<r.length&&"number"!=typeof r[0].nodeType)throw Error("Template engine must return an array of DOM nodes");switch(u=!1,e){case"replaceChildren":E.h.ua(t,r),u=!0;break;case"replaceNode":E.a.Wc(t,r),u=!0;break;case"ignoreTargetNode":break;default:throw Error("Unknown renderMode: "+e)}return u&&(n(r,o),s.afterRender&&E.v.K(s.afterRender,null,[r,o[s.as||"$data"]]),"replaceChildren"==e&&E.j.Ga(t,E.j.T)),r}function o(t,e,n){return E.N(t)?t():"function"==typeof t?t(e,n):t}var a;E.ec=function(e){if(e!=t&&!(e instanceof E.ca))throw Error("templateEngine must inherit from ko.templateEngine");a=e},E.bc=function(e,n,s,u,l){if(((s=s||{}).templateEngine||a)==t)throw Error("Set a template engine before calling renderTemplate");if(l=l||"replaceChildren",u){var h=i(u);return E.$(function(){var t=n&&n instanceof E.fa?n:new E.fa(n,null,null,null,{exportDependencies:!0}),a=o(e,t.$data,t);t=r(u,l,a,t,s),"replaceNode"==l&&(h=i(u=t))},null,{Sa:function(){return!h||!E.a.Rb(h)},l:h&&"replaceNode"==l?h.parentNode:h})}return E.aa.Wb(function(t){E.bc(e,n,s,t,"replaceNode")})},E.Pd=function(e,i,a,s,u){function l(t,e){E.v.K(E.a.cc,null,[s,t,c,a,h,e]),E.j.Ga(s,E.j.T)}function h(t,e){n(e,p),a.afterRender&&a.afterRender(e,t),p=null}function c(t,n){p=u.createChildContext(t,{as:f,noChildContext:a.noChildContext,extend:function(t){t.$index=n,f&&(t[f+"Index"]=n)}});var i=o(e,t,p);return r(s,"ignoreTargetNode",i,p,a)}var p,f=a.as,d=!1===a.includeDestroyed||E.options.foreachHidesDestroyed&&!a.includeDestroyed;if(d||a.beforeRemove||!E.Oc(i))return E.$(function(){var e=E.a.c(i)||[];void 0===e.length&&(e=[e]),d&&(e=E.a.fb(e,function(e){return e===t||null===e||!E.a.c(e._destroy)})),l(e)},null,{l:s});l(i.w());var v=i.subscribe(function(t){l(i(),t)},null,"arrayChange");return v.l(s),v};var s=E.a.g.Z(),u=E.a.g.Z();E.f.template={init:function(t,e){var n=E.a.c(e());if("string"==typeof n||n.name)E.h.Ea(t);else if("nodes"in n){if(n=n.nodes||[],E.N(n))throw Error('The "nodes" option must be a plain, non-observable array.');var i=n[0]&&n[0].parentNode;i&&E.a.g.get(i,u)||(i=E.a.Xb(n),E.a.g.set(i,u,!0)),new E.B.ia(t).nodes(i)}else{if(!(0<(n=E.h.childNodes(t)).length))throw Error("Anonymous template defined, but no template content was provided");i=E.a.Xb(n),new E.B.ia(t).nodes(i)}return{controlsDescendantBindings:!0}},update:function(e,n,i,r,o){var a=n();i=!0,r=null,"string"==typeof(n=E.a.c(a))?n={}:(a=n.name,"if"in n&&(i=E.a.c(n.if)),i&&"ifnot"in n&&(i=!E.a.c(n.ifnot))),"foreach"in n?r=E.Pd(a||e,i&&n.foreach||[],n,e,o):i?(i=o,"data"in n&&(i=o.createChildContext(n.data,{as:n.as,noChildContext:n.noChildContext,exportDependencies:!0})),r=E.bc(a||e,i,n,e)):E.h.Ea(e),o=r,(n=E.a.g.get(e,s))&&"function"==typeof n.s&&n.s(),E.a.g.set(e,s,!o||o.ja&&!o.ja()?t:o)}},E.m.Ra.template=function(t){return 1==(t=E.m.Zb(t)).length&&t[0].unknown||E.m.Hd(t,"name")?null:"This template engine does not support anonymous templates nested within its templates"},E.h.ea.template=!0}(),E.b("setTemplateEngine",E.ec),E.b("renderTemplate",E.bc),E.a.Jc=function(t,e,n){var i,r,o,a,s;if(t.length&&e.length)for(i=r=0;(!n||i<n)&&(a=t[r]);++r){for(o=0;s=e[o];++o)if(a.value===s.value){a.moved=s.index,s.moved=a.index,e.splice(o,1),i=o=0;break}i+=o}},E.a.Ob=function(){function t(t,e,n,i,r){var o,a,s,u,l,h=Math.min,c=Math.max,p=[],f=t.length,d=e.length,v=d-f||1,g=f+d+1;for(o=0;o<=f;o++)for(u=s,p.push(s=[]),l=h(d,o+v),a=c(0,o-1);a<=l;a++)s[a]=a?o?t[o-1]===e[a-1]?u[a-1]:h(u[a]||g,s[a-1]||g)+1:a+1:o+1;for(h=[],c=[],v=[],o=f,a=d;o||a;)d=p[o][a]-1,a&&d===p[o][a-1]?c.push(h[h.length]={status:n,value:e[--a],index:a}):o&&d===p[o-1][a]?v.push(h[h.length]={status:i,value:t[--o],index:o}):(--a,--o,r.sparse||h.push({status:"retained",value:e[a]}));return E.a.Jc(v,c,!r.dontLimitMoves&&10*f),h.reverse()}return function(e,n,i){return i="boolean"==typeof i?{dontLimitMoves:i}:i||{},n=n||[],(e=e||[]).length<n.length?t(e,n,"added","deleted",i):t(n,e,"deleted","added",i)}}(),E.b("utils.compareArrays",E.a.Ob),function(){function e(e,n,i,r,o){var a=[],s=E.$(function(){var t=n(i,o,E.a.Ua(a,e))||[];0<a.length&&(E.a.Wc(a,t),r&&E.v.K(r,null,[i,t,o])),a.length=0,E.a.gb(a,t)},null,{l:e,Sa:function(){return!E.a.jd(a)}});return{Y:a,$:s.ja()?s:t}}var n=E.a.g.Z(),i=E.a.g.Z();E.a.cc=function(r,o,a,s,u,l){function h(t){f={Aa:t,nb:E.sa(T++)},b.push(f),y||I.push(f)}function c(t){f=m[t],T!==f.nb.w()&&A.push(f),f.nb(T++),E.a.Ua(f.Y,r),b.push(f)}function p(t,e){if(t)for(var n=0,i=e.length;n<i;n++)E.a.C(e[n].Y,function(i){t(i,n,e[n].Aa)})}void 0===(o=o||[]).length&&(o=[o]),s=s||{};var f,d,v,g,m=E.a.g.get(r,n),y=!m,b=[],w=0,T=0,N=[],S=[],_=[],A=[],I=[],x=0;if(y)E.a.C(o,h);else{if(!l||m&&m._countWaitingForRemove){var C=E.a.Mb(m,function(t){return t.Aa});l=E.a.Ob(C,o,{dontLimitMoves:s.dontLimitMoves,sparse:!0})}var O,k,L;for(C=0;O=l[C];C++)switch(k=O.moved,L=O.index,O.status){case"deleted":for(;w<L;)c(w++);k===t&&((f=m[w]).$&&(f.$.s(),f.$=t),E.a.Ua(f.Y,r).length&&(s.beforeRemove&&(b.push(f),x++,f.Aa===i?f=null:_.push(f)),f&&N.push.apply(N,f.Y))),w++;break;case"added":for(;T<L;)c(w++);k!==t?(S.push(b.length),c(k)):h(O.value)}for(;T<o.length;)c(w++);b._countWaitingForRemove=x}E.a.g.set(r,n,b),p(s.beforeMove,A),E.a.C(N,s.beforeRemove?E.na:E.removeNode);try{g=r.ownerDocument.activeElement}catch(t){}if(S.length)for(;(C=S.shift())!=t;){for(f=b[C],d=t;C;)if((v=b[--C].Y)&&v.length){d=v[v.length-1];break}for(o=0;w=f.Y[o];d=w,o++)E.h.Vb(r,w,d)}for(C=0,S=E.h.firstChild(r);f=b[C];C++){for(f.Y||E.a.extend(f,e(r,a,f.Aa,u,f.nb)),o=0;w=f.Y[o];S=w.nextSibling,d=w,o++)w!==S&&E.h.Vb(r,w,d);!f.Dd&&u&&(u(f.Aa,f.Y,f.nb),f.Dd=!0,d=f.Y[f.Y.length-1])}for(g&&r.ownerDocument.activeElement!=g&&g.focus(),p(s.beforeRemove,_),C=0;C<_.length;++C)_[C].Aa=i;p(s.afterMove,A),p(s.afterAdd,I)}}(),E.b("utils.setDomNodeChildrenFromArrayMapping",E.a.cc),E.ba=function(){this.allowTemplateRewriting=!1},E.ba.prototype=new E.ca,E.ba.prototype.constructor=E.ba,E.ba.prototype.renderTemplateSource=function(t,e,n,i){return(e=9>E.a.W||!t.nodes?null:t.nodes())?E.a.la(e.cloneNode(!0).childNodes):(t=t.text(),E.a.ta(t,i))},E.ba.Na=new E.ba,E.ec(E.ba.Na),E.b("nativeTemplateEngine",E.ba),function(){E.Za=function(){var t=this.Gd=function(){if(!a||!a.tmpl)return 0;try{if(0<=a.tmpl.tag.tmpl.open.toString().indexOf("__"))return 2}catch(t){}return 1}();this.renderTemplateSource=function(e,n,i,o){if(o=o||r,i=i||{},2>t)throw Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.");var s=e.data("precompiled");return s||(s=e.text()||"",s=a.template(null,"{{ko_with $item.koBindingContext}}"+s+"{{/ko_with}}"),e.data("precompiled",s)),e=[n.$data],n=a.extend({koBindingContext:n},i.templateOptions),(n=a.tmpl(s,e,n)).appendTo(o.createElement("div")),a.fragments={},n},this.createJavaScriptEvaluatorBlock=function(t){return"{{ko_code ((function() { return "+t+" })()) }}"},this.addTemplate=function(t,e){r.write("<script type='text/html' id='"+t+"'>"+e+"<\/script>")},0<t&&(a.tmpl.tag.ko_code={open:"__.push($1 || '');"},a.tmpl.tag.ko_with={open:"with($1) {",close:"} "})},E.Za.prototype=new E.ca,E.Za.prototype.constructor=E.Za;var t=new E.Za;0<t.Gd&&E.ec(t),E.b("jqueryTmplTemplateEngine",E.Za)}()})}()},{}],2:[function(t,e,n){"use strict";var i,r=(i=t("knockout"))&&i.__esModule?i:{default:i};var o="ontouchstart"in window;r.default.bindingHandlers.menuButton={init:function(t,e){r.default.unwrap(e())&&(o?(t.addEventListener("touchstart",function(){r.default.utils.toggleDomNodeCssClass(t,"hover active",!0)}),t.addEventListener("touchend",function(){r.default.utils.toggleDomNodeCssClass(t,"hover active",!1)})):(t.addEventListener("mouseover",function(){r.default.utils.toggleDomNodeCssClass(t,"hover",!0)}),t.addEventListener("mousedown",function(){r.default.utils.toggleDomNodeCssClass(t,"active",!0)}),t.addEventListener("mouseup",function(){r.default.utils.toggleDomNodeCssClass(t,"active",!1)}),t.addEventListener("mouseout",function(){r.default.utils.toggleDomNodeCssClass(t,"hover",!1),r.default.utils.toggleDomNodeCssClass(t,"active",!1),window.getSelection().removeAllRanges()})))}}},{knockout:1}],3:[function(t,e,n){"use strict";var i,r=(i=t("knockout"))&&i.__esModule?i:{default:i};var o="ontouchstart"in window,a=null,s=null,u=null;r.default.bindingHandlers.swipePages={init:function(t,e){o&&r.default.unwrap(e())&&(t.addEventListener("touchstart",function(t){if(!(t.touches.length>1||window.visualViewport&&window.visualViewport.scale>1)){var e=document.getElementById("vivliostyle-viewer-viewport");e&&e.scrollWidth>e.clientWidth||(a=t.touches[0].clientX,s=t.touches[0].clientY)}}),t.addEventListener("touchmove",function(t){if(!(t.touches.length>1)&&null!==a&&null!==s){var e=t.touches[0].clientX-a,n=t.touches[0].clientY-s;Math.abs(e)>Math.abs(n)&&(u=e<0?document.getElementById("vivliostyle-page-navigation-right"):document.getElementById("vivliostyle-page-navigation-left")),Math.abs(e)+Math.abs(n)>=16&&(u&&(u.click(),r.default.utils.toggleDomNodeCssClass(u,"active",!0)),a=null,s=null)}}),t.addEventListener("touchend",function(t){u&&r.default.utils.toggleDomNodeCssClass(u,"active",!1),u=null,a=null,s=null}))}}},{knockout:1}],4:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i,r=(i=t("../models/message-queue"))&&i.__esModule?i:{default:i};function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var a={DEBUG:"debug",INFO:"info",WARN:"warn",ERROR:"error"},s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.logLevel=a.ERROR}var e,n,i;return e=t,(n=[{key:"setLogLevel",value:function(t){this.logLevel=t}},{key:"debug",value:function(t){this.logLevel===a.DEBUG&&r.default.push({type:"debug",content:t})}},{key:"info",value:function(t){this.logLevel!==a.DEBUG&&this.logLevel!==a.INFO||r.default.push({type:"info",content:t})}},{key:"warn",value:function(t){this.logLevel!==a.DEBUG&&this.logLevel!==a.INFO&&this.logLevel!==a.WARN||r.default.push({type:"warn",content:t})}},{key:"error",value:function(t){this.logLevel!==a.DEBUG&&this.logLevel!==a.INFO&&this.logLevel!==a.WARN&&this.logLevel!==a.ERROR||r.default.push({type:"error",content:t})}}])&&o(e.prototype,n),i&&o(e,i),t}();s.LogLevel=a;var u=new s;s.getLogger=function(){return u};var l=s;n.default=l},{"../models/message-queue":7}],5:[function(t,e,n){"use strict";var i=a(t("vivliostyle")),r=a(t("./models/vivliostyle")),o=a(t("./vivliostyle-viewer"));function a(t){return t&&t.__esModule?t:{default:t}}r.default.setInstance(i.default),o.default.start()},{"./models/vivliostyle":11,"./vivliostyle-viewer":22,vivliostyle:23}],6:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=s(t("knockout")),r=s(t("../stores/url-parameters")),o=s(t("./page-style")),a=s(t("../utils/string-util"));function s(t){return t&&t.__esModule?t:{default:t}}function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var l=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n,a,s,u,l,h=(n=r.default.getParameter("b"),a=r.default.getParameter("x"),s=r.default.getParameter("f"),u=r.default.getParameter("style"),l=r.default.getParameter("userStyle"),{bookUrl:n[0]||null,xUrl:!n[0]&&a.length&&a[0]?a:null,fragment:s[0]||null,authorStyleSheet:u.length?u:[],userStyleSheet:l.length?l:[]});this.bookUrl=i.default.observable(h.bookUrl||""),this.xUrl=i.default.observable(h.xUrl||null),this.fragment=i.default.observable(h.fragment||""),this.authorStyleSheet=i.default.observable(h.authorStyleSheet),this.userStyleSheet=i.default.observable(h.userStyleSheet),this.pageStyle=new o.default,this.dataUserStyleIndex=-1,this.fragment.subscribe(function(t){if(/^epubcfi\(\/([246]\/)?2!\)/.test(t))r.default.removeParameter("f");else{var e=t.replace(/[\s+&?=#\u007F-\uFFFF]+/g,encodeURIComponent);r.default.setParameter("f",e)}}),h.userStyleSheet.find(function(t,n){if(/^data:,.*?\/\*(?:<|%3C)viewer(?:>|%3E)\*\//.test(t)){e.dataUserStyleIndex=n;var i=t.replace(/^data:,/,"").replace(/%(?![0-9A-Fa-f]{2})/g,"%25"),r=decodeURIComponent(i);return e.pageStyle.cssText(r),!0}return!1}),this.pageStyle.cssText.subscribe(function(t){e.updateUserStyleSheetFromCSSText(t)})}var e,n,s;return e=t,(n=[{key:"toObject",value:function(){function t(t){return t.map(function(t){return{url:t}})}var e=t(this.userStyleSheet());return this.pageStyle.pageSizeMode()==o.default.Mode.DEFAULT&&e.unshift({text:"@page{size:auto}"}),{fragment:this.fragment(),authorStyleSheet:t(this.authorStyleSheet()),userStyleSheet:e}}},{key:"updateUserStyleSheetFromCSSText",value:function(t){null==t&&(t=this.pageStyle.toCSSText());var e=this.userStyleSheet();if((!t||/^\s*(\/\*.*?\*\/\s*)*$/.test(t))&&e.length<=(-1==this.dataUserStyleIndex?0:1))return e.pop(),this.dataUserStyleIndex=-1,this.userStyleSheet(e),void r.default.removeParameter("userStyle");var n="data:,"+a.default.percentEncodeForDataURI(t.trim());-1==this.dataUserStyleIndex?(e.push(n),this.dataUserStyleIndex=e.length-1):e[this.dataUserStyleIndex]=n,this.userStyleSheet(e),r.default.setParameter("userStyle",n,this.dataUserStyleIndex)}}])&&u(e.prototype,n),s&&u(e,s),t}();n.default=l},{"../stores/url-parameters":13,"../utils/string-util":16,"./page-style":8,knockout:1}],7:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i,r=(i=t("knockout"))&&i.__esModule?i:{default:i};var o=new function(){return r.default.observableArray()};n.default=o},{knockout:1}],8:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i,r=(i=t("knockout"))&&i.__esModule?i:{default:i};function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var s={DEFAULT:"",AUTO:"auto",PRESET:"preset",CUSTOM:"custom",ZERO:"0"},u=[{name:"A5",description:"A5"},{name:"A4",description:"A4"},{name:"A3",description:"A3"},{name:"B5",description:"B5 (ISO)"},{name:"B4",description:"B4 (ISO)"},{name:"JIS-B5",description:"B5 (JIS)"},{name:"JIS-B4",description:"B4 (JIS)"},{name:"letter",description:"letter"},{name:"legal",description:"legal"},{name:"ledger",description:"ledger"}],l={customWidth:"210mm",customHeight:"297mm",customMargin:"10%",baseFontSize:"12pt",baseLineHeight:"1.2",baseFontFamily:"serif",viewerFontSize:16},h=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.pageSizeMode=r.default.observable(s.DEFAULT),this.presetSize=r.default.observable(u[1]),this.isLandscape=r.default.observable(!1),this.customWidth=r.default.observable(l.customWidth),this.customHeight=r.default.observable(l.customHeight),this.pageSizeImportant=r.default.observable(!1),this.pageMarginMode=r.default.observable(s.DEFAULT),this.customMargin=r.default.observable(l.customMargin),this.pageMarginImportant=r.default.observable(!1),this.firstPageMarginZero=r.default.observable(!1),this.firstPageMarginZeroImportant=r.default.observable(!1),this.forceHtmlBodyMarginZero=r.default.observable(!1),this.widowsOrphans=r.default.observable(""),this.widowsOrphansImportant=r.default.observable(!1),this.imageMaxSizeToFitPage=r.default.observable(!1),this.imageMaxSizeToFitPageImportant=r.default.observable(!1),this.imageKeepAspectRatio=r.default.observable(!1),this.imageKeepAspectRatioImportant=r.default.observable(!1),this.baseFontSize=r.default.observable(l.baseFontSize),this.baseFontSizeSpecified=r.default.observable(!1),this.baseFontSizeImportant=r.default.observable(!1),this.baseLineHeight=r.default.observable(l.baseLineHeight),this.baseLineHeightSpecified=r.default.observable(!1),this.baseLineHeightImportant=r.default.observable(!1),this.baseFontFamily=r.default.observable(l.baseFontFamily),this.baseFontFamilySpecified=r.default.observable(!1),this.baseFontFamilyImportant=r.default.observable(!1),this.allImportant=r.default.observable(!1),this.pageOtherStyle=r.default.observable(""),this.firstPageOtherStyle=r.default.observable(""),this.rootOtherStyle=r.default.observable(""),this.beforeOtherStyle=r.default.observable(""),this.afterOtherStyle=r.default.observable(""),this.viewerFontSize=null,this.setViewerFontSizeObservable=function(t){n.viewerFontSize=t;var e=document.getElementsByName("vivliostyle-settings_viewer-font-size")[0];e&&(e.value=n.fontSizePxToPercent(t(),100,5))},this.viewerFontSizePercent=r.default.pureComputed({read:function(){return this.viewerFontSize?this.fontSizePxToPercent(this.viewerFontSize(),100,5):100},write:function(t){if(this.viewerFontSize){var e=parseFloat(t),n=e&&this.fontSizePercentToPx(e);if(!n||n<5||n>72){var i=document.getElementsByName("vivliostyle-settings_viewer-font-size")[0];i&&(i.value="100"),n=l.viewerFontSize}this.viewerFontSize(n)}},owner:this}),this.cssText=r.default.pureComputed({read:this.toCSSText,write:this.fromCSSText,owner:this}),this.allImportant.subscribe(function(t){n.pageSizeImportant(t),n.pageMarginImportant(t),n.firstPageMarginZeroImportant(t),n.widowsOrphansImportant(t),n.imageMaxSizeToFitPageImportant(t),n.imageKeepAspectRatioImportant(t),n.baseFontSizeImportant(t),n.baseLineHeightImportant(t),n.baseFontFamilyImportant(t)}),this.pageStyleRegExp=new RegExp("^((?:\\n|.)*?)\\/\\*<viewer>\\*\\/\\s*(?:@page\\s*\\{\\s*(?:size:\\s*([^\\s!;{}]+)(?:\\s+([^\\s!;{}]+))?\\s*(!important)?(?:;|(?=[\\s{}]))\\s*)?(?:margin:\\s*([^\\s!;{}]+(?:\\s+[^\\s!;{}]+)?(?:\\s+[^\\s!;{}]+)?(?:\\s+[^\\s!;{}]+)?)\\s*(!important)?(?:;|(?=[\\s{}]))\\s*)?((?:[^{}]+|\\{[^{}]*\\})*)\\}\\s*)?(?:@page\\s*:first\\s*\\{\\s*(margin:\\s*0(?:\\w+|%)?\\s*(!important)?(?:;|(?=[\\s{}]))\\s*)?((?:[^{}]+|\\{[^{}]*\\})*)\\}\\s*)?((?:html|:root),\\s*body\\s*\\{\\s*margin:\\s*0(?:\\w+|%)?\\s*!important(?:;|(?=[\\s{}]))\\s*\\}\\s*)?(?:(?:html|:root)\\s*\\{\\s*(?:font-size:\\s*(calc\\([^()]+\\)|[^\\s!;{}]+)\\s*(!important)?(?:;|(?=[\\s{}]))\\s*)?(?:line-height:\\s*([^\\s!;{}]+)\\s*(!important)?(?:;|(?=[\\s{}]))\\s*)?(?:font-family:\\s*([^!;{}]+)\\s*(!important)?(?:;|(?=[\\s{}]))\\s*)?([^{}]*)\\}\\s*)?(?:body\\s*\\{\\s*(?:[-\\w]+:\\s*inherit\\s*!important(?:;|(?=[\\s{}]))\\s*)+\\}\\s*)?(?:\\*\\s*\\{\\s*widows:\\s*(1|999)\\s*(!important)?(?:;|(?=[\\s{}]))\\s*orphans:\\s*\\19\\s*\\20(?:;|(?=[\\s{}]))\\s*\\}\\s*)?(?:img,\\s*svg\\s*\\{\\s*(max-inline-size:\\s*100%\\s*(!important)?(?:;|(?=[\\s{}]))\\s*max-block-size:\\s*100vb\\s*\\22(?:;|(?=[\\s{}]))\\s*)?(object-fit:\\s*contain\\s*(!important)?(?:;|(?=[\\s{}]))\\s*)?\\}\\s*)?((?:\\n|.)*)$"),e&&this.copyFrom(e)}var e,n,i;return e=t,(n=[{key:"fontSizePxToPercent",value:function(t,e,n){var i=t/l.viewerFontSize*(e||100);return n&&(i=i.toPrecision(n).replace(/(?:\.0*|(\.\d*?)0+)$/,"$1")),i}},{key:"fontSizePercentToPx",value:function(t,e,n){var i=t/(e||100)*l.viewerFontSize;return n&&(i=i.toPrecision(n).replace(/(?:\.0*|(\.\d*?)0+)$/,"$1")),i}},{key:"fromCSSText",value:function(t){var e=this.pageStyleRegExp.exec(t);if(e){var n=o(e,26),i=n[1],r=n[2],a=n[3],l=n[4],h=n[5],c=n[6],p=n[7],f=n[8],d=n[9],v=n[10],g=n[11],m=n[12],y=n[13],b=n[14],E=n[15],w=n[16],T=n[17],N=n[18],S=n[19],_=n[20],A=n[21],I=n[22],x=n[23],C=n[24],O=n[25],k=0,L=0;if(this.beforeOtherStyle(i),"landscape"==r||"portrait"==r?(this.isLandscape("landscape"==r),r=a,a=null):"landscape"!=a&&"portrait"!=a||(this.isLandscape("landscape"==a),a=null),null!=r){if(null==a)if("auto"==r)this.pageSizeMode(s.AUTO);else{var D=u.find(function(t){return t.name.toLowerCase()==r.toLowerCase()});D?(this.pageSizeMode(s.PRESET),this.presetSize(D)):(this.pageSizeMode(s.CUSTOM),this.customWidth(r),this.customHeight(r))}else this.pageSizeMode(s.CUSTOM),this.customWidth(r),this.customHeight(a);this.pageSizeImportant(!!l),l?k++:L++}else this.pageSizeMode(s.DEFAULT);null!=h?(this.pageMarginMode("0"==h?s.ZERO:s.CUSTOM),"0"==h?this.pageMarginMode(s.ZERO):(this.pageMarginMode(s.CUSTOM),this.customMargin(h)),this.pageMarginImportant(!!c),c?k++:L++):this.pageMarginMode(s.DEFAULT),p=p||"",this.pageOtherStyle(p),f?(this.firstPageMarginZero(!0),this.firstPageMarginZeroImportant(!!d),d?k++:L++):this.firstPageMarginZero(!1),v=v||"",this.firstPageOtherStyle(v),g?this.forceHtmlBodyMarginZero(!0):this.forceHtmlBodyMarginZero(!1),null!=m?(m=m.replace(/^\s*calc\([.\d]+\s*\*\s*([.\d]+\w+)\)\s*$/,"$1"),this.baseFontSizeSpecified(!0),this.baseFontSize(m),this.baseFontSizeImportant(!!y),y?k++:L++):this.baseFontSizeSpecified(!1),null!=b?(this.baseLineHeightSpecified(!0),this.baseLineHeight(b),this.baseLineHeightImportant(!!E),E?k++:L++):this.baseLineHeightSpecified(!1),null!=w?(w=w.trim(),this.baseFontFamilySpecified(!0),this.baseFontFamily(w),this.baseFontFamilyImportant(!!T),T?k++:L++):this.baseFontFamilySpecified(!1),N=N||"",this.rootOtherStyle(N),null!=S?(this.widowsOrphans(S),this.widowsOrphansImportant(!!_),_?k++:L++):this.widowsOrphans(s.DEFAULT),A?(this.imageMaxSizeToFitPage(!0),this.imageMaxSizeToFitPageImportant(!!I),I?k++:L++):this.imageMaxSizeToFitPage(!1),x?(this.imageKeepAspectRatio(!0),this.imageKeepAspectRatioImportant(!!C),C?k++:L++):this.imageKeepAspectRatio(!1),O=O.replace(/\/\*<\/?viewer>\*\/\n?/g,"")||"",this.afterOtherStyle(O),this.allImportant(k>0&&0==L)}else{var R=t.replace(/\/\*<\/?viewer>\*\/\n?/g,"")||"";this.afterOtherStyle(R)}}},{key:"toCSSText",value:function(){function t(t){return t?" !important":""}var e=this.beforeOtherStyle();if(e+="/*<viewer>*/\n",this.pageSizeMode()!=s.DEFAULT||this.pageMarginMode()!=s.DEFAULT||this.pageOtherStyle()){if(e+="@page { ",this.pageSizeMode()!=s.DEFAULT){switch(e+="size: ",this.pageSizeMode()){case s.AUTO:e+="auto";break;case s.PRESET:e+=this.presetSize().name,this.isLandscape()&&(e+=" landscape");break;case s.CUSTOM:e+="".concat(this.customWidth()," ").concat(this.customHeight());break;default:throw new Error("Unknown pageSizeMode ".concat(this.pageSizeMode()))}e+="".concat(t(this.pageSizeImportant()),"; ")}if(this.pageMarginMode()!=s.DEFAULT){switch(e+="margin: ",this.pageMarginMode()){case s.AUTO:e+="auto";break;case s.ZERO:e+="0";break;case s.CUSTOM:e+="".concat(this.customMargin());break;default:throw new Error("Unknown pageMarginMode ".concat(this.pageMarginMode()))}e+="".concat(t(this.pageMarginImportant()),"; ")}e+=this.pageOtherStyle(),e+="}\n"}if((this.firstPageMarginZero()||this.firstPageOtherStyle())&&(e+="@page :first { ",this.firstPageMarginZero()&&(e+="margin: 0".concat(t(this.firstPageMarginZeroImportant()),"; ")),e+=this.firstPageOtherStyle(),e+="}\n"),this.forceHtmlBodyMarginZero()&&(e+=":root, body { margin: 0 !important; }\n"),this.baseFontSizeSpecified()||this.baseLineHeightSpecified()||this.baseFontFamilySpecified()||this.rootOtherStyle()){e+=":root { ";var n=this.baseFontSize();if(this.baseFontSizeSpecified())if(this.viewerFontSize&&this.viewerFontSize()!=l.viewerFontSize&&!n.endsWith("%")){var i=this.fontSizePxToPercent(this.viewerFontSize(),1,5);e+="font-size: calc(".concat(i," * ").concat(n,")").concat(t(this.baseFontSizeImportant()),"; ")}else e+="font-size: ".concat(this.baseFontSize()).concat(t(this.baseFontSizeImportant()),"; ");this.baseLineHeightSpecified()&&(e+="line-height: ".concat(this.baseLineHeight()).concat(t(this.baseLineHeightImportant()),"; ")),this.baseFontFamilySpecified()&&(e+="font-family: ".concat(this.baseFontFamily()).concat(t(this.baseFontFamilyImportant()),"; ")),e+=this.rootOtherStyle(),e+="}\n"}return(this.baseFontSizeSpecified()&&this.baseFontSizeImportant()||this.baseLineHeightSpecified()&&this.baseLineHeightImportant()||this.baseFontFamilySpecified()&&this.baseFontFamilyImportant())&&(e+="body { ",this.baseFontSizeSpecified()&&this.baseFontSizeImportant()&&(e+="font-size: inherit !important; "),this.baseLineHeightSpecified()&&this.baseLineHeightImportant()&&(e+="line-height: inherit !important; "),this.baseFontFamilySpecified()&&this.baseFontFamilyImportant()&&(e+="font-family: inherit !important; "),e+="}\n"),this.widowsOrphans()&&(e+="* { ",e+="widows: ".concat(this.widowsOrphans()).concat(t(this.widowsOrphansImportant()),"; "),e+="orphans: ".concat(this.widowsOrphans()).concat(t(this.widowsOrphansImportant()),"; "),e+="}\n"),(this.imageMaxSizeToFitPage()||this.imageKeepAspectRatio())&&(e+="img, svg { ",this.imageMaxSizeToFitPage()&&(e+="max-inline-size: 100%".concat(t(this.imageMaxSizeToFitPageImportant()),"; "),e+="max-block-size: 100vb".concat(t(this.imageMaxSizeToFitPageImportant()),"; ")),this.imageKeepAspectRatio()&&(e+="object-fit: contain".concat(t(this.imageKeepAspectRatioImportant()),"; ")),e+="}\n"),e+="/*</viewer>*/\n",e+=this.afterOtherStyle()}},{key:"copyFrom",value:function(t){this.pageSizeMode(t.pageSizeMode()),this.presetSize(t.presetSize()),this.isLandscape(t.isLandscape()),this.customWidth(t.customWidth()),this.customHeight(t.customHeight()),this.pageSizeImportant(t.pageSizeImportant()),this.pageMarginMode(t.pageMarginMode()),this.customMargin(t.customMargin()),this.pageMarginImportant(t.pageMarginImportant()),this.firstPageMarginZero(t.firstPageMarginZero()),this.firstPageMarginZeroImportant(t.firstPageMarginZeroImportant()),this.forceHtmlBodyMarginZero(t.forceHtmlBodyMarginZero()),this.widowsOrphans(t.widowsOrphans()),this.widowsOrphansImportant(t.widowsOrphansImportant()),this.imageMaxSizeToFitPage(t.imageMaxSizeToFitPage()),this.imageMaxSizeToFitPageImportant(t.imageMaxSizeToFitPageImportant()),this.imageKeepAspectRatio(t.imageKeepAspectRatio()),this.imageKeepAspectRatioImportant(t.imageKeepAspectRatioImportant()),this.baseFontSize(t.baseFontSize()),this.baseFontSizeSpecified(t.baseFontSizeSpecified()),this.baseFontSizeImportant(t.baseFontSizeImportant()),this.baseLineHeight(t.baseLineHeight()),this.baseLineHeightSpecified(t.baseLineHeightSpecified()),this.baseLineHeightImportant(t.baseLineHeightImportant()),this.baseFontFamily(t.baseFontFamily()),this.baseFontFamilySpecified(t.baseFontFamilySpecified()),this.baseFontFamilyImportant(t.baseFontFamilyImportant()),this.allImportant(t.allImportant()),this.pageOtherStyle(t.pageOtherStyle()),this.firstPageOtherStyle(t.firstPageOtherStyle()),this.rootOtherStyle(t.rootOtherStyle()),this.beforeOtherStyle(t.beforeOtherStyle()),this.afterOtherStyle(t.afterOtherStyle()),this.viewerFontSize&&t.viewerFontSize&&this.viewerFontSize(t.viewerFontSize())}},{key:"equivalentTo",value:function(t){return this.pageSizeMode()===t.pageSizeMode()&&((this.pageSizeMode()!==s.PRESET||this.presetSize()===t.presetSize())&&((this.pageSizeMode()!==s.PRESET||this.isLandscape()===t.isLandscape())&&((this.pageSizeMode()!==s.CUSTOM||this.customWidth()===t.customWidth())&&((this.pageSizeMode()!==s.CUSTOM||this.customHeight()===t.customHeight())&&(this.pageSizeImportant()===t.pageSizeImportant()&&(this.pageMarginMode()===t.pageMarginMode()&&((this.pageMarginMode()!==s.CUSTOM||this.customMargin()===t.customMargin())&&(this.pageMarginImportant()===t.pageMarginImportant()&&(this.firstPageMarginZero()===t.firstPageMarginZero()&&(this.firstPageMarginZeroImportant()===t.firstPageMarginZeroImportant()&&(this.forceHtmlBodyMarginZero()===t.forceHtmlBodyMarginZero()&&(this.widowsOrphans()===t.widowsOrphans()&&(this.widowsOrphansImportant()===t.widowsOrphansImportant()&&(this.imageMaxSizeToFitPage()===t.imageMaxSizeToFitPage()&&(this.imageMaxSizeToFitPageImportant()===t.imageMaxSizeToFitPageImportant()&&(this.imageKeepAspectRatio()===t.imageKeepAspectRatio()&&(this.imageKeepAspectRatioImportant()===t.imageKeepAspectRatioImportant()&&(this.baseFontSizeSpecified()===t.baseFontSizeSpecified()&&((!this.baseFontSizeSpecified()||this.baseFontSize()===t.baseFontSize())&&(this.baseFontSizeImportant()===t.baseFontSizeImportant()&&(this.baseLineHeightSpecified()===t.baseLineHeightSpecified()&&((!this.baseLineHeightSpecified()||this.baseLineHeight()===t.baseLineHeight())&&(this.baseLineHeightImportant()===t.baseLineHeightImportant()&&(this.baseFontFamilySpecified()===t.baseFontFamilySpecified()&&((!this.baseFontFamilySpecified()||this.baseFontFamily()===t.baseFontFamily())&&(this.baseFontFamilyImportant()===t.baseFontFamilyImportant()&&(this.allImportant()===t.allImportant()&&(this.pageOtherStyle()===t.pageOtherStyle()&&(this.firstPageOtherStyle()===t.firstPageOtherStyle()&&(this.rootOtherStyle()===t.rootOtherStyle()&&(this.beforeOtherStyle()===t.beforeOtherStyle()&&(this.afterOtherStyle()===t.afterOtherStyle()&&!(!this.viewerFontSize!=!t.viewerFontSize||this.viewerFontSize&&this.viewerFontSize()!==t.viewerFontSize())))))))))))))))))))))))))))))))))}}])&&a(e.prototype,n),i&&a(e,i),t}();h.Mode=s,h.Constants=l,h.PresetSize=h.prototype.PresetSize=u;var c=h;n.default=c},{knockout:1}],9:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i,r=(i=t("../models/vivliostyle"))&&i.__esModule?i:{default:i};function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,i;return e=t,(n=[{key:"toSpreadViewString",value:function(){switch(this){case s.SPREAD:return"true";case s.SINGLE_PAGE:return"false";case s.AUTO_SPREAD:return"auto";default:throw new Error("Invalid PageViewMode")}}},{key:"toString",value:function(){switch(this){case s.SPREAD:return"spread";case s.SINGLE_PAGE:return"singlePage";case s.AUTO_SPREAD:return"autoSpread";default:throw new Error("Invalid PageViewMode")}}}])&&o(e.prototype,n),i&&o(e,i),t}(),s={AUTO_SPREAD:new a,SINGLE_PAGE:new a,SPREAD:new a,defaultMode:function(){return this.AUTO_SPREAD},fromSpreadViewString:function(t){switch(t){case"true":return this.SPREAD;case"false":return this.SINGLE_PAGE;case"auto":default:return this.AUTO_SPREAD}},of:function(t){switch(t){case r.default.viewer.PageViewMode.SPREAD:return this.SPREAD;case r.default.viewer.PageViewMode.SINGLE_PAGE:return this.SINGLE_PAGE;case r.default.viewer.PageViewMode.AUTO_SPREAD:return this.AUTO_SPREAD;default:throw new Error("Invalid PageViewMode name: ".concat(t))}}},u=s;n.default=u},{"../models/vivliostyle":11}],10:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=s(t("knockout")),r=s(t("../stores/url-parameters")),o=s(t("./page-view-mode")),a=s(t("./zoom-options"));function s(t){return t&&t.__esModule?t:{default:t}}function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function l(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function h(){return{renderAllPages:r.default.hasParameter("x"),fontSize:16,profile:!1,pageViewMode:o.default.defaultMode(),zoom:a.default.createDefaultOptions()}}var c=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderAllPages=i.default.observable(),this.fontSize=i.default.observable(),this.profile=i.default.observable(),this.pageViewMode=i.default.observable(),this.zoom=i.default.observable(),e)this.copyFrom(e);else{var n=h(),a=function(){var t=r.default.getParameter("renderAllPages")[0],e=r.default.getParameter("fontSize")[0],n=/^([\d.]+)(?:(%25|%)|\/([\d.]+))?$/.exec(e),i=null;if(n){var a=l(n,4),s=a[1],u=a[2],h=a[3];i=parseFloat(s),(u||h)&&(i=16*i/(u?100:parseFloat(h))),i<5&&(i=5),i>72&&(i=72)}return{renderAllPages:"true"===t||"false"!==t&&null,fontSize:i,profile:"true"===r.default.getParameter("profile")[0],pageViewMode:o.default.fromSpreadViewString(r.default.getParameter("spread")[0])}}();this.renderAllPages(null!==a.renderAllPages?a.renderAllPages:n.renderAllPages),this.fontSize(a.fontSize||n.fontSize),this.profile(a.profile||n.profile),this.pageViewMode(a.pageViewMode||n.pageViewMode),this.zoom(n.zoom),this.pageViewMode.subscribe(function(t){t===n.pageViewMode?r.default.removeParameter("spread"):r.default.setParameter("spread",t.toSpreadViewString())}),this.renderAllPages.subscribe(function(t){t===n.renderAllPages?r.default.removeParameter("renderAllPages"):r.default.setParameter("renderAllPages",t.toString())}),this.fontSize.subscribe(function(t){"number"==typeof t&&(t=t.toPrecision(10).replace(/(?:\.0*|(\.\d*?)0+)$/,"$1")),t==n.fontSize?r.default.removeParameter("fontSize"):r.default.setParameter("fontSize","".concat(t,"/").concat(n.fontSize))})}}var e,n,a;return e=t,(n=[{key:"copyFrom",value:function(t){this.renderAllPages(t.renderAllPages()),this.fontSize(t.fontSize()),this.profile(t.profile()),this.pageViewMode(t.pageViewMode()),this.zoom(t.zoom())}},{key:"toObject",value:function(){return{renderAllPages:this.renderAllPages(),fontSize:this.fontSize(),pageViewMode:this.pageViewMode().toString(),zoom:this.zoom().zoom,fitToScreen:this.zoom().fitToScreen}}}])&&u(e.prototype,n),a&&u(e,a),t}();c.getDefaultValues=h;var p=c;n.default=p},{"../stores/url-parameters":13,"./page-view-mode":9,"./zoom-options":12,knockout:1}],11:[function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.viewer=null,this.constants=null,this.profile=null}var e,n,r;return e=t,(n=[{key:"setInstance",value:function(t){this.viewer=t.viewer,this.constants=t.constants,this.profile=t.profile}}])&&i(e.prototype,n),r&&i(e,r),t}());n.default=r},{}],12:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i,r=(i=t("../models/vivliostyle"))&&i.__esModule?i:{default:i};function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function p(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}var f=function(){function t(e){h(this,t),this.zoom=e}return p(t,[{key:"zoomIn",value:function(t){return new v(1.25*this.getCurrentZoomFactor(t))}},{key:"zoomOut",value:function(t){return new v(.8*this.getCurrentZoomFactor(t))}},{key:"zoomToActualSize",value:function(){return new v(1)}}],[{key:"createDefaultOptions",value:function(){return new d}},{key:"createFromZoomFactor",value:function(t){return new v(t)}}]),t}(),d=function(t){function e(){return h(this,e),a(this,s(e).call(this,1))}return u(e,f),p(e,[{key:"toggleFitToScreen",value:function(){return new v(1)}},{key:"getCurrentZoomFactor",value:function(t){return t.queryZoomFactor(r.default.viewer.ZoomType.FIT_INSIDE_VIEWPORT)}},{key:"fitToScreen",get:function(){return!0}}]),e}(),v=function(t){function e(){return h(this,e),a(this,s(e).apply(this,arguments))}return u(e,f),p(e,[{key:"toggleFitToScreen",value:function(){return new d}},{key:"getCurrentZoomFactor",value:function(t){return this.zoom}},{key:"fitToScreen",get:function(){return!1}}]),e}(),g=f;n.default=g},{"../models/vivliostyle":11}],13:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i,r=(i=t("../utils/string-util"))&&i.__esModule?i:{default:i};function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t){return new RegExp("[#&]".concat(r.default.escapeUnicodeString(t),"=([^&]*)"),"g")}var s=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.history=window?window.history:{},this.location=window?window.location:{href:""},this.storedUrl=this.location.href}var e,n,i;return e=t,(n=[{key:"getBaseURL",value:function(){var t=this.location.href;return(t=t.replace(/#.*$/,"")).replace(/\/[^\/]*$/,"/")}},{key:"hasParameter",value:function(t){var e=this.location.href;return a(t).test(e)}},{key:"getParameter",value:function(t){for(var e,n=this.location.href,i=a(t),r=[];e=i.exec(n);)r.push(e[1]);return r}},{key:"setParameter",value:function(t,e,n){var i,r=this.location.href,o=a(t),s=o.exec(r);if(s&&n)for(;n-- >=1;)s=o.exec(r);if(s){var u=s[1].length,l=s.index+s[0].length-u;i=r.substring(0,l)+e+r.substring(l+u)}else i="".concat(r+(r.match(/[#&]$/)?"":r.match(/#/)?"&":"#")+t,"=").concat(e);this.history.replaceState?this.history.replaceState(null,"",i):this.location.href=i,this.storedUrl=i}},{key:"removeParameter",value:function(t,e){var n,i=this.location.href,r=a(t),o=r.exec(i);if(o&&e&&(o=r.exec(i)),o){for(n=i;o;o=r.exec(n)){var s=o.index+o[0].length;n="#"==o[0].charAt(0)?n.substring(0,o.index+1)+n.substring(s+1):n.substring(0,o.index)+n.substring(s),r.lastIndex-=o[0].length}n=n.replace(/^(.*?)[#&]$/,"$1"),this.history.replaceState?this.history.replaceState(null,"",n):this.location.href=n}this.storedUrl=n}}])&&o(e.prototype,n),i&&o(e,i),t}());n.default=s},{"../utils/string-util":16}],14:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i={Unidentified:"Unidentified",ArrowDown:"ArrowDown",ArrowLeft:"ArrowLeft",ArrowRight:"ArrowRight",ArrowUp:"ArrowUp",Home:"Home",End:"End",PageDown:"PageDown",PageUp:"PageUp",Escape:"Escape",Enter:"Enter",Space:" "};var r={Keys:i,identifyKeyFromEvent:function(t){var e=t.key,n=t.keyIdentifier,r=t.location;return e===i.ArrowDown||"Down"===e||"Down"===n?t.metaKey?i.End:i.ArrowDown:e===i.ArrowLeft||"Left"===e||"Left"===n?i.ArrowLeft:e===i.ArrowRight||"Right"===e||"Right"===n?i.ArrowRight:e===i.ArrowUp||"Up"===e||"Up"===n?t.metaKey?i.Home:i.ArrowUp:e===i.Escape||"Esc"===e||"U+001B"===n?i.Escape:e===i.Enter||"Enter"===n?i.Enter:e===i.Space||"U+0020"===n?i.Space:"0"===e||"U+0030"===n?"0":"+"===e||"Add"===e||"U+002B"===n||"U+00BB"===n||"U+004B"===n&&r===KeyboardEvent.DOM_KEY_LOCATION_NUMPAD?"+":"-"===e||"Subtract"===e||"U+002D"===n||"U+00BD"===n||"U+004D"===n&&r===KeyboardEvent.DOM_KEY_LOCATION_NUMPAD?"-":e||n||i.Unidentified}};n.default=r},{}],15:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i,r=(i=t("knockout"))&&i.__esModule?i:{default:i};var o={readonlyObservable:function(t){var e=r.default.observable(t);return{getter:r.default.pureComputed(function(){return e()}),value:e}}};n.default=o},{knockout:1}],16:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i={escapeUnicodeChar:function(t){return"\\u".concat((65536|t.charCodeAt(0)).toString(16).substring(1))},escapeUnicodeString:function(t){return t.replace(/[^-a-zA-Z0-9_]/g,this.escapeUnicodeChar)},percentEncodeAmpersandAndUnencodedPercent:function(t){return t.replace(/%(?![0-9A-Fa-f]{2})/g,"%25").replace(/&/g,"%26")},percentEncodeAmpersandAndPercent:function(t){return t.replace(/%/g,"%25").replace(/&/g,"%26")},percentDecodeAmpersandAndPercent:function(t){return t.replace(/%26/g,"&").replace(/%25/g,"%")},percentEncodeForDataURI:function(t){return encodeURI(t).replace(/#/g,"%23").replace(/&/g,"%26")}};n.default=i},{}],17:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i,r=(i=t("knockout"))&&i.__esModule?i:{default:i};function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.list=e,this.visible=r.default.pureComputed(function(){return e().length>0})}var e,n,i;return e=t,(n=[{key:"getDisplayMessage",value:function(t){var e=t.error,n=e&&(e.toString()||e.frameTrace||e.stack);return n&&(n=n.split("\n",1)[0]),n||(n=t.messages.join("\n")),n}}])&&o(e.prototype,n),i&&o(e,i),t}();n.default=a},{knockout:1}],18:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=s(t("knockout")),r=s(t("../models/viewer-options")),o=t("../utils/key-util"),a=s(t("../models/vivliostyle"));function s(t){return t&&t.__esModule?t:{default:t}}function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var l=function(){function t(e,n,r,o){var s=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.viewerOptions_=e,this.viewer_=n,this.settingsPanel_=r,this.justClicked=!1,this.isDisabled=i.default.pureComputed(function(){return s.settingsPanel_.opened()&&!s.settingsPanel_.pinned()||!s.viewer_.state.navigatable()});var u=i.default.pureComputed(function(){return o.disablePageNavigation||s.isDisabled()});u.subscribe(function(t){var e=document.getElementById("vivliostyle-page-number");e&&(e.disabled=t)}),this.isPageNumberDisabled=i.default.pureComputed(function(){return u()}),this.isNavigateToPreviousDisabled=i.default.pureComputed(function(){return!!u()||void 0!==s.viewer_.state.status&&s.viewer_.firstPage()}),this.isNavigateToNextDisabled=i.default.pureComputed(function(){return!!u()||void 0!==s.viewer_.state.status&&((!s.viewerOptions_.renderAllPages()||s.viewer_.state.status()==a.default.constants.ReadyState.COMPLETE)&&s.viewer_.lastPage())}),this.isNavigateToLeftDisabled=i.default.pureComputed(function(){return!!u()||void 0!==s.viewer_.state.pageProgression&&(s.viewer_.state.pageProgression()===a.default.constants.PageProgression.LTR?s.isNavigateToPreviousDisabled():s.isNavigateToNextDisabled())}),this.isNavigateToRightDisabled=i.default.pureComputed(function(){return!!u()||void 0!==s.viewer_.state.pageProgression&&(s.viewer_.state.pageProgression()===a.default.constants.PageProgression.LTR?s.isNavigateToNextDisabled():s.isNavigateToPreviousDisabled())}),this.isNavigateToFirstDisabled=this.isNavigateToPreviousDisabled,this.isNavigateToLastDisabled=i.default.pureComputed(function(){return!!u()||void 0!==s.viewer_.state.status&&(!(!s.viewerOptions_.renderAllPages()||s.viewer_.state.status()==a.default.constants.ReadyState.COMPLETE)||s.viewer_.lastPage())}),this.hidePageNavigation=!!o.disablePageNavigation;var l=i.default.pureComputed(function(){return o.disableZoom||s.isDisabled()});this.isZoomOutDisabled=l,this.isZoomInDisabled=l,this.isZoomToActualSizeDisabled=l,this.isToggleFitToScreenDisabled=l,this.hideZoom=!!o.disableZoom,this.fitToScreen=i.default.pureComputed(function(){return e.zoom().fitToScreen});var h=i.default.pureComputed(function(){return o.disableFontSizeChange||s.isDisabled()});this.isIncreaseFontSizeDisabled=i.default.pureComputed(function(){return!!h()||s.viewerOptions_.fontSize()>=72}),this.isDecreaseFontSizeDisabled=i.default.pureComputed(function(){return!!h()||s.viewerOptions_.fontSize()<=5}),this.isDefaultFontSizeDisabled=h,this.hideFontSizeChange=!!o.disableFontSizeChange,this.isTOCToggleDisabled=i.default.pureComputed(function(){return o.disableTOCNavigation||s.isDisabled()||null==s.viewer_.tocVisible()}),this.hideTOCNavigation=!!o.disableTOCNavigation,this.pageNumber=i.default.pureComputed({read:function(){return this.viewer_.epageToPageNumber(this.viewer_.epage())},write:function(t){var e=this,n=this.viewer_.epage(),i=this.viewer_.epageToPageNumber(n),r=parseFloat(t.replace(/[-]/g,function(t){return String.fromCharCode(t.charCodeAt(0)-65248)}))||0;if(/^[-+]/.test(t)&&(r=i+r),r<1)r=1;else{var o=this.viewer_.epageCount();this.viewerOptions_.renderAllPages()?r>o&&(r=o):r>o+1&&(r=o+1)}var s=this.viewer_.epageFromPageNumber(r),u=document.getElementById("vivliostyle-page-number");u.value=r,this.viewer_.navigateToEPage(s),setTimeout(function(){e.viewer_.state.status()!=a.default.constants.ReadyState.LOADING&&e.viewer_.epage()===n&&(u.value=i),document.getElementById("vivliostyle-viewer-viewport").focus()},10)},owner:this}),this.totalPages=i.default.pureComputed(function(){var t=s.viewer_.epageCount();if(!t)return t;var e=s.pageNumber();return s.viewer_.lastPage()?t=e:e>=t&&t++,t}),["navigateToPrevious","navigateToNext","navigateToLeft","navigateToRight","navigateToFirst","navigateToLast","zoomIn","zoomOut","zoomToActualSize","toggleFitToScreen","increaseFontSize","decreaseFontSize","defaultFontSize","onclickViewport","toggleTOC"].forEach(function(t){s[t]=s[t].bind(s)})}var e,n,s;return e=t,(n=[{key:"navigateToPrevious",value:function(){return!this.isNavigateToPreviousDisabled()&&(this.viewer_.navigateToPrevious(),!0)}},{key:"navigateToNext",value:function(){return!this.isNavigateToNextDisabled()&&(this.viewer_.navigateToNext(),!0)}},{key:"navigateToLeft",value:function(){return!this.isNavigateToLeftDisabled()&&(this.viewer_.navigateToLeft(),!0)}},{key:"navigateToRight",value:function(){return!this.isNavigateToRightDisabled()&&(this.viewer_.navigateToRight(),!0)}},{key:"navigateToFirst",value:function(){return!this.isNavigateToFirstDisabled()&&(this.viewer_.navigateToFirst(),!0)}},{key:"navigateToLast",value:function(){return!this.isNavigateToLastDisabled()&&(this.viewer_.navigateToLast(),!0)}},{key:"zoomIn",value:function(){if(this.isZoomInDisabled())return!1;var t=this.viewerOptions_.zoom();return this.viewerOptions_.zoom(t.zoomIn(this.viewer_)),!0}},{key:"zoomOut",value:function(){if(this.isZoomOutDisabled())return!1;var t=this.viewerOptions_.zoom();return this.viewerOptions_.zoom(t.zoomOut(this.viewer_)),!0}},{key:"zoomToActualSize",value:function(){if(this.isZoomToActualSizeDisabled())return!1;var t=this.viewerOptions_.zoom();return this.viewerOptions_.zoom(t.zoomToActualSize()),!0}},{key:"toggleFitToScreen",value:function(){if(this.isToggleFitToScreenDisabled())return!1;var t=this.viewerOptions_.zoom();return this.viewerOptions_.zoom(t.toggleFitToScreen()),!0}},{key:"increaseFontSize",value:function(){if(this.isIncreaseFontSizeDisabled())return!1;var t=this.viewerOptions_.fontSize();return t=t<10?Math.floor(t)+1:t<20?2*(Math.floor(t/2)+1):t<40?4*(Math.floor(t/4)+1):t<72?8*(Math.floor(t/8)+1):72,this.viewerOptions_.fontSize(t),this.updateFontSizeSettings(),!0}},{key:"decreaseFontSize",value:function(){if(this.isDecreaseFontSizeDisabled())return!1;var t=this.viewerOptions_.fontSize();return t=t>40?8*(Math.ceil(t/8)-1):t>20?4*(Math.ceil(t/4)-1):t>10?2*(Math.ceil(t/2)-1):t>5?Math.ceil(t)-1:5,this.viewerOptions_.fontSize(t),this.updateFontSizeSettings(),!0}},{key:"defaultFontSize",value:function(){if(this.isDefaultFontSizeDisabled())return!1;var t=r.default.getDefaultValues().fontSize;return this.viewerOptions_.fontSize(t),this.updateFontSizeSettings(),!0}},{key:"updateFontSizeSettings",value:function(){this.settingsPanel_.state.viewerOptions.fontSize(this.viewerOptions_.fontSize()),this.viewer_.documentOptions_.pageStyle.baseFontSizeSpecified()&&(this.viewer_.documentOptions_.updateUserStyleSheetFromCSSText(),this.viewer_.loadDocument(this.viewer_.documentOptions_,this.viewerOptions_))}},{key:"onclickViewport",value:function(){if(this.settingsPanel_.justClicked)return!0;if(this.viewer_.tocVisible()&&!this.viewer_.tocPinned()){var t=document.querySelector("[data-vivliostyle-toc-box]");t&&!t.contains(document.activeElement)&&this.toggleTOC()}return this.settingsPanel_.opened()&&!this.settingsPanel_.pinned()&&this.settingsPanel_.close(),!0}},{key:"toggleTOC",value:function(){var t=this;if(this.isTOCToggleDisabled())return!1;var e=0;document.getElementById("vivliostyle-menu-item_toc-toggle");return this.viewer_.tocVisible()?this.justClicked?(this.viewer_.showTOC(!0,!1),this.justClicked=!1):(e&&(clearInterval(e),e=0),this.viewer_.showTOC(!1),this.justClicked=!0,setTimeout(function(){t.justClicked&&(document.getElementById("vivliostyle-viewer-viewport").focus(),t.justClicked=!1)},300)):(this.justClicked?(this.viewer_.showTOC(!0,!1),this.justClicked=!1):(this.viewer_.showTOC(!0,!0),this.justClicked=!0),e=setInterval(function(){var n=document.querySelector("[data-vivliostyle-toc-box]");n&&"visible"===n.style.visibility&&(n.tabIndex=0,n.focus(),clearInterval(e),e=0),t.justClicked=!1},300)),!0}},{key:"navigateTOC",value:function(t){var e=Array.from(document.querySelectorAll("[data-vivliostyle-toc-box]>*>*>*>*>*:not([hidden]) [tabindex='0'],[data-vivliostyle-toc-box]>*>*>*>*>*:not([hidden]) a[href]:not([tabindex='-1'])")),n=e.indexOf(document.activeElement),i=function(t){return e[t]&&"button"===e[t].getAttribute("role")},r=function(t){return e[t]&&"true"===e[t].getAttribute("aria-expanded")};switch(t){case o.Keys.ArrowLeft:if(-1==n){n=e.length-1;break}if(!i(n)&&i(n-1)&&n--,i(n)&&r(n))e[n].click();else for(var a=n-1;a>=0;a--)if(i(a)&&e[a].parentElement.contains(e[n])){n=a;break}break;case o.Keys.ArrowRight:if(-1==n){n=0;break}!i(n)&&i(n-1)&&n--,i(n)&&(r(n)?n+=2:e[n].click());break;case o.Keys.ArrowDown:n++;break;case o.Keys.ArrowUp:if(-1==n){n=e.length-1;break}n>0&&i(--n)&&n--;break;case o.Keys.Home:n=0;break;case o.Keys.End:n=e.length-1;break;case o.Keys.Space:!i(n)&&i(n-1)&&n--,i(n)&&e[n].click()}return i(n)&&n++,e[n]&&e[n].focus(),!0}},{key:"handleKey",value:function(t){if(this.settingsPanel_.opened()&&this.settingsPanel_.settingsToggle.contains(document.activeElement))return!0;var e=document.getElementById("vivliostyle-page-number"),n=document.getElementById("vivliostyle-viewer-viewport"),i=n.scrollWidth>n.clientWidth,r=n.scrollHeight>n.clientHeight,a=e===document.activeElement,s=this.viewer_.tocVisible()&&!a&&n!=document.activeElement;switch(t){case"+":return a||!this.increaseFontSize();case"-":return a||!this.decreaseFontSize();case"0":return a||!this.defaultFontSize();case"1":return a||!this.zoomToActualSize();case o.Keys.ArrowLeft:return s?!this.navigateTOC(t):a||i||!this.navigateToLeft();case o.Keys.ArrowRight:return s?!this.navigateTOC(t):a||i||!this.navigateToRight();case o.Keys.ArrowDown:return s?!this.navigateTOC(t):(n.focus(),r||!this.navigateToNext());case o.Keys.ArrowUp:return s?!this.navigateTOC(t):(n.focus(),r||!this.navigateToPrevious());case o.Keys.PageDown:return!!s||(n.focus(),!this.navigateToNext());case o.Keys.PageUp:return!!s||(n.focus(),!this.navigateToPrevious());case o.Keys.Home:return s?!this.navigateTOC(t):(n.focus(),!this.navigateToFirst());case o.Keys.End:return s?!this.navigateTOC(t):(n.focus(),!this.navigateToLast());case"o":case"O":return n.focus(),!this.zoomOut();case"i":case"I":return n.focus(),!this.zoomIn();case"f":case"F":return n.focus(),!this.toggleFitToScreen();case"g":case"G":return e.focus(),!1;case"t":case"T":return n.focus(),!this.toggleTOC();case o.Keys.Escape:return this.viewer_.tocVisible()?!this.toggleTOC():(n.focus(),!0);case o.Keys.Space:return s?!this.navigateTOC(t):"button"!==document.activeElement.getAttribute("role")||(document.activeElement.click(),!1);default:return!0}}}])&&u(e.prototype,n),s&&u(e,s),t}();n.default=l},{"../models/viewer-options":10,"../models/vivliostyle":11,"../utils/key-util":14,knockout:1}],19:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=u(t("knockout")),r=u(t("../models/viewer-options")),o=u(t("../models/page-style")),a=u(t("../models/page-view-mode")),s=t("../utils/key-util");function u(t){return t&&t.__esModule?t:{default:t}}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var h=function(){function t(e,n,s,u,l){var h=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.viewerOptions_=e,this.documentOptions_=n,this.viewer_=s,this.isPageStyleChangeDisabled=!!l.disablePageStyleChange,this.isOverrideDocumentStyleSheetDisabled=this.isPageStyleChangeDisabled,this.isPageViewModeChangeDisabled=!!l.disablePageViewModeChange,this.isRenderAllPagesChangeDisabled=!!l.disableRenderAllPagesChange,this.justClicked=!1,this.settingsToggle=document.getElementById("vivliostyle-menu-item_settings-toggle"),this.opened=i.default.observable(!1),this.pinned=i.default.observable(!1),this.state={viewerOptions:new r.default(e),pageStyle:new o.default(n.pageStyle),pageViewMode:i.default.pureComputed({read:function(){return h.state.viewerOptions.pageViewMode().toString()},write:function(t){h.state.viewerOptions.pageViewMode(a.default.of(t))}}),renderAllPages:i.default.pureComputed({read:function(){return h.state.viewerOptions.renderAllPages()},write:function(t){h.state.viewerOptions.renderAllPages(t)}})},this.state.pageStyle.setViewerFontSizeObservable(this.state.viewerOptions.fontSize),this.defaultPageStyle=new o.default,["close","toggle","apply","cancel","resetUserStyle"].forEach(function(t){this[t]=this[t].bind(this)},this),u.visible.subscribe(function(t){t&&this.close()},this)}var e,n,u;return e=t,(n=[{key:"close",value:function(){this.opened(!1),this.pinned(!1);var t=document.getElementById("vivliostyle-viewer-viewport");return t&&t.focus(),!0}},{key:"toggle",value:function(){var t=this;this.opened()?this.justClicked?(this.justClicked=!1,this.pinned(!0)):(this.close(),this.justClicked=!0,setTimeout(function(){t.justClicked=!1},300)):(this.viewer_.tocPinned()||this.viewer_.showTOC(!1),this.opened(!0),this.justClicked?(this.justClicked=!1,this.pinned(!0)):(this.pinned(!1),this.justClicked=!0,this.focusToFirstItem(),setTimeout(function(){t.justClicked=!1},300)))}},{key:"apply",value:function(){this.state.renderAllPages()===this.viewerOptions_.renderAllPages()&&this.state.pageStyle.equivalentTo(this.documentOptions_.pageStyle)?this.viewerOptions_.copyFrom(this.state.viewerOptions):(this.documentOptions_.pageStyle.copyFrom(this.state.pageStyle),this.documentOptions_.pageStyle.baseFontSizeSpecified()&&this.documentOptions_.updateUserStyleSheetFromCSSText(),this.viewer_.loadDocument(this.documentOptions_,this.state.viewerOptions)),this.pinned()?this.focusToFirstItem():this.close()}},{key:"cancel",value:function(){this.state.viewerOptions.copyFrom(this.viewerOptions_),this.state.pageStyle.copyFrom(this.documentOptions_.pageStyle),this.close()}},{key:"resetUserStyle",value:function(){return this.state.pageStyle.copyFrom(this.defaultPageStyle),this.state.viewerOptions.fontSize(r.default.getDefaultValues().fontSize),setTimeout(function(){document.getElementsByName("vivliostyle-settings_reset-user-style")[0].checked=!1},200),!0}},{key:"focusToFirstItem",value:function(t){var e=t||this.settingsToggle,n=["input","textarea","summary"].includes(e.localName)?e:Array.from(e.getElementsByTagName("input")).find(function(t){return!t.disabled&&("radio"!=t.type||t.checked)});if(n){for(var i=n.parentElement;i&&i!=this.settingsToggle;i=i.parentElement)"details"==i.localName&&(i.open=!0);n.focus()}}},{key:"handleKey",value:function(t){var e=this.opened()&&this.settingsToggle.contains(document.activeElement),n=e&&("text"==document.activeElement.type||"select"==document.activeElement.localName),i=e&&"textarea"==document.activeElement.localName,r=e&&!n&&!i;switch(t){case s.Keys.Escape:return this.opened()&&(this.cancel(),this.close()),!0;case"s":case"S":return!(!this.opened()||r||!e)||(this.toggle(),!1);case"p":case"P":return!r||(this.focusToFirstItem(document.getElementById("vivliostyle-settings_page-view-and-rendering").firstElementChild),!1);case"v":case"V":return!r||(this.focusToFirstItem(document.getElementById("vivliostyle-settings_page-view-mode")),!1);case"a":case"A":return!r||(this.focusToFirstItem(document.getElementsByName("vivliostyle-settings_render-all-pages")[0]),!1);case"u":case"U":return!r||(this.focusToFirstItem(document.getElementById("vivliostyle-settings_user-style").firstElementChild),!1);case"z":case"Z":return!r||(this.focusToFirstItem(document.getElementById("vivliostyle-settings_page-size")),!1);case"m":case"M":return!r||(this.focusToFirstItem(document.getElementById("vivliostyle-settings_page-margin")),!1);case"b":case"B":return!r||(this.focusToFirstItem(document.getElementById("vivliostyle-settings_page-breaks")),!1);case"i":case"I":return!r||(this.focusToFirstItem(document.getElementById("vivliostyle-settings_images")),!1);case"t":case"T":return!r||(this.focusToFirstItem(document.getElementById("vivliostyle-settings_text")),!1);case"o":case"O":return!r||(this.focusToFirstItem(document.getElementsByName("vivliostyle-settings_override-document-stylesheets")[0]),!1);case"c":case"C":return!r||(this.focusToFirstItem(document.getElementsByName("vivliostyle-settings_css-details")[0]),!1);case"r":case"R":return!r||(this.focusToFirstItem(document.getElementsByName("vivliostyle-settings_reset-user-style")[0]),!1);case s.Keys.Enter:return!(n||r&&"vivliostyle-menu-button_apply"!==document.activeElement.id&&"vivliostyle-menu-button_reset"!==document.activeElement.id)||(document.getElementById("vivliostyle-menu-button_apply").focus(),!1);default:return!0}}}])&&l(e.prototype,n),u&&l(e,u),t}();n.default=h},{"../models/page-style":8,"../models/page-view-mode":9,"../models/viewer-options":10,"../utils/key-util":14,knockout:1}],20:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=d(t("../models/vivliostyle")),r=d(t("../models/document-options")),o=d(t("../models/viewer-options")),a=d(t("../models/message-queue")),s=d(t("./viewer")),u=d(t("./navigation")),l=d(t("./settings-panel")),h=d(t("./message-dialog")),c=d(t("../utils/key-util")),p=d(t("../utils/string-util")),f=d(t("../stores/url-parameters"));function d(t){return t&&t.__esModule?t:{default:t}}var v=function(){var t=this;this.documentOptions=new r.default,this.viewerOptions=new o.default,this.documentOptions.pageStyle.setViewerFontSizeObservable(this.viewerOptions.fontSize),this.viewerOptions.profile()&&i.default.profile.profiler.enable(),this.isDebug="true"===f.default.getParameter("debug")[0],this.viewerSettings={userAgentRootURL:"".concat(f.default.getBaseURL(),"resources/"),viewportElement:document.getElementById("vivliostyle-viewer-viewport"),debug:this.isDebug},f.default.getParameter("b")[0]&&(f.default.removeParameter("b",!0),f.default.removeParameter("x")),f.default.removeParameter("f",!0),f.default.removeParameter("spread",!0),f.default.removeParameter("renderAllPages",!0),f.default.removeParameter("fontSize",!0),f.default.removeParameter("profile",!0),f.default.removeParameter("debug",!0),this.viewer=new s.default(this.viewerSettings,this.viewerOptions),this.viewer.inputUrl.subscribe(function(t){""!=t?(f.default.hasParameter("b")||f.default.history.pushState&&f.default.history.pushState(null,""),t=t.startsWith("<")?"data:,"+p.default.percentEncodeForDataURI(t):p.default.percentEncodeAmpersandAndUnencodedPercent(t),f.default.setParameter("b",t)):f.default.removeParameter("b")}),this.messageDialog=new h.default(a.default),this.settingsPanel=new l.default(this.viewerOptions,this.documentOptions,this.viewer,this.messageDialog,{disablePageStyleChange:!1,disablePageViewModeChange:!1,disableRenderAllPagesChange:!1}),this.navigation=new u.default(this.viewerOptions,this.viewer,this.settingsPanel,{disableTOCNavigation:!1,disablePageNavigation:!1,disableZoom:!1,disableFontSizeChange:!1}),this.handleKey=function(e,n){var i=c.default.identifyKeyFromEvent(n);if("vivliostyle-input-url"===document.activeElement.id)return"Enter"!==i||13!==n.keyCode||(t.documentOptions.bookUrl(f.default.getParameter("b")[0]),t.viewer.loadDocument(t.documentOptions),!1);if("Home"!==i&&"End"!==i&&(n.ctrlKey||n.metaKey)||n.altKey||n.shiftKey)return!0;var r=t.settingsPanel.handleKey(i);return r&&(r=t.navigation.handleKey(i)),r},this.viewer.loadDocument(this.documentOptions),window.onhashchange=function(){window.location.href!=f.default.storedUrl&&window.location.reload()}};n.default=v},{"../models/document-options":6,"../models/message-queue":7,"../models/viewer-options":10,"../models/vivliostyle":11,"../stores/url-parameters":13,"../utils/key-util":14,"../utils/string-util":16,"./message-dialog":17,"./navigation":18,"./settings-panel":19,"./viewer":21}],21:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=s(t("knockout")),r=s(t("../utils/observable-util")),o=s(t("../logging/logger")),a=s(t("../models/vivliostyle"));function s(t){return t&&t.__esModule?t:{default:t}}function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var l=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.viewerOptions_=n,this.documentOptions_=null,this.viewer_=new a.default.viewer.Viewer(e,n.toObject());var o=this.state_={status:r.default.readonlyObservable(a.default.constants.ReadyState.LOADING),pageProgression:r.default.readonlyObservable(a.default.constants.PageProgression.LTR)};this.state={status:o.status.getter.extend({rateLimit:{timeout:100,method:"notifyWhenChangesStop"},notify:"always"}),navigatable:i.default.pureComputed(function(){return o.status.value()&&o.status.value()!==a.default.constants.ReadyState.LOADING}),pageProgression:o.pageProgression.getter},this.epage=i.default.observable(),this.epageCount=i.default.observable(),this.firstPage=i.default.observable(),this.lastPage=i.default.observable(),this.tocVisible=i.default.observable(),this.tocPinned=i.default.observable(),this.inputUrl=i.default.observable(""),this.setupViewerEventHandler(),this.setupViewerOptionSubscriptions()}var e,n,s;return e=t,(n=[{key:"setupViewerEventHandler",value:function(){var t=this,e=o.default.getLogger();this.viewer_.addListener("debug",function(t){e.debug(t.content)}),this.viewer_.addListener("info",function(t){e.info(t.content)}),this.viewer_.addListener("warn",function(t){e.warn(t.content)}),this.viewer_.addListener("error",function(t){e.error(t.content)}),this.viewer_.addListener("readystatechange",function(){var e=t.viewer_.readyState;e!==a.default.constants.ReadyState.INTERACTIVE&&e!==a.default.constants.ReadyState.COMPLETE||t.state_.pageProgression.value(t.viewer_.getCurrentPageProgression()),t.state_.status.value(e)}),this.viewer_.addListener("loaded",function(){t.viewerOptions_.profile()&&a.default.profile.profiler.printTimings()}),this.viewer_.addListener("nav",function(e){var n=e.cfi,i=e.first,r=e.last,o=e.epage,a=e.epageCount,s=e.metadata,u=e.docTitle;if(n&&t.documentOptions_.fragment(n),void 0!==i&&t.firstPage(i),void 0!==r&&t.lastPage(r),void 0!==o&&t.epage(o),void 0!==a&&t.epageCount(a),s||u){var l=s&&s["http://purl.org/dc/terms/title"],h=l&&l[0]&&l[0].v;h?!u||u===h||t.firstPage()||/\.xhtml$/.test(u)?document.title=h:document.title="".concat(u," | ").concat(h):document.title=u||"Vivliostyle Viewer"}var c=t.tocVisible(),p=t.viewer_.isTOCVisible();c&&!p||t.tocVisible(p)}),this.viewer_.addListener("hyperlink",function(e){e.internal?(t.navigateToInternalUrl(e.href),t.tocVisible()&&t.tocVisible(!1),document.getElementById("vivliostyle-viewer-viewport").focus()):window.location.href=e.href})}},{key:"setupViewerOptionSubscriptions",value:function(){i.default.computed(function(){var t=this.viewerOptions_.toObject();this.viewer_.setOptions(t)},this).extend({rateLimit:0})}},{key:"loadDocument",value:function(t,e){this.state_.status.value(a.default.constants.ReadyState.LOADING),e&&this.viewerOptions_.copyFrom(e),this.documentOptions_=t,t.xUrl()?this.viewer_.loadDocument(t.xUrl(),t.toObject(),this.viewerOptions_.toObject()):t.bookUrl()?this.viewer_.loadPublication?this.viewer_.loadPublication(t.bookUrl(),t.toObject(),this.viewerOptions_.toObject()):this.viewer_.loadEPUB(t.bookUrl(),t.toObject(),this.viewerOptions_.toObject()):this.state_.status.value("")}},{key:"navigateToPrevious",value:function(){this.viewer_.navigateToPage("previous")}},{key:"navigateToNext",value:function(){this.viewer_.navigateToPage("next")}},{key:"navigateToLeft",value:function(){this.viewer_.navigateToPage("left")}},{key:"navigateToRight",value:function(){this.viewer_.navigateToPage("right")}},{key:"navigateToFirst",value:function(){this.viewer_.navigateToPage("first")}},{key:"navigateToLast",value:function(){this.viewer_.navigateToPage("last")}},{key:"navigateToEPage",value:function(t){this.viewer_.navigateToPage("epage",t)}},{key:"navigateToInternalUrl",value:function(t){this.viewer_.navigateToInternalUrl(t)}},{key:"queryZoomFactor",value:function(t){return this.viewer_.queryZoomFactor(t)}},{key:"epageToPageNumber",value:function(t){if(t||0==t)return Math.round(t+1)}},{key:"epageFromPageNumber",value:function(t){if(t||0==t)return t-1}},{key:"showTOC",value:function(t,e){if(null!=this.viewer_.isTOCVisible()){var n=null==t?!this.tocVisible():t;this.tocVisible(n),this.tocPinned(!!n&&!e),this.viewer_.showTOC(n,e)}}}])&&u(e.prototype,n),s&&u(e,s),t}();n.default=l},{"../logging/logger":4,"../models/vivliostyle":11,"../utils/observable-util":15,knockout:1}],22:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=o(t("knockout")),r=(o(t("./bindings/menuButton.js")),o(t("./bindings/swipePages.js")),o(t("./viewmodels/viewer-app")));function o(t){return t&&t.__esModule?t:{default:t}}var a={start:function(){function t(){i.default.applyBindings(new r.default)}window.__loaded?t():window.onload=t}};n.default=a},{"./bindings/menuButton.js":2,"./bindings/swipePages.js":3,"./viewmodels/viewer-app":20,knockout:1}],23:[function(t,e,n){var i,r;i=window,r=function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=32)}([function(t,e,n){"use strict";n.d(e,"m",function(){return s}),n.d(e,"d",function(){return u}),n.d(e,"o",function(){return h}),n.d(e,"w",function(){return c}),n.d(e,"k",function(){return p}),n.d(e,"f",function(){return d}),n.d(e,"r",function(){return v}),n.d(e,"i",function(){return g}),n.d(e,"h",function(){return m}),n.d(e,"g",function(){return y}),n.d(e,"a",function(){return b}),n.d(e,"l",function(){return E}),n.d(e,"j",function(){return T}),n.d(e,"b",function(){return N}),n.d(e,"e",function(){return S}),n.d(e,"c",function(){return _}),n.d(e,"x",function(){return A}),n.d(e,"n",function(){return I}),n.d(e,"t",function(){return x}),n.d(e,"s",function(){return C}),n.d(e,"q",function(){return O}),n.d(e,"p",function(){return k}),n.d(e,"u",function(){return L}),n.d(e,"v",function(){return R});var i,r=n(1),o=n(4),a=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=function(){function t(){}return t.prototype._=function(t){for(var e=0;e<t.length;e++)t[e].visit(this)},t.prototype.T=function(t){throw new Error("E_CSS_EMPTY_NOT_ALLOWED")},t.prototype.S=function(t){throw new Error("E_CSS_SLASH_NOT_ALLOWED")},t.prototype.R=function(t){throw new Error("E_CSS_STR_NOT_ALLOWED")},t.prototype.U=function(t){throw new Error("E_CSS_IDENT_NOT_ALLOWED")},t.prototype.X=function(t){throw new Error("E_CSS_NUMERIC_NOT_ALLOWED")},t.prototype.V=function(t){throw new Error("E_CSS_NUM_NOT_ALLOWED")},t.prototype.Y=function(t){return this.V(t)},t.prototype.$=function(t){throw new Error("E_CSS_COLOR_NOT_ALLOWED")},t.prototype.W=function(t){throw new Error("E_CSS_URL_NOT_ALLOWED")},t.prototype.Z=function(t){throw new Error("E_CSS_LIST_NOT_ALLOWED")},t.prototype.tt=function(t){throw new Error("E_CSS_COMMA_NOT_ALLOWED")},t.prototype.nt=function(t){throw new Error("E_CSS_FUNC_NOT_ALLOWED")},t.prototype.it=function(t){throw new Error("E_CSS_EXPR_NOT_ALLOWED")},t}(),u=function(t){function e(){return t.call(this)||this}return a(e,t),e.prototype._=function(t){for(var e=null,n=0;n<t.length;n++){var i=t[n],r=i.visit(this);if(e)e[n]=r;else if(i!==r){e=new Array(t.length);for(var o=0;o<n;o++)e[o]=t[o];e[n]=r}}return e||t},e.prototype.R=function(t){return t},e.prototype.U=function(t){return t},e.prototype.S=function(t){return t},e.prototype.X=function(t){return t},e.prototype.V=function(t){return t},e.prototype.Y=function(t){return t},e.prototype.$=function(t){return t},e.prototype.W=function(t){return t},e.prototype.Z=function(t){var e=this._(t.values);return e===t.values?t:new T(e)},e.prototype.tt=function(t){var e=this._(t.values);return e===t.values?t:new N(e)},e.prototype.nt=function(t){var e=this._(t.values);return e===t.values?t:new S(t.name,e)},e.prototype.it=function(t){return t},e}(s),l=function(){function t(){}return t.prototype.toString=function(){var t=new r.d;return this.rt(t,!0),t.toString()},t.prototype.stringValue=function(){var t=new r.d;return this.rt(t,!1),t.toString()},t.prototype.et=function(t,e){throw new Error("F_ABSTRACT")},t.prototype.rt=function(t,e){t.append("[error]")},t.prototype.st=function(){return!1},t.prototype.ot=function(){return!1},t.prototype.ut=function(){return!1},t.prototype.ht=function(){return!1},t.prototype.at=function(){return!1},t.prototype.visit=function(t){throw new Error("F_ABSTRACT")},t}(),h=function(t){function e(){return t.call(this)||this}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return this.empty||(this.empty=new e),this.empty},enumerable:!0,configurable:!0}),e.prototype.et=function(t,e){return new o.f(t,"")},e.prototype.rt=function(t,e){},e.prototype.visit=function(t){return t.T(this)},e}(l).instance,c=function(t){function e(){return t.call(this)||this}return a(e,t),Object.defineProperty(e,"instance",{get:function(){return this.slash||(this.slash=new e),this.slash},enumerable:!0,configurable:!0}),e.prototype.et=function(t,e){return new o.f(t,"/")},e.prototype.rt=function(t,e){t.append("/")},e.prototype.visit=function(t){return t.S(this)},e}(l).instance,p=function(t){function e(e){var n=t.call(this)||this;return n.str=e,n}return a(e,t),e.prototype.et=function(t,e){return new o.f(t,this.str)},e.prototype.rt=function(t,e){e?(t.append('"'),t.append(r.q(this.str)),t.append('"')):t.append(this.str)},e.prototype.visit=function(t){return t.R(this)},e}(l),f={},d=function(t){function e(e){var n=t.call(this)||this;if(n.name=e,f[e])throw new Error("E_INVALID_CALL");return f[e]=n,n}return a(e,t),e.prototype.et=function(t,e){return new o.f(t,this.name)},e.prototype.rt=function(t,e){e?t.append(r.p(this.name)):t.append(this.name)},e.prototype.visit=function(t){return t.U(this)},e.prototype.ht=function(){return!0},e}(l);function v(t){var e=f[t];return e||(e=new d(t)),e}var g=function(t){function e(e,n){var i=t.call(this)||this;return i.num=e,i.unit=n.toLowerCase(),i}return a(e,t),e.prototype.et=function(t,e){return 0==this.num?t.zero:e&&"%"==this.unit?100==this.num?e:new o.r(t,e,new o.f(t,this.num/100)):new o.x(t,this.num,this.unit)},e.prototype.rt=function(t,e){t.append(this.num.toString()),t.append(this.unit)},e.prototype.visit=function(t){return t.X(this)},e.prototype.ot=function(){return!0},e}(l),m=function(t){function e(e){var n=t.call(this)||this;return n.num=e,n}return a(e,t),e.prototype.et=function(t,e){return 0==this.num?t.zero:1==this.num?t.one:new o.f(t,this.num)},e.prototype.rt=function(t,e){t.append(this.num.toString())},e.prototype.visit=function(t){return t.V(this)},e.prototype.ut=function(){return!0},e}(l),y=function(t){function e(e){return t.call(this,e)||this}return a(e,t),e.prototype.visit=function(t){return t.Y(this)},e}(m),b=function(t){function e(e){var n=t.call(this)||this;return n.rgb=e,n}return a(e,t),e.prototype.rt=function(t,e){t.append("#");var n=this.rgb.toString(16);t.append("000000".substr(n.length)),t.append(n)},e.prototype.visit=function(t){return t.$(this)},e}(l),E=function(t){function e(e){var n=t.call(this)||this;return n.url=e,n}return a(e,t),e.prototype.rt=function(t,e){t.append('url("'),t.append(r.q(this.url)),t.append('")')},e.prototype.visit=function(t){return t.W(this)},e}(l);function w(t,e,n,i){var r=e.length;e[0].rt(t,i);for(var o=1;o<r;o++)t.append(n),e[o].rt(t,i)}var T=function(t){function e(e){var n=t.call(this)||this;return n.values=e,n}return a(e,t),e.prototype.rt=function(t,e){w(t,this.values," ",e)},e.prototype.visit=function(t){return t.Z(this)},e.prototype.at=function(){return!0},e}(l),N=function(t){function e(e){var n=t.call(this)||this;return n.values=e,n}return a(e,t),e.prototype.rt=function(t,e){w(t,this.values,",",e)},e.prototype.visit=function(t){return t.tt(this)},e}(l),S=function(t){function e(e,n){var i=t.call(this)||this;return i.name=e,i.values=n,i}return a(e,t),e.prototype.rt=function(t,e){t.append(r.p(this.name)),t.append("("),w(t,this.values,",",e),t.append(")")},e.prototype.visit=function(t){return t.nt(this)},e}(l),_=function(t){function e(e){var n=t.call(this)||this;return n.expr=e,n}return a(e,t),e.prototype.et=function(){return this.expr},e.prototype.rt=function(t,e){t.append("-epubx-expr("),this.expr.rt(t,0),t.append(")")},e.prototype.visit=function(t){return t.it(this)},e.prototype.st=function(){return!0},e}(l);function A(t,e){if(t){if(t.ot()){var n=t;return e.ft(n.unit,!1)*n.num}if(t.ut())return t.num}return 0}function I(t,e){return new g(A(t,e),"px")}var x={absolute:v("absolute"),all:v("all"),always:v("always"),auto:v("auto"),avoid:v("avoid"),balance:v("balance"),balance_all:v("balance-all"),block:v("block"),block_end:v("block-end"),block_start:v("block-start"),both:v("both"),bottom:v("bottom"),border_box:v("border-box"),break_all:v("break-all"),break_word:v("break-word"),crop:v("crop"),cross:v("cross"),column:v("column"),exclusive:v("exclusive"),_false:v("false"),fixed:v("fixed"),flex:v("flex"),footnote:v("footnote"),footer:v("footer"),header:v("header"),hidden:v("hidden"),horizontal_tb:v("horizontal-tb"),inherit:v("inherit"),inline:v("inline"),inline_block:v("inline-block"),inline_end:v("inline-end"),inline_start:v("inline-start"),landscape:v("landscape"),left:v("left"),line:v("line"),list_item:v("list-item"),ltr:v("ltr"),manual:v("manual"),none:v("none"),normal:v("normal"),oeb_page_foot:v("oeb-page-foot"),oeb_page_head:v("oeb-page-head"),page:v("page"),relative:v("relative"),right:v("right"),same:v("same"),scale:v("scale"),snap_block:v("snap-block"),spread:v("spread"),_static:v("static"),rtl:v("rtl"),table:v("table"),table_caption:v("table-caption"),table_cell:v("table-cell"),table_footer_group:v("table-footer-group"),table_header_group:v("table-header-group"),table_row:v("table-row"),top:v("top"),transparent:v("transparent"),vertical_lr:v("vertical-lr"),vertical_rl:v("vertical-rl"),visible:v("visible"),_true:v("true")},C=new g(100,"%"),O=new g(100,"pvw"),k=new g(100,"pvh"),L=new g(0,"px"),D={"font-size":1,color:2};function R(t,e){return(D[t]||Number.MAX_VALUE)-(D[e]||Number.MAX_VALUE)}},function(t,e,n){"use strict";n.d(e,"o",function(){return r}),n.d(e,"H",function(){return o}),n.d(e,"I",function(){return a}),n.d(e,"h",function(){return s}),n.d(e,"E",function(){return u}),n.d(e,"D",function(){return h}),n.d(e,"G",function(){return c}),n.d(e,"C",function(){return p}),n.d(e,"n",function(){return f}),n.d(e,"a",function(){return l}),n.d(e,"g",function(){return d}),n.d(e,"b",function(){return v}),n.d(e,"v",function(){return b}),n.d(e,"F",function(){return E}),n.d(e,"t",function(){return w}),n.d(e,"u",function(){return T}),n.d(e,"d",function(){return N}),n.d(e,"p",function(){return _}),n.d(e,"q",function(){return A}),n.d(e,"y",function(){return I}),n.d(e,"x",function(){return x}),n.d(e,"r",function(){return C}),n.d(e,"s",function(){return O}),n.d(e,"J",function(){return k}),n.d(e,"i",function(){return L}),n.d(e,"B",function(){return D}),n.d(e,"e",function(){return P}),n.d(e,"w",function(){return M}),n.d(e,"f",function(){return F}),n.d(e,"A",function(){return U}),n.d(e,"z",function(){return B}),n.d(e,"c",function(){return z}),n.d(e,"m",function(){return G}),n.d(e,"j",function(){return X}),n.d(e,"k",function(){return W}),n.d(e,"l",function(){return K});var i=n(6),r={};function o(t){return JSON.parse(t)}function a(t){var e=t.match(/^([^#]*)/);return e?e[1]:t}var s=window.location.href;function u(t){s=t}var l,h=window.location.href;function c(t){h=t}function p(t,e){if(e.startsWith("data:"))return t||e;if(!e||t.match(/^\w{2,}:/))return t.toLowerCase().match("^javascript:")?"#":(t.match(/^\w{2,}:\/\/[^\/]+$/)&&(t+="/"),t);var n;if(e.match(/^\w{2,}:\/\/[^\/]+$/)&&(e+="/"),t.match(/^\/\//))return(n=e.match(/^(\w{2,}:)\/\//))?n[1]+t:t;if(t.match(/^\//))return(n=e.match(/^(\w{2,}:\/\/[^\/]+)\//))?n[1]+t:t;if(t.match(/^\.(\/|$)/)&&(t=t.substr(2)),e=function(t){var e=t.match(/^([^#?]*)/);return e?e[1]:t}(e),t.match(/^#/))return e+t;var i=e.lastIndexOf("/");if(i<0)return t;if(i<e.length-1&&(o=e.lastIndexOf("."))<i){if(""==t)return e;i=(e+="/").length-1}for(var r=e.substr(0,i+1)+t;!((i=r.indexOf("/../"))<=0);){var o;if((o=r.lastIndexOf("/",i-1))<=0)break;r=r.substr(0,o)+r.substr(i+3)}return r.replace(/\/(\.\/)+/g,"/")}function f(t){var e;return(e=/^(https?:)\/\/github\.com\/([^\/]+\/[^\/]+)\/(blob\/|tree\/|raw\/)?(.*)$/.exec(t))?t=e[1]+"//raw.githubusercontent.com/"+e[2]+"/"+(e[3]?"":"master/")+e[4]:(e=/^(https?:)\/\/www\.aozora\.gr\.jp\/(cards\/[^\/]+\/files\/[^\/.]+\.html)$/.exec(t))?t=e[1]+"//raw.githubusercontent.com/aozorabunko/aozorabunko/master/"+e[2]:(e=/^(https?:)\/\/gist\.github\.com\/([^\/]+\/\w+)(\/|$)(raw(\/|$))?(.*)$/.exec(t))?t=e[1]+"//gist.githubusercontent.com/"+e[2]+"/raw/"+e[6]:(e=/^(https?:)\/\/(?:[^\/.]+\.)?jsbin\.com\/(?!(?:blog|help)\b)(\w+)((\/\d+)?).*$/.exec(t))&&(t=e[1]+"//output.jsbin.com/"+e[2]+e[3]+"/"),t}function d(t){return null==t?t:t.toString()}!function(t){t.FB2="http://www.gribuser.ru/xml/fictionbook/2.0",t.epub="http://www.idpf.org/2007/ops",t.EV="http://www.w3.org/2001/xml-events",t.MATHML="http://www.w3.org/1998/Math/MathML",t.XML="http://www.w3.org/XML/1998/namespace",t.XHTML="http://www.w3.org/1999/xhtml",t.XLINK="http://www.w3.org/1999/xlink",t.SHADOW="http://www.pyroxy.com/ns/shadow",t.SVG="http://www.w3.org/2000/svg",t.DC="http://purl.org/dc/elements/1.1/",t.NCX="http://www.daisy.org/z3986/2005/ncx/",t.SSE="http://example.com/sse"}(l||(l={}));var v=function(){function t(){this.queue=[null]}return t.prototype.length=function(){return this.queue.length-1},t.prototype.add=function(t){for(var e=this.queue.length;e>1;){var n=Math.floor(e/2),i=this.queue[n];if(i.compare(t)>0)return void(this.queue[e]=t);this.queue[e]=i,e=n}this.queue[1]=t},t.prototype.peek=function(){return this.queue[1]},t.prototype.remove=function(){var t=this.queue[1],e=this.queue.pop(),n=this.queue.length;if(n>1){for(var i=1;;){var r=2*i;if(r>=n)break;if(this.queue[r].compare(e)>0)r+1<n&&this.queue[r+1].compare(this.queue[r])>0&&r++;else{if(!(r+1<n&&this.queue[r+1].compare(e)>0))break;r++}this.queue[i]=this.queue[r],i=r}this.queue[i]=e}return t},t}(),g=["","-webkit-","-moz-","-ms-","-o-","-epub-"],m={};function y(t,e){if("writing-mode"===e){var n=document.createElement("span");return"-ms-"===t?(n.style.setProperty(t+e,"tb-rl"),"tb-rl"===n.style["writing-mode"]):(n.style.setProperty(t+e,"vertical-rl"),"vertical-rl"===n.style[t+e])}return"string"==typeof document.documentElement.style[function(t,e){return t&&(e="-"+e,"moz"===(t=t.replace(/-/g,""))&&(t="Moz")),t+e.replace(/-[a-z]/g,function(t){return t.substr(1).toUpperCase()})}(t,e)]}function b(t){var e=m[t];if(e||null===e)return e;switch(t){case"text-combine-upright":if(y("-webkit-","text-combine")&&!y("","text-combine-upright"))return m[t]=["-webkit-text-combine"],["-webkit-text-combine"];break;case"writing-mode":if(y("-ms-","writing-mode"))return m[t]=["-ms-writing-mode"],["-ms-writing-mode"];break;case"filter":if(y("-webkit-","filter"))return m[t]=["-webkit-filter"],["-webkit-filter"];break;case"clip-path":if(y("-webkit-","clip-path"))return m[t]=["-webkit-clip-path","clip-path"];break;case"margin-inline-start":if(y("-webkit-","margin-start"))return m[t]=["-webkit-margin-start"],["-webkit-margin-start"];break;case"margin-inline-end":if(y("-webkit-","margin-end"))return m[t]=["-webkit-margin-end"],["-webkit-margin-end"];break;case"padding-inline-start":if(y("-webkit-","padding-start"))return m[t]=["-webkit-padding-start"],["-webkit-padding-start"];break;case"padding-inline-end":if(y("-webkit-","padding-end"))return m[t]=["-webkit-padding-end"],["-webkit-padding-end"]}for(var n=0,r=g;n<r.length;n++){var o=r[n];if(y(o,t))return e=o+t,m[t]=[e],[e]}return i.b.warn("Property not supported by the browser: ",t),m[t]=null,null}function E(t,e,n){try{var r=b(e);if(!r)return;r.forEach(function(e){if("-ms-writing-mode"===e)switch(n){case"horizontal-tb":n="lr-tb";break;case"vertical-rl":n="tb-rl";break;case"vertical-lr":n="tb-lr"}else if("-webkit-text-combine"===e)switch(n){case"all":n="horizontal"}t&&t.style&&t.style.setProperty(e,n)})}catch(t){i.b.warn(t)}}function w(t,e,n){try{var i=m[e];return t.style.getPropertyValue(i?i[0]:e)}catch(t){}return n||""}function T(t){var e=t.getAttributeNS(l.XML,"lang");return e||t.namespaceURI!=l.XHTML||(e=t.getAttribute("lang")),e}var N=function(){function t(){this.list=[]}return t.prototype.append=function(t){return this.list.push(t),this},t.prototype.clear=function(){this.list=[]},t.prototype.toString=function(){var t=this.list.join("");return this.list=[t],t},t}();function S(t){return"\\"+t.charCodeAt(0).toString(16)+" "}function _(t){return t.replace(/[^-_a-zA-Z0-9\u0080-\uFFFF]/g,S)}function A(t){return t.replace(/[\u0000-\u001F"\\]/g,S)}function I(t){return t.replace(/[\s+&?=#\u007F-\uFFFF]+/g,encodeURIComponent)}function x(t){return!!t.match(/^[a-zA-Z\u009E\u009F\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u024F\u037B-\u037D\u0386\u0388-\u0482\u048A-\u0527]$/)}function C(t,e){return t.replace(/[^-a-zA-Z0-9_]/g,function(t){return function(t,e){return(e="string"==typeof e?e:"\\u")+(65536|t.charCodeAt(0)).toString(16).substr(1)}(t,e)})}function O(t){return C(t)}function k(t,e){e="string"==typeof e?e:"\\u";var n=new RegExp(O(e)+"[0-9a-fA-F]{4}","g");return t.replace(n,function(t){return function(t,e){return e="string"==typeof e?e:"\\u",0===t.indexOf(e)?String.fromCharCode(parseInt(t.substring(e.length),16)):t}(t,e)})}function L(t,e){for(var n=0,i=t;;){if(n==i)return n;var r=n+i>>1;e(r)?i=r:n=r+1}}function D(t,e){return t-e}var R="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function P(t,e){for(var n=e.length,i=3*Math.floor(n/3),r=0;r<i;r+=3){var o=255&e.charCodeAt(r),a=255&e.charCodeAt(r+1),s=255&e.charCodeAt(r+2);t.append(R.charAt(o>>2)),t.append(R.charAt(63&(o<<4|a>>4))),t.append(R.charAt(63&(a<<2|s>>6))),t.append(R.charAt(63&s))}switch(n-i){case 1:var u=255&e.charCodeAt(i);t.append(R.charAt(u>>2)),t.append(R.charAt(u<<4&63)),t.append("==");break;case 2:var l=255&e.charCodeAt(i),h=255&e.charCodeAt(i+1);t.append(R.charAt(l>>2)),t.append(R.charAt(63&(l<<4|h>>4))),t.append(R.charAt(h<<2&63)),t.append("=")}}function M(t,e){for(var n={},i=0,r=t;i<r.length;i++){var o=r[i],a=e(o);a&&!n[a]&&(n[a]=o)}return n}function F(t){for(var e={},n=0;n<t.length;n++)e[t[n]]=!0;return e}function U(t,e){for(var n={},i=0,r=t;i<r.length;i++){var o=r[i],a=e(o);a&&(n[a]?n[a].push(o):n[a]=[o])}return n}function B(t,e){var n={};for(var i in t)n[i]=e(t[i],i);return n}var z=function(){function t(){this.listeners={}}return t.prototype.dispatchEvent=function(t){var e=this.listeners[t.type];if(e){t.target=this,t.currentTarget=this;for(var n=0;n<e.length;n++)e[n](t)}},t.prototype.addEventListener=function(t,e,n){if(!n){var i=this.listeners[t];i?i.push(e):this.listeners[t]=[e]}},t.prototype.removeEventListener=function(t,e,n){if(!n){var i=this.listeners[t];if(i){var r=i.indexOf(e);r>=0&&i.splice(r,1)}}},t}(),H=null;function G(t){if(null==H){var e=t.ownerDocument,n=e.createElement("div");n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.style.width="100px",n.style.height="100px",n.style.overflow="hidden",n.style.lineHeight="16px",n.style.fontSize="16px",E(n,"writing-mode","vertical-rl"),t.appendChild(n);var i=e.createTextNode("a a a a a a a a a a a a a a a a");n.appendChild(i);var r=e.createRange();r.setStart(i,0),r.setEnd(i,1);var o=r.getBoundingClientRect();H=o.right-o.left<10,t.removeChild(n)}return H}var V=null;function X(t){if(null===V){var e=t.ownerDocument,n=e.createElement("div");n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.style.width="30px",n.style.height="100px",n.style.lineHeight="16px",n.style.fontSize="16px",n.style.textAlign="justify",t.appendChild(n);var i=e.createTextNode("a | ");n.appendChild(i);var r=e.createElement("span");r.style.display="inline-block",r.style.width="30px",n.appendChild(r);var o=e.createRange();o.setStart(i,0),o.setEnd(i,3);var a=o.getBoundingClientRect();V=a.right<27,t.removeChild(n)}return V}var j=null;function W(t){if(null===j){var e=t.ownerDocument,n=e.createElement("div");n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.style.width="40px",n.style.height="100px",n.style.lineHeight="16px",n.style.fontSize="16px",n.style.textAlign="justify",t.appendChild(n);var i=e.createTextNode("a a-");n.appendChild(i);var r=e.createElement("span");r.style.display="inline-block",r.style.width="40px",n.appendChild(r);var o=e.createRange();o.setStart(i,2),o.setEnd(i,4);var a=o.getBoundingClientRect();j=a.right<37,t.removeChild(n)}return j}var Y=null;function K(t){if(null===Y){var e=t.ownerDocument,n=e.createElement("div");n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.style.width="40px",n.style.height="100px",n.style.lineHeight="16px",n.style.fontSize="16px",n.style.textAlign="justify",t.appendChild(n);var i=e.createTextNode("a a-");n.appendChild(i),n.appendChild(e.createElement("wbr"));var r=e.createElement("span");r.style.display="inline-block",r.style.width="40px",n.appendChild(r);var o=e.createRange();o.setStart(i,2),o.setEnd(i,4);var a=o.getBoundingClientRect();Y=a.right<37,t.removeChild(n)}return Y}},function(t,e,n){"use strict";function i(t){if((t=t.substr(1)).match(/^[^0-9a-fA-F\n\r]$/))return t;var e=parseInt(t,16);return isNaN(e)?"":e<=65535?String.fromCharCode(e):e<=1114111?String.fromCharCode(55296|e>>10&1023,56320|1023&e):""}function r(t){return t.replace(/\\([0-9a-fA-F]{0,6}(\r\n|[ \n\r\t\f])?|[^0-9a-fA-F\n\r])/g,i)}var o;n.d(e,"a",function(){return o}),n.d(e,"b",function(){return U}),function(t){t[t.EOF=0]="EOF",t[t.IDENT=1]="IDENT",t[t.STR=2]="STR",t[t.NUMERIC=3]="NUMERIC",t[t.NUM=4]="NUM",t[t.INT=5]="INT",t[t.FUNC=6]="FUNC",t[t.HASH=7]="HASH",t[t.URL=8]="URL",t[t.CLASS=9]="CLASS",t[t.O_PAR=10]="O_PAR",t[t.C_PAR=11]="C_PAR",t[t.O_BRC=12]="O_BRC",t[t.C_BRC=13]="C_BRC",t[t.O_BRK=14]="O_BRK",t[t.C_BRK=15]="C_BRK",t[t.COMMA=16]="COMMA",t[t.SEMICOL=17]="SEMICOL",t[t.COLON=18]="COLON",t[t.SLASH=19]="SLASH",t[t.AT=20]="AT",t[t.PERCENT=21]="PERCENT",t[t.QMARK=22]="QMARK",t[t.PLUS=23]="PLUS",t[t.MINUS=24]="MINUS",t[t.BAR_BAR=25]="BAR_BAR",t[t.AMP_AMP=26]="AMP_AMP",t[t.BANG=31]="BANG",t[t.DOLLAR=32]="DOLLAR",t[t.HAT=33]="HAT",t[t.BAR=34]="BAR",t[t.TILDE=35]="TILDE",t[t.STAR=36]="STAR",t[t.GT=37]="GT",t[t.LT=38]="LT",t[t.EQ=39]="EQ",t[t.BANG_EQ=41]="BANG_EQ",t[t.DOLLAR_EQ=42]="DOLLAR_EQ",t[t.HAT_EQ=43]="HAT_EQ",t[t.BAR_EQ=44]="BAR_EQ",t[t.TILDE_EQ=45]="TILDE_EQ",t[t.STAR_EQ=46]="STAR_EQ",t[t.GT_EQ=47]="GT_EQ",t[t.LT_EQ=48]="LT_EQ",t[t.EQ_EQ=49]="EQ_EQ",t[t.COL_COL=50]="COL_COL",t[t.INVALID=51]="INVALID",t[t.LAST=51]="LAST"}(o||(o={}));var a,s=function(){this.ct=!1,this.num=0,this.text="",this.position=0,this.type=o.EOF};function u(t,e){var n,i=Array(128);for(n=0;n<128;n++)i[n]=t;for(i.NaN=t==a.END?a.END:a.INVALID,n=0;n<e.length;n+=2)i[e[n]]=e[n+1];return i}!function(t){t[t.SPACE=1]="SPACE",t[t.INT=2]="INT",t[t.IDENT=3]="IDENT",t[t.BANG=4]="BANG",t[t.HASH=6]="HASH",t[t.DOLLAR=7]="DOLLAR",t[t.PERCENT=8]="PERCENT",t[t.AMP=9]="AMP",t[t.O_PAR=10]="O_PAR",t[t.C_PAR=11]="C_PAR",t[t.STAR=12]="STAR",t[t.PLUS=13]="PLUS",t[t.COMMA=14]="COMMA",t[t.MINUS=15]="MINUS",t[t.DOT=16]="DOT",t[t.SLASH=17]="SLASH",t[t.COLON=18]="COLON",t[t.SEMICOL=19]="SEMICOL",t[t.LT=20]="LT",t[t.EQ=21]="EQ",t[t.GT=22]="GT",t[t.QMARK=23]="QMARK",t[t.AT=24]="AT",t[t.O_BRK=25]="O_BRK",t[t.C_BRK=26]="C_BRK",t[t.O_BRC=27]="O_BRC",t[t.C_BRC=28]="C_BRC",t[t.BSLASH=29]="BSLASH",t[t.HAT=30]="HAT",t[t.BAR=31]="BAR",t[t.TILDE=32]="TILDE",t[t.STR1=33]="STR1",t[t.STR2=34]="STR2",t[t.END=35]="END",t[t.EQTAIL=36]="EQTAIL",t[t.ENDINT=37]="ENDINT",t[t.ENDNUM=38]="ENDNUM",t[t.CONT=39]="CONT",t[t.UNIT=40]="UNIT",t[t.PCUNIT=41]="PCUNIT",t[t.NUMBER=42]="NUMBER",t[t.ENDIDNT=43]="ENDIDNT",t[t.IDNTESC=44]="IDNTESC",t[t.ENDIDES=45]="ENDIDES",t[t.ENDSTR=46]="ENDSTR",t[t.ENDESTR=47]="ENDESTR",t[t.STR1ESC=48]="STR1ESC",t[t.STR2ESC=49]="STR2ESC",t[t.BAR_BAR=50]="BAR_BAR",t[t.AMP_AMP=51]="AMP_AMP",t[t.FUNC=52]="FUNC",t[t.FUNCES=53]="FUNCES",t[t.COMMENT=54]="COMMENT",t[t.COMMST=55]="COMMST",t[t.ENDNOTK=56]="ENDNOTK",t[t.MINMIN=57]="MINMIN",t[t.TOINT=58]="TOINT",t[t.TONUM=59]="TONUM",t[t.TOIDENT=60]="TOIDENT",t[t.TOIDES=61]="TOIDES",t[t.KILL1=62]="KILL1",t[t.KILL2=63]="KILL2",t[t.URL=64]="URL",t[t.URL1=65]="URL1",t[t.URL2=66]="URL2",t[t.ENDURL=67]="ENDURL",t[t.TERMURL=68]="TERMURL",t[t.FINURL=69]="FINURL",t[t.LT_BG=70]="LT_BG",t[t.LT_BG_M=71]="LT_BG_M",t[t.INVALID=72]="INVALID",t[t.CHKPOSS=73]="CHKPOSS",t[t.CHKPOSN=74]="CHKPOSN",t[t.URLESC=75]="URLESC",t[t.IDESCH=76]="IDESCH",t[t.COL_COL=77]="COL_COL",t[t.TOCLASS=78]="TOCLASS",t[t.CHKSP=79]="CHKSP",t[t.EOF=80]="EOF"}(a||(a={}));var l=[a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.SPACE,a.SPACE,a.INVALID,a.SPACE,a.SPACE,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.SPACE,a.BANG,a.STR2,a.HASH,a.DOLLAR,a.PERCENT,a.AMP,a.STR1,a.O_PAR,a.C_PAR,a.STAR,a.PLUS,a.COMMA,a.MINUS,a.DOT,a.SLASH,a.INT,a.INT,a.INT,a.INT,a.INT,a.INT,a.INT,a.INT,a.INT,a.INT,a.COLON,a.SEMICOL,a.LT,a.EQ,a.GT,a.QMARK,a.AT,a.IDENT,a.IDENT,a.IDENT,a.IDENT,a.IDENT,a.IDENT,a.IDENT,a.IDENT,a.IDENT,a.IDENT,a.IDENT,a.IDENT,a.IDENT,a.IDENT,a.IDENT,a.IDENT,a.IDENT,a.IDENT,a.IDENT,a.IDENT,a.IDENT,a.IDENT,a.IDENT,a.IDENT,a.IDENT,a.IDENT,a.O_BRK,a.BSLASH,a.C_BRK,a.HAT,a.IDENT,a.INVALID,a.IDENT,a.IDENT,a.IDENT,a.IDENT,a.IDENT,a.IDENT,a.IDENT,a.IDENT,a.IDENT,a.IDENT,a.IDENT,a.IDENT,a.IDENT,a.IDENT,a.IDENT,a.IDENT,a.IDENT,a.IDENT,a.IDENT,a.IDENT,a.IDENT,a.IDENT,a.IDENT,a.IDENT,a.IDENT,a.IDENT,a.O_BRC,a.BAR,a.C_BRC,a.TILDE,a.INVALID];l.NaN=a.EOF;var h=[a.ENDIDNT,a.ENDIDNT,a.ENDIDNT,a.ENDIDNT,a.ENDIDNT,a.ENDIDNT,a.ENDIDNT,a.ENDIDNT,a.ENDIDNT,a.ENDIDNT,a.ENDIDNT,a.ENDIDNT,a.ENDIDNT,a.ENDIDNT,a.ENDIDNT,a.ENDIDNT,a.ENDIDNT,a.ENDIDNT,a.ENDIDNT,a.ENDIDNT,a.ENDIDNT,a.ENDIDNT,a.ENDIDNT,a.ENDIDNT,a.ENDIDNT,a.ENDIDNT,a.ENDIDNT,a.ENDIDNT,a.ENDIDNT,a.ENDIDNT,a.ENDIDNT,a.ENDIDNT,a.ENDIDNT,a.ENDIDNT,a.ENDIDNT,a.ENDIDNT,a.ENDIDNT,a.ENDIDNT,a.ENDIDNT,a.ENDIDNT,a.FUNC,a.ENDIDNT,a.ENDIDNT,a.ENDIDNT,a.ENDIDNT,a.CONT,a.ENDIDNT,a.ENDIDNT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.ENDIDNT,a.ENDIDNT,a.ENDIDNT,a.ENDIDNT,a.ENDIDNT,a.ENDIDNT,a.ENDIDNT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.ENDIDNT,a.IDNTESC,a.ENDIDNT,a.ENDIDNT,a.CONT,a.ENDIDNT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.ENDIDNT,a.ENDIDNT,a.ENDIDNT,a.ENDIDNT,a.ENDIDNT];h.NaN=a.ENDIDNT;var c=[a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.TOCLASS,a.TONUM,a.INVALID,a.TONUM,a.TONUM,a.TONUM,a.TONUM,a.TONUM,a.TONUM,a.TONUM,a.TONUM,a.TONUM,a.TONUM,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.TOCLASS,a.TOCLASS,a.TOCLASS,a.TOCLASS,a.TOCLASS,a.TOCLASS,a.TOCLASS,a.TOCLASS,a.TOCLASS,a.TOCLASS,a.TOCLASS,a.TOCLASS,a.TOCLASS,a.TOCLASS,a.TOCLASS,a.TOCLASS,a.TOCLASS,a.TOCLASS,a.TOCLASS,a.TOCLASS,a.TOCLASS,a.TOCLASS,a.TOCLASS,a.TOCLASS,a.TOCLASS,a.TOCLASS,a.INVALID,a.TOIDES,a.INVALID,a.INVALID,a.TOCLASS,a.INVALID,a.TOCLASS,a.TOCLASS,a.TOCLASS,a.TOCLASS,a.TOCLASS,a.TOCLASS,a.TOCLASS,a.TOCLASS,a.TOCLASS,a.TOCLASS,a.TOCLASS,a.TOCLASS,a.TOCLASS,a.TOCLASS,a.TOCLASS,a.TOCLASS,a.TOCLASS,a.TOCLASS,a.TOCLASS,a.TOCLASS,a.TOCLASS,a.TOCLASS,a.TOCLASS,a.TOCLASS,a.TOCLASS,a.TOCLASS,a.INVALID,a.INVALID,a.INVALID,a.INVALID,a.INVALID];h.NaN=a.ENDIDNT;var p=[a.END,a.END,a.END,a.END,a.END,a.END,a.END,a.END,a.END,a.END,a.END,a.END,a.END,a.END,a.END,a.END,a.END,a.END,a.END,a.END,a.END,a.END,a.END,a.END,a.END,a.END,a.END,a.END,a.END,a.END,a.END,a.END,a.END,a.END,a.END,a.END,a.END,a.END,a.END,a.END,a.END,a.END,a.END,a.END,a.END,a.MINMIN,a.TONUM,a.END,a.TOINT,a.TOINT,a.TOINT,a.TOINT,a.TOINT,a.TOINT,a.TOINT,a.TOINT,a.TOINT,a.TOINT,a.END,a.END,a.END,a.END,a.END,a.END,a.END,a.TOIDENT,a.TOIDENT,a.TOIDENT,a.TOIDENT,a.TOIDENT,a.TOIDENT,a.TOIDENT,a.TOIDENT,a.TOIDENT,a.TOIDENT,a.TOIDENT,a.TOIDENT,a.TOIDENT,a.TOIDENT,a.TOIDENT,a.TOIDENT,a.TOIDENT,a.TOIDENT,a.TOIDENT,a.TOIDENT,a.TOIDENT,a.TOIDENT,a.TOIDENT,a.TOIDENT,a.TOIDENT,a.TOIDENT,a.END,a.TOIDES,a.END,a.END,a.TOIDENT,a.END,a.TOIDENT,a.TOIDENT,a.TOIDENT,a.TOIDENT,a.TOIDENT,a.TOIDENT,a.TOIDENT,a.TOIDENT,a.TOIDENT,a.TOIDENT,a.TOIDENT,a.TOIDENT,a.TOIDENT,a.TOIDENT,a.TOIDENT,a.TOIDENT,a.TOIDENT,a.TOIDENT,a.TOIDENT,a.TOIDENT,a.TOIDENT,a.TOIDENT,a.TOIDENT,a.TOIDENT,a.TOIDENT,a.TOIDENT,a.END,a.END,a.END,a.END,a.END];p.NaN=a.END;var f=[a.ENDIDES,a.ENDIDES,a.ENDIDES,a.ENDIDES,a.ENDIDES,a.ENDIDES,a.ENDIDES,a.ENDIDES,a.ENDIDES,a.CHKPOSS,a.ENDIDES,a.ENDIDES,a.ENDIDES,a.ENDIDES,a.ENDIDES,a.ENDIDES,a.ENDIDES,a.ENDIDES,a.ENDIDES,a.ENDIDES,a.ENDIDES,a.ENDIDES,a.ENDIDES,a.ENDIDES,a.ENDIDES,a.ENDIDES,a.ENDIDES,a.ENDIDES,a.ENDIDES,a.ENDIDES,a.ENDIDES,a.ENDIDES,a.CHKPOSS,a.ENDIDES,a.ENDIDES,a.ENDIDES,a.ENDIDES,a.ENDIDES,a.ENDIDES,a.ENDIDES,a.FUNCES,a.ENDIDES,a.ENDIDES,a.ENDIDES,a.ENDIDES,a.ENDIDES,a.ENDIDES,a.ENDIDES,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.ENDIDES,a.ENDIDES,a.ENDIDES,a.ENDIDES,a.ENDIDES,a.ENDIDES,a.ENDIDES,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.ENDIDES,a.IDNTESC,a.ENDIDES,a.ENDIDES,a.CONT,a.ENDIDES,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.ENDIDES,a.ENDIDES,a.ENDIDES,a.ENDIDES,a.ENDIDES];f.NaN=a.ENDIDES;var d=[a.ENDINT,a.ENDINT,a.ENDINT,a.ENDINT,a.ENDINT,a.ENDINT,a.ENDINT,a.ENDINT,a.ENDINT,a.ENDINT,a.ENDINT,a.ENDINT,a.ENDINT,a.ENDINT,a.ENDINT,a.ENDINT,a.ENDINT,a.ENDINT,a.ENDINT,a.ENDINT,a.ENDINT,a.ENDINT,a.ENDINT,a.ENDINT,a.ENDINT,a.ENDINT,a.ENDINT,a.ENDINT,a.ENDINT,a.ENDINT,a.ENDINT,a.ENDINT,a.ENDINT,a.ENDINT,a.ENDINT,a.ENDINT,a.ENDINT,a.PCUNIT,a.ENDINT,a.ENDINT,a.ENDINT,a.ENDINT,a.ENDINT,a.ENDINT,a.ENDINT,a.ENDINT,a.NUMBER,a.ENDINT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.ENDINT,a.ENDINT,a.ENDINT,a.ENDINT,a.ENDINT,a.ENDINT,a.ENDINT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.ENDINT,a.ENDINT,a.ENDINT,a.ENDINT,a.UNIT,a.ENDINT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.ENDINT,a.ENDINT,a.ENDINT,a.ENDINT,a.ENDINT];d.NaN=a.ENDINT;var v=[a.ENDNUM,a.ENDNUM,a.ENDNUM,a.ENDNUM,a.ENDNUM,a.ENDNUM,a.ENDNUM,a.ENDNUM,a.ENDNUM,a.ENDNUM,a.ENDNUM,a.ENDNUM,a.ENDNUM,a.ENDNUM,a.ENDNUM,a.ENDNUM,a.ENDNUM,a.ENDNUM,a.ENDNUM,a.ENDNUM,a.ENDNUM,a.ENDNUM,a.ENDNUM,a.ENDNUM,a.ENDNUM,a.ENDNUM,a.ENDNUM,a.ENDNUM,a.ENDNUM,a.ENDNUM,a.ENDNUM,a.ENDNUM,a.ENDNUM,a.ENDNUM,a.ENDNUM,a.ENDNUM,a.ENDNUM,a.PCUNIT,a.ENDNUM,a.ENDNUM,a.ENDNUM,a.ENDNUM,a.ENDNUM,a.ENDNUM,a.ENDNUM,a.ENDNUM,a.ENDNUM,a.ENDNUM,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.CONT,a.ENDNUM,a.ENDNUM,a.ENDNUM,a.ENDNUM,a.ENDNUM,a.ENDNUM,a.ENDNUM,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.ENDNUM,a.ENDNUM,a.ENDNUM,a.ENDNUM,a.UNIT,a.ENDNUM,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.UNIT,a.ENDNUM,a.ENDNUM,a.ENDNUM,a.ENDNUM,a.ENDNUM];v.NaN=a.ENDNUM;var g=u(a.END,[61,a.EQTAIL]),m=u(a.END,[58,a.COL_COL]),y=u(a.END,[61,a.EQTAIL,124,a.BAR_BAR]),b=u(a.END,[38,a.AMP_AMP]),E=u(a.END,[42,a.COMMENT]),w=u(a.CONT,[42,a.COMMST]),T=u(a.COMMENT,[42,a.COMMST,47,a.ENDNOTK]),N=u(a.KILL1,[62,a.ENDNOTK]),S=u(a.END,[61,a.EQTAIL,33,a.LT_BG]),_=u(a.KILL1,[45,a.LT_BG_M]),A=u(a.KILL2,[45,a.ENDNOTK]),I=u(a.IDESCH,[9,a.INVALID,10,a.INVALID,13,a.INVALID,32,a.INVALID]),x=u(a.CONT,[39,a.ENDSTR,10,a.INVALID,13,a.INVALID,92,a.STR1ESC]),C=u(a.CONT,[34,a.ENDSTR,10,a.INVALID,13,a.INVALID,92,a.STR2ESC]),O=u(a.CONT,[39,a.ENDESTR,10,a.CHKPOSN,13,a.CHKPOSN,92,a.STR1ESC]),k=u(a.CONT,[34,a.ENDESTR,10,a.CHKPOSN,13,a.CHKPOSN,92,a.STR2ESC]),L=u(a.URL,[9,a.CONT,32,a.CONT,34,a.URL2,39,a.URL1,41,a.INVALID,10,a.CONT,13,a.CONT]),D=u(a.CONT,[41,a.ENDURL,9,a.CHKSP,10,a.CHKSP,13,a.CHKSP,32,a.CHKSP,92,a.URLESC,40,a.INVALID,91,a.INVALID,93,a.INVALID,123,a.INVALID,125,a.INVALID,NaN,a.ENDURL]),R=u(a.CONT,[39,a.TERMURL,10,a.CHKPOSN,13,a.CHKPOSN,92,a.URLESC,NaN,a.ENDURL]),P=u(a.CONT,[34,a.TERMURL,10,a.CHKPOSN,13,a.CHKPOSN,92,a.URLESC,NaN,a.ENDURL]),M=u(a.INVALID,[9,a.CONT,10,a.CONT,13,a.CONT,32,a.CONT,41,a.FINURL]),F=15,U=function(){function t(t,e){this.input=t,this.handler=e,this.head=-1,this.tail=0,this.curr=0,this.position=0,this.lt=F,this.buffer=Array(this.lt+1);for(var n=0;n<=this.lt;n++)this.buffer[n]=new s}return t.prototype.token=function(){return this.tail==this.curr&&this.vt(),this.buffer[this.curr]},t.prototype.dt=function(t){return(this.tail-this.curr&this.lt)<=t&&this.vt(),this.buffer[this.curr+t&this.lt]},t.prototype.consume=function(){this.curr=this.curr+1&this.lt},t.prototype.mark=function(){if(this.head>=0)throw new Error("F_CSSTOK_BAD_CALL mark");this.head=this.curr},t.prototype.reset=function(){if(this.head<0)throw new Error("F_CSSTOK_BAD_CALL reset");this.curr=this.head,this.head=-1},t.prototype.unmark=function(){this.head=-1},t.prototype.bt=function(){return this.head>=0},t.prototype.reallocate=function(){for(var t=2*(this.lt+1)-1,e=Array(t+1),n=this.head,i=0;n!=this.tail;)e[i]=this.buffer[n],n==this.curr&&(this.curr=i),n=n+1&this.lt,i++;for(this.head=0,this.tail=i,this.lt=t,this.buffer=e;i<=t;)e[i++]=new s},t.prototype.error=function(t,e,n){this.handler&&this.handler.error(n,e)},t.prototype.vt=function(){var t=this.tail,e=this.head>=0?this.head:this.curr,n=this.lt;if(t>=e?e+=n:e--,e==t){if(this.head<0)throw new Error("F_CSSTOK_INTERNAL");this.reallocate(),t=this.tail,e=n=this.lt}for(var i=l,s=this.input,u=this.position,F=this.buffer,U=o.EOF,B=0,z="",H=0,G=!1,V=F[t],X=-9;;){var j=s.charCodeAt(u);switch(i[j]||i[65]){case a.INVALID:U=o.INVALID,z=isNaN(j)?"E_CSS_UNEXPECTED_EOF":"E_CSS_UNEXPECTED_CHAR",i=l,u++;break;case a.SPACE:u++,G=!0;continue;case a.INT:B=u++,i=d;continue;case a.IDENT:U=o.IDENT,B=u++,i=h;continue;case a.BANG:B=u++,U=o.BANG,i=g;continue;case a.STR1:U=o.STR,B=++u,i=x;continue;case a.STR2:U=o.STR,B=++u,i=C;continue;case a.HASH:B=++u,U=o.HASH,i=h;continue;case a.DOLLAR:B=u++,U=o.DOLLAR,i=g;continue;case a.PERCENT:B=u++,U=o.PERCENT;break;case a.AMP:B=u++,U=o.DOLLAR,i=b;continue;case a.O_PAR:B=u++,U=o.O_PAR;break;case a.C_PAR:B=u++,U=o.C_PAR;break;case a.STAR:B=u++,U=o.STAR,i=g;continue;case a.PLUS:B=u++,U=o.PLUS;break;case a.COMMA:B=u++,U=o.COMMA;break;case a.MINUS:U=o.MINUS,B=u++,i=p;continue;case a.DOT:B=u++,i=c;continue;case a.TOCLASS:B=u++,U=o.CLASS,i=h;continue;case a.SLASH:B=u++,U=o.SLASH,i=E;continue;case a.COLON:B=u++,U=o.COLON,i=m;continue;case a.COL_COL:u++,U=o.COL_COL;break;case a.SEMICOL:B=u++,U=o.SEMICOL;break;case a.LT:B=u++,U=o.LT,i=S;continue;case a.EQ:B=u++,U=o.EQ,i=g;continue;case a.GT:B=u++,U=o.GT,i=g;continue;case a.QMARK:B=u++,U=o.QMARK;break;case a.AT:B=++u,U=o.AT,i=h;continue;case a.O_BRK:B=u++,U=o.O_BRK;break;case a.C_BRK:B=u++,U=o.C_BRK;break;case a.O_BRC:B=u++,U=o.O_BRC;break;case a.C_BRC:B=u++,U=o.C_BRC;break;case a.BSLASH:X=B=u++,U=o.IDENT,i=I;continue;case a.HAT:B=u++,U=o.HAT,i=g;continue;case a.BAR:B=u++,U=o.BAR,i=y;continue;case a.TILDE:B=u++,U=o.TILDE,i=g;continue;case a.END:break;case a.EQTAIL:u++,U=U+o.BANG_EQ-o.BANG;break;case a.ENDINT:U=o.INT,H=parseInt(s.substring(B,u),10);break;case a.ENDNUM:U=o.NUM,H=parseFloat(s.substring(B,u));break;case a.CONT:u++;continue;case a.UNIT:U=o.NUMERIC,H=parseFloat(s.substring(B,u)),B=u++,i=h;continue;case a.PCUNIT:U=o.NUMERIC,H=parseFloat(s.substring(B,u)),z="%",B=u++;break;case a.NUMBER:u++,i=v;continue;case a.ENDIDNT:z=s.substring(B,u);break;case a.IDNTESC:X=u++,i=I;continue;case a.ENDIDES:z=r(s.substring(B,u));break;case a.ENDSTR:z=s.substring(B,u),u++;break;case a.ENDESTR:z=r(s.substring(B,u)),u++;break;case a.STR1ESC:X=u,u+=2,i=O;continue;case a.STR2ESC:X=u,u+=2,i=k;continue;case a.BAR_BAR:u++,U=o.BAR_BAR;break;case a.AMP_AMP:u++,U=o.AMP_AMP;break;case a.FUNC:if(z=s.substring(B,u),U==o.IDENT){if(u++,"url"==z.toLowerCase()){i=L;continue}U=o.FUNC}break;case a.FUNCES:if(z=r(s.substring(B,u)),U==o.IDENT){if(u++,"url"==z.toLowerCase()){i=L;continue}U=o.FUNC}break;case a.COMMENT:i=w,u++;continue;case a.COMMST:i=T,u++;continue;case a.ENDNOTK:i=l,u++;continue;case a.MINMIN:i=N,u++;continue;case a.TOINT:U=o.INT,i=d,u++;continue;case a.TONUM:U=o.NUM,i=v,u++;continue;case a.TOIDENT:U=o.IDENT,i=h,u++;continue;case a.TOIDES:U=o.IDENT,i=I,X=u++;continue;case a.KILL1:u--;break;case a.KILL2:u-=2;break;case a.URL:B=u++,i=D;continue;case a.URL1:B=++u,i=R;continue;case a.URL2:B=++u,i=P;continue;case a.ENDURL:U=o.URL,z=r(s.substring(B,u)),u++;break;case a.FINURL:u++;break;case a.LT_BG:i=_,u++;continue;case a.LT_BG_M:i=A,u++;continue;case a.CHKSP:if(u-X<8&&s.substring(X+1,u+1).match(/^[0-9a-fA-F]{0,6}(\r\n|[\n\r])|[ \t]$/)){u++;continue}case a.TERMURL:U=o.URL,z=r(s.substring(B,u)),u++,i=M;continue;case a.CHKPOSN:if(++u-X<9&&s.substring(X+1,u).match(/^[0-9a-fA-F]{0,6}(\r\n|[\n\r])$/))continue;U=o.INVALID,z="E_CSS_UNEXPECTED_NEWLINE",i=l;break;case a.CHKPOSS:if(u-X<9&&s.substring(X+1,u+1).match(/^[0-9a-fA-F]{0,6}[ \t]$/)){u++;continue}z=r(s.substring(B,u));break;case a.URLESC:X=u++;continue;case a.IDESCH:u++,i=f;continue;default:if(i!==l){U=o.INVALID,z="E_CSS_UNEXPECTED_STATE";break}B=u,U=o.EOF}if(V.type=U,V.ct=G,V.num=H,V.text=z,V.position=B,++t>=e)break;i=l,G=!1,V=F[t&n]}this.position=u,this.tail=t&n},t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return h}),n.d(e,"c",function(){return c}),n.d(e,"d",function(){return p}),n.d(e,"b",function(){return f}),n.d(e,"e",function(){return d});var i,r,o=n(1),a=n(6),s=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),u=null,l=null;function h(){return u}function c(t){if(!u)throw new Error("E_TASK_NO_CONTEXT");u.name||(u.name=t);var e=u,n=new w(e,e.top,t);return e.top=n,n.state=r.ACTIVE,n}function p(t){return new b(t)}function f(t,e,n){var i=c(t);i.handler=n;try{e(i)}catch(t){i.task.raise(t,i)}return i.result()}function d(t,e){return(u?u.wt():l||new g(new v)).run(t,e)}!function(t){t[t.INIT=0]="INIT",t[t.ACTIVE=1]="ACTIVE",t[t.FINISHED=2]="FINISHED",t[t.DEAD=3]="DEAD"}(r||(r={}));var v=function(){function t(){}return t.prototype.currentTime=function(){return(new Date).valueOf()},t.prototype.setTimeout=function(t,e){return setTimeout(t,e)},t.prototype.clearTimeout=function(t){clearTimeout(t)},t}(),g=function(){function t(t){this.timer=t,this.timeout=1,this.slice=25,this.gt=0,this.Et=null,this.kt=null,this._t=!1,this.order=0,this.queue=new o.b,l||(l=this)}return t.prototype.xt=function(t){this.slice=t},t.prototype.setTimeout=function(t){this.timeout=t},t.prototype.yt=function(){return this.timer.currentTime()>=this.gt},t.prototype.arm=function(){if(!this._t){var t=this.queue.peek().Tt,e=this.timer.currentTime();if(null!=this.kt){if(e+this.timeout>this.Et)return;this.timer.clearTimeout(this.kt)}var n=t-e;n<=this.timeout&&(n=this.timeout),this.Et=e+n;var i=this;this.kt=this.timer.setTimeout(function(){i.kt=null,i.Nt()},n)}},t.prototype.schedule=function(t,e){var n=t,i=this.timer.currentTime();n.order=this.order++,n.Tt=i+(e||0),this.queue.add(n),this.arm()},t.prototype.Nt=function(){null!=this.kt&&(this.timer.clearTimeout(this.kt),this.kt=null),this._t=!0;try{var t=this.timer.currentTime();for(this.gt=t+this.slice;this.queue.length();){var e=this.queue.peek();if(e.Tt>t)break;if(this.queue.remove(),e.canceled||e.St(),(t=this.timer.currentTime())>=this.gt)break}}catch(t){a.b.error(t)}this._t=!1,this.queue.length()&&this.arm()},t.prototype.run=function(t,e){var n=new y(this,e||"");n.top=new w(n,null,"bootstrap"),n.top.state=r.ACTIVE,n.top.then(function(){var e=function(){n.running=!1;for(var t=0,e=n.callbacks;t<e.length;t++){var i=e[t];try{i()}catch(t){a.b.error(t)}}};try{t().then(function(t){n.result=t,e()})}catch(t){n.raise(t),e()}});var i=u;return u=n,this.schedule(n.top.suspend("bootstrap")),u=i,n},t}(),m=function(){function t(t){this.task=t,this.Tt=0,this.order=0,this.result=null,this.canceled=!1}return t.prototype.compare=function(t){var e=t;return e.Tt-this.Tt||e.order-this.order},t.prototype.At=function(){return this.task},t.prototype.schedule=function(t,e){this.result=t,this.task.scheduler.schedule(this,e)},t.prototype.St=function(){var t=this.task;if(this.task=null,t&&t.continuation==this){t.continuation=null;var e=u;return u=t,t.top.finish(this.result),u=e,!0}return!1},t.prototype.cancel=function(){this.canceled=!0},t}(),y=function(){function t(t,e){this.scheduler=t,this.name=e,this.callbacks=[],this.exception=null,this.running=!0,this.result=null,this.Rt=null,this.top=null,this.continuation=null}return t.prototype.Ct=function(){return this.name},t.prototype.interrupt=function(t){if(this.raise(t||new Error("E_TASK_INTERRUPT")),this!==u&&this.continuation){this.continuation.cancel();var e=new m(this);this.Rt="interrupt",this.continuation=e,this.scheduler.schedule(e)}},t.prototype.wt=function(){return this.scheduler},t.prototype.Ot=function(){return this.running},t.prototype.It=function(t){this.callbacks.push(t)},t.prototype.join=function(){var t=c("Task.join");if(this.running){var e=t.suspend(this),n=this;this.It(function(){e.schedule(n.result)})}else t.finish(this.result);return t.result()},t.prototype.unwind=function(){for(;this.top&&!this.top.handler;)this.top=this.top.parent;if(this.top&&this.top.handler&&this.exception){var t=this.exception;this.exception=null,this.top.handler(this.top,t)}else this.exception&&a.b.error(this.exception,"Unhandled exception in task",this.name)},t.prototype.raise=function(t,e){if(this.Lt(t),e){for(var n=this.top;n&&n!=e;)n=n.parent;n==e&&(this.top=n)}this.exception=t,this.unwind()},t.prototype.Lt=function(t){var e=t.frameTrace;if(!e){e=t.stack?t.stack+"\n\t---- async ---\n":"";for(var n=this.top;n;n=n.parent)e+="\t",e+=n.Ct(),e+="\n";t.frameTrace=e}},t}(),b=function(){function t(t){this.value=t}return t.prototype.then=function(t){t(this.value)},t.prototype.Pt=function(t){return t(this.value)},t.prototype.Ft=function(e){return new t(e)},t.prototype.Dt=function(t){t.finish(this.value)},t.prototype.Mt=function(){return!1},t.prototype.get=function(){return this.value},t}(),E=function(){function t(t){this.frame=t}return t.prototype.then=function(t){this.frame.then(t)},t.prototype.Pt=function(t){if(this.Mt()){var e=new w(this.frame.task,this.frame.parent,"AsyncResult.thenAsync");return e.state=r.ACTIVE,this.frame.parent=e,this.frame.then(function(n){t(n).then(function(t){e.finish(t)})}),e.result()}return t(this.frame.res)},t.prototype.Ft=function(t){return this.Mt()?this.Pt(function(){return new b(t)}):new b(t)},t.prototype.Dt=function(t){this.Mt()?this.then(function(e){t.finish(e)}):t.finish(this.frame.res)},t.prototype.Mt=function(){return this.frame.state==r.ACTIVE},t.prototype.get=function(){if(this.Mt())throw new Error("Result is pending");return this.frame.res},t}(),w=function(){function t(t,e,n){this.task=t,this.parent=e,this.name=n,this.res=null,this.callback=null,this.handler=null,this.state=r.INIT}return t.prototype.Ut=function(){if(!u)throw new Error("F_TASK_NO_CONTEXT");if(this!==u.top)throw new Error("F_TASK_NOT_TOP_FRAME")},t.prototype.result=function(){return new E(this)},t.prototype.finish=function(t){this.Ut(),u&&!u.exception&&(this.res=t),this.state=r.FINISHED;var e=this.parent;if(u&&(u.top=e),this.callback){try{this.callback(t)}catch(t){this.task.raise(t,e)}this.state=r.DEAD}},t.prototype.At=function(){return this.task},t.prototype.Ct=function(){return this.name},t.prototype.wt=function(){return this.task.scheduler},t.prototype.then=function(t){switch(this.state){case r.ACTIVE:if(this.callback)throw new Error("F_TASK_FRAME_ALREADY_HAS_CALLBACK");this.callback=t;break;case r.FINISHED:var e=this.task,n=this.parent;try{t(this.res),this.state=r.DEAD}catch(t){this.state=r.DEAD,e.raise(t,n)}break;case r.DEAD:throw new Error("F_TASK_DEAD_FRAME");default:throw new Error("F_TASK_UNEXPECTED_FRAME_STATE "+this.state)}},t.prototype.Gt=function(){var t=c("Frame.timeSlice");return t.wt().yt()?(a.b.debug("-- time slice --"),t.suspend().schedule(!0)):t.finish(!0),t.result()},t.prototype.sleep=function(t){var e=c("Frame.sleep");return e.suspend().schedule(!0,t),e.result()},t.prototype.loop=function(t){var e=c("Frame.loop"),n=function(i){try{for(;i;){var r=t();if(r.Mt())return void r.then(n);r.then(function(t){i=t})}e.finish(!0)}catch(t){e.task.raise(t,e)}};return n(!0),e.result()},t.prototype.Bt=function(t){var e=u;if(!e)throw new Error("E_TASK_NO_CONTEXT");return this.loop(function(){var n;do{var i=new T(e,e.top);e.top=i,i.state=r.ACTIVE,t(i),n=i.result()}while(!n.Mt()&&n.get());return n})},t.prototype.suspend=function(t){if(this.Ut(),this.task.continuation)throw new Error("E_TASK_ALREADY_SUSPENDED");var e=new m(this.task);return this.task.continuation=e,u=null,this.task.Rt=t||null,e},t}(),T=function(t){function e(e,n){return t.call(this,e,n,"loop")||this}return s(e,t),e.prototype.zt=function(){this.finish(!0)},e.prototype.Ht=function(){this.finish(!1)},e}(w),N=function(t){this.event=t,this.next=null};!function(){function t(){this.continuation=null,this.listeners=[],this.head=new N(null),this.tail=this.head}t.prototype.attach=function(t,e,n){var i=this,r=function(t){if(n&&t.preventDefault(),i.tail.event)i.tail.next=new N(t),i.tail=i.tail.next;else{i.tail.event=t;var e=i.continuation;e&&(i.continuation=null,e.schedule(!0))}};t.addEventListener(e,r,!1),this.listeners.push({target:t,type:e,listener:r})},t.prototype.detach=function(t,e){for(var n=0,i=null;n<this.listeners.length;){if((i=this.listeners[n]).type==e&&i.target===t)return this.listeners.splice(n,1),void i.target.removeEventListener(i.type,i.listener,!1);n++}throw new Error("E_TASK_EVENT_SOURCE_NOT_ATTACHED")},t.prototype.jt=function(){var t=c("EventSource.nextEvent"),e=this,n=function(){if(e.head.event){var i=e.head.event;e.head.next?e.head=e.head.next:e.head.event=null,t.finish(i)}else{if(e.continuation)throw new Error("E_TASK_EVENT_SOURCE_OTHER_TASK_WAITING");var r=c("EventSource.nextEventInternal");e.continuation=r.suspend(e),r.result().then(n)}};return n(),t.result()}}()},function(t,e,n){"use strict";n.d(e,"F",function(){return a}),n.d(e,"E",function(){return s}),n.d(e,"L",function(){return h}),n.d(e,"M",function(){return f}),n.d(e,"m",function(){return v}),n.d(e,"I",function(){return g}),n.d(e,"K",function(){return m}),n.d(e,"J",function(){return y}),n.d(e,"G",function(){return b}),n.d(e,"O",function(){return E}),n.d(e,"g",function(){return w}),n.d(e,"w",function(){return C}),n.d(e,"v",function(){return O}),n.d(e,"b",function(){return k}),n.d(e,"c",function(){return L}),n.d(e,"y",function(){return D}),n.d(e,"z",function(){return R}),n.d(e,"n",function(){return P}),n.d(e,"l",function(){return M}),n.d(e,"k",function(){return F}),n.d(e,"j",function(){return U}),n.d(e,"i",function(){return B}),n.d(e,"u",function(){return z}),n.d(e,"a",function(){return H}),n.d(e,"B",function(){return G}),n.d(e,"r",function(){return V}),n.d(e,"h",function(){return X}),n.d(e,"q",function(){return j}),n.d(e,"x",function(){return W}),n.d(e,"s",function(){return Y}),n.d(e,"o",function(){return K}),n.d(e,"t",function(){return $}),n.d(e,"d",function(){return q}),n.d(e,"e",function(){return Z}),n.d(e,"f",function(){return Q}),n.d(e,"p",function(){return J}),n.d(e,"A",function(){return tt}),n.d(e,"D",function(){return et}),n.d(e,"C",function(){return nt}),n.d(e,"P",function(){return it}),n.d(e,"N",function(){return rt}),n.d(e,"H",function(){return ot});var i,r=n(1),o=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});function a(){return{fontFamily:"serif",lineHeight:1.25,margin:8,hyphenate:!1,columnWidth:25,horizontal:!1,nightMode:!1,Xt:!1,pageBorder:1,Vt:{vivliostyle:!0,print:!0},defaultPaperSize:void 0}}function s(t){return{fontFamily:t.fontFamily,lineHeight:t.lineHeight,margin:t.margin,hyphenate:t.hyphenate,columnWidth:t.columnWidth,horizontal:t.horizontal,nightMode:t.nightMode,Xt:t.Xt,pageBorder:t.pageBorder,Vt:Object.assign({},t.Vt),defaultPaperSize:t.defaultPaperSize?Object.assign({},t.defaultPaperSize):void 0}}var u={fontFamily:"serif",lineHeight:1.25,margin:8,hyphenate:!1,columnWidth:25,horizontal:!1,nightMode:!1,Xt:!1,pageBorder:1,Vt:{vivliostyle:!0,print:!0},defaultPaperSize:void 0},l={};function h(t,e,n,i){var r=Math.min((t-0)/n,(e-0)/i);return"matrix("+r+",0,0,"+r+",0,0)"}function c(t){return'"'+r.q(""+t)+'"'}function p(t){return r.p(""+t)}function f(t,e){return t?r.p(t)+"."+r.p(e):r.p(e)}var d=0,v=function(){function t(t,e){if(this.parent=t,this.resolver=e,this.children=[],this.values={},this.funcs={},this.Yt={},this.$t="S"+d++,this.zero=new Q(this,0),this.one=new Q(this,1),this._true=new Q(this,!0),this._false=new Q(this,!1),t&&t.children.push(this),!t){var n=this.Yt;n.floor=Math.floor,n.ceil=Math.ceil,n.round=Math.round,n.sqrt=Math.sqrt,n.min=Math.min,n.max=Math.max,n.letterbox=h,n["css-string"]=c,n["css-name"]=p,n.typeof=function(t){return typeof t},this.Wt("page-width",function(){return this.qt()}),this.Wt("page-height",function(){return this.Kt()}),this.Wt("pref-font-family",function(){return this.pref.fontFamily}),this.Wt("pref-night-mode",function(){return this.pref.nightMode}),this.Wt("pref-hyphenate",function(){return this.pref.hyphenate}),this.Wt("pref-margin",function(){return this.pref.margin}),this.Wt("pref-line-height",function(){return this.pref.lineHeight}),this.Wt("pref-column-width",function(){return this.pref.columnWidth*this.fontSize}),this.Wt("pref-horizontal",function(){return this.pref.horizontal}),this.Wt("pref-spread-view",function(){return this.pref.Xt}),this.Wt("pub-title",function(){return c(this.Zt?this.Zt:"")}),this.Wt("doc-title",function(){return c(this.docTitle?this.docTitle:"")})}}return t.prototype.Wt=function(t,e){this.values[t]=new $(this,e,t)},t.prototype.Qt=function(t,e){this.values[t]=e},t.prototype.Jt=function(t,e){this.funcs[t]=e},t.prototype.tn=function(t,e){this.Yt[t]=e},t}();function g(t){switch(t.toLowerCase()){case"px":case"in":case"pt":case"pc":case"cm":case"mm":case"q":return!0;default:return!1}}function m(t){switch(t.toLowerCase()){case"vw":case"vh":case"vi":case"vb":case"vmin":case"vmax":case"pvw":case"pvh":case"pvi":case"pvb":case"pvmin":case"pvmax":return!0;default:return!1}}function y(t){switch(t.toLowerCase()){case"em":case"ex":case"rem":return!0;default:return!1}}var b={px:1,in:96,pt:4/3,pc:16,cm:96/2.54,mm:96/25.4,q:96/2.54/40,em:16,rem:16,ex:8,dppx:1,dpi:1/96,dpcm:2.54/96};function E(t){switch(t){case"q":case"rem":return!0;default:return!1}}var w=function(){function t(t,e,n,i){this.nn=t,this.rn=e,this.en=n,this.sn=null,this.on=null,this.un=null,this.scopes={},this.hn=null,this.an=null,this.cn=null,this.Zt=null,this.docTitle=null,this.qt=function(){return this.sn?this.sn:this.pref.Xt?Math.floor(e/2)-this.pref.pageBorder:e},this.Kt=function(){return this.on?this.on:n},this.ln=i,this.fontSize=function(){return this.un?this.un:i},this.pref=u}return t.prototype.vn=function(t){var e=this.scopes[t.$t];return e||(e={},this.scopes[t.$t]=e),e},t.prototype.dn=function(t){this.scopes[t.$t]={};for(var e=0;e<t.children.length;e++)this.dn(t.children[e])},t.prototype.ft=function(t,e){if(m(t)){var n=this.qt()/100,i=this.Kt()/100,r=null!=this.hn?this.hn/100:n,o=null!=this.an?this.an/100:i;switch(t){case"vw":return r;case"vh":return o;case"vi":return this.cn?o:r;case"vb":return this.cn?r:o;case"vmin":return r<o?r:o;case"vmax":return r>o?r:o;case"pvw":return n;case"pvh":return i;case"pvi":return this.cn?i:n;case"pvb":return this.cn?n:i;case"pvmin":return n<i?n:i;case"pvmax":return n>i?n:i}}return"em"==t||"rem"==t?e?this.ln:this.fontSize():"ex"==t?b.ex*(e?this.ln:this.fontSize())/b.em:b[t]},t.prototype.pn=function(t,e){do{var n=t.values[e];if(n)return n;if(t.resolver&&(n=t.resolver.call(this,e,!1)))return n;t=t.parent}while(t);throw new Error("Name '"+e+"' is undefined")},t.prototype.bn=function(t,e,n,i){do{var r=t.funcs[e];if(r)return r;if(t.resolver&&(r=t.resolver.call(this,e,!0)))return r;var o=t.Yt[e];if(o){if(i)return t.zero;for(var a=Array(n.length),s=0;s<n.length;s++)a[s]=n[s].evaluate(this);return new Q(t,o.apply(this,a))}t=t.parent}while(t);throw new Error("Function '"+e+"' is undefined")},t.prototype.wn=function(t,e){var n="all"===t||!!this.pref.Vt[t];return e?!n:n},t.prototype.mn=function(t,e){var n="",i=t.match(/^(min|max)-(.*)$/);i&&(n=i[1],t=i[2]);var r=null,o=null;switch(t){case"width":case"height":case"device-width":case"device-height":case"color":e&&(r=e.evaluate(this))}switch(t){case"width":o=this.qt();break;case"height":o=this.Kt();break;case"device-width":o=window.screen.availWidth;break;case"device-height":o=window.screen.availHeight;break;case"color":o=window.screen.pixelDepth}if(null!=o&&null!=r)switch(n){case"min":return o>=r;case"max":return o<=r;default:return o==r}else if(null!=o&&null==e)return 0!==o;return!1},t.prototype.gn=function(t,e){var n=this.scopes[t.$t];return n?n[e]:void 0},t.prototype.En=function(t,e,n){this.vn(t)[e]=n},t}(),T=function(){function t(t){this.scope=t,this.scope=t,this.key="_"+d++}return t.prototype.toString=function(){var t=new r.d;return this.rt(t,0),t.toString()},t.prototype.rt=function(t,e){throw new Error("F_ABSTRACT")},t.prototype.kn=function(t){throw new Error("F_ABSTRACT")},t.prototype.expand=function(t,e){return this},t.prototype._n=function(t,e,n){return t===this},t.prototype.xn=function(t,e,n){var i=n[this.key];if(null!=i)return i!==l&&i;n[this.key]=l;var r=this._n(t,e,n);return n[this.key]=r,r},t.prototype.depend=function(t,e){return this.xn(t,e,{})},t.prototype.evaluate=function(t){var e=t.gn(this.scope,this.key);return void 0!==e?e:(e=this.kn(t),t.En(this.scope,this.key,e),e)},t.prototype.yn=function(){return!1},t}(),N=function(t){function e(e,n){var i=t.call(this,e)||this;return i.val=n,i}return o(e,t),e.prototype.Tn=function(){throw new Error("F_ABSTRACT")},e.prototype.Nn=function(t){throw new Error("F_ABSTRACT")},e.prototype.kn=function(t){var e=this.val.evaluate(t);return this.Nn(e)},e.prototype._n=function(t,e,n){return t===this||this.val.xn(t,e,n)},e.prototype.rt=function(t,e){10<e&&t.append("("),t.append(this.Tn()),this.val.rt(t,10),10<e&&t.append(")")},e.prototype.expand=function(t,e){var n=this.val.expand(t,e);return n===this.val?this:new this.constructor(this.scope,n)},e}(T),S=function(t){function e(e,n,i){var r=t.call(this,e)||this;return r.lhs=n,r.rhs=i,r}return o(e,t),e.prototype.Sn=function(){throw new Error("F_ABSTRACT")},e.prototype.Tn=function(){throw new Error("F_ABSTRACT")},e.prototype.An=function(t,e){throw new Error("F_ABSTRACT")},e.prototype.kn=function(t){var e=this.lhs.evaluate(t),n=this.rhs.evaluate(t);return this.An(e,n)},e.prototype._n=function(t,e,n){return t===this||this.lhs.xn(t,e,n)||this.rhs.xn(t,e,n)},e.prototype.rt=function(t,e){var n=this.Sn();n<=e&&t.append("("),this.lhs.rt(t,n),t.append(this.Tn()),this.rhs.rt(t,n),n<=e&&t.append(")")},e.prototype.expand=function(t,e){var n=this.lhs.expand(t,e),i=this.rhs.expand(t,e);return n===this.lhs&&i===this.rhs?this:new this.constructor(this.scope,n,i)},e}(T),_=function(t){function e(e,n,i){return t.call(this,e,n,i)||this}return o(e,t),e.prototype.Sn=function(){return 1},e}(S),A=function(t){function e(e,n,i){return t.call(this,e,n,i)||this}return o(e,t),e.prototype.Sn=function(){return 2},e}(S),I=function(t){function e(e,n,i){return t.call(this,e,n,i)||this}return o(e,t),e.prototype.Sn=function(){return 3},e}(S),x=function(t){function e(e,n,i){return t.call(this,e,n,i)||this}return o(e,t),e.prototype.Sn=function(){return 4},e}(S),C=function(t){function e(e,n){return t.call(this,e,n)||this}return o(e,t),e.prototype.Tn=function(){return"!"},e.prototype.Nn=function(t){return!t},e}(N),O=function(t){function e(e,n){return t.call(this,e,n)||this}return o(e,t),e.prototype.Tn=function(){return"-"},e.prototype.Nn=function(t){return-t},e}(N),k=function(t){function e(e,n,i){return t.call(this,e,n,i)||this}return o(e,t),e.prototype.Tn=function(){return"&&"},e.prototype.kn=function(t){return this.lhs.evaluate(t)&&this.rhs.evaluate(t)},e}(_),L=function(t){function e(e,n,i){return t.call(this,e,n,i)||this}return o(e,t),e.prototype.Tn=function(){return" and "},e}(k),D=function(t){function e(e,n,i){return t.call(this,e,n,i)||this}return o(e,t),e.prototype.Tn=function(){return"||"},e.prototype.kn=function(t){return this.lhs.evaluate(t)||this.rhs.evaluate(t)},e}(_),R=function(t){function e(e,n,i){return t.call(this,e,n,i)||this}return o(e,t),e.prototype.Tn=function(){return", "},e}(D),P=function(t){function e(e,n,i){return t.call(this,e,n,i)||this}return o(e,t),e.prototype.Tn=function(){return"<"},e.prototype.An=function(t,e){return t<e},e}(A),M=function(t){function e(e,n,i){return t.call(this,e,n,i)||this}return o(e,t),e.prototype.Tn=function(){return"<="},e.prototype.An=function(t,e){return t<=e},e}(A),F=function(t){function e(e,n,i){return t.call(this,e,n,i)||this}return o(e,t),e.prototype.Tn=function(){return">"},e.prototype.An=function(t,e){return t>e},e}(A),U=function(t){function e(e,n,i){return t.call(this,e,n,i)||this}return o(e,t),e.prototype.Tn=function(){return">="},e.prototype.An=function(t,e){return t>=e},e}(A),B=function(t){function e(e,n,i){return t.call(this,e,n,i)||this}return o(e,t),e.prototype.Tn=function(){return"=="},e.prototype.An=function(t,e){return t==e},e}(A),z=function(t){function e(e,n,i){return t.call(this,e,n,i)||this}return o(e,t),e.prototype.Tn=function(){return"!="},e.prototype.An=function(t,e){return t!=e},e}(A),H=function(t){function e(e,n,i){return t.call(this,e,n,i)||this}return o(e,t),e.prototype.Tn=function(){return"+"},e.prototype.An=function(t,e){return t+e},e}(I),G=function(t){function e(e,n,i){return t.call(this,e,n,i)||this}return o(e,t),e.prototype.Tn=function(){return" - "},e.prototype.An=function(t,e){return t-e},e}(I),V=function(t){function e(e,n,i){return t.call(this,e,n,i)||this}return o(e,t),e.prototype.Tn=function(){return"*"},e.prototype.An=function(t,e){return t*e},e}(x),X=function(t){function e(e,n,i){return t.call(this,e,n,i)||this}return o(e,t),e.prototype.Tn=function(){return"/"},e.prototype.An=function(t,e){return t/e},e}(x),j=function(t){function e(e,n,i){return t.call(this,e,n,i)||this}return o(e,t),e.prototype.Tn=function(){return"%"},e.prototype.An=function(t,e){return t%e},e}(x),W=function(t){function e(e,n,i){var r=t.call(this,e)||this;return r.num=n,r.unit=i.toLowerCase(),r}return o(e,t),e.prototype.rt=function(t,e){t.append(this.num.toString()),t.append(r.p(this.unit))},e.prototype.kn=function(t){return this.num*t.ft(this.unit,!1)},e}(T),Y=function(t){function e(e,n){var i=t.call(this,e)||this;return i.Rn=n,i}return o(e,t),e.prototype.rt=function(t,e){t.append(this.Rn)},e.prototype.kn=function(t){return t.pn(this.scope,this.Rn).evaluate(t)},e.prototype._n=function(t,e,n){return t===this||e.pn(this.scope,this.Rn).xn(t,e,n)},e}(T),K=function(t){function e(e,n,i){var r=t.call(this,e)||this;return r.not=n,r.name=i,r}return o(e,t),e.prototype.rt=function(t,e){this.not&&t.append("not "),t.append(r.p(this.name))},e.prototype.kn=function(t){return t.wn(this.name,this.not)},e.prototype._n=function(t,e,n){return t===this||this.value.xn(t,e,n)},e.prototype.yn=function(){return!0},e}(T),$=function(t){function e(e,n,i){var r=t.call(this,e)||this;return r.fn=n,r.str=i,r}return o(e,t),e.prototype.rt=function(t,e){t.append(this.str)},e.prototype.kn=function(t){return this.fn.call(t)},e}(T),q=function(t){function e(e,n,i){var r=t.call(this,e)||this;return r.Rn=n,r.params=i,r}return o(e,t),e.prototype.rt=function(t,e){t.append(this.Rn),function(t,e){t.append("(");for(var n=0;n<e.length;n++)n&&t.append(","),e[n].rt(t,0);t.append(")")}(t,this.params)},e.prototype.kn=function(t){return t.bn(this.scope,this.Rn,this.params,!1).expand(t,this.params).evaluate(t)},e.prototype._n=function(t,e,n){if(t===this)return!0;for(var i=0;i<this.params.length;i++)if(this.params[i].xn(t,e,n))return!0;return e.bn(this.scope,this.Rn,this.params,!0).xn(t,e,n)},e.prototype.expand=function(t,n){var i=function(t,e,n){for(var i=e,r=0;r<e.length;r++){var o=e[r].expand(t,n);if(e!==i)i[r]=o;else if(o!==e[r]){i=Array(e.length);for(var a=0;a<r;a++)i[a]=e[a];i[r]=o}}return i}(t,this.params,n);return i===this.params?this:new e(this.scope,this.Rn,i)},e}(T),Z=function(t){function e(e,n,i,r){var o=t.call(this,e)||this;return o.cond=n,o.Cn=i,o.On=r,o}return o(e,t),e.prototype.rt=function(t,e){e>0&&t.append("("),this.cond.rt(t,0),t.append("?"),this.Cn.rt(t,0),t.append(":"),this.On.rt(t,0),e>0&&t.append(")")},e.prototype.kn=function(t){return this.cond.evaluate(t)?this.Cn.evaluate(t):this.On.evaluate(t)},e.prototype._n=function(t,e,n){return t===this||this.cond.xn(t,e,n)||this.Cn.xn(t,e,n)||this.On.xn(t,e,n)},e.prototype.expand=function(t,n){var i=this.cond.expand(t,n),r=this.Cn.expand(t,n),o=this.On.expand(t,n);return i===this.cond&&r===this.Cn&&o===this.On?this:new e(this.scope,i,r,o)},e}(T),Q=function(t){function e(e,n){var i=t.call(this,e)||this;return i.val=n,i}return o(e,t),e.prototype.rt=function(t,e){switch(typeof this.val){case"number":case"boolean":t.append(this.val.toString());break;case"string":t.append('"'),t.append(r.q(this.val)),t.append('"');break;default:throw new Error("F_UNEXPECTED_STATE")}},e.prototype.kn=function(t){return this.val},e}(T),J=function(t){function e(e,n,i){var r=t.call(this,e)||this;return r.name=n,r.value=i,r}return o(e,t),e.prototype.rt=function(t,e){t.append("("),t.append(r.q(this.name.name)),t.append(":"),this.value.rt(t,0),t.append(")")},e.prototype.kn=function(t){return t.mn(this.name.name,this.value)},e.prototype._n=function(t,e,n){return t===this||this.value.xn(t,e,n)},e.prototype.expand=function(t,n){var i=this.value.expand(t,n);return i===this.value?this:new e(this.scope,this.name,i)},e}(T),tt=function(t){function e(e,n){var i=t.call(this,e)||this;return i.index=n,i}return o(e,t),e.prototype.rt=function(t,e){t.append("$"),t.append(this.index.toString())},e.prototype.expand=function(t,e){var n=e[this.index];if(!n)throw new Error("Parameter missing: "+this.index);return n},e}(T);function et(t,e,n){return e===t._false||e===t.zero||n==t._false||n==t.zero?t._false:e===t._true||e===t.one?n:n===t._true||n===t.one?e:new k(t,e,n)}function nt(t,e,n){return e===t.zero?n:n===t.zero?e:new H(t,e,n)}function it(t,e,n){return e===t.zero?new O(t,n):n===t.zero?e:new G(t,e,n)}function rt(t,e,n){return e===t.zero||n===t.zero?t.zero:e===t.one?n:n===t.one?e:new V(t,e,n)}function ot(t,e,n){return e===t.zero?t.zero:n===t.one?e:new X(t,e,n)}},function(t,e,n){"use strict";n.d(e,"v",function(){return v}),n.d(e,"r",function(){return m}),n.d(e,"H",function(){return y}),n.d(e,"m",function(){return N}),n.d(e,"l",function(){return S}),n.d(e,"c",function(){return I}),n.d(e,"i",function(){return C}),n.d(e,"x",function(){return L}),n.d(e,"w",function(){return D}),n.d(e,"s",function(){return R}),n.d(e,"F",function(){return P}),n.d(e,"u",function(){return M}),n.d(e,"q",function(){return F}),n.d(e,"t",function(){return B}),n.d(e,"B",function(){return H}),n.d(e,"A",function(){return G}),n.d(e,"g",function(){return X}),n.d(e,"j",function(){return j}),n.d(e,"a",function(){return $}),n.d(e,"d",function(){return q}),n.d(e,"e",function(){return kt}),n.d(e,"G",function(){return Vt}),n.d(e,"b",function(){return Xt}),n.d(e,"f",function(){return Kt}),n.d(e,"h",function(){return $t}),n.d(e,"p",function(){return Zt}),n.d(e,"D",function(){return Qt}),n.d(e,"E",function(){return Jt}),n.d(e,"z",function(){return te}),n.d(e,"y",function(){return ee}),n.d(e,"n",function(){return ne}),n.d(e,"o",function(){return ie}),n.d(e,"C",function(){return re}),n.d(e,"k",function(){return oe});var i,r=n(7),o=n(1),a=n(0),s=n(10),u=n(20),l=n(2),h=n(4),c=n(6),p=n(25),f=n(9),d=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),v={azimuth:!0,"border-collapse":!0,"border-spacing":!0,"caption-side":!0,"clip-rule":!0,color:!0,"color-interpolation":!0,"color-rendering":!0,cursor:!0,direction:!0,elevation:!0,"empty-cells":!0,fill:!0,"fill-opacity":!0,"fill-rule":!0,"font-kerning":!0,"font-size":!0,"font-size-adjust":!0,"font-family":!0,"font-feature-settings":!0,"font-style":!0,"font-stretch":!0,"font-variant":!0,"font-weight":!0,"glyph-orientation-vertical":!0,hyphens:!0,"hyphenate-character":!0,"hyphenate-limit-chars":!0,"hyphenate-limit-last":!0,"image-rendering":!0,"image-resolution":!0,"letter-spacing":!0,"line-break":!0,"line-height":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,marker:!0,"marker-end":!0,"marker-mid":!0,"marker-start":!0,orphans:!0,"overflow-wrap":!0,"paint-order":!0,"pointer-events":!0,"pitch-range":!0,quotes:!0,richness:!0,"ruby-align":!0,"ruby-position":!0,"speak-header":!0,"speak-numeral":!0,"speak-punctuation":!0,"speech-rate":!0,"shape-rendering":!0,stress:!0,stroke:!0,"stroke-dasharray":!0,"stroke-dashoffset":!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-miterlimit":!0,"stroke-opacity":!0,"stroke-width":!0,"tab-size":!0,"text-align":!0,"text-align-last":!0,"text-anchor":!0,"text-decoration-skip":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-combine-upright":!0,"text-indent":!0,"text-justify":!0,"text-rendering":!0,"text-size-adjust":!0,"text-transform":!0,"text-underline-position":!0,visibility:!0,"voice-family":!0,volume:!0,"white-space":!0,widows:!0,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"writing-mode":!0},g=["box-decoration-break","image-resolution","orphans","widows"];function m(){return f.b(f.a.POLYFILLED_INHERITED_PROPS).reduce(function(t,e){return t.concat(e())},[].concat(g))}var y={"http://www.idpf.org/2007/ops":!0,"http://www.w3.org/1999/xhtml":!0,"http://www.w3.org/2000/svg":!0},b=["margin-%","padding-%","border-%-width","border-%-style","border-%-color","%"],E=["max-%","min-%","%"],w=function(){for(var t=["left","right","top","bottom"],e={width:!0,height:!0,"max-width":!0,"max-height":!0,"min-width":!0,"min-height":!0},n=0;n<b.length;n++)for(var i=0;i<t.length;i++)e[b[n].replace("%",t[i])]=!0;return e}();function T(t,e){for(var n={},i=0,r=b;i<r.length;i++){var o=r[i];for(var a in t){var s=o.replace("%",a),u=o.replace("%",t[a]);n[s]=u,n[u]=s}}for(var l=0,h=E;l<h.length;l++){var c=h[l];for(var p in e)s=c.replace("%",p),u=c.replace("%",e[p]),n[s]=u,n[u]=s}return n}var N=T({"block-start":"right","block-end":"left","inline-start":"top","inline-end":"bottom"},{"block-size":"width","inline-size":"height"}),S=T({"block-start":"top","block-end":"bottom","inline-start":"left","inline-end":"right"},{"block-size":"height","inline-size":"width"}),_=T({"block-start":"right","block-end":"left","inline-start":"bottom","inline-end":"top"},{"block-size":"width","inline-size":"height"}),A=T({"block-start":"top","block-end":"bottom","inline-start":"right","inline-end":"left"},{"block-size":"height","inline-size":"width"}),I=function(){function t(t,e){this.value=t,this.priority=e}return t.prototype.In=function(){return this},t.prototype.Ln=function(e){var n=this.value.visit(e);return n===this.value?this:new t(n,this.priority)},t.prototype.Pn=function(e){return 0==e?this:new t(this.value,this.priority+e)},t.prototype.evaluate=function(t,e){return s.i(t,this.value,e)},t.prototype.isEnabled=function(t){return!0},t}(),x=function(t){function e(e,n,i){var r=t.call(this,e,n)||this;return r.condition=i,r}return d(e,t),e.prototype.In=function(){return new I(this.value,this.priority)},e.prototype.Ln=function(t){var n=this.value.visit(t);return n===this.value?this:new e(n,this.priority,this.condition)},e.prototype.Pn=function(t){return 0==t?this:new e(this.value,this.priority+t,this.condition)},e.prototype.isEnabled=function(t){return!!this.condition.evaluate(t)},e}(I);function C(t,e,n){return(null==e||n.priority>e.priority)&&n.isEnabled(t)?n.In():e}var O={"region-id":!0,"fragment-selector-id":!0};function k(t){return!!O[t]}function L(t){return"_"!=t.charAt(0)&&!O[t]}function D(t){return!!v[t]}function R(t,e){return t[e]}function P(t,e,n){n?t[e]=n:delete t[e]}function M(t,e){return t[e]}function F(t,e){var n=t[e];return n||(n={},t[e]=n),n}var U=function(t){var e=t._viewConditionalStyles;return e||(e=[],t._viewConditionalStyles=e),e};function B(t,e){return t[e]}function z(t,e){var n=t[e];return n||(n=[],t[e]=n),n}function H(t,e,n,i,r,o,a){if([{id:r,Fn:"_pseudos"},{id:o,Fn:"_regions"}].forEach(function(t){if(t.id){var n=F(e,t.Fn);(e=n[t.id])||(e={},n[t.id]=e)}}),a){var s=U(e);e={},s.push({styles:e,matcher:a})}for(var u in n)if("_"!=u.charAt(0))if(k(u)){var l=B(n,u),h=z(e,u);Array.prototype.push.apply(h,l)}else{var c=R(n,u).Pn(i),p=R(e,u);P(e,u,C(t,p,c))}}function G(t,e){for(var n={},i=0;i<e.length;i++)H(t,n,e[i],0,null,null,null);return n}function V(t,e){if(t.length>0){t.sort(function(t,e){return e.Sn()-t.Sn()});for(var n=null,i=t.length-1;i>=0;i--)(n=t[i]).chained=e,e=n;return n}return e}var X=function(t){function e(e,n){var i=t.call(this)||this;return i.props=e,i.context=n,i.Dn="",i}return d(e,t),e.prototype.Mn=function(t){this.Dn=t},e.prototype.Un=function(){var t=R(this.props,"font-size").value;if(!h.I(t.unit))throw new Error("Unexpected state");return t.num*h.G[t.unit]},e.prototype.X=function(t){if(r.a(this.context),"font-size"===this.Dn)return function(t,e,n){var i=(t=j(t,e,n)).unit,r=t.num;return"px"===i?t:"%"===i?new a.i(r/100*e,"px"):new a.i(r*n.ft(i,!1),"px")}(t,this.Un(),this.context);if("em"==t.unit||"ex"==t.unit||"rem"==t.unit)return j(t,this.Un(),this.context);if("%"==t.unit){if("line-height"===this.Dn)return t;var e=this.Dn.match(/height|^(top|bottom)$/)?"vh":"vw";return new a.i(t.num,e)}return t},e.prototype.it=function(t){return"font-size"==this.Dn?s.i(this.context,t,this.Dn).visit(this):t},e}(a.d);function j(t,e,n){var i=t.unit,r=t.num;if("em"===i||"ex"===i){var o=h.G[i]/h.G.em;return new a.i(r*o*e,"px")}return"rem"===i?new a.i(r*n.fontSize(),"px"):t}var W=function(){function t(){}return t.prototype.apply=function(t){},t.prototype.Gn=function(t){return new K([this,t])},t.prototype.clone=function(){return this},t}(),Y=function(t){function e(e){var n=t.call(this)||this;return n.Bn=e,n}return d(e,t),e.prototype.apply=function(t){t.zn(this.Bn.fresh(t))},e}(W),K=function(t){function e(e){var n=t.call(this)||this;return n.list=e,n}return d(e,t),e.prototype.apply=function(t){for(var e=0;e<this.list.length;e++)this.list[e].apply(t)},e.prototype.Gn=function(t){return this.list.push(t),this},e.prototype.clone=function(){return new e([].concat(this.list))},e}(W),$=function(t){function e(e,n,i,r,o){var a=t.call(this)||this;return a.style=e,a.specificity=n,a.pseudoelement=i,a.regionId=r,a.Hn=o,a}return d(e,t),e.prototype.apply=function(t){H(t.context,t.currentStyle,this.style,this.specificity,this.pseudoelement,this.regionId,t.jn(this.Hn))},e}(W),q=function(t){function e(){var e=t.call(this)||this;return e.chained=null,e}return d(e,t),e.prototype.apply=function(t){this.chained.apply(t)},e.prototype.Sn=function(){return 0},e.prototype.Xn=function(t){return!1},e}(W),Z=function(t){function e(e){var n=t.call(this)||this;return n.className=e,n}return d(e,t),e.prototype.apply=function(t){t.Vn.includes(this.className)&&this.chained.apply(t)},e.prototype.Sn=function(){return 10},e.prototype.Xn=function(t){return this.chained&&t.Yn(t.classes,this.className,this.chained),!0},e}(q),Q=function(t){function e(e){var n=t.call(this)||this;return n.id=e,n}return d(e,t),e.prototype.apply=function(t){t.$n!=this.id&&t.Wn!=this.id||this.chained.apply(t)},e.prototype.Sn=function(){return 11},e.prototype.Xn=function(t){return this.chained&&t.Yn(t.ids,this.id,this.chained),!0},e}(q),J=function(t){function e(e){var n=t.call(this)||this;return n.localName=e,n}return d(e,t),e.prototype.apply=function(t){t.qn==this.localName&&this.chained.apply(t)},e.prototype.Sn=function(){return 8},e.prototype.Xn=function(t){return this.chained&&t.Yn(t.tags,this.localName,this.chained),!0},e}(q),tt=function(t){function e(e,n){var i=t.call(this)||this;return i.ns=e,i.localName=n,i}return d(e,t),e.prototype.apply=function(t){t.qn==this.localName&&t.Kn==this.ns&&this.chained.apply(t)},e.prototype.Sn=function(){return 8},e.prototype.Xn=function(t){if(this.chained){var e=t.Zn[this.ns];e||(e="ns"+t.Qn+++":",t.Zn[this.ns]=e);var n=e+this.localName;t.Yn(t.nstags,n,this.chained)}return!0},e}(q),et=function(t){function e(e){var n=t.call(this)||this;return n.Jn=e,n}return d(e,t),e.prototype.apply=function(t){var e=t.ti;if(e&&"a"==t.qn){var n=e.getAttribute("href");if(n&&n.match(/^#/)){var i=n.substring(1),r=e.ownerDocument.getElementById(i);if(r){var a=r.getAttributeNS(o.a.epub,"type");a&&a.match(this.Jn)&&this.chained.apply(t)}}}},e}(q),nt=function(t){function e(e){var n=t.call(this)||this;return n.ns=e,n}return d(e,t),e.prototype.apply=function(t){t.Kn==this.ns&&this.chained.apply(t)},e}(q),it=function(t){function e(e,n){var i=t.call(this)||this;return i.ns=e,i.name=n,i}return d(e,t),e.prototype.apply=function(t){t.ti&&t.ti.hasAttributeNS(this.ns,this.name)&&this.chained.apply(t)},e}(q),rt=function(t){function e(e,n,i){var r=t.call(this)||this;return r.ns=e,r.name=n,r.value=i,r}return d(e,t),e.prototype.apply=function(t){t.ti&&t.ti.getAttributeNS(this.ns,this.name)==this.value&&this.chained.apply(t)},e.prototype.Sn=function(){return"type"==this.name&&this.ns==o.a.epub?9:0},e.prototype.Xn=function(t){return"type"==this.name&&this.ns==o.a.epub&&(this.chained&&t.Yn(t.epubtypes,this.value,this.chained),!0)},e}(q),ot=function(t){function e(e,n){var i=t.call(this)||this;return i.ns=e,i.name=n,i}return d(e,t),e.prototype.apply=function(t){if(t.ti){var e=t.ti.getAttributeNS(this.ns,this.name);e&&y[e]&&this.chained.apply(t)}},e.prototype.Sn=function(){return 0},e.prototype.Xn=function(t){return!1},e}(q),at=function(t){function e(e,n,i){var r=t.call(this)||this;return r.ns=e,r.name=n,r.regexp=i,r}return d(e,t),e.prototype.apply=function(t){if(t.ti){var e=t.ti.getAttributeNS(this.ns,this.name);e&&e.match(this.regexp)&&this.chained.apply(t)}},e}(q),st=function(t){function e(e){var n=t.call(this)||this;return n.ni=e,n}return d(e,t),e.prototype.apply=function(t){t.lang.match(this.ni)&&this.chained.apply(t)},e}(q),ut=function(t){function e(){return t.call(this)||this}return d(e,t),e.prototype.apply=function(t){t.ii&&this.chained.apply(t)},e.prototype.Sn=function(){return 6},e}(q),lt=function(t){function e(){return t.call(this)||this}return d(e,t),e.prototype.apply=function(t){t.ri&&this.chained.apply(t)},e.prototype.Sn=function(){return 12},e}(q),ht=function(t){function e(e,n){var i=t.call(this)||this;return i.a=e,i.b=n,i}return d(e,t),e.prototype.ei=function(t){return p.c(t,this.a,this.b)},e}(q),ct=function(t){function e(e,n){return t.call(this,e,n)||this}return d(e,t),e.prototype.apply=function(t){this.ei(t.si)&&this.chained.apply(t)},e.prototype.Sn=function(){return 5},e}(ht),pt=function(t){function e(e,n){return t.call(this,e,n)||this}return d(e,t),e.prototype.apply=function(t){var e=t.oi[t.Kn][t.qn];this.ei(e)&&this.chained.apply(t)},e.prototype.Sn=function(){return 5},e}(ht),ft=function(t){function e(e,n){return t.call(this,e,n)||this}return d(e,t),e.prototype.apply=function(t){var e=t.ui;null===e&&(e=t.ui=t.ti.parentNode.childElementCount-t.si+1),this.ei(e)&&this.chained.apply(t)},e.prototype.Sn=function(){return 4},e}(ht),dt=function(t){function e(e,n){return t.call(this,e,n)||this}return d(e,t),e.prototype.apply=function(t){var e=t.hi;if(!e[t.Kn]){var n=t.ti;do{var i=n.namespaceURI,r=n.localName,o=e[i];o||(o=e[i]={}),o[r]=(o[r]||0)+1}while(n=n.nextElementSibling)}this.ei(e[t.Kn][t.qn])&&this.chained.apply(t)},e.prototype.Sn=function(){return 4},e}(ht),vt=function(t){function e(){return t.call(this)||this}return d(e,t),e.prototype.apply=function(t){for(var e=t.ti.firstChild;e;){switch(e.nodeType){case Node.ELEMENT_NODE:return;case Node.TEXT_NODE:if(e.length>0)return}e=e.nextSibling}this.chained.apply(t)},e.prototype.Sn=function(){return 4},e}(q),gt=function(t){function e(){return t.call(this)||this}return d(e,t),e.prototype.apply=function(t){!1===t.ti.disabled&&this.chained.apply(t)},e.prototype.Sn=function(){return 5},e}(q),mt=function(t){function e(){return t.call(this)||this}return d(e,t),e.prototype.apply=function(t){!0===t.ti.disabled&&this.chained.apply(t)},e.prototype.Sn=function(){return 5},e}(q),yt=function(t){function e(){return t.call(this)||this}return d(e,t),e.prototype.apply=function(t){var e=t.ti;!0!==e.selected&&!0!==e.checked||this.chained.apply(t)},e.prototype.Sn=function(){return 5},e}(q),bt=function(t){function e(e){var n=t.call(this)||this;return n.condition=e,n}return d(e,t),e.prototype.apply=function(t){if(t.conditions[this.condition])try{t.ai.push(this.condition),this.chained.apply(t)}finally{t.ai.pop()}},e.prototype.Sn=function(){return 5},e}(q),Et=function(t){function e(){var e=t.call(this)||this;return e.applied=!1,e}return d(e,t),e.prototype.apply=function(t){this.applied=!0},e.prototype.clone=function(){var t=new e;return t.applied=this.applied,t},e}(W),wt=function(t){function e(e){var n=t.call(this)||this;return n.fi=new Et,n.ci=V(e,n.fi),n}return d(e,t),e.prototype.apply=function(t){this.ci.apply(t),this.fi.applied||this.chained.apply(t),this.fi.applied=!1},e.prototype.Sn=function(){return this.ci.Sn()},e}(q),Tt=function(){function t(t,e,n){this.condition=t,this.Hn=e,this.li=n}return t.prototype.increment=function(t){t.increment(this.condition,this.li)},t.prototype.decrement=function(t){t.decrement(this.condition,this.li)},t.prototype.jn=function(t){return t.jn(this.Hn)},t}(),Nt=function(t){function e(e,n,i){return t.call(this,e,n,i)||this}return d(e,t),e.prototype.fresh=function(t){return new e(this.condition,this.Hn,this.jn(t))},e.prototype.push=function(t,e){return 0==e&&this.increment(t),!1},e.prototype.pop=function(t,e){return 0==e&&(this.decrement(t),!0)},e}(Tt),St=function(t){function e(e,n,i){return t.call(this,e,n,i)||this}return d(e,t),e.prototype.fresh=function(t){return new e(this.condition,this.Hn,this.jn(t))},e.prototype.push=function(t,e){return 0==e?this.increment(t):1==e&&this.decrement(t),!1},e.prototype.pop=function(t,e){return 0==e?(this.decrement(t),!0):(1==e&&this.increment(t),!1)},e}(Tt),_t=function(t){function e(e,n,i){var r=t.call(this,e,n,i)||this;return r.fired=!1,r}return d(e,t),e.prototype.fresh=function(t){return new e(this.condition,this.Hn,this.jn(t))},e.prototype.push=function(t,e){return!!this.fired&&(this.decrement(t),!0)},e.prototype.pop=function(t,e){return this.fired?(this.decrement(t),!0):(0==e&&(this.fired=!0,this.increment(t)),!1)},e}(Tt),At=function(t){function e(e,n,i){var r=t.call(this,e,n,i)||this;return r.fired=!1,r}return d(e,t),e.prototype.fresh=function(t){return new e(this.condition,this.Hn,this.jn(t))},e.prototype.push=function(t,e){return this.fired&&(-1==e?this.increment(t):0==e&&this.decrement(t)),!1},e.prototype.pop=function(t,e){if(this.fired){if(-1==e)return this.decrement(t),!0;0==e&&this.increment(t)}else 0==e&&(this.fired=!0,this.increment(t));return!1},e}(Tt),It=function(){function t(t,e){this.afterprop=t,this.element=e}return t.prototype.fresh=function(t){return this},t.prototype.push=function(t,e){return!1},t.prototype.pop=function(t,e){return 0==e&&(t.di(this.afterprop,this.element),!0)},t}(),xt=function(){function t(t){this.lang=t}return t.prototype.fresh=function(t){return this},t.prototype.push=function(t,e){return!1},t.prototype.pop=function(t,e){return 0==e&&(t.lang=this.lang,!0)},t}(),Ct=function(){function t(t){this.pi=t}return t.prototype.fresh=function(t){return this},t.prototype.push=function(t,e){return!1},t.prototype.pop=function(t,e){return 0==e&&(t.quotes=this.pi,!0)},t}(),Ot=function(t){function e(e){var n=t.call(this)||this;return n.element=e,n}return d(e,t),e.prototype.bi=function(t,e){switch(e){case"url":return t?new a.l(t):new a.l("about:invalid");case"string":default:return t?new a.k(t):new a.k("")}},e.prototype.nt=function(e){if("attr"!==e.name)return t.prototype.nt.call(this,e);var n,i="string",r=null;if(e.values[0]instanceof a.j){var o=e.values[0].values;o.length>=2&&(i=o[1].stringValue()),r=o[0].stringValue()}else r=e.values[0].stringValue();return n=e.values.length>1?this.bi(e.values[1].stringValue(),i):this.bi(null,i),this.element&&this.element.hasAttribute(r)?this.bi(this.element.getAttribute(r),i):n},e}(a.d),kt=function(t){function e(e,n,i){var r=t.call(this)||this;return r.cascade=e,r.element=n,r.wi=i,r}return d(e,t),e.prototype.U=function(t){var e=this.cascade,n=e.quotes,i=Math.floor(n.length/2)-1;switch(t.name){case"open-quote":var r=n[2*Math.min(i,e.mi)];return e.mi++,r;case"close-quote":return e.mi>0&&e.mi--,n[2*Math.min(i,e.mi)+1];case"no-open-quote":return e.mi++,new a.k("");case"no-close-quote":return e.mi>0&&e.mi--,new a.k("")}return t},e.prototype.format=function(t,e){var n,i=!1,r=!1;null!=(n=e.match(/^upper-(.*)/))?(i=!0,e=n[1]):null!=(n=e.match(/^lower-(.*)/))&&(r=!0,e=n[1]);var a="";return Lt[e]?a=function(t,e){if(e>t[0]||e<=0||e!=Math.round(e))return"";for(var n="",i=1;i<t.length;i+=2){var r=t[i],o=Math.floor(e/r);if(o>20)return"";for(e-=o*r;o>0;)n+=t[i+1],o--}return n}(Lt[e],t):Dt[e]?a=function(t,e){if(e<=0||e!=Math.round(e))return"";var n=function(t){for(var e=[],n=0;n<t.length;)if("-"==t.substr(n+1,1)){var i=t.charCodeAt(n),r=t.charCodeAt(n+2);n+=3;for(var o=i;o<=r;o++)e.push(String.fromCharCode(o))}else e.push(t.substr(n++,1));return e}(t),i="";do{var r=--e%n.length;i=n[r]+i,e=(e-r)/n.length}while(e>0);return i}(Dt[e],t):null!=Rt[e]?a=Rt[e]:"decimal-leading-zero"==e?1==(a=""+t).length&&(a="0"+a):a="cjk-ideographic"==e||"trad-chinese-informal"==e?function(t,e){if(t>9999||t<-9999)return""+t;if(0==t)return e.digits.charAt(0);var n=new o.d;if(t<0&&(n.append(e.negative),t=-t),t<10)n.append(e.digits.charAt(t));else if(!e.formal&&t<=19)n.append(e.markers.charAt(0)),0!=t&&n.append(e.digits.charAt(t-10));else{var i=Math.floor(t/1e3);i&&(n.append(e.digits.charAt(i)),n.append(e.markers.charAt(2)));var r=Math.floor(t/100)%10;r&&(n.append(e.digits.charAt(r)),n.append(e.markers.charAt(1)));var a=Math.floor(t/10)%10;a&&(n.append(e.digits.charAt(a)),n.append(e.markers.charAt(0)));var s=t%10;s&&n.append(e.digits.charAt(s))}return n.toString()}(t,Pt):""+t,i?a.toUpperCase():r?a.toLowerCase():a},e.prototype.gi=function(t){var e=t[0].toString(),n=t.length>1?t[1].stringValue():"decimal",i=this.cascade.counters[e];if(i&&i.length){var r=i&&i.length&&i[i.length-1]||0;return new a.k(this.format(r,n))}var o=this,s=new a.c(this.wi.Ei(e,function(t){return o.format(t||0,n)}));return new a.j([s])},e.prototype.ki=function(t){var e=t[0].toString(),n=t[1].stringValue(),i=t.length>2?t[2].stringValue():"decimal",r=this.cascade.counters[e],s=new o.d;if(r&&r.length)for(var u=0;u<r.length;u++)u>0&&s.append(n),s.append(this.format(r[u],i));var l=this,h=new a.c(this.wi._i(e,function(t){var e=[];if(t.length)for(var r=0;r<t.length;r++)e.push(l.format(t[r],i));var o=s.toString();return o.length&&e.push(o),e.length?e.join(n):l.format(0,i)}));return new a.j([h])},e.prototype.xi=function(t){var e,n=t[0];e=n instanceof a.l?n.url:n.stringValue();var i=t[1].toString(),r=t.length>2?t[2].stringValue():"decimal",o=this,s=new a.c(this.wi.yi(e,i,function(t){return o.format(t||0,r)}));return new a.j([s])},e.prototype.Ti=function(t){var e,n=t[0];e=n instanceof a.l?n.url:n.stringValue();var i=t[1].toString(),r=t[2].stringValue(),o=t.length>3?t[3].stringValue():"decimal",s=this,u=new a.c(this.wi.Ni(e,i,function(t){var e=t.map(function(t){return s.format(t,o)});return e.length?e.join(r):s.format(0,o)}));return new a.j([u])},e.prototype.nt=function(t){switch(t.name){case"counter":if(t.values.length<=2)return this.gi(t.values);break;case"counters":if(t.values.length<=3)return this.ki(t.values);break;case"target-counter":if(t.values.length<=3)return this.xi(t.values);break;case"target-counters":if(t.values.length<=4)return this.Ti(t.values)}return c.b.warn("E_CSS_CONTENT_PROP:",t.toString()),new a.k("")},e}(a.d),Lt={roman:[4999,1e3,"M",900,"CM",500,"D",400,"CD",100,"C",90,"XC",50,"L",40,"XL",10,"X",9,"IX",5,"V",4,"IV",1,"I"],armenian:[9999,9e3,"",8e3,"",7e3,"",6e3,"",5e3,"",4e3,"",3e3,"",2e3,"",1e3,"",900,"",800,"",700,"",600,"",500,"",400,"",300,"",200,"",100,"",90,"",80,"",70,"",60,"",50,"",40,"",30,"",20,"",10,"",9,"",8,"",7,"",6,"",5,"",4,"",3,"",2,"",1,""],georgian:[19999,1e4,"",9e3,"",8e3,"",7e3,"",6e3,"",5e3,"",4e3,"",3e3,"",2e3,"",1e3,"",900,"",800,"",700,"",600,"",500,"",400,"",300,"",200,"",100,"",90,"",80,"",70,"",60,"",50,"",40,"",30,"",20,"",10,"",9,"",8,"",7,"",6,"",5,"",4,"",3,"",2,"",1,""],hebrew:[999,400,"",300,"",200,"",100,"",90,"",80,"",70,"",60,"",50,"",40,"",30,"",20,"",19,"",18,"",17,"",16,"",15,"",10,"",9,"",8,"",7,"",6,"",5,"",4,"",3,"",2,"",1,""]},Dt={latin:"a-z",alpha:"a-z",greek:"--",russian:"---"},Rt={square:"",disc:"",circle:"",none:""},Pt={formal:!1,digits:"",markers:"",negative:""};function Mt(t,e){for(var n in t)e[n]=t[n].clone()}var Ft,Ut=function(){function t(){this.Qn=0,this.Zn={},this.tags={},this.nstags={},this.epubtypes={},this.classes={},this.ids={},this.pagetypes={},this.order=0}return t.prototype.clone=function(){var e=new t;for(var n in e.Qn=this.Qn,this.Zn)e.Zn[n]=this.Zn[n];return Mt(this.tags,e.tags),Mt(this.nstags,e.nstags),Mt(this.epubtypes,e.epubtypes),Mt(this.classes,e.classes),Mt(this.ids,e.ids),Mt(this.pagetypes,e.pagetypes),e.order=this.order,e},t.prototype.Yn=function(t,e,n){var i=t[e];i&&(n=i.Gn(n)),t[e]=n},t.prototype.Si=function(t,e,n,i){return new Bt(this,t,e,n,i)},t.prototype.Ai=function(){return this.order+=1/1048576},t}(),Bt=function(){function t(t,e,n,i,r){this.context=e,this.Ri=n,this.wi=i,this.stack=[[],[]],this.conditions={},this.ti=null,this.Ci=null,this.currentStyle=null,this.Vn=null,this.qn="",this.Kn="",this.$n="",this.Wn="",this.Oi="",this.Ii=null,this.Li=null,this.ii=!0,this.ri=!0,this.counters={},this.Pi=[{}],this.mi=0,this.lang="",this.Fi=[0],this.si=0,this.Di=[{}],this.ui=null,this.Mi=[{}],this.Ui={},this.ai=[],this.code=t,this.quotes=[new a.k(""),new a.k(""),new a.k(""),new a.k("")],this.oi=this.Di[0],this.Gi=[this.ui],this.hi=this.Di[0]}return t.prototype.zn=function(t){this.stack[this.stack.length-1].push(t)},t.prototype.increment=function(t,e){this.conditions[t]=(this.conditions[t]||0)+1,e&&(this.Ui[t]?this.Ui[t].push(e):this.Ui[t]=[e])},t.prototype.decrement=function(t,e){this.conditions[t]--,this.Ui[t]&&(this.Ui[t]=this.Ui[t].filter(function(t){return t!==e}),0===this.Ui[t].length&&delete this.Ui[t])},t.prototype.jn=function(t){var e=this,n=null;t&&(r.a(this.Ci),n=p.a.jn(this.Ci,t));var i=this.ai.map(function(t){var n=e.Ui[t];return n&&n.length>0?1===n.length?n[0]:p.a.Bi([].concat(n)):null}).filter(function(t){return t});return i.length<=0?n:null===n?1===i.length?i[0]:p.a.zi(i):p.a.zi([n].concat(i))},t.prototype.Hi=function(t,e){var n=t[e];n&&n.apply(this)},t.prototype.ji=function(t,e,n){this.ti=null,this.Ci=null,this.currentStyle=n,this.Kn="",this.qn="",this.$n="",this.Wn="",this.Vn=t,this.Oi="",this.Ii=zt,this.Li=e,this.Xi()},t.prototype.Vi=function(t,e){this.counters[t]?this.counters[t].push(e):this.counters[t]=[e];var n=this.Pi[this.Pi.length-1];n||(n={},this.Pi[this.Pi.length-1]=n),n[t]=!0},t.prototype.Yi=function(t){var e=a.t.inline,n=t.display;n&&(e=n.evaluate(this.context));var i=null,r=null,s=null,l=t["counter-reset"];if(l){var h=l.evaluate(this.context);h&&(i=u.b(h,!0))}var c=t["counter-set"];if(c){var p=c.evaluate(this.context);p&&(s=u.b(p,!1))}var f=t["counter-increment"];if(f){var d=f.evaluate(this.context);d&&(r=u.b(d,!1))}if("ol"!=this.qn&&"ul"!=this.qn||this.Kn!=o.a.XHTML||(i||(i={}),i["ua-list-item"]=0),e===a.t.list_item&&(r||(r={}),r["ua-list-item"]=1),i)for(var v in i)this.Vi(v,i[v]);if(s)for(var g in s)this.counters[g]?(y=this.counters[g])[y.length-1]=s[g]:this.Vi(g,s[g]);if(r)for(var m in r){var y;this.counters[m]||this.Vi(m,0),(y=this.counters[m])[y.length-1]+=r[m]}if(e===a.t.list_item){var b=this.counters["ua-list-item"],E=b[b.length-1];t["ua-list-item-count"]=new I(new a.h(E),0)}this.Pi.push(null)},t.prototype.$i=function(){var t=this.Pi.pop();if(t)for(var e in t){var n=this.counters[e];n&&(1==n.length?delete this.counters[e]:n.pop())}},t.prototype.di=function(t,e){this.Yi(t),t.content&&(t.content=t.content.Ln(new kt(this,e,this.wi))),this.$i()},t.prototype.Wi=function(t,e,n){var i=this;this.Li=null,this.ti=t,this.Ci=n,this.currentStyle=e,this.Kn=t.namespaceURI,this.qn=t.localName;var r=this.code.Zn[this.Kn];this.Oi=r?r+this.qn:"",this.$n=t.getAttribute("id"),this.Wn=t.getAttributeNS(o.a.XML,"id");var s=t.getAttribute("class");this.Vn=s?s.split(/\s+/):zt;var u=t.getAttributeNS(o.a.epub,"type");if(this.Ii=u?u.split(/\s+/):zt,"style"==this.qn&&this.Kn==o.a.FB2){var l=t.getAttribute("name")||"";this.Vn=[l]}var h=o.u(t);h&&(this.stack[this.stack.length-1].push(new xt(this.lang)),this.lang=h.toLowerCase());var c=this.ri,p=this.Fi;this.si=++p[p.length-1],p.push(0);var f=this.Di,d=this.oi=f[f.length-1],v=d[this.Kn];v||(v=d[this.Kn]={}),v[this.qn]=(v[this.qn]||0)+1,f.push({});var g=this.Gi;null!==g[g.length-1]?this.ui=--g[g.length-1]:this.ui=null,g.push(null);var m=this.Mi,y=this.hi=m[m.length-1];y&&y[this.Kn]&&y[this.Kn][this.qn]--,m.push({}),this.Xi(),this.qi(t);var b=e.quotes,E=null;if(b){var w=b.evaluate(this.context);w&&(E=new Ct(this.quotes),w===a.t.none?this.quotes=[new a.k(""),new a.k("")]:w instanceof a.j&&(this.quotes=w.values))}this.Yi(this.currentStyle);var T=this.$n||this.Wn||t.getAttribute("name")||"";if(c||T){var N={};Object.keys(this.counters).forEach(function(t){N[t]=Array.from(i.counters[t])}),this.Ri.Ki(T,N)}var S=M(this.currentStyle,"_pseudos");if(S)for(var _=!0,A=0,I=Ht;A<I.length;A++){var x=I[A];x||(_=!1);var C=S[x];C&&(_?this.di(C,t):this.stack[this.stack.length-2].push(new It(C,t)))}E&&this.stack[this.stack.length-2].push(E)},t.prototype.Zi=function(t,e){for(var n in e)L(n)&&(e[n]=e[n].Ln(t))},t.prototype.qi=function(t){var e=new Ot(t),n=this.currentStyle,i=M(n,"_pseudos");for(var r in i)this.Zi(e,i[r]);this.Zi(e,n)},t.prototype.Xi=function(){var t;for(t=0;t<this.Vn.length;t++)this.Hi(this.code.classes,this.Vn[t]);for(t=0;t<this.Ii.length;t++)this.Hi(this.code.epubtypes,this.Ii[t]);this.Hi(this.code.ids,this.$n),this.Hi(this.code.tags,this.qn),""!=this.qn&&this.Hi(this.code.tags,"*"),this.Hi(this.code.nstags,this.Oi),null!==this.Li&&(this.Hi(this.code.pagetypes,this.Li),this.Hi(this.code.pagetypes,"*")),this.ti=null,this.Qi=null,this.stack.push([]);for(var e=1;e>=-1;--e){var n=this.stack[this.stack.length-e-2];for(t=0;t<n.length;)n[t].push(this,e)?n.splice(t,1):t++}this.ii=!0,this.ri=!1},t.prototype.pop=function(){for(var t=1;t>=-1;--t)for(var e=this.stack[this.stack.length-t-2],n=0;n<e.length;)e[n].pop(this,t)?e.splice(n,1):n++;this.stack.pop(),this.ii=!1},t.prototype.Ji=function(){this.pop()},t.prototype.nr=function(t){this.Fi.pop(),this.Di.pop(),this.Gi.pop(),this.Mi.pop(),this.pop(),this.$i()},t}(),zt=[],Ht=["before","transclusion-before","footnote-call","footnote-marker","inner","first-letter","first-line","","transclusion-after","after"];!function(t){t[t.TOP=0]="TOP",t[t.SELECTOR=1]="SELECTOR",t[t.RULE=2]="RULE"}(Ft||(Ft={}));var Gt=null;function Vt(t){Gt=t}var Xt=function(t){function e(e,n,i,r,o,a,s){var u=t.call(this,e,n,s)||this;return u.condition=i,u.regionId=o,u.ir=a,u.chain=null,u.specificity=0,u.rr=null,u.er=0,u.pseudoelement=null,u.sr=!1,u.Hn=null,u.cascade=r?r.cascade:Gt?Gt.clone():new Ut,u.state=Ft.TOP,u}return d(e,t),e.prototype.or=function(t){this.cascade.Yn(this.cascade.tags,"*",t)},e.prototype.ur=function(t){var e=V(this.chain,t);e!==t&&e.Xn(this.cascade)||this.or(e)},e.prototype.hr=function(t){return this.state!=Ft.TOP&&(this.ar(t),!0)},e.prototype.cr=function(t,e){(e||t)&&(this.specificity+=1,e&&t?this.chain.push(new tt(t,e.toLowerCase())):e?this.chain.push(new J(e.toLowerCase())):this.chain.push(new nt(t)))},e.prototype.lr=function(t){if(this.pseudoelement)return c.b.warn("::"+this.pseudoelement,"followed by ."+t),void this.chain.push(new bt(""));this.specificity+=256,this.chain.push(new Z(t))},e.prototype.vr=function(t,e){if(this.pseudoelement)return c.b.warn("::"+this.pseudoelement,"followed by :"+t),void this.chain.push(new bt(""));switch(t.toLowerCase()){case"enabled":this.chain.push(new gt);break;case"disabled":this.chain.push(new mt);break;case"checked":this.chain.push(new yt);break;case"root":this.chain.push(new lt);break;case"link":this.chain.push(new J("a")),this.chain.push(new it("","href"));break;case"-adapt-href-epub-type":case"href-epub-type":if(e&&1==e.length&&"string"==typeof e[0]){var n=e[0],i=new RegExp("(^|s)"+o.s(n)+"($|s)");this.chain.push(new et(i))}else this.chain.push(new bt(""));break;case"-adapt-footnote-content":case"footnote-content":this.sr=!0;break;case"visited":case"active":case"hover":case"focus":this.chain.push(new bt(""));break;case"lang":if(e&&1==e.length&&"string"==typeof e[0]){var r=e[0];this.chain.push(new st(new RegExp("^"+o.s(r.toLowerCase())+"($|-)")))}else this.chain.push(new bt(""));break;case"nth-child":case"nth-last-child":case"nth-of-type":case"nth-last-of-type":var a=jt[t.toLowerCase()];e&&2==e.length?this.chain.push(new a(e[0],e[1])):this.chain.push(new bt(""));break;case"first-child":this.chain.push(new ut);break;case"last-child":this.chain.push(new ft(0,1));break;case"first-of-type":this.chain.push(new pt(0,1));break;case"last-of-type":this.chain.push(new dt(0,1));break;case"only-child":this.chain.push(new ut),this.chain.push(new ft(0,1));break;case"only-of-type":this.chain.push(new pt(0,1)),this.chain.push(new dt(0,1));break;case"empty":this.chain.push(new vt);break;case"before":case"after":case"first-line":case"first-letter":return void this.dr(t,e);default:c.b.warn("unknown pseudo-class selector: "+t),this.chain.push(new bt(""))}this.specificity+=256},e.prototype.dr=function(t,e){switch(t){case"before":case"after":case"first-line":case"first-letter":case"footnote-call":case"footnote-marker":case"inner":case"after-if-continues":this.pseudoelement?(c.b.warn("Double pseudoelement ::"+this.pseudoelement+"::"+t),this.chain.push(new bt(""))):this.pseudoelement=t;break;case"first-n-lines":if(e&&1==e.length&&"number"==typeof e[0]){var n=Math.round(e[0]);if(n>0&&n==e[0]){this.pseudoelement?(c.b.warn("Double pseudoelement ::"+this.pseudoelement+"::"+t),this.chain.push(new bt(""))):this.pseudoelement="first-"+n+"-lines";break}}this.chain.push(new bt(""));break;case"nth-fragment":e&&2==e.length?this.Hn="NFS_"+e[0]+"_"+e[1]:this.chain.push(new bt(""));break;default:c.b.warn("Unrecognized pseudoelement: ::"+t),this.chain.push(new bt(""))}this.specificity+=1},e.prototype.pr=function(t){this.specificity+=65536,this.chain.push(new Q(t))},e.prototype.br=function(t,e,n,i){var r;switch(this.specificity+=256,e=e.toLowerCase(),i=i||"",n){case l.a.EOF:r=new it(t,e);break;case l.a.EQ:r=new rt(t,e,i);break;case l.a.TILDE_EQ:r=!i||i.match(/\s/)?new bt(""):new at(t,e,new RegExp("(^|\\s)"+o.s(i)+"($|\\s)"));break;case l.a.BAR_EQ:r=new at(t,e,new RegExp("^"+o.s(i)+"($|-)"));break;case l.a.HAT_EQ:r=i?new at(t,e,new RegExp("^"+o.s(i))):new bt("");break;case l.a.DOLLAR_EQ:r=i?new at(t,e,new RegExp(o.s(i)+"$")):new bt("");break;case l.a.STAR_EQ:r=i?new at(t,e,new RegExp(o.s(i))):new bt("");break;case l.a.COL_COL:"supported"==i?r=new ot(t,e):(c.b.warn("Unsupported :: attr selector op:",i),r=new bt(""));break;default:c.b.warn("Unsupported attr selector:",n),r=new bt("")}this.chain.push(r)},e.prototype.wr=function(){var t="d"+Wt++;this.ur(new Y(new Nt(t,this.Hn,null))),this.chain=[new bt(t)],this.Hn=null},e.prototype.mr=function(){var t="c"+Wt++;this.ur(new Y(new St(t,this.Hn,null))),this.chain=[new bt(t)],this.Hn=null},e.prototype.gr=function(){var t="a"+Wt++;this.ur(new Y(new _t(t,this.Hn,null))),this.chain=[new bt(t)],this.Hn=null},e.prototype.Er=function(){var t="f"+Wt++;this.ur(new Y(new At(t,this.Hn,null))),this.chain=[new bt(t)],this.Hn=null},e.prototype.kr=function(){this._r(),this.pseudoelement=null,this.sr=!1,this.specificity=0,this.chain=[]},e.prototype.xr=function(){this.hr("E_CSS_UNEXPECTED_SELECTOR")||(this.state=Ft.SELECTOR,this.rr={},this.pseudoelement=null,this.specificity=0,this.sr=!1,this.chain=[])},e.prototype.error=function(e,n){t.prototype.error.call(this,e,n),this.state==Ft.SELECTOR&&(this.state=Ft.TOP)},e.prototype.yr=function(e){t.prototype.yr.call(this,e),this.state=Ft.TOP},e.prototype.Tr=function(){this._r(),t.prototype.Tr.call(this),this.state==Ft.SELECTOR&&(this.state=Ft.TOP)},e.prototype.Nr=function(){t.prototype.Nr.call(this),this.Sr=Ft.TOP},e.prototype._r=function(){if(this.chain){var t=this.specificity+this.cascade.Ai();this.ur(this.Ar(t)),this.chain=null,this.pseudoelement=null,this.Hn=null,this.sr=!1,this.specificity=0}},e.prototype.Ar=function(t){var e=this.regionId;return this.sr&&(e=e?"xxx-bogus-xxx":"footnote"),new $(this.rr,t,this.pseudoelement,e,this.Hn)},e.prototype.special=function(t,e){var n;n=this.condition?new x(e,0,this.condition):new I(e,0),z(this.rr,t).push(n)},e.prototype.property=function(t,e,n){this.ir.Rr(t,e,n,this)},e.prototype.Cr=function(t,e){this.report("E_INVALID_PROPERTY_VALUE "+t+": "+e.toString())},e.prototype.Or=function(t,e){this.report("E_INVALID_PROPERTY "+t+": "+e.toString())},e.prototype.Ir=function(t,e,n){"display"!=t||e!==a.t.oeb_page_head&&e!==a.t.oeb_page_foot||(this.Ir("flow-options",new a.j([a.t.exclusive,a.t._static]),n),this.Ir("flow-into",e,n),e=a.t.block),f.b("SIMPLE_PROPERTY").forEach(function(i){var r=i({name:t,value:e,important:n});t=r.name,e=r.value,n=r.important});var i=n?this.Lr():this.Pr(),r=this.condition?new x(e,i,this.condition):new I(e,i);P(this.rr,t,r)},e.prototype.finish=function(){return this.cascade},e.prototype.Fr=function(t){switch(t){case"not":var e=new Yt(this);e.xr(),this.owner.Dr(e)}},e}(s.f),jt={"nth-child":ct,"nth-of-type":pt,"nth-last-child":ft,"nth-last-of-type":dt},Wt=0,Yt=function(t){function e(e){var n=t.call(this,e.scope,e.owner,e.condition,e,e.regionId,e.ir,!1)||this;return n.parent=e,n.Mr=e.chain,n}return d(e,t),e.prototype.Fr=function(t){"not"==t&&this.ar("E_CSS_UNEXPECTED_NOT")},e.prototype.Tr=function(){this.ar("E_CSS_UNEXPECTED_RULE_BODY")},e.prototype.kr=function(){this.ar("E_CSS_UNEXPECTED_NEXT_SELECTOR")},e.prototype.Ur=function(){this.chain&&this.chain.length>0&&this.Mr.push(new wt(this.chain)),this.parent.specificity+=this.specificity,this.owner.Gr()},e.prototype.error=function(e,n){t.prototype.error.call(this,e,n),this.owner.Gr()},e}(Xt),Kt=function(t){function e(e,n){return t.call(this,e,n,!1)||this}return d(e,t),e.prototype.property=function(t,e,n){if(this.scope.values[t])this.error("E_CSS_NAME_REDEFINED "+t,this.Br());else{var i=t.match(/height|^(top|bottom)$/)?"vh":"vw",r=new h.x(this.scope,100,i);this.scope.Qt(t,e.et(this.scope,r))}},e}(s.f),$t=function(t){function e(e,n,i,r,o){var a=t.call(this,e,n,!1)||this;return a.condition=i,a.rr=r,a.ir=o,a.order=0,a}return d(e,t),e.prototype.property=function(t,e,n){n?c.b.warn("E_IMPORTANT_NOT_ALLOWED"):this.ir.Rr(t,e,n,this)},e.prototype.Cr=function(t,e){c.b.warn("E_INVALID_PROPERTY_VALUE",t+":",e.toString())},e.prototype.Or=function(t,e){c.b.warn("E_INVALID_PROPERTY",t+":",e.toString())},e.prototype.Ir=function(t,e,n){var i=n?this.Lr():this.Pr();i+=this.order,this.order+=1/1048576;var r=this.condition?new x(e,i,this.condition):new I(e,i);P(this.rr,t,r)},e}(s.f),qt=function(t){function e(e,n){var i=t.call(this,e)||this;return i.ir=n,i.rr={},i.order=0,i}return d(e,t),e.prototype.property=function(t,e,n){this.ir.Rr(t,e,n,this)},e.prototype.Cr=function(t,e){c.b.warn("E_INVALID_PROPERTY_VALUE",t+":",e.toString())},e.prototype.Or=function(t,e){c.b.warn("E_INVALID_PROPERTY",t+":",e.toString())},e.prototype.Ir=function(t,e,n){var i=n?s.e:s.d;i+=this.order,this.order+=1/1048576;var r=new I(e,i);P(this.rr,t,r)},e}(s.b);function Zt(t,e){var n=U(t);n&&n.forEach(function(t){t.matcher.matches()&&e(t.styles)})}function Qt(t,e,n){Zt(n,function(n){re(t,n,e)})}function Jt(t,e,n,i){var r=new qt(t,e),o=new l.b(i,r);try{s.j(o,r,n)}catch(t){c.b.warn(t,"Style attribute parse error:")}return r.rr}function te(t,e,n){var i=t["writing-mode"];if(i){var r=i.evaluate(e,"writing-mode");if(r&&r!==a.t.inherit)return r===a.t.vertical_rl}return n}function ee(t,e,n){var i=t.direction;if(i){var r=i.evaluate(e,"direction");if(r&&r!==a.t.inherit)return r===a.t.rtl}return n}function ne(t,e,n,i,r){var o={};for(var a in t)L(a)&&(o[a]=R(t,a));return Qt(o,e,t),ie(t,n,i,function(t,n){re(o,n,e),Qt(o,e,n)}),o}function ie(t,e,n,i){var r=M(t,"_regions");if((e||n)&&r){if(n){var o=["footnote"];e=e?e.concat(o):o}for(var a=0,s=e;a<s.length;a++){var u=s[a],l=r[u];l&&i(u,l)}}}function re(t,e,n){for(var i in e)if(L(i)){var r=R(e,i),o=t[i];t[i]=C(n,o,r)}}var oe=function(t,e,n,i,r){var o=n?i?_:N:i?A:S;for(var a in t)if(t.hasOwnProperty(a)){var s=t[a];if(!s)continue;var u=o[a],l=void 0;if(u){var h=t[u];if(h&&h.priority>s.priority)continue;l=w[u]?u:a}else l=a;e[l]=r(a,s)}}},function(t,e,n){"use strict";var i;function r(t){var e=Array.from(t),n=null;return e[0]instanceof Error&&(n=e.shift()),{error:n,messages:e}}function o(t){var e=t.error,n=e&&(e.frameTrace||e.stack),i=[].concat(t.messages);return e&&(i.length>0&&(i=i.concat(["\n"])),i=i.concat([e.toString()]),n&&(i=i.concat(["\n"]).concat(n))),i}n.d(e,"a",function(){return i}),n.d(e,"b",function(){return a}),function(t){t[t.DEBUG=1]="DEBUG",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR"}(i||(i={}));var a=new(function(){function t(t){this.opt_console=t,this.listeners={}}return t.prototype.zr=function(t){var e,n;this.opt_console?this.opt_console.debug?(e=this.opt_console).debug.apply(e,t):(n=this.opt_console).log.apply(n,t):console.debug.apply(console,t)},t.prototype.Hr=function(t){var e,n;this.opt_console?this.opt_console.info?(e=this.opt_console).info.apply(e,t):(n=this.opt_console).log.apply(n,t):console.info.apply(console,t)},t.prototype.jr=function(t){var e,n;this.opt_console?this.opt_console.warn?(e=this.opt_console).warn.apply(e,t):(n=this.opt_console).log.apply(n,t):console.warn.apply(console,t)},t.prototype.Xr=function(t){var e,n;this.opt_console?this.opt_console.error?(e=this.opt_console).error.apply(e,t):(n=this.opt_console).log.apply(n,t):console.error.apply(console,t)},t.prototype.Vr=function(t,e){var n=this.listeners[t];n&&n.forEach(function(t){t(e)})},t.prototype.addListener=function(t,e){var n=this.listeners[t];n||(n=this.listeners[t]=[]),n.push(e)},t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=r(arguments);this.zr(o(n)),this.Vr(i.DEBUG,n)},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=r(arguments);this.Hr(o(n)),this.Vr(i.INFO,n)},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=r(arguments);this.jr(o(n)),this.Vr(i.WARN,n)},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=r(arguments);this.Xr(o(n)),this.Vr(i.ERROR,n)},t}())},function(t,e,n){"use strict";function i(t){}function r(t){}n.d(e,"a",function(){return i}),n.d(e,"b",function(){return r})},function(t,e,n){"use strict";n.d(e,"s",function(){return v}),n.d(e,"t",function(){return g}),n.d(e,"d",function(){return m}),n.d(e,"l",function(){return E}),n.d(e,"m",function(){return w}),n.d(e,"z",function(){return N}),n.d(e,"p",function(){return S}),n.d(e,"f",function(){return _}),n.d(e,"g",function(){return A}),n.d(e,"r",function(){return I}),n.d(e,"q",function(){return x}),n.d(e,"u",function(){return O}),n.d(e,"w",function(){return k}),n.d(e,"x",function(){return L}),n.d(e,"v",function(){return D}),n.d(e,"o",function(){return R}),n.d(e,"n",function(){return P}),n.d(e,"e",function(){return F}),n.d(e,"k",function(){return U}),n.d(e,"a",function(){return B}),n.d(e,"h",function(){return z}),n.d(e,"i",function(){return H}),n.d(e,"j",function(){return G}),n.d(e,"b",function(){return V}),n.d(e,"c",function(){return X}),n.d(e,"y",function(){return j});var i,r=n(7),o=n(1),a=n(0),s=n(10),u=n(20),l=n(2),h=n(27),c=n(4),p=n(11),f=n(15),d=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),v={transform:!0,"transform-origin":!0},g={top:!0,bottom:!0,left:!0,right:!0},m=function(t,e,n){this.target=t,this.name=e,this.value=n},y={show:function(t){t.style.visibility="visible"},hide:function(t){t.style.visibility="hidden"},play:function(t){t.currentTime=0,t.play()},pause:function(t){t.pause()},resume:function(t){t.play()},mute:function(t){t.muted=!0},unmute:function(t){t.muted=!1}};function b(t,e){var n=y[e];return n?function(){for(var e=0;e<t.length;e++)try{n(t[e])}catch(t){}}:null}var E=function(t){function e(e,n){var i=t.call(this)||this;i.container=e,i.Yr=n,i.$r=null,i.Wr=[],i.qr={},i.dimensions={width:0,height:0},i.Kr=!1,i.Zr=!1,i.Qr=!0,i.Jr=!0,i.te=0,i.position=null,i.offset=-1,i.side=null,i.fetchers=[],i.ne={top:{},bottom:{},left:{},right:{}};var r=i;return i.ie=function(t){var e=t.currentTarget,n=e.getAttribute("href")||e.getAttributeNS(o.a.XLINK,"href");if(n){var i={type:"hyperlink",target:null,currentTarget:null,re:e,href:n,preventDefault:function(){t.preventDefault()}};r.dispatchEvent(i)}},i}return d(e,t),e.prototype.ee=function(t){this.Qr=t,t?this.container.setAttribute(e.AUTO_PAGE_WIDTH_ATTRIBUTE,"true"):this.container.removeAttribute(e.AUTO_PAGE_WIDTH_ATTRIBUTE)},e.prototype.se=function(t){this.Jr=t,t?this.container.setAttribute(e.AUTO_PAGE_HEIGHT_ATTRIBUTE,"true"):this.container.removeAttribute(e.AUTO_PAGE_HEIGHT_ATTRIBUTE)},e.prototype.oe=function(t,e){var n=this.qr[e];n?n.push(t):this.qr[e]=[t]},e.prototype.finish=function(t,e){var n=this;Object.keys(this.qr).forEach(function(t){for(var e=n.qr[t],i=0;i<e.length;)n.container.contains(e[i])?i++:e.splice(i,1);0===e.length&&delete n.qr[t]});for(var i=this.Wr,r=0;r<i.length;r++){var a=i[r];(a.target!==this.container||"transform"!==a.name||this.Qr||this.Jr)&&o.F(a.target,a.name,a.value.toString())}var s=e.ue(this.container);for(this.dimensions.width=s.width,this.dimensions.height=s.height,r=0;r<t.length;r++){var u=t[r],l=this.qr[u.ref],h=this.qr[u.observer];if(l&&h){var c=b(l,u.action);if(c)for(var p=0;p<h.length;p++)h[p].addEventListener(u.event,c,!1)}}},e.prototype.zoom=function(t){o.F(this.container,"transform","scale("+t+")")},e.prototype.he=function(){return this.$r||this.container},e.AUTO_PAGE_WIDTH_ATTRIBUTE="data-vivliostyle-auto-page-width",e.AUTO_PAGE_HEIGHT_ATTRIBUTE="data-vivliostyle-auto-page-height",e}(o.c),w="data-adapt-spec",T=f.f.Whitespace;function N(t){switch(t){case"normal":case"nowrap":return T.IGNORE;case"pre-line":return T.NEWLINE;case"pre":case"pre-wrap":return T.PRESERVE;default:return null}}function S(t,e){if(1==t.nodeType)return!1;var n=t.textContent;switch(e){case T.IGNORE:return!!n.match(/^\s*$/);case T.NEWLINE:return!!n.match(/^[ \t\f]*$/);case T.PRESERVE:return 0==n.length}throw new Error("Unexpected whitespace: "+e)}var _=function(t,e){this.ae=t,this.fe=e,this.ce=[],this.le=null},A=function(){function t(t,e,n,i,r,o,a,s,u){this.ae=t,this.element=e,this.startOffset=n,this.priority=i,this.linger=r,this.exclusive=o,this.repeated=a,this.last=s,this.breakBefore=u,this.startPage=-1}return t.prototype.ve=function(t){return!!this.exclusive&&(!t.exclusive||this.priority>t.priority||this.last)},t}();function I(t,e){return t.top-e.top}function x(t,e){return e.right-t.right}function C(t,e){return t===e||!(!t||!e)&&t.node===e.node&&t.de===e.de&&M(t.pe,e.pe)&&M(t.be,e.be)&&C(t.we,e.we)}function O(t,e){if(t===e)return!0;if(!t||!e)return!1;if(t.me!==e.me||t.after!==e.after||t.steps.length!==e.steps.length)return!1;for(var n=0;n<t.steps.length;n++)if(!C(t.steps[n],e.steps[n]))return!1;return!0}function k(t){return{steps:[{node:t,de:R.NONE,pe:null,be:null,we:null,le:null,ge:0}],me:0,after:!1,Ee:null}}function L(t,e){return{steps:[{node:t.ke,de:R.NONE,pe:t.pe,be:null,we:null,le:null,ge:null!=e?e:t.ge}],me:0,after:!1,Ee:t.Ee}}function D(t,e){var n=new U(t.node,e,0);return n.de=t.de,n.pe=t.pe,n.be=t.be,n.we=t.we?D(t.we,e.copy()):null,n.le=t.le,n.ge=t.ge+1,n}var R=f.f.ShadowType,P=function(){function t(t,e,n,i,r,o,a){this.owner=t,this.root=e,this.xmldoc=n,this._e=i,this.type=o,this.styler=a,this.xe=null,r&&(r.xe=this)}return t.prototype.equals=function(t){return!!t&&this.owner===t.owner&&this.xmldoc===t.xmldoc&&this.type===t.type&&M(this._e,t._e)},t}();function M(t,e){return t===e||!!t&&!!e&&t.equals(e)}var F=function(t,e){this.outer=t,this.count=e},U=function(){function t(t,e,n){this.ke=t,this.parent=e,this.ye=n,this.me=0,this.after=!1,this.be=null,this.we=null,this.shared=!1,this.inline=!0,this.overflow=!1,this.display=null,this.Te=null,this.Ne=null,this.Se=null,this.columnSpan=null,this.verticalAlign="baseline",this.captionSide="top",this.Ae=0,this.Re=0,this.Ce=!1,this.Oe=!1,this.Ie=!1,this.breakBefore=null,this.breakAfter=null,this.Le=null,this.Pe=null,this.lang=null,this.Ee=null,this.Fe=null,this.De={},this.ge=1,this.Me=null,this.Ue=null,this.de=R.NONE,this.pe=e?e.pe:null,this.Ge=e?e.Ge:0,this.Be=f.b.FloatReference.INLINE,this.whitespace=e?e.whitespace:T.IGNORE,this.ze=e?e.ze:null,this.He=!!e&&e.He,this.je=e?e.je:{},this.vertical=!!e&&e.vertical,this.direction=e?e.direction:"ltr",this.Xe=e?e.Xe:null,this.le=e?e.le:null}return t.prototype.Ve=function(){this.inline=!0,this.Ge=this.parent?this.parent.Ge:0,this.Le=null,this.Pe=null,this.me=0,this.after=!1,this.display=null,this.Be=f.b.FloatReference.INLINE,this.Te=null,this.Ne=null,this.Se=null,this.columnSpan=null,this.verticalAlign="baseline",this.Ce=!1,this.whitespace=this.parent?this.parent.whitespace:T.IGNORE,this.ze=this.parent?this.parent.ze:null,this.He=!!this.parent&&this.parent.He,this.breakBefore=null,this.breakAfter=null,this.be=null,this.Oe=!1,this.Ie=!1,this.vertical=!!this.parent&&this.parent.vertical,this.be=null,this.Ee=null,this.le=this.parent?this.parent.le:null,this.Fe=null,this.De={},this.ge=1,this.Me=null,this.Ue=null},t.prototype.Ye=function(){var e=new t(this.ke,this.parent,this.ye);return e.me=this.me,e.after=this.after,e.be=this.be,e.de=this.de,e.pe=this.pe,e.we=this.we,e.inline=this.inline,e.Ge=this.Ge,e.display=this.display,e.Be=this.Be,e.Te=this.Te,e.Ne=this.Ne,e.Se=this.Se,e.columnSpan=this.columnSpan,e.verticalAlign=this.verticalAlign,e.captionSide=this.captionSide,e.Ae=this.Ae,e.Re=this.Re,e.Oe=this.Oe,e.Ie=this.Ie,e.Ce=this.Ce,e.whitespace=this.whitespace,e.ze=this.ze,e.He=this.He,e.breakBefore=this.breakBefore,e.breakAfter=this.breakAfter,e.Le=this.Le,e.Pe=this.Pe,e.Xe=this.Xe,e.vertical=this.vertical,e.overflow=this.overflow,e.Ee=this.Ee,e.le=this.le,e.Fe=this.Fe,e.De=Object.create(this.De),e.ge=this.ge,e.Me=this.Me,e.Ue=this.Ue,e},t.prototype.modify=function(){return this.shared?this.Ye():this},t.prototype.copy=function(){var t=this;do{if(t.shared)break;t.shared=!0,t=t.parent}while(t);return this},t.prototype.clone=function(){for(var t,e=this.Ye(),n=e;null!=(t=n.parent);)t=t.Ye(),n.parent=t,n=t;return e},t.prototype.$e=function(){return{node:this.ke,de:this.de,pe:this.pe,be:this.be,we:this.we?this.we.$e():null,le:this.le,ge:this.ge}},t.prototype.We=function(){var t=this,e=[];do{t.Xe&&t.parent&&t.parent.Xe!==t.Xe||e.push(t.$e()),t=t.parent}while(t);return{steps:e,me:this.Ee?h.c(this.Ee,this.me):this.me,after:this.after,Ee:this.Ee}},t.prototype.qe=function(){for(var t=this.parent;t;){if(t.Oe)return!0;t=t.parent}return!1},t.prototype.Ke=function(){for(var t=this.parent;t;){if(t.Ie)return t;t=t.parent}return null},t.prototype.Ze=function(t){for(var e=this;e;)e.inline||t(e),e=e.parent},t.prototype.Qe=function(t){return this.le===t&&!!this.parent&&this.parent.le===t},t}(),B=function(){function t(t){this.primary=t,this.floats=null}return t.prototype.clone=function(){var e=new t(this.primary);if(this.floats){e.floats=[];for(var n=0;n<this.floats.length;++n)e.floats[n]=this.floats[n]}return e},t.prototype.Je=function(t){if(!t)return!1;if(this===t)return!0;if(!O(this.primary,t.primary))return!1;if(this.floats){if(!t.floats||this.floats.length!==t.floats.length)return!1;for(var e=0;e<this.floats.length;e++)if(!O(this.floats[e],t.floats[e]))return!1}else if(t.floats)return!1;return!0},t}(),z=function(){function t(t,e){this.ts=t,this.rs=e}return t.prototype.clone=function(){return new t(this.ts.clone(),this.rs)},t.prototype.Je=function(t){return!!t&&(this===t||this.ts.Je(t.ts))},t}(),H=function(){function t(){this.positions=[],this.es="any",this.breakAfter=null}return t.prototype.clone=function(){for(var e=new t,n=this.positions,i=e.positions,r=0;r<n.length;r++)i[r]=n[r].clone();return e.es=this.es,e.breakAfter=this.breakAfter,e},t.prototype.Je=function(t){if(this===t)return!0;if(!t||this.positions.length!==t.positions.length)return!1;for(var e=0;e<this.positions.length;e++)if(!this.positions[e].Je(t.positions[e]))return!1;return!0},t.prototype.ss=function(t){return this.positions.length>0&&this.positions[0].rs.startOffset<=t},t}(),G=function(){function t(){this.page=0,this.flows={},this.os={},this.us=0}return t.prototype.clone=function(){var e=new t;for(var n in e.page=this.page,e.hs=this.hs,e.us=this.us,e.as=this.as,e.flows=this.flows,this.os)e.os[n]=this.os[n].clone();return e},t.prototype.Je=function(t){if(this===t)return!0;if(!t||this.page!==t.page||this.us!==t.us)return!1;var e=Object.keys(this.os),n=Object.keys(t.os);if(e.length!==n.length)return!1;for(var i=0,r=e;i<r.length;i++){var o=r[i];if(!this.os[o].Je(t.os[o]))return!1}return!0},t.prototype.ss=function(t,e){var n=this.os[t];return!!n&&n.ss(e)},t.prototype.fs=function(t){var e=this.os[t];return e?e.es:"any"},t.prototype.cs=function(t){var e=this.os[t];if(!e)return null;var n=e.positions[0];return n?n.rs:null},t}(),V=function(){function t(t){this.element=t,this.left=0,this.top=0,this.marginLeft=0,this.marginRight=0,this.marginTop=0,this.marginBottom=0,this.borderLeft=0,this.borderRight=0,this.borderTop=0,this.borderBottom=0,this.paddingLeft=0,this.paddingRight=0,this.paddingTop=0,this.paddingBottom=0,this.width=0,this.height=0,this.ls=0,this.vs=0,this.exclusions=null,this.ds=null,this.ps=0,this.bs=0,this.ws=0,this.gs=0,this.Es=0,this.vertical=!1}return t.prototype.ks=function(){return this.marginTop+this.borderTop+this.paddingTop},t.prototype._s=function(){return this.marginBottom+this.borderBottom+this.paddingBottom},t.prototype.xs=function(){return this.marginLeft+this.borderLeft+this.paddingLeft},t.prototype.ys=function(){return this.marginRight+this.borderRight+this.paddingRight},t.prototype.Ts=function(){return this.vertical?this.ys():this.ks()},t.prototype.Ns=function(){return this.vertical?this.xs():this._s()},t.prototype.Ss=function(){return this.vertical?this.ks():this.xs()},t.prototype.As=function(){return this.vertical?this._s():this.ys()},t.prototype.Rs=function(t){return this.vertical?t.right:t.top},t.prototype.Cs=function(t){return this.vertical?t.left:t.bottom},t.prototype.Os=function(t){return this.vertical?t.top:t.left},t.prototype.Is=function(t){return this.vertical?t.bottom:t.right},t.prototype.Ls=function(t){return this.vertical?t.bottom-t.top:t.right-t.left},t.prototype.Ps=function(t){return this.vertical?t.right-t.left:t.bottom-t.top},t.prototype.Fs=function(){return this.vertical?-1:1},t.prototype.Ds=function(){return 1},t.prototype.Ms=function(t){this.element=t.element,this.left=t.left,this.top=t.top,this.marginLeft=t.marginLeft,this.marginRight=t.marginRight,this.marginTop=t.marginTop,this.marginBottom=t.marginBottom,this.borderLeft=t.borderLeft,this.borderRight=t.borderRight,this.borderTop=t.borderTop,this.borderBottom=t.borderBottom,this.paddingLeft=t.paddingLeft,this.paddingRight=t.paddingRight,this.paddingTop=t.paddingTop,this.paddingBottom=t.paddingBottom,this.width=t.width,this.height=t.height,this.ls=t.ls,this.vs=t.vs,this.ds=t.ds,this.exclusions=t.exclusions,this.ps=t.ps,this.bs=t.bs,this.ws=t.ws,this.vertical=t.vertical},t.prototype.Us=function(t,e){this.top=t,this.height=e,o.F(this.element,"top",t+"px"),o.F(this.element,"height",e+"px")},t.prototype.Gs=function(t,e){this.left=t,this.width=e,o.F(this.element,"left",t+"px"),o.F(this.element,"width",e+"px")},t.prototype.Bs=function(t,e){this.vertical?this.Gs(t+e*this.Fs(),e):this.Us(t,e)},t.prototype.zs=function(t,e){this.vertical?this.Us(t,e):this.Gs(t,e)},t.prototype.clear=function(){for(var t,e=this.element;t=e.lastChild;)e.removeChild(t)},t.prototype.Hs=function(){var t=this.js();return this.ds?this.ds.Xs(t.x1,t.y1):p.k(t.x1,t.y1,t.x2,t.y2)},t.prototype.js=function(){var t=this.ls+this.left+this.xs(),e=this.vs+this.top+this.ks();return new p.c(t,e,t+this.width,e+this.height)},t.prototype.Vs=function(){var t=this.ls+this.left+this.marginLeft+this.borderLeft,e=this.vs+this.top+this.marginTop+this.borderTop,n=this.paddingLeft+this.width+this.paddingRight,i=this.paddingTop+this.height+this.paddingBottom;return new p.c(t,e,t+n,e+i)},t.prototype.Ys=function(t,e){var n=this.$s();return u.e(t,n.x1,n.y1,n.x2-n.x1,n.y2-n.y1,e)},t.prototype.$s=function(){var t=this.ls+this.left,e=this.vs+this.top,n=this.xs()+this.width+this.ys(),i=this.ks()+this.height+this._s();return new p.c(t,e,t+n,e+i)},t}(),X=function(t){function e(e,n,i,r){var o=t.call(this)||this;return o.elem=e,o.context=n,o.Ws=i,o.qs=r,o}return d(e,t),e.prototype.Ks=function(t,e){e||(e=this.elem.ownerDocument.createTextNode(t)),this.elem.appendChild(e)},e.prototype.R=function(t){return this.Ks(t.str),null},e.prototype.W=function(t){if(this.Ws.url)this.elem.setAttribute("src",t.url);else{var e=this.elem.ownerDocument.createElementNS(o.a.XHTML,"img");e.setAttribute("src",t.url),this.elem.appendChild(e)}return null},e.prototype.Z=function(t){return this._(t.values),null},e.prototype.it=function(t){var e=t.et(),n=e.evaluate(this.context);if("string"==typeof n){e instanceof c.s&&(n=s.m(e.scope,new l.b(n,null),"").stringValue()),r.a(this.elem.ownerDocument);var i=this.qs(e,n,this.elem.ownerDocument);this.Ks(n,i)}return null},e}(a.m);function j(t){return null!=t&&t!==a.t.normal&&t!==a.t.none&&t!==a.t.inherit}},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"d",function(){return a}),n.d(e,"b",function(){return s}),n.d(e,"c",function(){return u});var i,r=n(6);!function(t){t.SIMPLE_PROPERTY="SIMPLE_PROPERTY",t.PREPROCESS_SINGLE_DOCUMENT="PREPROCESS_SINGLE_DOCUMENT",t.PREPROCESS_TEXT_CONTENT="PREPROCESS_TEXT_CONTENT",t.PREPROCESS_ELEMENT_STYLE="PREPROCESS_ELEMENT_STYLE",t.POLYFILLED_INHERITED_PROPS="POLYFILLED_INHERITED_PROPS",t.CONFIGURATION="CONFIGURATION",t.RESOLVE_TEXT_NODE_BREAKER="RESOLVE_TEXT_NODE_BREAKER",t.RESOLVE_FORMATTING_CONTEXT="RESOLVE_FORMATTING_CONTEXT",t.RESOLVE_LAYOUT_PROCESSOR="RESOLVE_LAYOUT_PROCESSOR",t.POST_LAYOUT_BLOCK="POST_LAYOUT_BLOCK"}(i||(i={}));var o={};function a(t,e){if(i[t]){var n=o[t];n||(n=o[t]=[]),n.push(e)}else r.b.warn(new Error("Skipping unknown plugin hook '"+t+"'."))}function s(t){return o[t]||[]}var u={Zs:a,Qs:function(t,e){if(i[t]){var n=o[t];if(n){var a=n.indexOf(e);a>=0&&n.splice(a,1)}}else r.b.warn(new Error("Ignoring unknown plugin hook '"+t+"'."))}}},function(t,e,n){"use strict";n.d(e,"c",function(){return f}),n.d(e,"d",function(){return d}),n.d(e,"e",function(){return v}),n.d(e,"g",function(){return r}),n.d(e,"h",function(){return g}),n.d(e,"a",function(){return b}),n.d(e,"f",function(){return w}),n.d(e,"b",function(){return U}),n.d(e,"k",function(){return z}),n.d(e,"l",function(){return H}),n.d(e,"m",function(){return G}),n.d(e,"j",function(){return V}),n.d(e,"i",function(){return j});var i,r,o=n(1),a=n(0),s=n(2),u=n(4),l=n(6),h=n(16),c=n(3),p=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),f=33554432,d=50331648,v=67108864;function g(t){var e=parseInt(t,16);if(isNaN(e))throw new Error("E_CSS_COLOR");if(6==t.length)return new a.a(e);if(3==t.length)return e=15&e|(15&e)<<4|(240&e)<<4|(240&e)<<8|(3840&e)<<8|(3840&e)<<12,new a.a(e);throw new Error("E_CSS_COLOR")}!function(t){t.USER_AGENT="UA",t.USER="User",t.AUTHOR="Author"}(r||(r={}));var m,y=function(){function t(t){this.scope=t,this.flavor=r.AUTHOR}return t.prototype.Br=function(){return null},t.prototype.Js=function(){return this.scope},t.prototype.error=function(t,e){},t.prototype.yr=function(t){this.flavor=t},t.prototype.cr=function(t,e){},t.prototype.lr=function(t){},t.prototype.vr=function(t,e){},t.prototype.dr=function(t,e){},t.prototype.pr=function(t){},t.prototype.br=function(t,e,n,i){},t.prototype.wr=function(){},t.prototype.mr=function(){},t.prototype.gr=function(){},t.prototype.Er=function(){},t.prototype.kr=function(){},t.prototype.xr=function(){},t.prototype.no=function(){},t.prototype.io=function(t){},t.prototype.ro=function(){},t.prototype.eo=function(){},t.prototype.so=function(){},t.prototype.oo=function(){},t.prototype.uo=function(t){},t.prototype.ho=function(t){},t.prototype.ao=function(t){this.ho(t)},t.prototype.fo=function(t){},t.prototype.co=function(){},t.prototype.lo=function(t,e,n){},t.prototype.vo=function(t,e,n){},t.prototype.do=function(t,e,n){},t.prototype.Tr=function(){},t.prototype.property=function(t,e,n){},t.prototype.Nr=function(){},t.prototype.Fr=function(t){},t.prototype.Ur=function(){},t.prototype.Lr=function(){switch(this.flavor){case r.USER_AGENT:return 0;case r.USER:return 100663296;default:return 83886080}},t.prototype.Pr=function(){switch(this.flavor){case r.USER_AGENT:return 0;case r.USER:return 16777216;default:return f}},t}(),b=function(t){function e(){var e=t.call(this,null)||this;return e.stack=[],e.tokenizer=null,e.slave=null,e}return p(e,t),e.prototype.Dr=function(t){this.stack.push(this.slave),this.slave=t},e.prototype.Gr=function(){this.slave=this.stack.pop()},e.prototype.Br=function(){return this.tokenizer?this.tokenizer.token():null},e.prototype.Js=function(){return this.slave.Js()},e.prototype.error=function(t,e){this.slave.error(t,e)},e.prototype.po=function(t,e){l.b.warn(t)},e.prototype.yr=function(e){t.prototype.yr.call(this,e),this.stack.length>0&&(this.slave=this.stack[0],this.stack=[]),this.slave.yr(e)},e.prototype.cr=function(t,e){this.slave.cr(t,e)},e.prototype.lr=function(t){this.slave.lr(t)},e.prototype.vr=function(t,e){this.slave.vr(t,e)},e.prototype.dr=function(t,e){this.slave.dr(t,e)},e.prototype.pr=function(t){this.slave.pr(t)},e.prototype.br=function(t,e,n,i){this.slave.br(t,e,n,i)},e.prototype.wr=function(){this.slave.wr()},e.prototype.mr=function(){this.slave.mr()},e.prototype.gr=function(){this.slave.gr()},e.prototype.Er=function(){this.slave.Er()},e.prototype.kr=function(){this.slave.kr()},e.prototype.xr=function(){this.slave.xr()},e.prototype.no=function(){this.slave.no()},e.prototype.io=function(t){this.slave.io(t)},e.prototype.ro=function(){this.slave.ro()},e.prototype.eo=function(){this.slave.eo()},e.prototype.so=function(){this.slave.so()},e.prototype.oo=function(){this.slave.oo()},e.prototype.uo=function(t){this.slave.uo(t)},e.prototype.ho=function(t){this.slave.ho(t)},e.prototype.fo=function(t){this.slave.fo(t)},e.prototype.co=function(){this.slave.co()},e.prototype.lo=function(t,e,n){this.slave.lo(t,e,n)},e.prototype.vo=function(t,e,n){this.slave.vo(t,e,n)},e.prototype.do=function(t,e,n){this.slave.do(t,e,n)},e.prototype.Tr=function(){this.slave.Tr()},e.prototype.property=function(t,e,n){this.slave.property(t,e,n)},e.prototype.Nr=function(){this.slave.Nr()},e.prototype.Fr=function(t){this.slave.Fr(t)},e.prototype.Ur=function(){this.slave.Ur()},e}(y),E=function(t){function e(e,n,i){var r=t.call(this,e)||this;return r.owner=n,r.bo=i,r.depth=0,n&&(r.flavor=n.flavor),r}return p(e,t),e.prototype.Br=function(){return this.owner.Br()},e.prototype.error=function(t,e){this.owner.po(t,e)},e.prototype.Tr=function(){this.depth++},e.prototype.Nr=function(){0!=--this.depth||this.bo||this.owner.Gr()},e}(y),w=function(t){function e(e,n,i){return t.call(this,e,n,i)||this}return p(e,t),e.prototype.report=function(t){this.error(t,this.Br())},e.prototype.ar=function(t){this.report(t),this.owner.Dr(new E(this.scope,this.owner,!1))},e.prototype.xr=function(){this.ar("E_CSS_UNEXPECTED_SELECTOR")},e.prototype.no=function(){this.ar("E_CSS_UNEXPECTED_FONT_FACE")},e.prototype.io=function(t){this.ar("E_CSS_UNEXPECTED_FOOTNOTE")},e.prototype.ro=function(){this.ar("E_CSS_UNEXPECTED_VIEWPORT")},e.prototype.eo=function(){this.ar("E_CSS_UNEXPECTED_DEFINE")},e.prototype.so=function(){this.ar("E_CSS_UNEXPECTED_REGION")},e.prototype.oo=function(){this.ar("E_CSS_UNEXPECTED_PAGE")},e.prototype.ho=function(t){this.ar("E_CSS_UNEXPECTED_WHEN")},e.prototype.fo=function(t){this.ar("E_CSS_UNEXPECTED_FLOW")},e.prototype.co=function(){this.ar("E_CSS_UNEXPECTED_PAGE_TEMPLATE")},e.prototype.lo=function(t,e,n){this.ar("E_CSS_UNEXPECTED_PAGE_MASTER")},e.prototype.vo=function(t,e,n){this.ar("E_CSS_UNEXPECTED_PARTITION")},e.prototype.do=function(t,e,n){this.ar("E_CSS_UNEXPECTED_PARTITION_GROUP")},e.prototype.Fr=function(t){this.ar("E_CSS_UNEXPECTED_SELECTOR_FUNC")},e.prototype.Ur=function(){this.ar("E_CSS_UNEXPECTED_END_SELECTOR_FUNC")},e.prototype.property=function(t,e,n){this.error("E_CSS_UNEXPECTED_PROPERTY",this.Br())},e}(E),T=[],N=[],S=[],_=[],A=[],I=[],x=[],C=[],O=[],k=[],L=[],D=[],R=[];!function(t){t[t.SELECTOR_NAME_1=1]="SELECTOR_NAME_1",t[t.SELECTOR_NAME=2]="SELECTOR_NAME",t[t.SELECTOR_ANY_1=3]="SELECTOR_ANY_1",t[t.SELECTOR_ANY=4]="SELECTOR_ANY",t[t.SELECTOR_ID_1=5]="SELECTOR_ID_1",t[t.SELECTOR_ID=6]="SELECTOR_ID",t[t.SELECTOR_CLASS_1=7]="SELECTOR_CLASS_1",t[t.SELECTOR_CLASS=8]="SELECTOR_CLASS",t[t.SELECTOR_ATTR_1=9]="SELECTOR_ATTR_1",t[t.SELECTOR_ATTR=10]="SELECTOR_ATTR",t[t.SELECTOR_CHILD=11]="SELECTOR_CHILD",t[t.SELECTOR_SIBLING=12]="SELECTOR_SIBLING",t[t.SELECTOR_BODY=13]="SELECTOR_BODY",t[t.SELECTOR_PSEUDOCLASS=14]="SELECTOR_PSEUDOCLASS",t[t.VAL_IDENT=15]="VAL_IDENT",t[t.VAL_HASH=16]="VAL_HASH",t[t.VAL_NUM=17]="VAL_NUM",t[t.VAL_INT=18]="VAL_INT",t[t.VAL_NUMERIC=19]="VAL_NUMERIC",t[t.VAL_STR=20]="VAL_STR",t[t.VAL_URL=21]="VAL_URL",t[t.VAL_COMMA=22]="VAL_COMMA",t[t.VAL_SLASH=23]="VAL_SLASH",t[t.VAL_FUNC=24]="VAL_FUNC",t[t.VAL_C_PAR=25]="VAL_C_PAR",t[t.VAL_END=26]="VAL_END",t[t.RULE_END=27]="RULE_END",t[t.IDENT=28]="IDENT",t[t.SELECTOR_START=29]="SELECTOR_START",t[t.AT=30]="AT",t[t.EXPR_IDENT=31]="EXPR_IDENT",t[t.EXPR_NUM=32]="EXPR_NUM",t[t.EXPR_NUMERIC=33]="EXPR_NUMERIC",t[t.EXPR_STR=34]="EXPR_STR",t[t.EXPR_PARAM=35]="EXPR_PARAM",t[t.EXPR_PREFIX=36]="EXPR_PREFIX",t[t.EXPR_INFIX=37]="EXPR_INFIX",t[t.EXPR_FUNC=38]="EXPR_FUNC",t[t.EXPR_C_PAR=39]="EXPR_C_PAR",t[t.EXPR_O_PAR=40]="EXPR_O_PAR",t[t.SELECTOR_NEXT=41]="SELECTOR_NEXT",t[t.SELECTOR_PSEUDOELEM=42]="SELECTOR_PSEUDOELEM",t[t.EXPR_O_BRC=43]="EXPR_O_BRC",t[t.VAL_FINISH=44]="VAL_FINISH",t[t.EXPR_INFIX_NAME=45]="EXPR_INFIX_NAME",t[t.PROP=46]="PROP",t[t.VAL_BANG=47]="VAL_BANG",t[t.VAL_BRC=48]="VAL_BRC",t[t.EXPR_SEMICOL=49]="EXPR_SEMICOL",t[t.ERROR_PUSH=50]="ERROR_PUSH",t[t.ERROR_POP=51]="ERROR_POP",t[t.ERROR_POP_DECL=52]="ERROR_POP_DECL",t[t.ERROR_SEMICOL=53]="ERROR_SEMICOL",t[t.VAL_PLUS=54]="VAL_PLUS",t[t.SELECTOR_PSEUDOCLASS_1=55]="SELECTOR_PSEUDOCLASS_1",t[t.SELECTOR_FOLLOWING_SIBLING=56]="SELECTOR_FOLLOWING_SIBLING",t[t.DONE=200]="DONE"}(m||(m={}));var P,M=s.a.LAST+1;T[s.a.IDENT]=m.IDENT,T[s.a.STAR]=m.SELECTOR_START,T[s.a.HASH]=m.SELECTOR_START,T[s.a.CLASS]=m.SELECTOR_START,T[s.a.O_BRK]=m.SELECTOR_START,T[s.a.COLON]=m.SELECTOR_START,T[s.a.AT]=m.AT,T[s.a.C_BRC]=m.RULE_END,T[s.a.EOF]=m.DONE,N[s.a.IDENT]=m.PROP,N[s.a.EOF]=m.DONE,I[s.a.IDENT]=m.SELECTOR_NAME,I[s.a.STAR]=m.SELECTOR_ANY,I[s.a.HASH]=m.SELECTOR_ID,I[s.a.CLASS]=m.SELECTOR_CLASS,I[s.a.O_BRK]=m.SELECTOR_ATTR,I[s.a.COLON]=m.SELECTOR_PSEUDOCLASS,S[s.a.GT]=m.SELECTOR_CHILD,S[s.a.PLUS]=m.SELECTOR_SIBLING,S[s.a.TILDE]=m.SELECTOR_FOLLOWING_SIBLING,S[s.a.IDENT]=m.SELECTOR_NAME_1,S[s.a.STAR]=m.SELECTOR_ANY_1,S[s.a.HASH]=m.SELECTOR_ID_1,S[s.a.CLASS]=m.SELECTOR_CLASS_1,S[s.a.O_BRK]=m.SELECTOR_ATTR_1,S[s.a.O_BRC]=m.SELECTOR_BODY,S[s.a.COLON]=m.SELECTOR_PSEUDOCLASS_1,S[s.a.COL_COL]=m.SELECTOR_PSEUDOELEM,S[s.a.COMMA]=m.SELECTOR_NEXT,_[s.a.IDENT]=m.SELECTOR_NAME_1,_[s.a.STAR]=m.SELECTOR_ANY_1,_[s.a.HASH]=m.SELECTOR_ID_1,_[s.a.CLASS]=m.SELECTOR_CLASS_1,_[s.a.O_BRK]=m.SELECTOR_ATTR_1,_[s.a.C_PAR]=m.DONE,_[s.a.COLON]=m.SELECTOR_PSEUDOCLASS_1,A[s.a.IDENT]=m.SELECTOR_NAME,A[s.a.STAR]=m.SELECTOR_ANY,A[s.a.HASH]=m.SELECTOR_ID,A[s.a.CLASS]=m.SELECTOR_CLASS,A[s.a.COLON]=m.SELECTOR_PSEUDOCLASS,A[s.a.COL_COL]=m.SELECTOR_PSEUDOELEM,A[s.a.O_BRK]=m.SELECTOR_ATTR,A[s.a.O_BRC]=m.SELECTOR_BODY,x[s.a.IDENT]=m.VAL_IDENT,x[s.a.HASH]=m.VAL_HASH,x[s.a.NUM]=m.VAL_NUM,x[s.a.INT]=m.VAL_INT,x[s.a.NUMERIC]=m.VAL_NUMERIC,x[s.a.STR]=m.VAL_STR,x[s.a.URL]=m.VAL_URL,x[s.a.COMMA]=m.VAL_COMMA,x[s.a.SLASH]=m.VAL_SLASH,x[s.a.FUNC]=m.VAL_FUNC,x[s.a.C_PAR]=m.VAL_C_PAR,x[s.a.SEMICOL]=m.VAL_END,x[s.a.C_BRC]=m.VAL_BRC,x[s.a.BANG]=m.VAL_BANG,x[s.a.PLUS]=m.VAL_PLUS,x[s.a.EOF]=m.VAL_FINISH,C[s.a.IDENT]=m.EXPR_IDENT,C[s.a.NUM]=m.EXPR_NUM,C[s.a.INT]=m.EXPR_NUM,C[s.a.NUMERIC]=m.EXPR_NUMERIC,C[s.a.STR]=m.EXPR_STR,C[s.a.O_PAR]=m.EXPR_O_PAR,C[s.a.FUNC]=m.EXPR_FUNC,C[s.a.BANG]=m.EXPR_PREFIX,C[s.a.MINUS]=m.EXPR_PREFIX,C[s.a.DOLLAR]=m.EXPR_PARAM,O[s.a.IDENT]=m.EXPR_INFIX_NAME,O[s.a.COMMA]=m.EXPR_INFIX,O[s.a.GT]=m.EXPR_INFIX,O[s.a.LT]=m.EXPR_INFIX,O[s.a.GT_EQ]=m.EXPR_INFIX,O[s.a.LT_EQ]=m.EXPR_INFIX,O[s.a.EQ]=m.EXPR_INFIX,O[s.a.EQ_EQ]=m.EXPR_INFIX,O[s.a.BANG_EQ]=m.EXPR_INFIX,O[s.a.AMP_AMP]=m.EXPR_INFIX,O[s.a.BAR_BAR]=m.EXPR_INFIX,O[s.a.PLUS]=m.EXPR_INFIX,O[s.a.MINUS]=m.EXPR_INFIX,O[s.a.SLASH]=m.EXPR_INFIX,O[s.a.PERCENT]=m.EXPR_INFIX,O[s.a.STAR]=m.EXPR_INFIX,O[s.a.COLON]=m.EXPR_INFIX,O[s.a.QMARK]=m.EXPR_INFIX,O[s.a.C_PAR]=m.EXPR_C_PAR,O[s.a.O_BRC]=m.EXPR_O_BRC,O[s.a.SEMICOL]=m.EXPR_SEMICOL,k[s.a.EOF]=m.DONE,k[s.a.O_BRC]=m.ERROR_PUSH,k[s.a.C_BRC]=m.ERROR_POP,k[s.a.O_BRK]=m.ERROR_PUSH,k[s.a.C_BRK]=m.ERROR_POP,k[s.a.O_PAR]=m.ERROR_PUSH,k[s.a.C_PAR]=m.ERROR_POP,k[s.a.SEMICOL]=m.ERROR_SEMICOL,L[s.a.EOF]=m.DONE,L[s.a.O_BRC]=m.ERROR_PUSH,L[s.a.C_BRC]=m.ERROR_POP_DECL,L[s.a.O_BRK]=m.ERROR_PUSH,L[s.a.C_BRK]=m.ERROR_POP,L[s.a.O_PAR]=m.ERROR_PUSH,L[s.a.C_PAR]=m.ERROR_POP,L[s.a.SEMICOL]=m.ERROR_SEMICOL,D[s.a.EOF]=m.DONE,D[s.a.O_BRC]=m.ERROR_PUSH,D[s.a.C_BRC]=m.ERROR_POP,D[s.a.O_BRK]=m.ERROR_PUSH,D[s.a.C_BRK]=m.ERROR_POP,D[s.a.O_PAR]=m.ERROR_PUSH,D[s.a.C_PAR]=m.ERROR_POP,R[s.a.C_PAR]=0,R[s.a.COMMA]=0,R[s.a.QMARK]=1,R[s.a.COLON]=1,R[s.a.AMP_AMP]=2,R[s.a.BAR_BAR]=2,R[s.a.LT]=3,R[s.a.GT]=3,R[s.a.LT_EQ]=3,R[s.a.GT_EQ]=3,R[s.a.EQ]=3,R[s.a.EQ_EQ]=3,R[s.a.BANG_EQ]=3,R[s.a.PLUS]=4,R[s.a.MINUS]=4,R[s.a.STAR]=5,R[s.a.SLASH]=5,R[s.a.PERCENT]=5,R[s.a.EOF]=6,R[M]=2,function(t){t[t.PROP=0]="PROP",t[t.WHEN=1]="WHEN",t[t.MEDIA=2]="MEDIA",t[t.IMPORT=3]="IMPORT"}(P||(P={}));var F=function(){function t(t,e,n,i){this.actions=t,this.tokenizer=e,this.handler=n,this.wo=i,this.mo=[],this.Eo={},this.ko=null,this.Dn=null,this._o=!1,this.result=null,this.xo=!1,this.yo=null,this.To=null,this.No=[],this.So=[],this.Ao=!1,this.Ro=!1,this.Co=P.MEDIA}return t.prototype.Oo=function(t,e){for(var n=[],i=this.mo;n.push(i[e++]),e!=i.length;)if(i[e++]!=t)throw new Error("Unexpected state");return n},t.prototype.Io=function(t,e){var n,i=this.mo,r=i.length;do{n=i[--r]}while(void 0!==n&&"string"!=typeof n);var o=i.length-(r+1);if(o>1&&i.splice(r+1,o,new a.j(i.slice(r+1,i.length))),","==t)return null;r++;do{n=i[--r]}while(void 0!==n&&("string"!=typeof n||","==n));if(o=i.length-(r+1),"("==n){if(")"!=t)return this.handler.error("E_CSS_MISMATCHED_C_PAR",e),this.actions=L,null;var s=new a.e(i[r-1],this.Oo(",",r+1));return i.splice(r-1,o+2,s),null}return";"!=t||r>=0?(this.handler.error("E_CSS_UNEXPECTED_VAL_END",e),this.actions=L,null):o>1?new a.b(this.Oo(",",r+1)):i[0]},t.prototype.Lo=function(t,e){this.actions=this.Dn?L:k,this.handler.error(t,e)},t.prototype.Po=function(t,e){for(var n,i=this.mo,r=this.handler,o=i.pop();;){var l=i.pop();if(t==s.a.C_PAR){for(var h=[o];l==s.a.COMMA;)h.unshift(i.pop()),l=i.pop();if("string"==typeof l){if("{"==l){for(;h.length>=2;){var c=h.shift(),p=h.shift(),f=new u.z(r.Js(),c,p);h.unshift(f)}return i.push(new a.c(h[0])),!0}if("("==l){var d=i.pop(),v=i.pop();o=new u.d(r.Js(),u.M(v,d),h),t=s.a.EOF;continue}}if(l==s.a.O_PAR){o.yn()&&(o=new u.p(r.Js(),o,null)),t=s.a.EOF;continue}}else if("string"==typeof l){i.push(l);break}if(l<0)if(l==-s.a.BANG)o=new u.w(r.Js(),o);else{if(l!=-s.a.MINUS)return this.Lo("F_UNEXPECTED_STATE",e),!1;o=new u.v(r.Js(),o)}else{if(R[t]>R[l]){i.push(l);break}switch(n=i.pop(),l){case s.a.AMP_AMP:o=new u.b(r.Js(),n,o);break;case M:o=new u.c(r.Js(),n,o);break;case s.a.BAR_BAR:o=new u.y(r.Js(),n,o);break;case s.a.LT:o=new u.n(r.Js(),n,o);break;case s.a.GT:o=new u.k(r.Js(),n,o);break;case s.a.LT_EQ:o=new u.l(r.Js(),n,o);break;case s.a.GT_EQ:o=new u.j(r.Js(),n,o);break;case s.a.EQ:case s.a.EQ_EQ:o=new u.i(r.Js(),n,o);break;case s.a.BANG_EQ:o=new u.u(r.Js(),n,o);break;case s.a.PLUS:o=new u.a(r.Js(),n,o);break;case s.a.MINUS:o=new u.B(r.Js(),n,o);break;case s.a.STAR:o=new u.r(r.Js(),n,o);break;case s.a.SLASH:o=new u.h(r.Js(),n,o);break;case s.a.PERCENT:o=new u.q(r.Js(),n,o);break;case s.a.COLON:if(!(i.length>1))return this.Lo("E_CSS_EXPR_COND",e),!1;switch(i[i.length-1]){case s.a.QMARK:i.pop(),o=new u.e(r.Js(),i.pop(),n,o);break;case s.a.O_PAR:if(!n.yn())return this.Lo("E_CSS_MEDIA_TEST",e),!1;o=new u.p(r.Js(),n,o)}break;case s.a.QMARK:if(t!=s.a.COLON)return this.Lo("E_CSS_EXPR_COND",e),!1;case s.a.O_PAR:return i.push(n),i.push(l),i.push(o),!1;default:return this.Lo("F_UNEXPECTED_STATE",e),!1}}}return i.push(o),!1},t.prototype.Fo=function(){for(var t=[];;){var e=this.tokenizer.token();switch(e.type){case s.a.IDENT:t.push(e.text);break;case s.a.PLUS:t.push("+");break;case s.a.NUM:case s.a.INT:t.push(e.num);break;default:return t}this.tokenizer.consume()}},t.prototype.Do=function(){var t=!1,e=this.tokenizer.token();if(e.type===s.a.PLUS)t=!0,this.tokenizer.consume(),e=this.tokenizer.token();else if(e.type===s.a.IDENT&&("even"===e.text||"odd"===e.text))return this.tokenizer.consume(),[2,"odd"===e.text?1:0];switch(e.type){case s.a.NUMERIC:if(t&&e.num<0)return null;case s.a.IDENT:if(t&&"-"===e.text.charAt(0))return null;if("n"===e.text||"-n"===e.text){if(t&&e.ct)return null;var n="-n"===e.text?-1:1;e.type===s.a.NUMERIC&&(n=e.num);var i=0;this.tokenizer.consume();var r=(e=this.tokenizer.token()).type===s.a.MINUS,o=e.type===s.a.PLUS||r;if(o&&(this.tokenizer.consume(),e=this.tokenizer.token()),e.type===s.a.INT){if(1/(i=e.num)==-1/0){if(i=0,o)return null}else if(i<0){if(o)return null}else if(i>=0&&!o)return null;this.tokenizer.consume()}else if(o)return null;return[n,r&&i>0?-i:i]}if("n-"===e.text||"-n-"===e.text){if(t&&e.ct)return null;if(n="-n-"===e.text?-1:1,e.type===s.a.NUMERIC&&(n=e.num),this.tokenizer.consume(),(e=this.tokenizer.token()).type===s.a.INT)return e.num<0||1/e.num==-1/0?null:(this.tokenizer.consume(),[n,e.num])}else{var a=e.text.match(/^n(-[0-9]+)$/);if(a)return t&&e.ct?null:(this.tokenizer.consume(),[e.type===s.a.NUMERIC?e.num:1,parseInt(a[1],10)]);if(a=e.text.match(/^-n(-[0-9]+)$/))return this.tokenizer.consume(),[-1,parseInt(a[1],10)]}return null;case s.a.INT:return t&&(e.ct||e.num<0)?null:(this.tokenizer.consume(),[0,e.num])}return null},t.prototype.Mo=function(t,e){var n=this.handler.Js();if(!n)return null;if(e=e||n._true,t)for(var i=0,r=t.split(/\s+/);i<r.length;i++)switch(r[i]){case"vertical":e=u.D(n,e,new u.w(n,new u.s(n,"pref-horizontal")));break;case"horizontal":e=u.D(n,e,new u.s(n,"pref-horizontal"));break;case"day":e=u.D(n,e,new u.w(n,new u.s(n,"pref-night-mode")));break;case"night":e=u.D(n,e,new u.s(n,"pref-night-mode"));break;default:e=n._false}return e===n._true?null:new a.c(e)},t.prototype.Uo=function(){switch(this.So[this.So.length-1]){case"[selector]":case"font-face":case"-epubx-flow":case"-epubx-viewport":case"-epubx-define":case"-adapt-footnote-area":return!0}return!1},t.prototype.Go=function(t,e,n,i,r){var l,h,c,p,f,d,v,y=this.handler,b=this.tokenizer,E=this.mo;i&&(this.Co=P.MEDIA,this.mo.push("{"));t:for(;t>0;--t)switch(l=b.token(),this.actions[l.type]){case m.IDENT:if(b.dt(1).type!=s.a.COLON){this.Uo()?(y.error("E_CSS_COLON_EXPECTED",b.dt(1)),this.actions=L):(this.actions=I,y.xr());continue}(h=b.dt(2)).ct||h.type!=s.a.IDENT&&h.type!=s.a.FUNC||b.mark(),this.Dn=l.text,this._o=!1,b.consume(),b.consume(),this.actions=x,E.splice(0,E.length);continue;case m.PROP:if(b.dt(1).type!=s.a.COLON){this.actions=L,y.error("E_CSS_COLON_EXPECTED",b.dt(1));continue}this.Dn=l.text,this._o=!1,b.consume(),b.consume(),this.actions=x,E.splice(0,E.length);continue;case m.SELECTOR_START:this.actions=I,y.xr();continue;case m.SELECTOR_NAME_1:if(!l.ct){this.actions=D,y.error("E_CSS_SPACE_EXPECTED",l);continue}y.wr();case m.SELECTOR_NAME:if(b.dt(1).type==s.a.BAR)if(b.consume(),b.consume(),null!=(c=this.Eo[l.text]))switch((l=b.token()).type){case s.a.IDENT:y.cr(c,l.text),this.actions=r?_:S,b.consume();break;case s.a.STAR:y.cr(c,null),this.actions=r?_:S,b.consume();break;default:this.actions=k,y.error("E_CSS_NAMESPACE",l)}else this.actions=k,y.error("E_CSS_UNDECLARED_PREFIX",l);else y.cr(this.ko,l.text),this.actions=r?_:S,b.consume();continue;case m.SELECTOR_ANY_1:if(!l.ct){this.actions=D,y.error("E_CSS_SPACE_EXPECTED",l);continue}y.wr();case m.SELECTOR_ANY:if(b.dt(1).type==s.a.BAR)switch(b.consume(),b.consume(),(l=b.token()).type){case s.a.IDENT:y.cr(null,l.text),this.actions=r?_:S,b.consume();break;case s.a.STAR:y.cr(null,null),this.actions=r?_:S,b.consume();break;default:this.actions=k,y.error("E_CSS_NAMESPACE",l)}else y.cr(this.ko,null),this.actions=r?_:S,b.consume();continue;case m.SELECTOR_ID_1:l.ct&&y.wr();case m.SELECTOR_ID:y.pr(l.text),this.actions=r?_:S,b.consume();continue;case m.SELECTOR_CLASS_1:l.ct&&y.wr();case m.SELECTOR_CLASS:y.lr(l.text),this.actions=r?_:S,b.consume();continue;case m.SELECTOR_PSEUDOCLASS_1:l.ct&&y.wr();case m.SELECTOR_PSEUDOCLASS:b.consume();e:switch((l=b.token()).type){case s.a.IDENT:y.vr(l.text,null),b.consume(),this.actions=r?_:S;continue;case s.a.FUNC:switch(p=l.text,b.consume(),p){case"not":this.actions=I,y.Fr("not"),this.Go(Number.POSITIVE_INFINITY,!1,!1,!1,!0)?this.actions=S:this.actions=D;break t;case"lang":case"href-epub-type":if((l=b.token()).type===s.a.IDENT){v=[l.text],b.consume();break}break e;case"nth-child":case"nth-of-type":case"nth-last-child":case"nth-last-of-type":if(v=this.Do())break;break e;default:v=this.Fo()}if((l=b.token()).type==s.a.C_PAR){y.vr(p,v),b.consume(),this.actions=r?_:S;continue}}y.error("E_CSS_PSEUDOCLASS_SYNTAX",l),this.actions=k;continue;case m.SELECTOR_PSEUDOELEM:switch(b.consume(),(l=b.token()).type){case s.a.IDENT:y.dr(l.text,null),this.actions=r?_:S,b.consume();continue;case s.a.FUNC:if(p=l.text,b.consume(),"nth-fragment"==p){if(null===(v=this.Do()))break}else v=this.Fo();if((l=b.token()).type==s.a.C_PAR){y.dr(p,v),this.actions=r?_:S,b.consume();continue}}y.error("E_CSS_PSEUDOELEM_SYNTAX",l),this.actions=k;continue;case m.SELECTOR_ATTR_1:l.ct&&y.wr();case m.SELECTOR_ATTR:if(b.consume(),(l=b.token()).type==s.a.IDENT)p=l.text,b.consume();else if(l.type==s.a.STAR)p=null,b.consume();else{if(l.type!=s.a.BAR){this.actions=D,y.error("E_CSS_ATTR",l),b.consume();continue}p=""}if((l=b.token()).type==s.a.BAR){if(null==(c=p?this.Eo[p]:p)){this.actions=D,y.error("E_CSS_UNDECLARED_PREFIX",l),b.consume();continue}if(b.consume(),(l=b.token()).type!=s.a.IDENT){this.actions=D,y.error("E_CSS_ATTR_NAME_EXPECTED",l);continue}p=l.text,b.consume(),l=b.token()}else c="";switch(l.type){case s.a.EQ:case s.a.TILDE_EQ:case s.a.BAR_EQ:case s.a.HAT_EQ:case s.a.DOLLAR_EQ:case s.a.STAR_EQ:case s.a.COL_COL:f=l.type,b.consume(),l=b.token();break;case s.a.C_BRK:y.br(c,p,s.a.EOF,null),this.actions=r?_:S,b.consume();continue;default:this.actions=D,y.error("E_CSS_ATTR_OP_EXPECTED",l);continue}switch(l.type){case s.a.IDENT:case s.a.STR:y.br(c,p,f,l.text),b.consume(),l=b.token();break;default:this.actions=D,y.error("E_CSS_ATTR_VAL_EXPECTED",l);continue}if(l.type!=s.a.C_BRK){this.actions=D,y.error("E_CSS_ATTR",l);continue}this.actions=r?_:S,b.consume();continue;case m.SELECTOR_CHILD:y.mr(),this.actions=A,b.consume();continue;case m.SELECTOR_SIBLING:y.gr(),this.actions=A,b.consume();continue;case m.SELECTOR_FOLLOWING_SIBLING:y.Er(),this.actions=A,b.consume();continue;case m.SELECTOR_BODY:this.Ao?(this.So.push("-epubx-region"),this.Ao=!1):this.Ro?(this.So.push("page"),this.Ro=!1):this.So.push("[selector]"),y.Tr(),this.actions=T,b.consume();continue;case m.SELECTOR_NEXT:y.kr(),this.actions=I,b.consume();continue;case m.VAL_IDENT:E.push(a.r(l.text)),b.consume();continue;case m.VAL_HASH:f=parseInt(l.text,16);try{E.push(g(l.text))}catch(t){y.error("E_CSS_COLOR",l),this.actions=k}b.consume();continue;case m.VAL_NUM:E.push(new a.h(l.num)),b.consume();continue;case m.VAL_INT:E.push(new a.g(l.num)),b.consume();continue;case m.VAL_NUMERIC:u.K(l.text)?E.push(new a.c(new u.x(y.Js(),l.num,l.text))):E.push(new a.i(l.num,l.text)),b.consume();continue;case m.VAL_STR:E.push(new a.k(l.text)),b.consume();continue;case m.VAL_URL:E.push(new a.l(o.C(l.text,this.wo))),b.consume();continue;case m.VAL_COMMA:this.Io(",",l),E.push(","),b.consume();continue;case m.VAL_SLASH:E.push(a.w),b.consume();continue;case m.VAL_FUNC:"-epubx-expr"==(p=l.text.toLowerCase())||"calc"==p||"env"==p?(this.actions=C,this.Co=P.PROP,E.push("{")):(E.push(p),E.push("(")),b.consume();continue;case m.VAL_C_PAR:this.Io(")",l),b.consume();continue;case m.VAL_BANG:if(b.consume(),l=b.token(),h=b.dt(1),l.type==s.a.IDENT&&"important"==l.text.toLowerCase()&&(h.type==s.a.SEMICOL||h.type==s.a.EOF||h.type==s.a.C_BRC)){b.consume(),this._o=!0;continue}this.Lo("E_CSS_SYNTAX",l);continue;case m.VAL_PLUS:switch((h=b.dt(1)).type){case s.a.NUM:case s.a.NUMERIC:case s.a.INT:if(!h.ct){b.consume();continue}}if(this.actions===x&&b.bt()){b.reset(),this.actions=I,y.xr();continue}this.Lo("E_CSS_UNEXPECTED_PLUS",l);continue;case m.VAL_END:b.consume();case m.VAL_BRC:b.unmark(),(d=this.Io(";",l))&&this.Dn&&y.property(this.Dn,d,this._o),this.actions=n?N:T;continue;case m.VAL_FINISH:if(b.consume(),b.unmark(),d=this.Io(";",l),e)return this.result=d,!0;if(this.Dn&&d&&y.property(this.Dn,d,this._o),n)return!0;this.Lo("E_CSS_SYNTAX",l);continue;case m.EXPR_IDENT:(h=b.dt(1)).type==s.a.CLASS?(b.dt(2).type!=s.a.O_PAR||b.dt(2).ct?(E.push(new u.s(y.Js(),u.M(l.text,h.text))),this.actions=O):(E.push(l.text,h.text,"("),b.consume()),b.consume()):(this.Co==P.MEDIA||this.Co==P.IMPORT?"not"==l.text.toLowerCase()?(b.consume(),E.push(new u.o(y.Js(),!0,h.text))):("only"==l.text.toLowerCase()&&(b.consume(),l=h),E.push(new u.o(y.Js(),!1,l.text))):E.push(new u.s(y.Js(),l.text)),this.actions=O),b.consume();continue;case m.EXPR_FUNC:E.push(null,l.text,"("),b.consume();continue;case m.EXPR_NUM:E.push(new u.f(y.Js(),l.num)),b.consume(),this.actions=O;continue;case m.EXPR_NUMERIC:"%"==(p=l.text)&&(p=this.Dn&&this.Dn.match(/height|^(top|bottom)$/)?"vh":"vw"),E.push(new u.x(y.Js(),l.num,p)),b.consume(),this.actions=O;continue;case m.EXPR_STR:E.push(new u.f(y.Js(),l.text)),b.consume(),this.actions=O;continue;case m.EXPR_PARAM:b.consume(),(l=b.token()).type!=s.a.INT||l.ct?this.Lo("E_CSS_SYNTAX",l):(E.push(new u.A(y.Js(),l.num)),b.consume(),this.actions=O);continue;case m.EXPR_PREFIX:E.push(-l.type),b.consume();continue;case m.EXPR_INFIX:this.actions=C,this.Po(l.type,l),E.push(l.type),b.consume();continue;case m.EXPR_INFIX_NAME:"and"==l.text.toLowerCase()?(this.actions=C,this.Po(M,l),E.push(M),b.consume()):this.Lo("E_CSS_SYNTAX",l);continue;case m.EXPR_C_PAR:this.Po(l.type,l)&&(this.Dn?this.actions=x:this.Lo("E_CSS_UNBALANCED_PAR",l)),b.consume();continue;case m.EXPR_O_BRC:this.Po(s.a.C_PAR,l)&&(this.Dn||this.Co==P.IMPORT?this.Lo("E_CSS_UNEXPECTED_BRC",l):(this.Co==P.WHEN?y.ho(E.pop()):y.ao(E.pop()),this.So.push("media"),y.Tr(),this.actions=T)),b.consume();continue;case m.EXPR_SEMICOL:if(this.Po(s.a.C_PAR,l)){if(!this.Dn&&this.Co==P.IMPORT)return this.To=E.pop(),this.xo=!0,this.actions=T,b.consume(),!1;this.Lo("E_CSS_UNEXPECTED_SEMICOL",l)}b.consume();continue;case m.EXPR_O_PAR:E.push(l.type),b.consume();continue;case m.RULE_END:this.actions=T,b.consume(),y.Nr(),this.So.length&&this.So.pop();continue;case m.AT:switch(p=l.text.toLowerCase()){case"import":if(b.consume(),(l=b.token()).type==s.a.STR||l.type==s.a.URL){if(this.yo=l.text,b.consume(),(l=b.token()).type==s.a.SEMICOL||l.type==s.a.EOF)return this.xo=!0,b.consume(),!1;this.Dn=null,this.Co=P.IMPORT,this.actions=C,E.push("{");continue}y.error("E_CSS_IMPORT_SYNTAX",l),this.actions=k;continue;case"namespace":switch(b.consume(),(l=b.token()).type){case s.a.IDENT:if(p=l.text,b.consume(),((l=b.token()).type==s.a.STR||l.type==s.a.URL)&&b.dt(1).type==s.a.SEMICOL){this.Eo[p]=l.text,b.consume(),b.consume();continue}break;case s.a.STR:case s.a.URL:if(b.dt(1).type==s.a.SEMICOL){this.ko=l.text,b.consume(),b.consume();continue}}y.error("E_CSS_NAMESPACE_SYNTAX",l),this.actions=k;continue;case"charset":if(b.consume(),(l=b.token()).type==s.a.STR&&b.dt(1).type==s.a.SEMICOL){"utf-8"!=(p=l.text.toLowerCase())&&"utf-16"!=p&&y.error("E_CSS_UNEXPECTED_CHARSET "+p,l),b.consume(),b.consume();continue}y.error("E_CSS_CHARSET_SYNTAX",l),this.actions=k;continue;case"font-face":case"-epubx-page-template":case"-epubx-define":case"-epubx-viewport":if(b.dt(1).type==s.a.O_BRC){switch(b.consume(),b.consume(),p){case"font-face":y.no();break;case"-epubx-page-template":y.co();break;case"-epubx-define":y.eo();break;case"-epubx-viewport":y.ro()}this.So.push(p),y.Tr();continue}break;case"-adapt-footnote-area":switch(b.consume(),(l=b.token()).type){case s.a.O_BRC:b.consume(),y.io(null),this.So.push(p),y.Tr();continue;case s.a.COL_COL:if(b.consume(),(l=b.token()).type==s.a.IDENT&&b.dt(1).type==s.a.O_BRC){p=l.text,b.consume(),b.consume(),y.io(p),this.So.push("-adapt-footnote-area"),y.Tr();continue}}break;case"-epubx-region":b.consume(),y.so(),this.Ao=!0,this.actions=I;continue;case"page":b.consume(),y.oo(),this.Ro=!0,this.actions=A;continue;case"top-left-corner":case"top-left":case"top-center":case"top-right":case"top-right-corner":case"right-top":case"right-middle":case"right-bottom":case"bottom-right-corner":case"bottom-right":case"bottom-center":case"bottom-left":case"bottom-left-corner":case"left-bottom":case"left-middle":case"left-top":if(b.consume(),(l=b.token()).type==s.a.O_BRC){b.consume(),y.uo(p),this.So.push(p),y.Tr();continue}break;case"-epubx-when":b.consume(),this.Dn=null,this.Co=P.WHEN,this.actions=C,E.push("{");continue;case"media":b.consume(),this.Dn=null,this.Co=P.MEDIA,this.actions=C,E.push("{");continue;case"-epubx-flow":if(b.dt(1).type==s.a.IDENT&&b.dt(2).type==s.a.O_BRC){y.fo(b.dt(1).text),b.consume(),b.consume(),b.consume(),this.So.push(p),y.Tr();continue}break;case"-epubx-page-master":case"-epubx-partition":case"-epubx-partition-group":b.consume();var w=null,R=null,F=[];for((l=b.token()).type==s.a.IDENT&&(w=l.text,b.consume(),l=b.token()),l.type==s.a.COLON&&b.dt(1).type==s.a.IDENT&&(R=b.dt(1).text,b.consume(),b.consume(),l=b.token());l.type==s.a.FUNC&&"class"==l.text.toLowerCase()&&b.dt(1).type==s.a.IDENT&&b.dt(2).type==s.a.C_PAR;)F.push(b.dt(1).text),b.consume(),b.consume(),b.consume(),l=b.token();if(l.type==s.a.O_BRC){switch(b.consume(),p){case"-epubx-page-master":y.lo(w,R,F);break;case"-epubx-partition":y.vo(w,R,F);break;case"-epubx-partition-group":y.do(w,R,F)}this.So.push(p),y.Tr();continue}break;case"":y.error("E_CSS_UNEXPECTED_AT"+p,l),this.actions=D;continue;default:y.error("E_CSS_AT_UNKNOWN "+p,l),this.actions=k;continue}y.error("E_CSS_AT_SYNTAX "+p,l),this.actions=k;continue;case m.ERROR_PUSH:if(e||n)return!0;this.No.push(l.type+1),b.consume();continue;case m.ERROR_POP_DECL:if(e||n)return!0;if(0==this.No.length){this.actions=T;continue}case m.ERROR_POP:this.No.length>0&&this.No[this.No.length-1]==l.type&&this.No.pop(),0==this.No.length&&l.type==s.a.C_BRC&&(this.actions=T),b.consume();continue;case m.ERROR_SEMICOL:if(e||n)return!0;0==this.No.length&&(this.actions=T),b.consume();continue;case m.DONE:return r&&(b.consume(),y.Ur()),!0;default:if(e||n)return!0;if(i)return!!this.Po(s.a.C_PAR,l)&&(this.result=E.pop(),!0);if(r)return l.type==s.a.INVALID?y.error(l.text,l):y.error("E_CSS_SYNTAX",l),!1;if(this.actions===x&&b.bt()){b.reset(),this.actions=I,y.xr();continue}if(this.actions!==k&&this.actions!==D&&this.actions!==L){l.type==s.a.INVALID?y.error(l.text,l):y.error("E_CSS_SYNTAX",l),this.Uo()?this.actions=L:this.actions=D;continue}b.consume();continue}return!1},t}(),U=function(t){function e(e){var n=t.call(this,null)||this;return n.scope=e,n}return p(e,t),e.prototype.error=function(t,e){throw new Error(t)},e.prototype.Js=function(){return this.scope},e}(y);function B(t,e,n,i,r){var a=c.c("parseStylesheet"),u=new F(T,t,e,n),l=null;return r&&(l=function(t,e,n){var i=new F(C,t,e,n);return i.Go(Number.POSITIVE_INFINITY,!1,!1,!0,!1),i.result}(new s.b(r,e),e,n)),(l=u.Mo(i,l&&l.et()))&&(e.ao(l),e.Tr()),a.loop(function(){for(var t=function(){if(u.xo){var t=o.C(u.yo,n);u.To&&(e.ao(u.To),e.Tr());var i=c.c("parseStylesheet.import");return H(t,e,null,null).then(function(){u.To&&e.Nr(),u.xo=!1,u.yo=null,u.To=null,i.finish(!0)}),{value:i.result()}}var r=a.Gt();if(r.Mt)return{value:r}};!u.Go(100,!1,!1,!1,!1);){var i=t();if("object"==typeof i)return i.value}return c.d(!1)}).then(function(){l&&e.Nr(),a.finish(!0)}),a.result()}function z(t,e,n,i,r){return c.b("parseStylesheetFromText",function(o){B(new s.b(t,e),e,n,i,r).Dt(o)},function(e,n){l.b.warn(n,"Failed to parse stylesheet text: "+t),e.finish(!1)})}function H(t,e,n,i){return c.b("parseStylesheetFromURL",function(r){h.c(t).then(function(o){o.responseText?z(o.responseText,e,t,n,i).then(function(e){e||l.b.warn("Failed to parse stylesheet from "+t),r.finish(!0)}):r.finish(!0)})},function(e,n){l.b.warn(n,"Exception while fetching and parsing:",t),e.finish(!0)})}function G(t,e,n){var i=new F(x,e,new U(t),n);return i.Go(Number.POSITIVE_INFINITY,!0,!1,!1,!1),i.result}function V(t,e,n){new F(N,t,e,n).Go(Number.POSITIVE_INFINITY,!1,!0,!1,!1)}var X={"z-index":!0,"column-count":!0,"flow-linger":!0,opacity:!0,page:!0,"flow-priority":!0,utilization:!0};function j(t,e,n){return e.st()?function(t,e,n){var i=e.evaluate(t);switch(typeof i){case"number":return X[n]?i==Math.round(i)?new a.g(i):new a.h(i):new a.i(i,"px");case"string":return i?G(e.scope,new s.b(i,null),""):a.o;case"boolean":return i?a.t._true:a.t._false;case"undefined":return a.o}throw new Error("E_UNEXPECTED")}(t,e.expr,n):e}},function(t,e,n){"use strict";n.d(e,"c",function(){return r}),n.d(e,"b",function(){return o}),n.d(e,"a",function(){return a}),n.d(e,"d",function(){return h}),n.d(e,"j",function(){return c}),n.d(e,"k",function(){return p}),n.d(e,"i",function(){return y}),n.d(e,"m",function(){return b}),n.d(e,"l",function(){return w}),n.d(e,"g",function(){return S}),n.d(e,"f",function(){return _}),n.d(e,"h",function(){return A}),n.d(e,"e",function(){return I});var i=n(6),r=function(t,e,n,i){this.x1=t,this.y1=e,this.x2=n,this.y2=i},o=function(t,e){this.x=t,this.y=e},a=function(t,e,n,i){this.left=t,this.top=e,this.right=n,this.bottom=i},s=function(t,e,n,i){this.low=t,this.high=e,this.winding=n,this.Bo=i},u=function(t,e,n,i){this.y1=t,this.y2=e,this.x1=n,this.x2=i,this.left=null,this.right=null};function l(t,e){return t.low.y-e.low.y||t.low.x-e.low.x}var h=function(){function t(t){this.points=t}return t.prototype.zo=function(t,e){for(var n=this.points,i=n.length,r=n[i-1],o=0;o<i;o++){var a,u=n[o];a=r.y<u.y?new s(r,u,1,e):new s(u,r,-1,e),t.push(a),r=u}},t.prototype.Xs=function(e,n){for(var i=[],r=0,a=this.points;r<a.length;r++){var s=a[r];i.push(new o(s.x+e,s.y+n))}return new t(i)},t}();function c(t,e,n,i){for(var r=[],a=0;a<20;a++){var s=2*a*Math.PI/20;r.push(new o(t+n*Math.sin(s),e+i*Math.cos(s)))}return new h(r)}function p(t,e,n,i){return new h([new o(t,e),new o(n,e),new o(n,i),new o(t,i)])}var f=function(t,e,n,i){this.x=t,this.winding=e,this.Bo=n,this.Ho=i};function d(t,e){var n=t.low.x+(t.high.x-t.low.x)*(e-t.low.y)/(t.high.y-t.low.y);if(isNaN(n))throw new Error("Bad intersection");return n}function v(t,e,n,r){var o,a,s,u;e.high.y<n&&i.b.warn("Error: inconsistent segment (1)"),e.low.y<=n?(o=d(e,n),a=e.winding):(o=e.low.x,a=0),e.high.y>=r?(s=d(e,r),u=e.winding):(s=e.high.x,u=0),o<s?(t.push(new f(o,a,e.Bo,-1)),t.push(new f(s,u,e.Bo,1))):(t.push(new f(s,u,e.Bo,-1)),t.push(new f(o,a,e.Bo,1)))}function g(t,e,n){var i,r=e+n,o=Array(r),a=Array(r);for(i=0;i<=r;i++)o[i]=0,a[i]=0;for(var s=[],u=!1,l=t.length,h=0;h<l;h++){var c=t[h];o[c.Bo]+=c.winding,a[c.Bo]+=c.Ho;var p=!1;for(i=0;i<e;i++)if(o[i]&&!a[i]){p=!0;break}if(p)for(i=e;i<=r;i++)if(o[i]||a[i]){p=!1;break}u!=p&&(s.push(c.x),u=p)}return s}function m(t,e){return e?Math.floor(t/e)*e:t}function y(t){return new r(t.y1,-t.x2,t.y2,-t.x1)}function b(t){return new r(-t.y2,t.x1,-t.y1,t.x2)}function E(t){return new h(t.points.map(function(t){return function(t){return new o(t.y,-t.x)}(t)}))}function w(t,e,n,i,r,o){o&&(t=y(t),e=e.map(function(t){return E(t)}),n=n.map(function(t){return E(t)}));var a,s,h,c=e.length,p=n?n.length:0,f=[],d=[];for(a=0;a<c;a++)e[a].zo(d,a);for(a=0;a<p;a++)n[a].zo(d,a+c);var b=d.length;d.sort(l);for(var w=0;d[w].Bo>=c;)w++;var N=d[w].low.y;N>t.y1&&f.push(new u(t.y1,N,t.x2,t.x2));for(var S,_,A=0,I=[];A<b&&(h=d[A]).low.y<N;)h.high.y>N&&I.push(h),A++;for(;A<b||I.length>0;){var x=t.y2,C=Math.min((S=Math.ceil(N+i),(_=r)?Math.ceil(S/_)*_:S),t.y2);for(s=0;s<I.length&&x>C;s++)(h=I[s]).low.x==h.high.x?h.high.y<x&&(x=Math.max(m(h.high.y,r),C)):h.low.x!=h.high.x&&(x=C);for(x>t.y2&&(x=t.y2);A<b&&(h=d[A]).low.y<x;)if(h.high.y<N)A++;else{if(!(h.low.y<C)){var O=m(h.low.y,r);O<x&&(x=O);break}h.low.y==h.high.y&&h.low.y==N||(I.push(h),x=C),A++}var k=[];for(s=0;s<I.length;s++)v(k,I[s],N,x);k.sort(function(t,e){return t.x-e.x||t.Ho-e.Ho});var L=g(k,c,p);if(0==L.length)f.push(new u(N,x,t.x2,t.x2));else{var D=0,R=t.x1;for(s=0;s<L.length;s+=2){var P=Math.max(t.x1,L[s]),M=Math.min(t.x2,L[s+1])-P;M>D&&(D=M,R=P)}0==D?f.push(new u(N,x,t.x2,t.x2)):f.push(new u(N,x,Math.max(R,t.x1),Math.min(R+D,t.x2)))}if(x==t.y2)break;for(N=x,s=I.length-1;s>=0;s--)I[s].high.y<=x&&I.splice(s,1)}return T(t,f),f}function T(t,e){for(var n=e.length-1,i=new u(t.y2,t.y2,t.x1,t.x2);n>=0;){var r=i;((i=e[n]).y2-i.y1<1||i.x1==r.x1&&i.x2==r.x2)&&(r.y1=i.y1,e.splice(n,1),i=r),n--}}function N(t,e){for(var n=0,i=t.length;n<i;){var r=Math.floor((n+i)/2);e>=t[r].y2?n=r+1:i=r}return n}function S(t,e){if(!t.length)return e;var n,i,o=e.y1;for(i=0;i<t.length&&!((n=t[i]).y2>e.y1&&n.x1-.1<=e.x1&&n.x2+.1>=e.x2);i++)o=Math.max(o,n.y2);for(var a=o;i<t.length&&!((n=t[i]).y1>=e.y2||n.x1-.1>e.x1||n.x2+.1<e.x2);i++)a=n.y2;return(a=i===t.length?e.y2:Math.min(a,e.y2))<=o?null:new r(e.x1,o,e.x2,a)}function _(t,e){if(!t.length)return e;var n,i,o=e.y2;for(i=t.length-1;i>=0&&(n=t[i],!(i===t.length-1&&n.y2<e.y2))&&!(n.y1<e.y2&&n.x1-.1<=e.x1&&n.x2+.1>=e.x2);i--)o=Math.min(o,n.y1);for(var a=Math.min(o,n.y2);i>=0&&!((n=t[i]).y2<=e.y1||n.x1-.1>e.x1||n.x2+.1<e.x2);i--)a=n.y1;return o<=(a=Math.max(a,e.y1))?null:new r(e.x1,a,e.x2,o)}function A(t,e,n,i){for(var r=n.y1,o=n.x2-n.x1,a=n.y2-n.y1,s=N(e,r);;){var u=r+a;if(u>t.y2)return!1;for(var l=t.x1,h=t.x2,c=s;c<e.length&&e[c].y1<u;c++){var p=e[c];p.x1>l&&(l=p.x1),p.x2<h&&(h=p.x2)}if(l+o<=h||s>=e.length)return"left"==i?(n.x1=l,n.x2=l+o):(n.x1=h-o,n.x2=h),n.y2+=r-n.y1,n.y1=r,!0;r=e[s].y2,s++}}function I(t,e,n,i,r){for(i||(i=[new u(n.y1,n.y2,n.x1,n.x2)]);i.length>0&&i[0].y2<=t.y1;)i.shift();if(0!=i.length){var o;i[0].y1<t.y1&&(i[0].y1=t.y1);var a=0==e.length?t.y1:e[e.length-1].y2;a<t.y2&&e.push(new u(a,t.y2,t.x1,t.x2));for(var s=N(e,i[0].y1),l=0,h=i;l<h.length;l++){var c=h[l];if(s==e.length)break;for(e[s].y1<c.y1&&(o=e[s],s++,e.splice(s,0,new u(c.y1,o.y2,o.x1,o.x2)),o.y2=c.y1);s<e.length&&((o=e[s++]).y2>c.y2&&(e.splice(s,0,new u(c.y2,o.y2,o.x1,o.x2)),o.y2=c.y2),c.x1!=c.x2&&("left"==r?o.x1=Math.min(c.x2,t.x2):o.x2=Math.max(c.x1,t.x1)),o.y2!=c.y2););}T(t,e)}}},function(t,e,n){"use strict";var i=n(7),r=n(0),o=n(11);function a(t,e){var n={};return Object.keys(t).forEach(function(i){var r=n[i]={},o=t[i];Object.keys(o).forEach(function(t){r[t]=o[t].map(function(t){var n=e?t.logical:t.physical,i=e?t.physical:t.logical;return{regexp:new RegExp("(-?)"+n+"(-?)"),to:"$1"+i+"$2"}})})}),n}function s(t,e,n,i){var r=i[e];if(!r)throw new Error("unknown writing-mode: "+e);var o=r[n||"ltr"];if(!o)throw new Error("unknown direction: "+n);for(var a=0,s=o;a<s.length;a++){var u=s[a],l=t.replace(u.regexp,u.to);if(l!==t)return l}return t}n(6);var u={"horizontal-tb":{ltr:[{logical:"inline-start",physical:"left"},{logical:"inline-end",physical:"right"},{logical:"block-start",physical:"top"},{logical:"block-end",physical:"bottom"},{logical:"inline-size",physical:"width"},{logical:"block-size",physical:"height"}],rtl:[{logical:"inline-start",physical:"right"},{logical:"inline-end",physical:"left"},{logical:"block-start",physical:"top"},{logical:"block-end",physical:"bottom"},{logical:"inline-size",physical:"width"},{logical:"block-size",physical:"height"}]},"vertical-rl":{ltr:[{logical:"inline-start",physical:"top"},{logical:"inline-end",physical:"bottom"},{logical:"block-start",physical:"right"},{logical:"block-end",physical:"left"},{logical:"inline-size",physical:"height"},{logical:"block-size",physical:"width"}],rtl:[{logical:"inline-start",physical:"bottom"},{logical:"inline-end",physical:"top"},{logical:"block-start",physical:"right"},{logical:"block-end",physical:"left"},{logical:"inline-size",physical:"height"},{logical:"block-size",physical:"width"}]},"vertical-lr":{ltr:[{logical:"inline-start",physical:"top"},{logical:"inline-end",physical:"bottom"},{logical:"block-start",physical:"left"},{logical:"block-end",physical:"right"},{logical:"inline-size",physical:"height"},{logical:"block-size",physical:"width"}],rtl:[{logical:"inline-start",physical:"bottom"},{logical:"inline-end",physical:"top"},{logical:"block-start",physical:"left"},{logical:"block-end",physical:"right"},{logical:"inline-size",physical:"height"},{logical:"block-size",physical:"width"}]}},l=a(u,!0);var h=a(u,!1);var c=n(19),p=n(3),f=n(8),d=n(15);n.d(e,"a",function(){return v}),n.d(e,"g",function(){return g}),n.d(e,"h",function(){return m}),n.d(e,"b",function(){return y}),n.d(e,"d",function(){return E}),n.d(e,"c",function(){return w}),n.d(e,"e",function(){return T}),n.d(e,"f",function(){return S});var v=d.b.FloatReference;function g(t){switch(t){case"inline":return v.INLINE;case"column":return v.COLUMN;case"region":return v.REGION;case"page":return v.PAGE;default:throw new Error("Unknown float-reference: "+t)}}function m(t){switch(t){case v.INLINE:return!1;case v.COLUMN:case v.REGION:case v.PAGE:return!0;default:throw new Error("Unknown float-reference: "+t)}}var y=function(){function t(t,e,n,i,r,o){this.jo=t,this.Be=e,this.Te=n,this.Ne=i,this.ae=r,this.Se=o,this.order=null,this.id=null}return t.prototype.Xo=function(){if(null===this.order)throw new Error("The page float is not yet added");return this.order},t.prototype.Vo=function(){if(!this.id)throw new Error("The page float is not yet added");return this.id},t.prototype.Yo=function(t){return t.$o(this.Vo())},t.prototype.Wo=function(t){return!1},t}(),b=function(){function t(){this.floats=[],this.qo=0}return t.prototype.Ai=function(){return this.qo++},t.prototype.Ko=function(t){return"pf"+t},t.prototype.Zo=function(t){if(this.floats.findIndex(function(e){return f.u(e.jo,t.jo)})>=0)throw new Error("A page float with the same source node is already registered");var e=t.order=this.Ai();t.id=this.Ko(e),this.floats.push(t)},t.prototype.Qo=function(t){var e=this.floats.findIndex(function(e){return f.u(e.jo,t)});return e>=0?this.floats[e]:null},t.prototype.Jo=function(t){var e=this.floats.findIndex(function(e){return e.id===t});return e>=0?this.floats[e]:null},t}(),E=function(){function t(t,e,n,i,r){this.Be=t,this.Te=e,this.continuations=n,this.area=i,this.continues=r}return t.prototype.tu=function(t){return this.continuations.some(function(e){return e.float===t})},t.prototype.nu=function(t){for(var e=this.continuations.length-1;e>=0;e--){var n=this.continuations[e].float;if(!n.Yo(t))return n}return null},t.prototype.Ys=function(){return this.area.Ys(null,null)},t.prototype.$s=function(){return this.area.$s()},t.prototype.Xo=function(){var t=this.continuations.map(function(t){return t.float});return Math.min.apply(null,t.map(function(t){return t.Xo()}))},t.prototype.iu=function(t){return this.Xo()<t.Xo()},t.prototype.ru=function(t){var e=this;t.forEach(function(t){e.continuations.push(t)})},t.prototype.eu=function(){var t=this.continuations[0].float.ae;return i.a(this.continuations.every(function(e){return e.float.ae===t})),t},t}(),w=function(){function t(t,e){this.float=t,this.jo=e}return t.prototype.equals=function(t){return!!t&&(this===t||this.float===t.float&&f.u(this.jo,t.jo))},t}(),T=function(){function t(t,e,n,i,o,a,s){this.parent=t,this.Be=e,this.container=n,this.ae=i,this.su=o,this.children=[],this.invalidated=!1,this.ou=[],this.uu=[],this.hu=[],this.au={},this.fu=[],this.cu=[],this.locked=!1,t&&t.children.push(this),this.writingMode=a||t&&t.writingMode||r.t.horizontal_tb,this.direction=s||t&&t.direction||r.t.ltr,this.lu=t?t.lu:new b;var u=this.vu();this.du=u?[].concat(u.fu):[]}return t.prototype.pu=function(t){if(!this.parent)throw new Error("No PageFloatLayoutContext for "+t);return this.parent},t.prototype.bu=function(t,e,n,i){var r=this.children.indexOf(t);r<0&&(r=this.children.length);for(var o=r-1;o>=0;o--){var a=this.children[o];if(a.Be===e&&a.ae===n&&f.u(a.su,i))return a;if(a=a.bu(null,e,n,i))return a}return null},t.prototype.vu=function(){for(var t,e=this,n=this.parent;n;){if(t=n.bu(e,this.Be,this.ae,this.su))return t;e=n,n=n.parent}return null},t.prototype.wu=function(t){return t&&t!==this.Be?this.pu(t).wu(t):this.container},t.prototype.mu=function(t){this.container=t,this.gu()},t.prototype.Zo=function(t){this.lu.Zo(t)},t.prototype.Eu=function(t){return t===this.Be?this:this.pu(t).Eu(t)},t.prototype.Qo=function(t){return this.lu.Qo(t)},t.prototype.forbid=function(t){var e=t.Vo(),n=t.Be;n===this.Be?this.ou.includes(e)||(this.ou.push(e),(new S).ku(t).forbid(t,this)):this.pu(n).forbid(t)},t.prototype._u=function(t){var e=t.Vo(),n=t.Be;return n===this.Be?this.ou.includes(e):this.pu(n)._u(t)},t.prototype.xu=function(t,e){var n=t.Be;n!==this.Be?this.pu(n).xu(t,e):this.uu.includes(t)||(this.uu.push(t),this.uu.sort(function(t,e){return t.Xo()-e.Xo()})),e||this.invalidate()},t.prototype.yu=function(t,e){var n=t.Be;if(n!==this.Be)this.pu(n).yu(t,e);else{var i=this.uu.indexOf(t);if(i>=0){var r=this.uu.splice(i,1)[0],o=r.area&&r.area.element;o&&o.parentNode&&o.parentNode.removeChild(o),e||this.invalidate()}}},t.prototype.Tu=function(t){if(t.Be!==this.Be)return this.pu(t.Be).Tu(t);var e=this.uu.findIndex(function(e){return e.tu(t)});return e>=0?this.uu[e]:null},t.prototype.Nu=function(t){return!(!(this.uu.length>0)||t&&!this.uu.some(t))||!!this.parent&&this.parent.Nu(t)},t.prototype.Su=function(t){return this.Nu(function(e){return e.continues&&e.eu()===t})},t.prototype.Au=function(t,e){this.au[t.Vo()]=e},t.prototype.Ru=function(){var t=Object.assign({},this.au);return this.children.reduce(function(t,e){return Object.assign(t,e.Ru())},t)},t.prototype.$o=function(t){if(this.Cu().some(function(e){return e.float.Vo()===t}))return!0;var e=this.Ru()[t];return!!e&&!(!this.container||!this.container.element)&&this.container.element.contains(e)},t.prototype.Ou=function(t){var e=t.float;if(e.Be===this.Be){var n=this.fu.findIndex(function(t){return t.float===e});n>=0?this.fu.splice(n,1,t):this.fu.push(t)}else this.pu(e.Be).Ou(t)},t.prototype.Iu=function(t,e){if(!e&&t.Be!==this.Be)return this.pu(t.Be).Iu(t,!1);var n=t.Xo();return!!this.fu.some(function(e){return e.float.Xo()<n&&!t.Wo(e.float)})||!!this.parent&&this.parent.Iu(t,!0)},t.prototype.Lu=function(t){var e=t.Xo(),n=null;if(this.uu.forEach(function(t){t.continuations.forEach(function(t){var i=t.float,r=i.Xo();r>e&&(!n||r>n.Xo())&&(n=i)})}),this.parent){var i=this.parent.Lu(t);i&&(!n||i.Xo()>n.Xo())&&(n=i)}return n},t.prototype.Cu=function(t){t=t||this.ae;var e=this.du.filter(function(e){return!t||e.float.ae===t});return this.parent&&(e=this.parent.Cu(t).concat(e)),e.sort(function(t,e){return t.float.Xo()-e.float.Xo()})},t.prototype.Pu=function(t){t=t||this.ae;var e=this.fu.filter(function(e){return!t||e.float.ae===t});return this.parent?this.parent.Pu(t).concat(e):e},t.prototype.Fu=function(){for(var t=[],e=[],n=this.children.length-1;n>=0;n--){var i=this.children[n];e.includes(i.ae)||(e.push(i.ae),t=(t=t.concat(i.fu.map(function(t){return t.float}))).concat(i.Fu()))}return t},t.prototype.Du=function(){if(this.Mu())return!0;for(var t=this.uu.length-1;t>=0;t--){var e=this.uu[t],n=e.nu(this);if(n)return this.locked?this.invalidate():(this.yu(e),this.forbid(n),this.Uu(e.Te)),!0}return!(this.Be!==v.REGION||!this.parent.locked)&&this.parent.Du()},t.prototype.Mu=function(){var t=this.Fu(),e=this.uu.reduce(function(t,e){return t.concat(e.continuations.map(function(t){return t.float}))},[]);e.sort(function(t,e){return e.Xo()-t.Xo()});for(var n=function(e){var n=e.Xo();if(t.some(function(t){return!e.Wo(t)&&n>t.Xo()})){if(r.locked)r.invalidate();else{r.forbid(e);var o=r.Tu(e);i.a(o),r.yu(o)}return{value:!0}}},r=this,o=0,a=e;o<a.length;o++){var s=n(a[o]);if("object"==typeof s)return s.value}return!1},t.prototype.finish=function(){var t=this;if(!this.Du()){for(var e=this.fu.length-1;e>=0;e--)if(!this.fu[e].float.Yo(this)){if(this.locked)return void this.invalidate();this.fu.splice(e,1)}this.du.forEach(function(e){t.fu.findIndex(function(t){return e.equals(t)})>=0||t.uu.some(function(t){return t.tu(e.float)})||t.fu.push(e)})}},t.prototype.Gu=function(t){return!!this.container&&!!t.container&&this.container.element===t.container.element},t.prototype.invalidate=function(){var t=this;this.invalidated=!0,this.locked||(this.container&&(this.children.forEach(function(e){t.Gu(e)&&e.uu.forEach(function(t){var e=t.area.element;e&&e.parentNode&&e.parentNode.removeChild(e)})}),this.container.clear()),this.children.forEach(function(t){t.cu.splice(0)}),this.children.splice(0),Object.keys(this.au).forEach(function(e){delete t.au[e]}))},t.prototype.Bu=function(){var t=this.children.splice(0);return t.forEach(function(t){t.uu.forEach(function(t){var e=t.area.element;e&&e.parentNode&&e.parentNode.removeChild(e)})}),t},t.prototype.zu=function(t){var e=this;t.forEach(function(t){e.children.push(t),t.gu()})},t.prototype.Hu=function(){return this.invalidated||!!this.parent&&this.parent.Hu()},t.prototype.validate=function(){this.invalidated=!1},t.prototype.ju=function(t){return function(t,e,n){return s(t,e,n||null,h)}(t,this.writingMode.toString(),this.direction.toString())},t.prototype.Xu=function(t){return function(t,e,n){return s(t,e,n||null,l)}(t,this.writingMode.toString(),this.direction.toString())},t.prototype.Uu=function(t){var e=this.ju(t);if("block-end"===e||"inline-end"===e)for(var n=0;n<this.uu.length;){var i=this.uu[n];this.ju(i.Te)===e?this.yu(i):n++}},t.prototype.Vu=function(t){var e=t.Be;if(e===this.Be){var n=this.ju(t.Te);if("block-end"===n||"snap-block"===n||"inline-end"===n)for(var i=0;i<this.uu.length;){var r=this.uu[i],o=this.ju(r.Te);(o===n||"snap-block"===n&&"block-end"===o)&&r.iu(t)?(this.hu.push(r),this.uu.splice(i,1)):i++}}else this.pu(e).Vu(t)},t.prototype.Yu=function(t){var e=this;t===this.Be?(this.hu.forEach(function(t){e.xu(t,!0)}),this.hu.splice(0)):this.pu(t).Yu(t)},t.prototype.$u=function(t){t===this.Be?this.hu.splice(0):this.pu(t).$u(t)},t.prototype.Wu=function(t){return t===this.Be?this.hu.concat().sort(function(t,e){return e.Xo()-t.Xo()}):this.pu(t).Wu(t)},t.prototype.qu=function(t,e,n,r){i.a(this.container);var o=this.ju(t),a=this.Xu(t),s=this.Ku(o,e,n,r);if(this.parent&&this.parent.container){var u=this.parent.qu(a,e,n,r);switch(a){case"top":case"left":return Math.max(s,u);case"bottom":case"right":return Math.min(s,u);default:i.b("Should be unreachable")}}return s},t.prototype.Ku=function(t,e,n,r){i.a(this.container);var o=this.Zu(e,n,r);switch(t){case"block-start":return this.container.vertical?o.right:o.top;case"block-end":return this.container.vertical?o.left:o.bottom;case"inline-start":return this.container.vertical?o.top:o.left;case"inline-end":return this.container.vertical?o.bottom:o.right;default:throw new Error("Unknown logical side: "+t)}},t.prototype.Zu=function(t,e,n){var r=this;i.a(this.container);var o=this.container.ls,a=this.container.vs,s=this.container.Vs(),u={top:s.y1-a,left:s.x1-o,bottom:s.y2-a,right:s.x2-o,Qu:0,Ju:0};function l(n,i,r){return"%"===n.unit?r*n.num/100:t.nh(n,i,e)}var h=this.uu;return h.length>0&&(u=h.reduce(function(t,e){if(n&&!n(e,r))return t;var i=r.ju(e.Te),o=e.area,a=e.continuations[0].float.Se,u=t.top,h=t.left,c=t.bottom,p=t.right,f=t.Qu,d=t.Ju;switch(i){case"inline-start":o.vertical?u=Math.max(u,o.top+o.height):h=Math.max(h,o.left+o.width);break;case"block-start":o.vertical?(a&&o.left<p&&(f=l(a,o.ih[0],s.x2-s.x1)),p=Math.min(p,o.left)):(a&&o.top+o.height>u&&(f=l(a,o.ih[0],s.y2-s.y1)),u=Math.max(u,o.top+o.height));break;case"inline-end":o.vertical?c=Math.min(c,o.top):p=Math.min(p,o.left);break;case"block-end":o.vertical?(a&&o.left+o.width>h&&(d=l(a,o.ih[0],s.x2-s.x1)),h=Math.max(h,o.left+o.width)):(a&&o.top<c&&(d=l(a,o.ih[0],s.y2-s.y1)),c=Math.min(c,o.top));break;default:throw new Error("Unknown logical float side: "+i)}return{top:u,left:h,bottom:c,right:p,Qu:f,Ju:d}},u)),u.left+=o,u.right+=o,u.top+=a,u.bottom+=a,u},t.prototype.rh=function(t,e,n,r,a,s,u){if(e!==this.Be)return this.pu(e).rh(t,e,n,r,a,s,u);var l=this.ju(n);if("snap-block"===l){if(!u["block-start"]&&!u["block-end"])return null}else if(!u[l])return null;i.a(t.eh);var h,p,f,d,v=this.qu("block-start",t.sh,t.eh),g=this.qu("block-end",t.sh,t.eh),m=this.qu("inline-start",t.sh,t.eh),y=this.qu("inline-end",t.sh,t.eh),b=t.vertical?t.ls:t.vs,E=t.vertical?t.vs:t.ls;function w(e,n){var i=e(t.bands,n);return i?(t.vertical&&(i=o.m(i)),v=t.vertical?Math.min(v,i.x2):Math.max(v,i.y1),g=t.vertical?Math.max(g,i.x1):Math.min(g,i.y2),!0):s}if(v=t.vertical?Math.min(v,t.left+t.xs()+t.width+t.ys()+b):Math.max(v,t.top+b),g=t.vertical?Math.max(g,t.left+b):Math.min(g,t.top+t.ks()+t.height+t._s()+b),a){var T=t.vertical?o.i(new o.c(g,m,v,y)):new o.c(m,v,y,g);if(("block-start"===l||"snap-block"===l||"inline-start"===l)&&!w(o.g,T))return null;if(("block-end"===l||"snap-block"===l||"inline-end"===l)&&!w(o.f,T))return null;if(h=(f=(g-v)*t.Fs())-t.Ts()-t.Ns(),p=(d=y-m)-t.Ss()-t.As(),!s&&(h<=0||p<=0))return null}else{f=(h=t.ps)+t.Ts()+t.Ns();var N=(g-v)*t.Fs();if("snap-block"===l){if(null===r)l="block-start";else{var S=this.container.Vs();l=this.container.Fs()*(r-(this.container.vertical?S.x2:S.y1))<=this.container.Fs()*((this.container.vertical?S.x1:S.y2)-r-f)?"block-start":"block-end"}if(!u[l]){if(!u["block-end"])return null;l="block-end"}}if(!s&&N<f)return null;if(d=(p="inline-start"===l||"inline-end"===l?c.b(t.eh,t.element,[c.a.FIT_CONTENT_INLINE_SIZE])[c.a.FIT_CONTENT_INLINE_SIZE]:t.oh?t.uh():t.vertical?t.height:t.width)+t.Ss()+t.As(),!s&&y-m<d)return null}switch(v-=b,g-=b,m-=E,y-=E,l){case"inline-start":case"block-start":case"snap-block":t.zs(m,p),t.Bs(v,h);break;case"inline-end":case"block-end":t.zs(y-d,p),t.Bs(g-f*t.Fs(),h);break;default:throw new Error("unknown float direction: "+n)}return l},t.prototype.hh=function(){var t=this.uu.map(function(t){return t.Ys()});return this.parent?this.parent.hh().concat(t):t},t.prototype.gu=function(){var t=this.container.element&&this.container.element.parentNode;t&&this.uu.forEach(function(e){t.appendChild(e.area.element)})},t.prototype.ah=function(){var t=this.wu().vertical;return this.uu.reduce(function(e,n){var i=n.$s();return t?Math.min(e,i.x1):Math.max(e,i.y2)},t?1/0:0)},t.prototype.fh=function(){var t=this.wu().vertical;return this.uu.filter(function(t){return"block-end"===t.Te}).reduce(function(e,n){var i=n.$s();return t?Math.max(e,i.x2):Math.min(e,i.y1)},t?0:1/0)},t.prototype.lh=function(t,e){function n(t){return function(e){return t.$o(e.float.Vo())}}function r(t,e){return t.continuations.some(n(e))}for(var o=e.Vs(),a=e.vertical?o.x1:o.y2,s=this;s;){if(s.fu.some(n(s)))return a;s=s.parent}i.a(e.eh);var u=this.qu("block-start",e.sh,e.eh,r);return this.qu("block-end",e.sh,e.eh,r)*e.Fs()<a*e.Fs()?a:u},t.prototype.dh=function(t,e,n){var i=this;if(t.Be!==this.Be)return this.pu(t.Be).dh(t,e,n);var r={"block-start":!0,"block-end":!0,"inline-start":!0,"inline-end":!0};if(!n)return r;var o,a=this.ju(e),s=this.ju(n);o="all"===s?["block-start","block-end","inline-start","inline-end"]:"both"===s?["inline-start","inline-end"]:"same"===s?"snap-block"===a?["block-start","block-end"]:[a]:[s];var u=t.Xo();function l(t){return function(e){return e.Te===t&&e.Xo()<u}}return o.forEach(function(t){switch(t){case"block-start":case"inline-start":r[t]=!function t(e,n){return e.children.some(function(e){return e.uu.some(l(n))||t(e,n)})}(i,t);break;case"block-end":case"inline-end":r[t]=!function t(e,n){var i=e.parent;return!!i&&(i.uu.some(l(n))||t(i,n))}(i,t);break;default:throw new Error("Unexpected side: "+t)}}),r},t.prototype.ph=function(){return(this.parent?this.parent.ph():[]).concat(this.cu)},t.prototype.bh=function(t,e){e===this.Be?this.cu.push(t):this.pu(e).bh(t,e)},t.prototype.wh=function(t){var e=t.sh,n=t.eh;i.a(n);for(var r=this,o=null;r&&r.container;){var a=r.Zu(e,n);o?t.vertical?(a.right<o.right&&(o.right=a.right,o.Qu=a.Qu),a.left>o.left&&(o.left=a.left,o.Ju=a.Ju)):(a.top>o.top&&(o.top=a.top,o.Qu=a.Qu),a.bottom<o.bottom&&(o.bottom=a.bottom,o.Ju=a.Ju)):o=a,r=r.parent}var s=Math.max(o.Qu,o.Ju);return(t.vertical?o.right-o.left:o.bottom-o.top)<=s},t.prototype.mh=function(){var t=this.wu().vertical;return this.uu.length?Math.max.apply(null,this.uu.map(function(e){var n=e.area;return t?n.width:n.height})):0},t.prototype.lock=function(){this.locked=!0},t.prototype.unlock=function(){this.locked=!1},t.prototype.gh=function(){return this.locked},t}(),N=[],S=function(){function t(){}return t.register=function(t){N.push(t)},t.prototype.Eh=function(t){for(var e=N.length-1;e>=0;e--){var n=N[e];if(n.kh(t))return n}throw new Error("No PageFloatLayoutStrategy found for "+t)},t.prototype.ku=function(t){for(var e=N.length-1;e>=0;e--){var n=N[e];if(n._h(t))return n}throw new Error("No PageFloatLayoutStrategy found for "+t)},t}(),_=function(){function t(){}return t.prototype.kh=function(t){return m(t.Be)},t.prototype._h=function(t){return!0},t.prototype.xh=function(t,e,n){var r=t.Be;i.a(t.Te);var o=t.Te,a=t.We();return n.yh(r,t.columnSpan,t).Pt(function(n){r=n,i.a(e.ae);var s=new y(a,r,o,t.Ne,e.ae,t.Se);return e.Zo(s),p.d(s)})},t.prototype.Th=function(t,e,n,i){var r=t[0].float;return new E(r.Be,e,t,n,i)},t.prototype.Tu=function(t,e){return e.Tu(t)},t.prototype.Nh=function(t,e,n){},t.prototype.forbid=function(t,e){},t}();S.register(new _)},function(t,e,n){"use strict";n.d(e,"c",function(){return a}),n.d(e,"b",function(){return u}),n.d(e,"d",function(){return l}),n.d(e,"a",function(){return h}),n.d(e,"e",function(){return c});var i=n(0),r=n(9),o={page:!0,left:!0,right:!0,recto:!0,verso:!0,column:!0,region:!0};function a(t){return!!o[t]}var s={avoid:!0,"avoid-page":!0,"avoid-column":!0,"avoid-region":!0};function u(t){return!!s[t]}function l(t,e){if(!t)return e;if(!e)return t;var n=a(t),i=a(e);if(!n||!i)return i?e:n?t:u(e)?e:u(t)?t:e;switch(e){case"column":return t;case"region":return"column"===t?e:t;default:return e}}function h(t){switch(t){case"left":case"right":case"recto":case"verso":return t;default:return"any"}}function c(t){switch(t){case"left":case"right":case"recto":case"verso":return t;default:return null}}r.c.Zs("SIMPLE_PROPERTY",function(t){var e=t.name,n=t.value;switch(e){case"page-break-before":case"page-break-after":case"page-break-inside":return{name:e.replace(/^page-/,""),value:n===i.t.always?i.t.page:n,important:t.important};default:return t}})},function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return s}),n.d(e,"c",function(){return u}),n.d(e,"f",function(){return l}),n.d(e,"d",function(){return h}),n.d(e,"e",function(){return c});var i=n(1),r=n(6),o=n(8);function a(t,e,n,o){var a=t.Le;if(!a)return NaN;if(1==a.nodeType){if(t.after||!t.inline){var s=e.ue(a);if(s.right>=s.left&&s.bottom>=s.top)return t.after?o?s.left:s.bottom:o?s.right:s.top}return NaN}var u=NaN,l=a.ownerDocument.createRange(),h=a.textContent.length;if(!h)return NaN;t.after&&(n+=h),n>=h&&(n=h-1),l.setStart(a,n),l.setEnd(a,n+1);var c=e.Sh(l);o&&i.m(document.body)&&(c=function(t,e,n){var i=n.ownerDocument.createRange();i.setStart(n,0),i.setEnd(n,n.textContent.length);for(var o=t.Sh(i),a=[],s=0,u=e;s<u.length;s++){var l=u[s],h=void 0;for(h=0;h<o.length;h++){var c=o[h];if(l.top>=c.top&&l.bottom<=c.bottom&&Math.abs(l.left-c.left)<1){a.push({top:l.top,left:c.left,bottom:l.bottom,right:c.right});break}}h==o.length&&(r.b.warn("Could not fix character box"),a.push(l))}return a}(e,c,a));for(var p=0,f=0,d=c;f<d.length;f++){var v=d[f],g=o?v.bottom-v.top:v.right-v.left;v.right>v.left&&v.bottom>v.top&&(isNaN(u)||g>p)&&(u=o?v.left:v.bottom,p=g)}return u}function s(t,e,n){var i=e.eh.ue(t),r=e.Ah(t);return n?i.width+r.left+r.right:i.height+r.top+r.bottom}function u(t){for(;t;){if(t.parentNode===t.ownerDocument)return!1;t=t.parentNode}return!0}function l(t,e){if(t)for(var n;(n=t.lastChild)!=e;)t.removeChild(n)}function h(t){return!!t.getAttribute(o.m)}function c(t){if(!t)return!1;var e=t.Le;return!(!e||1!==e.nodeType)&&h(e)}},function(t,e,n){"use strict";var i,r,o,a,s,u;n.d(e,"a",function(){return i}),n.d(e,"b",function(){return r}),n.d(e,"d",function(){return o}),n.d(e,"c",function(){return a}),n.d(e,"e",function(){return s}),n.d(e,"f",function(){return u}),(i||(i={})).Rh=function(t){return t&&"Block"===t.Ch},function(t){!function(t){t.INLINE="inline",t.COLUMN="column",t.REGION="region",t.PAGE="page"}(t.FloatReference||(t.FloatReference={}))}(r||(r={})),(o||(o={})).Oh=function(t){return t&&"AfterIfContinue"==t.Ih},function(t){t.Lh=function(t){return!!t&&("RepetitiveElementsOwner"===t.Ch||s.Ph(t))},t.Fh=function(t){return!!t&&("RepetitiveElementsOwner"===t.Ih||s.Dh(t))}}(a||(a={})),function(t){t.Ph=function(t){return t&&"Table"===t.Ch},t.Dh=function(t){return t&&"TableRow"===t.Ih}}(s||(s={})),function(t){!function(t){t[t.IGNORE=0]="IGNORE",t[t.NEWLINE=1]="NEWLINE",t[t.PRESERVE=2]="PRESERVE"}(t.Whitespace||(t.Whitespace={})),function(t){t[t.NONE=0]="NONE",t[t.CONTENT=1]="CONTENT",t[t.ROOTLESS=2]="ROOTLESS",t[t.ROOTED=3]="ROOTED"}(t.ShadowType||(t.ShadowType={}))}(u||(u={}))},function(t,e,n){"use strict";var i,r=n(1),o=n(6),a=n(3),s=n(17);function u(t,e,n,r,s){var u=a.c("ajax"),h=new XMLHttpRequest,c=u.suspend(h),p={status:0,statusText:"",url:t,contentType:null,responseText:null,responseXML:null,Mh:null};h.open(n||"GET",t,!0),e&&(h.responseType=e),h.onreadystatechange=function(){if(4===h.readyState){if(p.status=h.status,p.statusText=h.statusText||404==h.status&&"Not Found"||"",200==p.status||0==p.status)if(e&&e!==i.DOCUMENT||!h.responseXML||"parsererror"==h.responseXML.documentElement.localName)if((!e||e===i.DOCUMENT)&&h.response instanceof HTMLDocument)p.responseXML=h.response,p.contentType=h.response.contentType;else{var n=h.response;e&&e!==i.TEXT||"string"!=typeof n?n?p.Mh="string"==typeof n?l([n]):n:o.b.warn("Unexpected empty success response for",t):p.responseText=n;var r=h.getResponseHeader("Content-Type");r&&(p.contentType=r.replace(/(.*);.*$/,"$1"))}else p.responseXML=h.responseXML,p.contentType=h.responseXML.contentType;c.schedule(p)}};try{r?(h.setRequestHeader("Content-Type",s||"text/plain; charset=UTF-8"),h.send(r)):(/^file:|^https?:\/\/[^\/]+\.githubusercontent\.com|\.opf$/.test(t)?/\/aozorabunko\/[^\/]+\/cards\/[^\/]+\/files\/[^\/.]+\.html$/.test(t)?h.overrideMimeType("text/html; charset=Shift_JIS"):/\.(html|htm)$/.test(t)?h.overrideMimeType("text/html; charset=UTF-8"):/\.(xhtml|xht|xml|opf)$/.test(t)?h.overrideMimeType("application/xml; charset=UTF-8"):/\.(txt|css)$/.test(t)?h.overrideMimeType("text/plain; charset=UTF-8"):h.overrideMimeType("text/html; charset=UTF-8"):/^data:,(<|%3C|%3c)/.test(t)?h.overrideMimeType("text/html; charset=UTF-8"):/^data:,/.test(t)&&h.overrideMimeType("text/plain; charset=UTF-8"),h.send(null))}catch(e){o.b.warn(e,"Error fetching "+t),c.schedule(p)}return u.result()}function l(t,e){var n=e||"application/octet-stream",i=window.WebKitBlobBuilder||window.MSBlobBuilder;if(i){for(var r=new i,o=0;o<t.length;o++)r.append(t[o]);return r.getBlob(n)}return new Blob(t,{type:n})}function h(t){var e=a.c("readBlob"),n=new FileReader,i=e.suspend(n);return n.addEventListener("load",function(){i.schedule(n.result)},!1),n.readAsArrayBuffer(t),e.result()}function c(t){return(window.URL||window.webkitURL).createObjectURL(t)}n.d(e,"b",function(){return i}),n.d(e,"c",function(){return u}),n.d(e,"e",function(){return l}),n.d(e,"g",function(){return h}),n.d(e,"d",function(){return c}),n.d(e,"a",function(){return p}),n.d(e,"f",function(){return d}),function(t){t.DEFAULT="",t.ARRAYBUFFER="arraybuffer",t.BLOB="blob",t.DOCUMENT="document",t.JSON="json",t.TEXT="text"}(i||(i={}));var p=function(){function t(t,e){this.parser=t,this.type=e,this.resources={},this.fetchers={}}return t.prototype.load=function(t,e,n){t=r.I(t);var i=this.resources[t];return void 0!==i?a.d(i):this.fetch(t,e,n).get()},t.prototype.Uh=function(t,e,n){var i=this,o=a.c("fetch"),s=t.endsWith("?viv-toc-box");s&&(t=t.replace("?viv-toc-box",""));var l=r.C("user-agent.xml",r.D),h=!s&&t===l;return h&&(t="data:application/xml,"+encodeURIComponent('<!DOCTYPE html>\n<html xmlns="http://www.w3.org/1999/xhtml" xmlns:s="http://www.pyroxy.com/ns/shadow">\n<head>\n<style><![CDATA[\n\n.footnote-content {\n  float: footnote;\n}\n\n.table-cell-container {\n  display: block;\n}\n\n]]></style>\n</head>\n<body>\n\n<s:template id="footnote"><s:content/><s:include class="footnote-content"/></s:template>\n\n<s:template id="table-cell"><div data-vivliostyle-flow-root="true" class="table-cell-container"><s:content/></div></s:template>\n\n</body>\n</html>\n')),u(t,i.type).then(function(r){if(r.status>=400&&e)throw new Error((n||"Failed to fetch required resource: "+t)+" ("+r.status+(r.statusText?" "+r.statusText:"")+")");s?(t+="?viv-toc-box",r.url+="?viv-toc-box"):h&&(r.url=t=l),i.parser(r,i).then(function(e){delete i.fetchers[t],i.resources[t]=e,o.finish(e)})}),o.result()},t.prototype.fetch=function(t,e,n){if(t=r.I(t),this.resources[t])return null;var i=this.fetchers[t];if(!i){var o=this;i=new s.a(function(){return o.Uh(t,e,n)},"Fetch "+t),o.fetchers[t]=i,i.start()}return i},t.prototype.get=function(t){return this.resources[r.I(t)]},t.prototype.delete=function(t){delete this.resources[r.I(t)]},t}();function f(t,e){var n=t.responseText;return a.d(n?r.H(n):null)}function d(){return new p(f,i.TEXT)}},function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"c",function(){return s}),n.d(e,"b",function(){return u});var i=n(1),r=n(6),o=n(3),a=function(){function t(t,e){this.fetch=t,this.arrived=!1,this.resource=null,this.task=null,this.piggybacks=[],this.name=e}return t.prototype.start=function(){if(!this.task){var t=this;this.task=o.a().wt().run(function(){var e=o.c("Fetcher.run");return t.fetch().then(function(n){var i=t.piggybacks;if(t.arrived=!0,t.resource=n,t.task=null,t.piggybacks=[],i)for(var o=0;o<i.length;o++)try{i[o](n)}catch(t){r.b.error(t,"Error:")}e.finish(n)}),e.result()},this.name)}},t.prototype.piggyback=function(t){this.arrived?t(this.resource):this.piggybacks.push(t)},t.prototype.get=function(){return this.arrived?o.d(this.resource):(this.start(),this.task.join())},t.prototype.Gh=function(){return this.arrived},t}(),s=function(t){if(0==t.length)return o.d(!0);if(1==t.length)return t[0].get().Ft(!0);var e=o.c("waitForFetches"),n=0;return e.loop(function(){for(;n<t.length;){var e=t[n++];if(!e.Gh())return e.get().Ft(!0)}return o.d(!1)}).then(function(){e.finish(!0)}),e.result()};function u(t,e){var n=null,r=null;"img"==t.localName&&(n=t.getAttribute("width"),r=t.getAttribute("height"));var s=new a(function(){var a=o.c("loadImage"),s=a.suspend(t),u=!1,l=function(e){u||(u=!0,"img"==t.localName&&(n||t.removeAttribute("width"),r||t.removeAttribute("height")),s.schedule(e?e.type:"timeout"))};return t.addEventListener("load",l,!1),t.addEventListener("error",l,!1),t.addEventListener("abort",l,!1),t.namespaceURI==i.a.SVG?(t.setAttributeNS(i.a.XLINK,"xlink:href",e),setTimeout(l,300)):t.src=e,a.result()},"loadElement "+e);return s.start(),s}},function(t,e,n){"use strict";n.d(e,"c",function(){return l}),n.d(e,"b",function(){return h}),n.d(e,"a",function(){return c}),n.d(e,"d",function(){return p}),n.d(e,"e",function(){return f});var i=n(22),r=n(24),o=n(14),a=n(9),s=n(3),u=n(15),l=function(){function t(){}return t.prototype.find=function(t){for(var e=a.b(a.a.RESOLVE_LAYOUT_PROCESSOR),n=0;n<e.length;n++){var i=e[n](t);if(i)return i}throw new Error("No processor found for a formatting context: "+t.Ct())},t}(),h=function(){function t(){}return t.prototype.layout=function(t,e,n){return e.Bh(t)?e.zh(t):e.Hh(t)?e.jh(t):e.Xh(t)},t.prototype.Vh=function(t,e,n,r){return new i.b(t.copy(),e,n,r)},t.prototype.Yh=function(t){return!1},t.prototype.$h=function(t,e){return!1},t.prototype.Wh=function(t,e,n,i){if(n.Le&&n.Le.parentNode){var r=n.Le.parentNode;o.f(r,n.Le),i&&r.removeChild(n.Le)}},t.prototype.qh=function(t,e,n,i){var r=n||null!=e.Le&&1==e.Le.nodeType&&!e.after;return t.Wh(e,r),i&&(t.Kh(e,!0),t.sh.Zh(r?e:e.parent)),s.d(!0)},t}(),c=function(){function t(t){this.parent=t,this.Ch="Block"}return t.prototype.Ct=function(){return"Block formatting context (BlockFormattingContext)"},t.prototype.Qh=function(t,e){return e},t.prototype.pu=function(){return this.parent},t.prototype.Jh=function(){},t.prototype.ta=function(t){},t}(),p=new h,f=u.a.Rh;a.d(a.a.RESOLVE_FORMATTING_CONTEXT,function(t,e,n,i,o,a){var s=t.parent;return!s&&t.le?null:s&&t.le!==s.le?null:t.Oe||!t.le&&r.d(n,i,o,a)?new c(s?s.le:null):null}),a.d(a.a.RESOLVE_LAYOUT_PROCESSOR,function(t){return t instanceof c?p:null})},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var i,r=n(1);function o(t,e,n){var o={display:e.style.display,position:e.style.position,width:e.style.width,maxWidth:e.style.maxWidth,minWidth:e.style.minWidth,height:e.style.height,maxHeight:e.style.maxHeight,minHeight:e.style.minHeight},a=e.ownerDocument,s=e.parentNode,u=a.createElement("div");function l(n){return t.na(e).getPropertyValue(n)}r.F(u,"position",o.position),s.insertBefore(u,e),u.appendChild(e),r.F(e,"width","auto"),r.F(e,"max-width","none"),r.F(e,"min-width","0"),r.F(e,"height","auto"),r.F(e,"max-height","none"),r.F(e,"min-height","0");var h=r.v("writing-mode"),c=(h?l(h[0]):null)||l("writing-mode"),p="vertical-rl"===c||"tb-rl"===c||"vertical-lr"===c||"tb-lr"===c,f=p?"height":"width",d=p?"width":"height";function v(){return r.F(e,"display","block"),r.F(e,"position","static"),l(f)}function g(){r.F(e,"display","inline-block"),r.F(u,f,"99999999px");var t=l(f);return r.F(u,f,""),t}function m(){r.F(e,"display","inline-block"),r.F(u,f,"0");var t=l(f);return r.F(u,f,""),t}function y(){var t=v(),e=m(),n=parseFloat(t);if(n<=parseFloat(e))return e;var i=g();return n<=parseFloat(i)?t:i}function b(){return l(d)}function E(){throw new Error("Getting fill-available block size is not implemented")}var w={};return n.forEach(function(t){var n;switch(t){case i.FILL_AVAILABLE_INLINE_SIZE:n=v();break;case i.MAX_CONTENT_INLINE_SIZE:n=g();break;case i.MIN_CONTENT_INLINE_SIZE:n=m();break;case i.FIT_CONTENT_INLINE_SIZE:n=y();break;case i.FILL_AVAILABLE_BLOCK_SIZE:n=E();break;case i.MAX_CONTENT_BLOCK_SIZE:case i.MIN_CONTENT_BLOCK_SIZE:case i.FIT_CONTENT_BLOCK_SIZE:n=b();break;case i.FILL_AVAILABLE_WIDTH:n=p?E():v();break;case i.FILL_AVAILABLE_HEIGHT:n=p?v():E();break;case i.MAX_CONTENT_WIDTH:n=p?b():g();break;case i.MAX_CONTENT_HEIGHT:n=p?g():b();break;case i.MIN_CONTENT_WIDTH:n=p?b():m();break;case i.MIN_CONTENT_HEIGHT:n=p?m():b();break;case i.FIT_CONTENT_WIDTH:n=p?b():y();break;case i.FIT_CONTENT_HEIGHT:n=p?y():b()}w[t]=parseFloat(n),r.F(e,"position",o.position),r.F(e,"display",o.display)}),r.F(e,"width",o.width),r.F(e,"max-width",o.maxWidth),r.F(e,"min-width",o.minWidth),r.F(e,"height",o.height),r.F(e,"max-height",o.maxHeight),r.F(e,"min-height",o.minHeight),s.insertBefore(e,u),s.removeChild(u),w}!function(t){t.FILL_AVAILABLE_INLINE_SIZE="fill-available inline size",t.FILL_AVAILABLE_BLOCK_SIZE="fill-available block size",t.FILL_AVAILABLE_WIDTH="fill-available width",t.FILL_AVAILABLE_HEIGHT="fill-available height",t.MAX_CONTENT_INLINE_SIZE="max-content inline size",t.MAX_CONTENT_BLOCK_SIZE="max-content block size",t.MAX_CONTENT_WIDTH="max-content width",t.MAX_CONTENT_HEIGHT="max-content height",t.MIN_CONTENT_INLINE_SIZE="min-content inline size",t.MIN_CONTENT_BLOCK_SIZE="min-content block size",t.MIN_CONTENT_WIDTH="min-content width",t.MIN_CONTENT_HEIGHT="min-content height",t.FIT_CONTENT_INLINE_SIZE="fit-content inline size",t.FIT_CONTENT_BLOCK_SIZE="fit-content block size",t.FIT_CONTENT_WIDTH="fit-content width",t.FIT_CONTENT_HEIGHT="fit-content height"}(i||(i={}))},function(t,e,n){"use strict";n.d(e,"d",function(){return l}),n.d(e,"c",function(){return c}),n.d(e,"e",function(){return f}),n.d(e,"b",function(){return v}),n.d(e,"a",function(){return g});var i,r=n(0),o=n(11),a=n(6),s=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),u=function(t){function e(){var e=t.call(this)||this;return e.ia={},e}return s(e,t),e.prototype.U=function(t){return this.ia[t.name]=!0,t},e.prototype.Z=function(t){return this._(t.values),t},e}(r.m);function l(t){if(t){var e=new u;try{return t.visit(e),e.ia}catch(t){a.b.warn(t,"toSet:")}}return{}}var h=function(t){function e(e){var n=t.call(this)||this;return n.value=e,n}return s(e,t),e.prototype.Y=function(t){return this.value=t.num,t},e}(r.m);function c(t,e){if(t){var n=new h(e);try{return t.visit(n),n.value}catch(t){a.b.warn(t,"toInt: ")}}return e}var p=function(t){function e(){var e=t.call(this)||this;return e.collect=!1,e.coords=[],e.name=null,e}return s(e,t),e.prototype.X=function(t){return this.collect&&this.coords.push(t),null},e.prototype.V=function(t){return this.collect&&0==t.num&&this.coords.push(new r.i(0,"px")),null},e.prototype.Z=function(t){return this._(t.values),null},e.prototype.nt=function(t){return this.collect||(this.collect=!0,this._(t.values),this.collect=!1,this.name=t.name.toLowerCase()),null},e.prototype.ra=function(t,e,n,i,r){var a=this;if(this.coords.length>0){var s=[];switch(this.coords.forEach(function(t,e){if("%"==t.unit){var o=e%2==0?n:i;3==e&&"circle"==a.name&&(o=Math.sqrt((n*n+i*i)/2)),s.push(t.num*o/100)}else s.push(t.num*r.ft(t.unit,!1))}),this.name){case"polygon":if(s.length%2==0){for(var u=[],l=0;l<s.length;l+=2)u.push(new o.b(t+s[l],e+s[l+1]));return new o.d(u)}break;case"rectangle":if(4==s.length)return o.k(t+s[0],e+s[1],t+s[0]+s[2],e+s[1]+s[3]);break;case"ellipse":if(4==s.length)return o.j(t+s[0],e+s[1],s[2],s[3]);break;case"circle":if(3==s.length)return o.j(t+s[0],e+s[1],s[2],s[2])}}return null},e}(r.m);function f(t,e,n,i,r,s){if(t){var u=new p;try{return t.visit(u),u.ra(e,n,i,r,s)}catch(t){a.b.warn(t,"toShape:")}}return o.k(e,n,e+i,n+r)}var d=function(t){function e(e){var n=t.call(this)||this;return n.reset=e,n.counters={},n.name=null,n}return s(e,t),e.prototype.U=function(t){return this.name=t.toString(),this.reset?this.counters[this.name]=0:this.counters[this.name]=(this.counters[this.name]||0)+1,t},e.prototype.Y=function(t){return this.name&&(this.counters[this.name]+=t.num-(this.reset?0:1)),t},e.prototype.Z=function(t){return this._(t.values),t},e}(r.m);function v(t,e){var n=new d(e);try{t.visit(n)}catch(t){a.b.warn(t,"toCounters:")}return n.counters}var g=function(t){function e(e,n){var i=t.call(this)||this;return i.ea=e,i.transformer=n,i}return s(e,t),e.prototype.W=function(t){return new r.l(this.transformer.sa(t.url,this.ea))},e}(r.d)},function(t,e,n){"use strict";n.d(e,"c",function(){return s}),n.d(e,"e",function(){return u}),n.d(e,"a",function(){return l}),n.d(e,"d",function(){return h}),n.d(e,"f",function(){return c}),n.d(e,"b",function(){return p});var i=n(1),r=n(0),o=n(5),a=n(8),s=(new DOMParser).parseFromString('<root xmlns="'+i.a.SHADOW+'"/>',"text/xml"),u=["footnote-marker","first-5-lines","first-4-lines","first-3-lines","first-2-lines","first-line","first-letter","before","","after"],l="data-adapt-pseudo";function h(t){return t.getAttribute(l)||""}function c(t,e){t.setAttribute(l,e)}var p=function(){function t(t,e,n,i,r){this.element=t,this.style=e,this.styler=n,this.context=i,this.qs=r,this.oa={}}return t.prototype.ua=function(t,e){var n=h(t);this.styler&&n&&n.match(/after$/)&&(this.style=this.styler.ua(this.element,!0),this.styler=null);var i=o.u(this.style,"_pseudos")[n]||{};if(n.match(/^first-/)&&!i["x-first-pseudo"]){var a=1,s=void 0;"first-letter"==n?a=0:null!=(s=n.match(/^first-([0-9]+)-lines$/))&&(a=s[1]-0),i["x-first-pseudo"]=new o.c(new r.g(a),0)}return i},t.prototype.ha=function(t,e){var n=h(t);if(!this.oa[n]){this.oa[n]=!0;var i=e.content;i&&a.y(i)&&i.visit(new a.c(t,this.context,i,this.qs))}},t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return u}),n.d(e,"c",function(){return l}),n.d(e,"b",function(){return h});var i,r=n(13),o=n(14),a=n(15),s=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),u=function(){function t(){}return t.prototype.aa=function(t){return l(this.fa(),t.ca())},t.prototype.la=function(t){},t.prototype.fa=function(){return null},t}();function l(t,e){return{current:e.reduce(function(e,n){return e+n.aa(t)},0),minimum:e.reduce(function(e,n){return e+n.va(t)},0)}}var h=function(t){function e(e,n,i,r){var o=t.call(this)||this;return o.position=e,o.da=n,o.overflows=i,o.ps=r,o.pa=!1,o.edge=0,o.ba=i,o}return s(e,t),e.prototype.wa=function(t,e){return this.ma(t),e<this.ga()?null:t.Ea(this)},e.prototype.ga=function(){if(!this.pa)throw new Error("EdgeBreakPosition.prototype.updateEdge not called");var t=this.ka()&&!this.ba;return(r.b(this.da)?1:0)+(this.overflows&&!t?3:0)+(this.position.parent?this.position.parent.Ge:0)},e.prototype._a=function(t){var e=t.xa(this.position);this.edge=o.a(this.position,t.eh,0,t.vertical)+e,this.pa=!0},e.prototype.ma=function(t){this.pa||this._a(t);var e=this.edge,n=this.aa(t);this.ba=t.ya(e+(t.vertical?-1:1)*n.minimum),this.overflows=this.position.overflow=t.ya(e+(t.vertical?-1:1)*n.current)},e.prototype.fa=function(){return this.position},e.prototype.ka=function(){var t=this.fa();if(!t||!t.parent)return!1;var e=t.parent.le;if(!a.c.Lh(e))return!1;var n=e.Ta();return!!n&&n.Na(t)},e}(u)},function(t,e,n){"use strict";n.r(e),n.d(e,"LayoutIteratorStrategy",function(){return h}),n.d(e,"LayoutIterator",function(){return c}),n.d(e,"EdgeSkipper",function(){return p}),n.d(e,"PseudoColumn",function(){return f});var i,r=n(13),o=n(22),a=n(30),s=n(3),u=n(8),l=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),h=function(){function t(){}return t.prototype.Sa=function(t){return{Aa:t,Ra:!1,break:!1}},t.prototype.Ca=function(t){},t.prototype.Oa=function(t){},t.prototype.Ia=function(t){},t.prototype.La=function(t){},t.prototype.Pa=function(t){},t.prototype.Fa=function(t){},t.prototype.Da=function(t){},t.prototype.Ma=function(t){},t.prototype.Yh=function(t){},t.prototype.$h=function(t){},t.prototype.finish=function(t){},t}(),c=function(){function t(t,e){this.strategy=t,this.sh=e}return t.prototype.iterate=function(t){var e=this,n=this.strategy,i=n.Sa(t),r=s.c("LayoutIterator");return r.Bt(function(t){for(var r;i.Aa;){var o=((r=i.Aa.Le?1!==i.Aa.Le.nodeType?u.p(i.Aa.Le,i.Aa.whitespace)?i.Aa.after?n.La(i):n.Ia(i):i.Aa.after?n.Fa(i):n.Pa(i):i.Aa.inline?i.Aa.after?n.Ma(i):n.Da(i):i.Aa.after?n.$h(i):n.Yh(i):i.Aa.after?n.Oa(i):n.Ca(i))&&r.Mt()?r:s.d(!0)).Pt(function(){return i.break?s.d(null):e.sh.Ua(i.Aa,i.Ra)});if(o.Mt())return void o.then(function(e){i.break?t.Ht():(i.Aa=e,t.zt())});if(i.break)return void t.Ht();i.Aa=o.get()}n.finish(i),t.Ht()}).then(function(){r.finish(i.Aa)}),r.result()},t}(),p=function(t){function e(e){var n=t.call(this)||this;return n.Ga=e,n}return l(e,t),e.prototype.Ba=function(t){},e.prototype.za=function(t){},e.prototype.Ha=function(t){},e.prototype.Sa=function(t){return{Aa:t,Ra:!!this.Ga&&t.after,break:!1,Ga:this.Ga,ja:null,Xa:!1,Va:[],Ya:null}},e.prototype.$a=function(t,e){var n=!t.Ga&&r.c(t.ja);if(n){var i=t.Aa=t.Va[0]||t.Aa;i.Le.parentNode.removeChild(i.Le),e.Wa=t.ja}return n},e.prototype.qa=function(t,e){var n=e.Ka(t.Ya,null,!0,t.ja);return n&&(t.Aa=(t.Ya||t.Aa).modify(),t.Aa.overflow=!0),n},e.prototype.Za=function(t,e,n){var i=t.Aa,r=!e.Qa(i);return r&&(n.Ka(t.Ya,null,!1,t.ja),(i=t.Aa=i.modify()).overflow=!0),r},e.prototype.Pa=function(t){t.Xa=!1},e.prototype.Yh=function(t){return t.Va.push(t.Aa.copy()),t.ja=r.d(t.ja,t.Aa.breakBefore),t.Xa=!0,this.Ba(t)},e.prototype.$h=function(t){var e;return(t.Xa?((e=this.za(t))&&e.Mt()?e:s.d(!0)).Pt(function(){return t.break||(t.Va=[],t.Ga=!1,t.Ra=!1,t.ja=null),s.d(!0)}):(e=this.Ha(t))&&e.Mt()?e:s.d(!0)).Pt(function(){return t.break||(t.Xa=!1,t.Ya=t.Aa.copy(),t.ja=r.d(t.ja,t.Aa.breakAfter)),s.d(!0)})},e}(h),f=function(){function t(t,e,n){this.Ja=[],this.column=Object.create(t),this.column.element=e,this.column.sh=t.sh.clone(),this.column.tf=!1,this.column.nf=n.le,this.column.if=t;var i=this.column.xa(n);this.column.rf=this.column.rf-i;var r=this;this.column.ef=function(t){return a.b.prototype.ef.call(this,t).Pt(function(t){return r.Ja.push(t.copy()),s.d(t)})}}return t.prototype.layout=function(t,e){return this.column.layout(t,e)},t.prototype.sf=function(t){var e=this.column.sf();if(t){var n=this.Ja[0].copy(),i=new o.b(n,null,n.overflow,0);if(i.wa(this.column,0),!e.Aa)return{uf:i,Aa:n}}return e},t.prototype.qh=function(t,e,n){return this.column.qh(t,e,n)},t.prototype.hf=function(t){this.column.hf(t)},t.prototype.af=function(t){var e=this.Ja[0];return e.Le===t.Le&&e.after===t.after&&e.me===t.me},t.prototype.ff=function(t){return u.u(t.We(),this.column.cf)},t.prototype.lf=function(){return this.column.element},t.prototype.vf=function(){return this.column},t}()},function(t,e,n){"use strict";n.d(e,"e",function(){return o}),n.d(e,"c",function(){return u}),n.d(e,"d",function(){return l}),n.d(e,"f",function(){return h}),n.d(e,"g",function(){return c}),n.d(e,"a",function(){return p}),n.d(e,"b",function(){return f});var i=n(0),r="data-vivliostyle-flow-root";function o(t){return"true"===t.getAttribute(r)}function a(t){var e,n=t.toString();switch(n){case"inline-flex":e="flex";break;case"inline-grid":e="grid";break;case"inline-table":e="table";break;case"inline":case"table-row-group":case"table-column":case"table-column-group":case"table-header-group":case"table-footer-group":case"table-row":case"table-cell":case"table-caption":case"inline-block":e="block";break;default:e=n}return i.r(e)}function s(t){return t===i.t.absolute||t===i.t.fixed}function u(t,e,n,r){return t===i.t.none||(s(e)?(n=i.t.none,t=a(t)):(n&&n!==i.t.none||r)&&(t=a(t))),{display:t,position:e,float:n}}function l(t,e,n,r){return u(t,e,n,r).display===i.t.block}function h(t){switch(t.toString()){case"inline":case"inline-block":case"inline-list-item":case"inline-flex":case"inline-grid":case"ruby":case"inline-table":return!0;default:return!1}}function c(t){switch(t.toString()){case"ruby-base":case"ruby-text":case"ruby-base-container":case"ruby-text-container":return!0;default:return!1}}function p(t,e,n,r,o,a,u){return o=o||a||i.t.horizontal_tb,!!u||!!n&&n!==i.t.none||s(e)||t===i.t.inline_block||t===i.t.table_cell||t===i.t.table_caption||t==i.t.flex||(t===i.t.block||t===i.t.list_item)&&!!r&&r!==i.t.visible||!!a&&o!==a}function f(t){return t===i.t.relative||t===i.t.absolute||t===i.t.fixed}},function(t,e,n){"use strict";n.d(e,"c",function(){return r}),n.d(e,"b",function(){return s}),n.d(e,"a",function(){return u});var i=n(7);function r(t,e,n){return t-=n,0===e?0===t:t%e==0&&t/e>=0}var o=function(){function t(t){this.matchers=t}return t.prototype.matches=function(){return this.matchers.some(function(t){return t.matches()})},t}(),a=function(){function t(t){this.matchers=t}return t.prototype.matches=function(){return this.matchers.every(function(t){return t.matches()})},t}(),s=function(){function t(t,e,n){this.df=t,this.a=e,this.b=n}return t.pf=function(e,n,i){var r=t.bf;(!r[e]||r[e].priority<=i)&&(r[e]={ge:n,priority:i})},t.wf=function(){t.bf={}},t.prototype.matches=function(){var e=t.bf[this.df];return null!=e&&null!=e.ge&&r(e.ge,this.a,this.b)},t.bf={},t}(),u=function(){function t(){}return t.jn=function(t,e){var n=e.split("_");return"NFS"==n[0]?new s(t,parseInt(n[1],10),parseInt(n[2],10)):(i.b("unknown view condition. condition="+e),null)},t.zi=function(t){return new a(t)},t.Bi=function(t){return new o(t)},t}()},function(t,e,n){"use strict";n.d(e,"b",function(){return p}),n.d(e,"e",function(){return f}),n.d(e,"a",function(){return d}),n.d(e,"c",function(){return y}),n.d(e,"d",function(){return b});var i,r=n(7),o=n(1),a=n(14),s=n(25),u=n(21),l=n(3),h=n(8),c=n(15),p=c.d.Oh,f=s.b.pf;s.b.wf,Promise.resolve().then(n.bind(null,23)).then(function(t){i=t});var d=function(){function t(t,e){this.ke=t,this.styler=e}return t.prototype.createElement=function(t,e){var n=this;if(!i)throw new Error("layoututil module is required but not be imported.");var r=e.Le.ownerDocument.createElement("div"),a=new i.PseudoColumn(t,r,e),s=a.vf().Wa;return a.vf().Wa=null,a.layout(this.mf(),!0).Pt(function(){n.styler.oa["after-if-continues"]=!1,a.vf().Wa=s;var t=r.firstChild;return o.F(t,"display","block"),l.d(t)})},t.prototype.mf=function(){var t=u.c.createElementNS(o.a.XHTML,"div");u.f(t,"after-if-continues");var e=this.gf(t),n={steps:[{node:t,de:e.type,pe:e,be:null,we:null}],me:0,after:!1,Ee:null};return new h.a(n)},t.prototype.gf=function(t){return new h.n(this.ke,t,null,null,null,c.f.ShadowType.ROOTED,this.styler)},t}(),v=function(){function t(t,e,n){this.Aa=t,this.Me=e,this.Ef=n,this.Ih="AfterIfContinue"}return t.prototype.Qa=function(t,e,n){return!(e&&!t||t&&t.overflow)},t.prototype.kf=function(t){return!1},t.prototype._f=function(t,e,n,i){},t.prototype.qh=function(t,e){var n=this;return this.Ta().xf(t)?this.Me.createElement(e,this.Aa).Pt(function(t){return n.Aa.Le.appendChild(t),l.d(!0)}):l.d(!0)},t.prototype.Ta=function(){return new g(this.Aa,this.Ef)},t.prototype.yf=function(e){return e instanceof t&&this.Me==e.Me},t.prototype.Tf=function(){return 9},t}(),g=function(){function t(t,e){this.Aa=t,this.Ef=e}return t.prototype.aa=function(t){return this.xf(t)?this.Ef:0},t.prototype.va=function(t){return this.aa(t)},t.prototype.xf=function(t){if(!t)return!1;var e=t.pe?t.pe.owner:t.ke;if(e===this.Aa.ke)return!!t.after;for(var n=e.parentNode;n;n=n.parentNode)if(n===this.Aa.ke)return!0;return!1},t}();function m(t,e){if(!t||!t.Me||t.after||e.Bh(t))return l.d(t);var n=t.Me;return n.createElement(e,t).Pt(function(i){r.a(null!==t);var o=function(t,e,n){var i=t.Le;i.appendChild(n);var r=a.b(n,e,t.vertical);return i.removeChild(n),r}(t,e,i);return e.Nf.push(new v(t,n,o)),l.d(t)})}function y(t,e){return t.Pt(function(t){return m(t,e)})}function b(t,e){var n=l.c("processAfterIfContinuesOfAncestors"),i=t;return n.loop(function(){if(null!==i){var t=m(i,e);return i=i.parent,t.Ft(!0)}return l.d(!1)}).then(function(){n.finish(!0)}),n.result()}},function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"d",function(){return a}),n.d(e,"b",function(){return s}),n.d(e,"c",function(){return u});var i=n(28),r=n.n(i);function o(t,e){return r()(t,e,0)}function a(t){return t.reduce(function(t,e){return e[0]===r.a.DELETE?t:t+e[1]},"")}function s(t,e){return l(t,e,1)}function u(t,e){return l(t,e,-1)}function l(t,e,n){var i=0,o=0;return t.some(function(t){for(var a=0;a<t[1].length;a++){switch(t[0]*n){case r.a.INSERT:i++;break;case r.a.DELETE:i--,o++;break;case r.a.EQUAL:o++}if(o>e)return!0}return!1}),Math.max(Math.min(e,o-1)+i,0)}},function(t,e){var n=-1,i=1,r=0;function o(t,e,l,h){if(t===e)return t?[[r,t]]:[];if(null!=l){var d=function(t,e,n){var i="number"==typeof n?{index:n,length:0}:n.Sf,r="number"==typeof n?null:n.Af,o=t.length,a=e.length;if(0===i.length&&(null===r||0===r.length)){var s=i.index,u=t.slice(0,s),l=t.slice(s),h=r?r.index:null,c=s+a-o;if((null===h||h===c)&&!(c<0||c>a)){var p=e.slice(0,c);if((E=e.slice(c))===l){var d=Math.min(s,c),v=u.slice(0,d),g=p.slice(0,d);if(v===g){var m=u.slice(d),y=p.slice(d);return f(v,m,y,l)}}}if(null===h||h===s){var b=s,E=(p=e.slice(0,b),e.slice(b));if(p===u){var w=Math.min(o-b,a-b),T=l.slice(l.length-w),N=E.slice(E.length-w);if(T===N)return f(u,m=l.slice(0,l.length-w),y=E.slice(0,E.length-w),T)}}}return i.length>0&&r&&0===r.length&&(v=t.slice(0,i.index),T=t.slice(i.index+i.length),!(a<(d=v.length)+(w=T.length))&&(g=e.slice(0,d),N=e.slice(a-w),v===g&&T===N))?f(v,m=t.slice(d,o-w),y=e.slice(d,a-w),T):null}(t,e,l);if(d)return d}var v=s(t,e),g=t.substring(0,v);v=u(t=t.substring(v),e=e.substring(v));var m=t.substring(t.length-v),y=function(t,e){var l;if(!t)return[[i,e]];if(!e)return[[n,t]];var h=t.length>e.length?t:e,c=t.length>e.length?e:t,p=h.indexOf(c);if(-1!==p)return l=[[i,h.substring(0,p)],[r,c],[i,h.substring(p+c.length)]],t.length>e.length&&(l[0][0]=l[2][0]=n),l;if(1===c.length)return[[n,t],[i,e]];var f=function(t,e){var n=t.length>e.length?t:e,i=t.length>e.length?e:t;if(n.length<4||2*i.length<n.length)return null;function r(t,e,n){for(var i,r,o,a,l=t.substring(n,n+Math.floor(t.length/4)),h=-1,c="";-1!==(h=e.indexOf(l,h+1));){var p=s(t.substring(n),e.substring(h)),f=u(t.substring(0,n),e.substring(0,h));c.length<f+p&&(c=e.substring(h-f,h)+e.substring(h,h+p),i=t.substring(0,n-f),r=t.substring(n+p),o=e.substring(0,h-f),a=e.substring(h+p))}return 2*c.length>=t.length?[i,r,o,a,c]:null}var o,a,l,h,c,p=r(n,i,Math.ceil(n.length/4)),f=r(n,i,Math.ceil(n.length/2));return p||f?(o=f?p&&p[4].length>f[4].length?p:f:p,t.length>e.length?(a=o[0],l=o[1],h=o[2],c=o[3]):(h=o[0],c=o[1],a=o[2],l=o[3]),[a,l,h,c,o[4]]):null}(t,e);if(f){var d=f[0],v=f[1],g=f[2],m=f[3],y=f[4],b=o(d,g),E=o(v,m);return b.concat([[r,y]],E)}return function(t,e){for(var r=t.length,o=e.length,s=Math.ceil((r+o)/2),u=s,l=2*s,h=new Array(l),c=new Array(l),p=0;p<l;p++)h[p]=-1,c[p]=-1;h[u+1]=0,c[u+1]=0;for(var f=r-o,d=f%2!=0,v=0,g=0,m=0,y=0,b=0;b<s;b++){for(var E=-b+v;E<=b-g;E+=2){for(var w=u+E,T=(I=E===-b||E!==b&&h[w-1]<h[w+1]?h[w+1]:h[w-1]+1)-E;I<r&&T<o&&t.charAt(I)===e.charAt(T);)I++,T++;if(h[w]=I,I>r)g+=2;else if(T>o)v+=2;else if(d&&(_=u+f-E)>=0&&_<l&&-1!==c[_]){var N=r-c[_];if(I>=N)return a(t,e,I,T)}}for(var S=-b+m;S<=b-y;S+=2){for(var _=u+S,A=(N=S===-b||S!==b&&c[_-1]<c[_+1]?c[_+1]:c[_-1]+1)-S;N<r&&A<o&&t.charAt(r-N-1)===e.charAt(o-A-1);)N++,A++;if(c[_]=N,N>r)y+=2;else if(A>o)m+=2;else if(!d&&(w=u+f-S)>=0&&w<l&&-1!==h[w]){var I=h[w];if(T=u+I-w,I>=(N=r-N))return a(t,e,I,T)}}}return[[n,t],[i,e]]}(t,e)}(t=t.substring(0,t.length-v),e=e.substring(0,e.length-v));return g&&y.unshift([r,g]),m&&y.push([r,m]),function t(e,o){e.push([r,""]);for(var a,l=0,h=0,f=0,d="",v="";l<e.length;)if(l<e.length-1&&!e[l][1])e.splice(l,1);else switch(e[l][0]){case i:f++,v+=e[l][1],l++;break;case n:h++,d+=e[l][1],l++;break;case r:var g=l-f-h-1;if(o){if(g>=0&&p(e[g][1])){var m=e[g][1].slice(-1);if(e[g][1]=e[g][1].slice(0,-1),d=m+d,v=m+v,!e[g][1]){e.splice(g,1),l--;var y=g-1;e[y]&&e[y][0]===i&&(f++,v=e[y][1]+v,y--),e[y]&&e[y][0]===n&&(h++,d=e[y][1]+d,y--),g=y}}if(c(e[l][1])){m=e[l][1].charAt(0);e[l][1]=e[l][1].slice(1),d+=m,v+=m}}if(l<e.length-1&&!e[l][1]){e.splice(l,1);break}if(d.length>0||v.length>0){d.length>0&&v.length>0&&(0!==(a=s(v,d))&&(g>=0?e[g][1]+=v.substring(0,a):(e.splice(0,0,[r,v.substring(0,a)]),l++),v=v.substring(a),d=d.substring(a)),0!==(a=u(v,d))&&(e[l][1]=v.substring(v.length-a)+e[l][1],v=v.substring(0,v.length-a),d=d.substring(0,d.length-a)));var b=f+h;0===d.length&&0===v.length?(e.splice(l-b,b),l-=b):0===d.length?(e.splice(l-b,b,[i,v]),l=l-b+1):0===v.length?(e.splice(l-b,b,[n,d]),l=l-b+1):(e.splice(l-b,b,[n,d],[i,v]),l=l-b+2)}0!==l&&e[l-1][0]===r?(e[l-1][1]+=e[l][1],e.splice(l,1)):l++,f=0,h=0,d="",v=""}""===e[e.length-1][1]&&e.pop();var E=!1;for(l=1;l<e.length-1;)e[l-1][0]===r&&e[l+1][0]===r&&(e[l][1].substring(e[l][1].length-e[l-1][1].length)===e[l-1][1]?(e[l][1]=e[l-1][1]+e[l][1].substring(0,e[l][1].length-e[l-1][1].length),e[l+1][1]=e[l-1][1]+e[l+1][1],e.splice(l-1,1),E=!0):e[l][1].substring(0,e[l+1][1].length)==e[l+1][1]&&(e[l-1][1]+=e[l+1][1],e[l][1]=e[l][1].substring(e[l+1][1].length)+e[l+1][1],e.splice(l+1,1),E=!0)),l++;E&&t(e,o)}(y,h),y}function a(t,e,n,i){var r=t.substring(0,n),a=e.substring(0,i),s=t.substring(n),u=e.substring(i),l=o(r,a),h=o(s,u);return l.concat(h)}function s(t,e){if(!t||!e||t.charAt(0)!==e.charAt(0))return 0;for(var n=0,i=Math.min(t.length,e.length),r=i,o=0;n<r;)t.substring(o,r)==e.substring(o,r)?o=n=r:i=r,r=Math.floor((i-n)/2+n);return l(t.charCodeAt(r-1))&&r--,r}function u(t,e){if(!t||!e||t.slice(-1)!==e.slice(-1))return 0;for(var n=0,i=Math.min(t.length,e.length),r=i,o=0;n<r;)t.substring(t.length-r,t.length-o)==e.substring(e.length-r,e.length-o)?o=n=r:i=r,r=Math.floor((i-n)/2+n);return h(t.charCodeAt(t.length-r))&&r--,r}function l(t){return t>=55296&&t<=56319}function h(t){return t>=56320&&t<=57343}function c(t){return h(t.charCodeAt(0))}function p(t){return l(t.charCodeAt(t.length-1))}function f(t,e,o,a){return p(t)||c(a)?null:function(t){for(var e=[],n=0;n<t.length;n++)t[n][1].length>0&&e.push(t[n]);return e}([[r,t],[n,e],[i,o],[r,a]])}function d(t,e,n){return o(t,e,n,!0)}d.INSERT=i,d.DELETE=n,d.EQUAL=r,t.exports=d},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var i=n(7),r=n(3),o=function(){function t(){this.Rf=null,this.Cf=null}return t.prototype.layout=function(t,e){return this.Of(t,e),this.If(t,e)},t.prototype.If=function(t,e){var n=this,o=r.c("AbstractLayoutRetryer.tryLayout");this.Jh(t,e);var a=this.Lf(t);return a.Pf(t,e).then(function(r){var s=a.accept(r,e);(s=a._f(r,n.Ff,e,s))?o.finish(r):(i.a(n.Ff),n.Df(n.Ff),n.ta(t,e),n.If(n.Ff,e).Dt(o))}),o.result()},t.prototype.Of=function(t,e){},t.prototype.Df=function(t){for(var e,n,i=t.Le||t.parent.Le;e=i.lastChild;)i.removeChild(e);for(;n=i.nextSibling;)n.parentNode.removeChild(n)},t.prototype.Jh=function(t,e){this.Ff=t.copy(),this.Rf=[].concat(e.Mf),this.Uf=[].concat(e.Nf),t.le&&(this.Cf=t.le.Jh())},t.prototype.ta=function(t,e){e.Mf=this.Rf,e.Nf=this.Uf,t.le&&t.le.ta(this.Cf)},t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return _}),n.d(e,"b",function(){return x});var i,r=n(7),o=n(1),a=n(13),s=n(22),u=n(0),l=n(27),h=n(11),c=n(14),p=n(18),f=n(29),d=n(6),v=n(12),g=n(9),m=n(26),y=n(31),b=n(19),E=n(3),w=n(8),T=n(15),N=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),S={img:!0,svg:!0,audio:!0,video:!0},_=function(){function t(t){this.constraints=t}return t.prototype.Qa=function(t){return this.constraints.every(function(e){return e.Qa(t)})},t}(),A=function(t){function e(e,n){var i=t.call(this)||this;return i.Gf=e,i.penalty=n,i.Bf=!1,i.zf=null,i}return N(e,t),e.prototype.wa=function(t,e){return e<this.ga()?null:(this.Bf||(this.zf=t.Hf(this,e>0),this.Bf=!0),this.zf)},e.prototype.ga=function(){return this.penalty},e.prototype.fa=function(){return this.Bf?this.zf:this.Gf[this.Gf.length-1]},e}(s.a);function I(t){switch(t){case"ruby":case"inline-block":case"inline-flex":case"inline-grid":case"inline-list-item":case"inline-table":return!0}return!1}var x=function(t){function e(e,n,i,r,o){var a=t.call(this,e)||this;return a.sh=n,a.eh=i,a.jf=r,a.Xf=o,a.nf=null,a.Vf=!1,a.Yf=!1,a.$f=0,a.Wf=0,a.qf=0,a.Kf=0,a.rf=0,a.box=null,a.Zf=null,a.bands=null,a.overflown=!1,a.Mf=null,a.Wa=null,a.Qf=!0,a.Jf=0,a.tc=0,a.nc=0,a.tf=!0,a.cf=null,a.Nf=[],a.if=null,a.ic=null,a.rc=NaN,a.last=e.lastChild,a.ec=e.ownerDocument,o.mu(a),a}return N(e,t),e.prototype.sc=function(){return this.vertical?this.$f:this.qf},e.prototype.oc=function(){return this.vertical?this.Wf:this.Kf},e.prototype.uc=function(){return this.vertical?this.Kf:this.$f},e.prototype.hc=function(){return this.vertical?this.qf:this.Wf},e.prototype.Bh=function(t){return!(!t.Te||this.Vf&&!t.parent)},e.prototype.ac=function(t){return this.tf&&!!t&&t.overflow},e.prototype.ya=function(t){return this.vertical?t<this.rf:t>this.rf},e.prototype.fc=function(){var t=this.Xf.hh();return this.exclusions.concat(t)},e.prototype.ef=function(t){var e=this,n=E.c("openAllViews"),i=t.steps;e.sh.cc(e.element,e.Yf);var o=i.length-1,a=null;return n.loop(function(){for(;o>=0;){var n=a,r=i[o];if(a=w.v(r,n),o!==i.length-1||a.le||(a.le=e.nf),0==o&&(a.me=e.lc(t),a.after=t.after,a.Ee=t.Ee,a.after))break;var s=e.sh.vc(a,0==o&&0==a.me);if(o--,s.Mt())return s}return E.d(!1)}).then(function(){r.a(a),n.finish(a)}),n.result()},e.prototype.lc=function(t){return t.Ee?l.b(t.Ee,t.me):t.me},e.prototype.dc=function(t,e){if(t.Xe&&t.inline&&!t.after&&0==t.Xe.count&&1!=t.Le.nodeType){var n=t.Le.textContent.match(C);return this.sh.bc(t,n[0].length)}return E.d(t)},e.prototype.wc=function(t,e){var n=this,i=!1,r=E.c("buildViewToNextBlockEdge");return r.Bt(function(r){t.Le&&!c.e(t)&&e.push(t.copy()),n.dc(t,0).then(function(o){o!==t&&(t=o,c.e(t)||e.push(t.copy())),n.Ua(t).then(function(e){(t=e)?(!i&&n.jf.Qa(t)||(i=!0,(t=t.modify()).overflow=!0),n.Bh(t)&&!n.vertical?n.zh(t).then(function(e){t=e,n.Xf.Hu()&&(t=null),t?r.zt():r.Ht()}):t.inline?r.zt():r.Ht()):r.Ht()})})}).then(function(){r.finish(t)}),r.result()},e.prototype.Ua=function(t,e){var n=this.sh.Ua(t,e);return m.c(n,this)},e.prototype.mc=function(t){if(!t.Le)return E.d(t);var e=[],n=t.ke,i=this,r=E.c("buildDeepElementView");return r.Bt(function(r){t.Le&&t.inline&&!c.e(t)?e.push(t.copy()):(e.length>0&&i.gc(t,e),e=[]),i.dc(t,0).then(function(o){var a=o;if(a!==t){for(var s=a;s&&s.ke!=n;)s=s.parent;if(null==s)return t=a,void r.Ht();c.e(a)||e.push(a.copy())}i.Ua(a).then(function(e){(t=e)&&t.ke!=n?i.jf.Qa(t)?r.zt():((t=t.modify()).overflow=!0,i.tf?r.Ht():r.zt()):r.Ht()})})}).then(function(){e.length>0&&i.gc(t,e),r.finish(t)}),r.result()},e.prototype.Ec=function(t,e,n,i){var r=this.ec.createElement("div");return this.vertical?(i>=this.height&&(i-=.1),o.F(r,"height",n+"px"),o.F(r,"width",i+"px")):(n>=this.width&&(n-=.1),o.F(r,"width",n+"px"),o.F(r,"height",i+"px")),o.F(r,"float",e),o.F(r,"clear",e),this.element.insertBefore(r,t),r},e.prototype.kc=function(){for(var t=this.element.firstChild;t;){var e=t.nextSibling;if(1==t.nodeType){var n=t,i=n.style.cssFloat;if("left"!=i&&"right"!=i)break;this.element.removeChild(n)}t=e}},e.prototype._c=function(){for(var t=this.element.firstChild,e=this.bands,n=this.vertical?this.sc():this.uc(),i=this.vertical?this.oc():this.hc(),r=0,o=e;r<o.length;r++){var a=o[r],s=a.y2-a.y1;a.left=this.Ec(t,"left",a.x1-n,s),a.right=this.Ec(t,"right",i-a.x2,s)}},e.prototype.xc=function(t,e,n,i){var r;if(t&&c.c(t.Le))return NaN;if(t&&t.after&&!t.inline&&(r=c.a(t,this.eh,0,this.vertical),!isNaN(r)))return r;for(var o=i-(t=e[n]).ye;;){if(r=c.a(t,this.eh,o,this.vertical),!isNaN(r))return r;if(o>0)o--;else{if(--n<0)return this.qf;1!=(t=e[n]).Le.nodeType&&(o=t.Le.textContent.length)}}},e.prototype.yc=function(t){if("number"==typeof t)return t;var e=t.match(/^(-?[0-9]*(\.[0-9]*)?)px$/);return e?parseFloat(e[0]):0},e.prototype.Ah=function(t){var e=this.eh.na(t),n=new h.a(0,0,0,0);return e&&(n.left=this.yc(e.marginLeft),n.top=this.yc(e.marginTop),n.right=this.yc(e.marginRight),n.bottom=this.yc(e.marginBottom)),n},e.prototype.Tc=function(t){var e=this.eh.na(t),n=new h.a(0,0,0,0);return e&&(n.left=this.yc(e.borderLeftWidth)+this.yc(e.paddingLeft),n.top=this.yc(e.borderTopWidth)+this.yc(e.paddingTop),n.right=this.yc(e.borderRightWidth)+this.yc(e.paddingRight),n.bottom=this.yc(e.borderBottomWidth)+this.yc(e.paddingBottom)),n},e.prototype.Nc=function(t){var e=this.eh.na(t),n=new h.a(0,0,0,0);if(e){if("border-box"==e.boxSizing)return this.Ah(t);n.left=this.yc(e.marginLeft)+this.yc(e.borderLeftWidth)+this.yc(e.paddingLeft),n.top=this.yc(e.marginTop)+this.yc(e.borderTopWidth)+this.yc(e.paddingTop),n.right=this.yc(e.marginRight)+this.yc(e.borderRightWidth)+this.yc(e.paddingRight),n.bottom=this.yc(e.marginBottom)+this.yc(e.borderBottomWidth)+this.yc(e.paddingBottom)}return n},e.prototype.Sc=function(t,e){var n=this.eh.na(t);n&&(e.marginLeft=this.yc(n.marginLeft),e.borderLeft=this.yc(n.borderLeftWidth),e.paddingLeft=this.yc(n.paddingLeft),e.marginTop=this.yc(n.marginTop),e.borderTop=this.yc(n.borderTopWidth),e.paddingTop=this.yc(n.paddingTop),e.marginRight=this.yc(n.marginRight),e.borderRight=this.yc(n.borderRightWidth),e.paddingRight=this.yc(n.paddingRight),e.marginBottom=this.yc(n.marginBottom),e.borderBottom=this.yc(n.borderBottomWidth),e.paddingBottom=this.yc(n.paddingBottom))},e.prototype.Ac=function(t,e){var n=this.eh.na(t);n&&(e.width=this.yc(n.width),e.height=this.yc(n.height))},e.prototype.Xh=function(t){return this.mc(t)},e.prototype.Rc=function(t){var e=this,n=E.c("layoutFloat"),i=t.Le,a=t.Te;return o.F(i,"float","none"),o.F(i,"display","inline-block"),o.F(i,"vertical-align","top"),e.mc(t).then(function(s){for(var u=e.eh.ue(i),l=e.Ah(i),c=new h.c(u.left-l.left,u.top-l.top,u.right+l.right,u.bottom+l.bottom),p=e.$f,f=e.Wf,d=t.parent;d&&d.inline;)d=d.parent;if(d){(N=d.Le.ownerDocument.createElement("div")).style.left="0px",N.style.top="0px",e.vertical?(N.style.bottom="0px",N.style.width="1px"):(N.style.right="0px",N.style.height="1px"),d.Le.appendChild(N);var v=e.eh.ue(N);p=Math.max(e.Os(v),p),f=Math.min(e.Is(v),f),d.Le.removeChild(N);var g=e.vertical?c.y2-c.y1:c.x2-c.x1;"left"==a?f=Math.max(f,p+g):p=Math.min(p,f-g),d.Le.appendChild(t.Le)}var m=new h.c(p,e.Fs()*e.qf,f,e.Fs()*e.Kf),y=c;e.vertical&&(y=h.i(c));var b=e.Fs();if(y.y1<e.nc*b){var E=y.y2-y.y1;y.y1=e.nc*b,y.y2=y.y1+E}h.h(m,e.bands,y,a),e.vertical&&(c=h.m(y));var w,T=e.Nc(i);o.F(i,"width",c.x2-c.x1-T.left-T.right+"px"),o.F(i,"height",c.y2-c.y1-T.top-T.bottom+"px"),o.F(i,"position","absolute"),r.a(t.display),o.F(i,"display",t.display);var N,S=null;d&&(S=d.Ie?d:d.Ke()),S?((N=S.Le.ownerDocument.createElement("div")).style.position="absolute",S.vertical?N.style.right="0":N.style.left="0",N.style.top="0",S.Le.appendChild(N),w=e.eh.ue(N),S.Le.removeChild(N)):w={left:e.uc()-e.paddingLeft,right:e.hc()+e.paddingRight,top:e.sc()-e.paddingTop},(S?S.vertical:e.vertical)?o.F(i,"right",w.right-c.x2+"px"):o.F(i,"left",c.x1-w.left+"px"),o.F(i,"top",c.y1-w.top+"px"),t.Pe&&(t.Pe.parentNode.removeChild(t.Pe),t.Pe=null);var _=e.vertical?c.x1:c.y2,A=e.vertical?c.x2:c.y1;e.ya(_)&&0!=e.Mf.length?((t=t.modify()).overflow=!0,n.finish(t)):(e.kc(),m=new h.c(e.uc(),e.sc(),e.hc(),e.oc()),e.vertical&&(m=h.i(m)),h.e(m,e.bands,y,null,a),e._c(),"left"==a?e.Jf=_:e.tc=_,e.nc=A,e.Cc(_),n.finish(s))}),n.result()},e.prototype.Oc=function(t,e,n,i,r,o){var a=this.Xf,s=a.wu(e),u=t.element;s.element.parentNode.appendChild(u),t.Vf=!0,t.ls=s.ls,t.vs=s.vs,t.vertical=s.vertical,t.marginLeft=t.marginRight=t.marginTop=t.marginBottom=0,t.borderLeft=t.borderRight=t.borderTop=t.borderBottom=0,t.paddingLeft=t.paddingRight=t.paddingTop=t.paddingBottom=0,t.exclusions=(s.exclusions||[]).concat(),t.Qf=!a.Nu(),t.ds=null;var l=s.Vs();t.Gs(l.x1-s.ls,l.x2-l.x1),t.Us(l.y1-s.vs,l.y2-l.y1),r.Nh(t,s,this),t.init();var h=!!a.rh(t,e,n,i,!0,!a.Nu(),o);return h?(t.kc(),t.init()):s.element.parentNode.removeChild(u),h},e.prototype.Ic=function(t,e,n,i,r){var a=this.element.ownerDocument.createElement("div");o.F(a,"position","absolute");var s=this.Xf.Eu(t.Be),u=new v.e(null,v.a.COLUMN,null,this.Xf.ae,t.jo,null,null),l=s.wu(),h=new R(e,a,this.sh.clone(),this.eh,this.jf,u,l);return u.mu(h),this.Oc(h,t.Be,e,n,i,r)?h:null},e.prototype.Lc=function(t,e,n,i,o,a,s){var u=this.Xf,l=s?s.continuations:[],h=(t=l.concat(t))[0].float,c=u.dh(h,e,n),p=this.Ic(h,e,a,o,c),f={Pc:p,Fc:null,Dc:null};if(!p)return E.d(f);var d=E.c("layoutSinglePageFloatFragment"),v=!1,g=0;return d.Bt(function(e){if(g>=t.length)e.Ht();else{var n=t[g],r=new w.a(n.jo);p.layout(r,!0).then(function(t){f.Dc=t,!t||i?(g++,e.zt()):(v=!0,e.Ht())})}}).then(function(){if(!v){r.a(p);var n=u.rh(p,h.Be,e,a,!1,i,c);if(n){var s=o.Th(t,n,p,!!f.Dc);u.xu(s,!0),f.Fc=s}else v=!0}d.finish(f)}),d.result()},e.prototype.Mc=function(t,e,n,i){var o=this.Xf,a=t.float;function s(e,n){n?o.yu(n,!0):e&&e.element.parentNode.removeChild(e.element),o.Yu(a.Be),o.Ou(t)}o.Vu(a);var u=E.c("layoutPageFloatInner"),l=this;return this.Lc([t],a.Te,a.Ne,!o.Nu(),e,n,i).then(function(t){var e=t.Pc,n=t.Fc,h=t.Dc;n?l.Uc(a.Be,[i]).then(function(t){if(t){if(r.a(n),o.xu(n),o.$u(a.Be),h){var i=new v.c(a,h.primary);o.Ou(i)}u.finish(!0)}else s(e,n),u.finish(!1)}):(s(e,n),u.finish(!1))}),u.result()},e.prototype.Uc=function(t,e){var n=this.Xf,i=n.Wu(t),r=[],o=[],a=!1,s=E.c("layoutStashedPageFloats"),u=this,l=0;return s.Bt(function(t){if(l>=i.length)t.Ht();else{var n=i[l];if(e.includes(n))return l++,void t.zt();var s=(new v.f).ku(n.continuations[0].float);u.Lc(n.continuations,n.Te,null,!1,s,null).then(function(e){var n=e.Pc;n&&r.push(n);var i=e.Fc;i?(o.push(i),l++,t.zt()):(a=!0,t.Ht())})}}).then(function(){a?(o.forEach(function(t){n.yu(t,!0)}),r.forEach(function(t){var e=t.element;e&&e.parentNode&&e.parentNode.removeChild(e)})):i.forEach(function(t){var e=t.area.element;e&&e.parentNode&&e.parentNode.removeChild(e)}),s.finish(!a)}),s.result()},e.prototype.Gc=function(t){var e=t.Le.parentNode,n=e.ownerDocument.createElement("span");n.setAttribute(w.m,"1"),"footnote"===t.Te&&this.sh.Bc(t,"footnote-call",n),e.appendChild(n),e.removeChild(t.Le);var i=t.modify();return i.after=!0,i.Le=n,i},e.prototype.yh=function(t,e,n){var i=this,r=E.c("resolveFloatReferenceFromColumnSpan"),o=this.Xf,a=o.Eu(v.a.REGION);return o.wu().width<a.wu().width&&t===v.a.COLUMN?e===u.t.auto?this.mc(n.copy()).then(function(e){var n=e.Le,o=b.b(i.eh,n,[b.a.MIN_CONTENT_INLINE_SIZE])[b.a.MIN_CONTENT_INLINE_SIZE],a=i.Ah(n);i.vertical?o+=a.top+a.bottom:o+=a.left+a.right,o>i.width?r.finish(v.a.REGION):r.finish(t)}):e===u.t.all?r.finish(v.a.REGION):r.finish(t):r.finish(t),r.result()},e.prototype.zc=function(t){var e=this,n=this.Xf,i=(new v.f).Eh(t),o=n.Qo(t.We());return(o?E.d(o):i.xh(t,n,this)).Pt(function(o){var a=w.x(t,0),s=e.Gc(t),u=i.Tu(o,n),l=new v.c(o,a);if(u&&u.tu(o))return n.Au(o,s.Le),E.d(s);if(n._u(o)||n.Iu(o))return n.Ou(l),n.Au(o,s.Le),E.d(s);if(e.ic)return E.d(null);var h=c.a(s,e.eh,0,e.vertical);return e.ya(h)?E.d(s):e.Mc(l,i,h,u).Pt(function(t){return r.a(o),t?E.d(null):(n.Au(o,s.Le),E.d(s))})})},e.prototype.Hc=function(t,e,n,i){var r=e.createElement("span");r.style.visibility="hidden",r.style.verticalAlign="top",r.setAttribute(w.m,"1");var a=e.createElement("span");a.style.fontSize="0",a.style.lineHeight="0",a.textContent=" #",r.appendChild(a),r.style.display="block",r.style.textIndent="0",r.style.textAlign="left",n.insertBefore(r,t);var s=this.eh.ue(a);r.style.textAlign="right";var u=this.eh.ue(a);r.style.textAlign="",o.j(document.body)?r.style.display="inline":r.style.display="inline-block";var l=i?u.top-s.top:u.left-s.left,h=l>=1?l-1+"px":"100%";return i?r.style.paddingTop=h:r.style.paddingLeft=h,r},e.prototype.jc=function(t,e,n,i,r,a){return function(t,e,n,i){if(o.k(document.body)){var r=k(t),a=e?n:n.previousSibling,s=a?a.textContent:"";if(s.charAt(s.length-1)===r){var u=n.ownerDocument,l=n.parentNode;o.l(document.body)?l.insertBefore(u.createTextNode(" "),i):l.insertBefore(u.createElement("wbr"),i)}}}(t,e,n,i),this.Hc(i,r,a,t.vertical)},e.prototype.Xc=function(t,e,n){var i=this.eh.ue(t),r=this.eh.ue(e);n.vertical?(e.style.marginRight=r.right-i.right+"px",e.style.width="0px"):(e.style.marginTop=i.top-r.top+"px",e.style.height="0px"),e.setAttribute(w.m,"1")},e.prototype.Kh=function(t,e){if(!t.after||t.inline){if(e){for(var n="",i=t.parent;i&&!n;i=i.parent)!i.inline&&i.Le&&(n=i.Le.style.textAlign);if("justify"!==n)return}var r=t.Le,o=r.ownerDocument,a=e&&(t.after||1!=r.nodeType),s=a?r.nextSibling:r;s&&!s.parentNode&&(s=null);var u=r.parentNode||t.parent&&t.parent.Le;if(u){var l=this.jc(t,a,r,s,o,u);if(!e){var h=o.createElement("div");u.insertBefore(h,s),this.Xc(l,h,t)}}}},e.prototype.Vc=function(t,e,n){var i=this,r=E.c("processLineStyling"),o=n.concat([]);n.splice(0,n.length);var a=0,s=t.Xe;return 0==s.count&&(s=s.outer),r.Bt(function(n){if(s){var r=i.Yc(o),u=s.count-a;if(r.length<=u)n.Ht();else{var l=i.$c(o,r[u-1],!0);null!=l?i.qh(l,!1,!1).then(function(){a+=u,i.sh.bc(l,0).then(function(r){t=r,i.Kh(t,!1),s=t.Xe,o=[],i.wc(t,o).then(function(t){e=t,n.zt()})})}):n.Ht()}}else n.Ht()}).then(function(){Array.prototype.push.apply(n,o),r.finish(e)}),r.result()},e.prototype.Wc=function(t){return!(2!=t.length&&this.Mf.length>0)&&t[0].ke==t[1].ke&&S[t[0].ke.localName]},e.prototype.qc=function(t){for(var e=0,n=0,i=t.length-1;i>=0;i--){var r=t[i];if(!r.after||!r.Le||1!=r.Le.nodeType)break;var o=this.Ah(r.Le),a=this.vertical?-o.left:o.bottom;a>0?e=Math.max(e,a):n=Math.min(n,a)}return e-n},e.prototype.jh=function(t){var e=this,n=E.c("layoutBreakableBlock"),i=[];return e.wc(t,i).then(function(r){var o=i.length-1;if(o<0)n.finish(r);else{var a=e.xc(r,i,o,i[o].ye),u=!1;if(!r||!c.c(r.Le)){var l=s.c(r,e.ca());u=e.ya(a+(e.vertical?-1:1)*l.minimum),e.ya(a+(e.vertical?-1:1)*l.current)&&!e.ic&&(e.ic=r)}null==r&&(a+=e.qc(i)),e.Cc(a),(t.Xe?e.Vc(t,r,i):E.d(r)).then(function(t){e.gc(t,i),i.length>0&&(e.Kc(i),u&&!e.Wc(i)&&t&&((t=t.modify()).overflow=!0)),n.finish(t)})}}),n.result()},e.prototype.gc=function(t,e){var n=this;g.b(g.a.POST_LAYOUT_BLOCK).forEach(function(i){i(t,e,n)})},e.prototype.Zc=function(t,e,n){for(var i,r=this.vertical?t-1:t+1,o=0,a=e[0].ye,s=o,u=e.length-1,l=e[u].ye;a<l;){i=a+Math.ceil((l-a)/2),s=o;for(var h=u;s<h;){var c=s+Math.ceil((h-s)/2);e[c].ye>i?h=c-1:s=c}var p=this.xc(null,e,s,i);if(this.vertical?p<=r:p>=r){for(l=i-1;e[s].ye==i;)s--;u=s}else n&&this.Cc(p),a=i,o=s}return{Aa:e[s],index:a,Qc:s}},e.prototype.$c=function(t,e,n){var i=this.Zc(e,t,!0),r=i.Aa,o=r.Le;if(1!=o.nodeType){var a=o;r=this.tl(r).Jc(a,r,i.index,t,i.Qc,n)}return this.Wh(r,!1),r},e.prototype.tl=function(t){return g.b(g.a.RESOLVE_TEXT_NODE_BREAKER).reduce(function(e,n){return n(t)||e},O.instance)},e.prototype.nl=function(t,e){for(var n=[],i=t.ownerDocument.createRange(),r=!1,o=t,a=null,s=!1,u=!0;u;){var l=!0;do{var h=null;o==e&&(u=1===e.nodeType&&!(!e.firstChild||r)),1!=o.nodeType?(s||(i.setStartBefore(o),s=!0),a=o):r?r=!1:c.d(o)?l=!s:"ruby"==o.localName||I(this.eh.na(o).display)?((l=!s)&&(i.setStartBefore(o),s=!0,a=o),o.contains(e)&&(u=!1)):h=o.firstChild,h||(h=o.nextSibling)||(r=!0,h=o.parentNode),o=h}while(l&&u);if(s){i.setEndAfter(a);for(var p=this.eh.Sh(i),f=0;f<p.length;f++)n.push(p[f]);s=!1}}return n},e.prototype.Yc=function(t){var e=[],n=this.nl(t[0].Le,t[t.length-1].Le);n.sort(this.vertical?w.q:w.r);for(var i=0,r=0,a=0,s=0,u=0,l=this.Fs();;){if(u<n.length){var h=n[u],c=1;if(s>0){var p=Math.max(this.Ps(h),1);c=l*this.Rs(h)<l*i?l*(this.Cs(h)-i)/p:l*this.Cs(h)>l*r?l*(r-this.Rs(h))/p:1}if(0==s||c>=.6||c>=.2&&this.Os(h)>=a-1){a=this.Is(h),this.vertical?(i=0==s?h.right:Math.max(i,h.right),r=0==s?h.left:Math.min(r,h.left)):(i=0==s?h.top:Math.min(i,h.top),r=0==s?h.bottom:Math.max(r,h.bottom)),s++,u++;continue}}if(s>0&&(e.push(r),s=0),u>=n.length)break}return e.sort(o.B),this.vertical&&e.reverse(),e},e.prototype.xa=function(t){var e=this,n=0;return t.Ze(function(t){if("clone"===t.je["box-decoration-break"]){r.a(t.Le instanceof Element);var i=e.Tc(t.Le);n+=t.vertical?-i.left:i.bottom,"table"===t.display&&(n+=t.Re)}}),n},e.prototype.il=function(t){return(t?t.aa(this):s.c(null,this.ca())).current},e.prototype.Hf=function(t,e){for(var n,i,r=this,a=t.Gf,s=a[0];s.parent&&s.inline;)s=s.parent;e?(n=1,i=1):(n=Math.max((s.je.widows||2)-0,1),i=Math.max((s.je.orphans||2)-0,1));var u=r.xa(s),l=this.Yc(a),h=this.rf-u,c=this.Fs(),p=this.il(t);h-=c*p;var f=this.rl(a);isNaN(f.edge)&&(f.edge=c*(1/0));var d,v=o.i(l.length,function(t){var e=l[t];return r.vertical?e<h||e<=f.edge:e>h||e>=f.edge}),g=v<=0;if(g&&(v=o.i(l.length,function(t){return r.vertical?l[t]<h:l[t]>h})),(v=Math.min(l.length-n,v))<i)return null;if(h=l[v-1],d=g?f.el:this.$c(t.Gf,h,e)){var m=this.sl(d);!isNaN(m)&&m<h&&(h=m),this.ps=c*(h-this.qf)+p}return d},e.prototype.sl=function(t){var e=t;do{e=e.parent}while(e&&e.inline);return e?((e=e.copy().modify()).after=!0,c.a(e,this.eh,0,this.vertical)):NaN},e.prototype.rl=function(t){var e=t.findIndex(function(t){return t.overflow});if(e<0)return{edge:NaN,el:null};var n=t[e];return{edge:this.xc(null,t,e,n.ye),el:n}},e.prototype.Ea=function(t){return this.ps=t.ps+this.il(t),t.position},e.prototype.qh=function(t,e,n){r.a(t.le);var i=(new p.c).find(t.le).qh(this,t,e,n);return i||(i=p.d.qh(this,t,e,n)),i},e.prototype.sf=function(){var t=null,e=null,n=0,i=0;do{n=i,i=Number.MAX_VALUE;for(var r=this.Mf.length-1;r>=0&&!e;--r){e=(t=this.Mf[r]).wa(this,n);var o=t.ga();o>n&&(i=Math.min(i,o))}}while(i>n&&!e&&this.Qf);return{uf:e?t:null,Aa:e}},e.prototype.ol=function(t,e,n,i){if(this.Xf.Hu()||this.Wa||!e)return E.d(t);var r=this,o=E.c("doFinishBreak"),a=!1;if(!t){if(this.Qf)return d.b.warn("Could not find any page breaks?!!"),r.ul(e).then(function(t){t?((t=t.modify()).overflow=!1,r.qh(t,a,!0).then(function(){o.finish(t)})):o.finish(t)}),o.result();t=n,a=!0,r.ps=i}return this.qh(t,a,!0).then(function(){o.finish(t)}),o.result()},e.prototype.Hh=function(t){if(t.after)return!0;switch(t.ke.namespaceURI){case o.a.SVG:return!1}return!t.Ce},e.prototype.hl=function(t){var e=t.toString();return""==e||"auto"==e||!!e.match(/^0+(.0*)?[^0-9]/)},e.prototype.al=function(t,e){if(!t)return!1;if(c.c(t.Le))return!1;var n=c.a(t,this.eh,0,this.vertical),i=s.c(t,this.ca()),r=this.ya(n+(this.vertical?-1:1)*i.minimum);if(this.ya(n+(this.vertical?-1:1)*i.current)&&!this.ic)this.ic=t;else if(e){var o=n+this.qc(e),a=this.rf-this.Fs()*i.current;n=this.vertical?Math.min(n,Math.max(o,a)):Math.max(n,Math.min(o,a))}return this.Cc(n),r},e.prototype.Ka=function(t,e,n,i){if(!t)return!1;if(c.c(t.Le))return!1;var r=this.al(t,e);return!n&&r||this.fl(t,i,r),r},e.prototype.cl=function(t){if(!t.Le.parentNode)return!1;var e=this.Ah(t.Le),n=t.Le.ownerDocument.createElement("div");this.vertical?(n.style.bottom="0px",n.style.width="1px",n.style.marginRight=e.right+"px"):(n.style.right="0px",n.style.height="1px",n.style.marginTop=e.top+"px"),t.Le.parentNode.insertBefore(n,t.Le);var i=this.eh.ue(n),r=this.Rs(i),o=this.Fs(),a=t.Ne,s=-this.Fs()*(1/0);switch("all"===a&&(s=this.Xf.lh(a,this)),a){case"left":s=o*Math.max(s*o,this.Jf*o);break;case"right":s=o*Math.max(s*o,this.tc*o);break;default:s=o*Math.max(s*o,Math.max(this.tc*o,this.Jf*o))}if(r*o>=s*o)return t.Le.parentNode.removeChild(n),!1;var u=Math.max(1,(s-r)*o);this.vertical?n.style.width=u+"px":n.style.height=u+"px",i=this.eh.ue(n);var l=this.Cs(i);if(this.vertical){var h=l+e.right-s;h>0==e.right>=0&&(h+=e.right),n.style.marginLeft=h+"px"}else{var c=s-(l+e.top);c>0==e.top>=0&&(c+=e.top),n.style.marginBottom=c+"px"}return t.Pe=n,!0},e.prototype.ll=function(t){return!!p.e(t)||!!T.c.Lh(t)},e.prototype.vl=function(t,e,n){var i=t.after?t.parent&&t.parent.le:t.le;if(i&&!this.ll(i))return E.d(t);var o=this,s=E.c("skipEdges"),u=!n&&e&&t&&t.after,l=n,h=null,c=[],f=[],d=!1;function v(){return!!n||!e&&a.c(l)}function g(){(t=c[0]||t).Le.parentNode.removeChild(t.Le),o.Wa=l}return s.Bt(function(n){for(;t;){r.a(t.le);var i=(new p.c).find(t.le);do{if(!t.Le)break;if(t.inline&&1!=t.Le.nodeType){if(w.p(t.Le,t.whitespace))break;if(!t.after)return v()?g():o.Ka(h,null,!0,l)?(t=(o.tf&&h||t).modify()).overflow=!0:(t=t.modify()).breakBefore=l,void n.Ht()}if(!t.after){if(i&&i.Yh(t))break;if(t.Ne&&o.cl(t)&&e&&0===o.Mf.length&&o.fl(t.copy(),l,!1),!o.ll(t.le)||T.c.Lh(t.le)||o.Bh(t)||t.Ce)return c.push(t.copy()),l=a.d(l,t.breakBefore),v()?g():!o.Ka(h,null,!0,l)&&o.jf.Qa(t)||((t=(o.tf&&h||t).modify()).overflow=!0),void n.Ht()}if(1!=t.Le.nodeType)break;var s=t.Le.style;if(t.after){if(t.inline)break;if(i&&i.$h(t,o.tf))break;if(d){if(v())return g(),void n.Ht();c=[],e=!1,u=!1,l=null}d=!1,h=t.copy(),f.push(h),l=a.d(l,t.breakAfter),!s||o.hl(s.paddingBottom)&&o.hl(s.borderBottomWidth)||(f=[h])}else{if(c.push(t.copy()),l=a.d(l,t.breakBefore),!o.jf.Qa(t)&&(o.Ka(h,null,!o.tf,l),(t=t.modify()).overflow=!0,o.tf))return void n.Ht();var m=t.Le.localName;if(S[m])return v()?g():o.Ka(h,null,!0,l)&&((t=(o.tf&&h||t).modify()).overflow=!0),void n.Ht();!s||o.hl(s.paddingTop)&&o.hl(s.borderTopWidth)||(u=!1,f=[]),d=!0}}while(0);var y=o.Ua(t,u);if(y.Mt())return void y.then(function(e){t=e,n.zt()});t=y.get()}o.Ka(h,f,!o.tf,l)?h&&o.tf&&((t=h.modify()).overflow=!0):a.c(l)&&(o.Wa=l),n.Ht()}).then(function(){h&&(o.cf=h.We()),s.finish(t)}),s.result()},e.prototype.ul=function(t){var e=t.copy(),n=this,i=E.c("skipEdges"),r=null,o=!1;return i.Bt(function(i){for(;t;){do{if(!t.Le)break;if(t.inline&&1!=t.Le.nodeType){if(w.p(t.Le,t.whitespace))break;if(!t.after)return a.c(r)&&(n.Wa=r),void i.Ht()}if(!t.after&&(n.Bh(t)||t.Ce))return r=a.d(r,t.breakBefore),a.c(r)&&(n.Wa=r),void i.Ht();if(1!=t.Le.nodeType)break;var s=t.Le.style;if(t.after){if(o){if(a.c(r))return n.Wa=r,void i.Ht();r=null}o=!1,r=a.d(r,t.breakAfter)}else{r=a.d(r,t.breakBefore);var u=t.Le.localName;if(S[u])return a.c(r)&&(n.Wa=r),void i.Ht();if(s&&(!n.hl(s.paddingTop)||!n.hl(s.borderTopWidth)))return void i.Ht()}o=!0}while(0);var l=n.sh.Ua(t);if(l.Mt())return void l.then(function(e){t=e,i.zt()});t=l.get()}e=null,i.Ht()}).then(function(){i.finish(e)}),i.result()},e.prototype.zh=function(t){return v.h(t.Be)||"footnote"===t.Te?this.zc(t):this.Rc(t)},e.prototype.dl=function(t,e,n){var i=this,o=E.c("layoutNext");return this.vl(t,e,n||null).then(function(n){if(!(t=n)||i.Wa||i.ac(t))o.finish(t);else{var a=t.le;r.a(a),(new p.c).find(a).layout(t,i,e).Dt(o)}}),o.result()},e.prototype.Wh=function(t,e){if(t)for(var n=t.parent;t;t=n,n=n?n.parent:null){var i=(n||t).le;r.a(i),(new p.c).find(i).Wh(this,n,t,e),e=!1}},e.prototype.pl=function(){var t=this.element.ownerDocument.createElement("div");t.style.position="absolute",t.style.top=this.paddingTop+"px",t.style.right=this.paddingRight+"px",t.style.bottom=this.paddingBottom+"px",t.style.left=this.paddingLeft+"px",this.element.appendChild(t);var e=this.eh.ue(t);this.element.removeChild(t);var n=this.ls+this.left+this.xs(),i=this.vs+this.top+this.ks();this.box=new h.c(n,i,n+this.width,i+this.height),this.$f=e?this.vertical?e.top:e.left:0,this.Wf=e?this.vertical?e.bottom:e.right:0,this.qf=e?this.vertical?e.right:e.top:0,this.Kf=e?this.vertical?e.left:e.bottom:0,this.Jf=this.qf,this.tc=this.qf,this.nc=this.qf,this.rf=this.Kf,this.bands=h.l(this.box,[this.Hs()],this.fc(),8,this.ws,this.vertical),this._c()},e.prototype.init=function(){this.Zf=[],o.F(this.element,"width",this.width+"px"),o.F(this.element,"height",this.height+"px"),this.pl(),this.ps=0,this.overflown=!1,this.Wa=null,this.cf=null},e.prototype.fl=function(t,e,n){r.a(t.le);var i=t.copy(),o=(new p.c).find(t.le),a=this.xa(i),s=o.Vh(i,e,n,this.ps+a);this.Mf.push(s)},e.prototype.Kc=function(t){var e=t[0].Ge,n=new A(t,e);this.Mf.push(n)},e.prototype.Cc=function(t){if(!isNaN(t)){var e=this.Fs()*(t-this.qf);this.ps=Math.max(e,this.ps)}},e.prototype.layout=function(t,e,n){if(this.Zf.push(t),t.primary.after&&(this.cf=t.primary),this.tf&&this.overflown)return E.d(t);if(this.bl())return t.primary.after&&1===t.primary.steps.length?E.d(null):E.d(t);var i=this,r=E.c("layout");return i.ef(t.primary).then(function(t){var o=null;if(t.Le)o=t.copy();else{var a=function(t){t.Aa.Le&&(o=t.Aa,i.sh.removeEventListener("nextInTree",a))};i.sh.addEventListener("nextInTree",a)}var s=new L(e,n);s.layout(t,i).then(function(t){i.ol(t,s.context.wl,o,s.ml).then(function(t){(i.if?E.d(null):i.hf(t)).then(function(){if(i.Xf.Hu())r.finish(null);else if(t){i.overflown=!0;var e=new w.a(t.We());r.finish(e)}else r.finish(null)})})})}),r.result()},e.prototype.bl=function(){return this.Xf.wh(this)},e.prototype.mh=function(){return this.Xf.mh()},e.prototype.hf=function(t){var e=this,n=E.c("doFinishBreakOfFragmentLayoutConstraints"),i=[].concat(this.Nf);i.sort(function(t,e){return t.Tf()-e.Tf()});var r=0;return n.loop(function(){return r<i.length?i[r++].qh(t,e).Ft(!0):E.d(!1)}).then(function(){n.finish(!0)}),n.result()},e.prototype.Pf=function(t,e,n){var i=this,r=E.c("doLayout"),o=null;return i.Mf=[],i.ic=null,r.Bt(function(r){for(var a=function(){var a=!0;if(i.dl(t,e,n||null).then(function(s){if(e=!1,n=null,i.ic&&i.tf?(i.Wa=null,(t=i.ic).overflow=!0):t=s,i.Xf.Hu())r.Ht();else if(i.Wa)r.Ht();else if(t&&i.ac(t)){o=t;var u=i.sf();t=u.Aa,u.uf&&u.uf.la(i),r.Ht()}else a?a=!1:r.zt()}),a)return a=!1,{value:void 0}};t;){var s=a();if("object"==typeof s)return s.value}i.ps+=i.il(),r.Ht()}).then(function(){r.finish({Aa:t,wl:o})}),r.result()},e.prototype.gl=function(){for(var t=this.Zf,e=this.element.lastChild;e!=this.last;){var n=e.previousSibling;this.element===e.parentNode&&this.sh.El(e)||this.element.removeChild(e),e=n}this.kc(),this.init();var i=this,r=E.c("redoLayout"),o=0,a=null,s=!0;return r.Bt(function(e){if(o<t.length){var n=t[o++];i.layout(n,s).then(function(t){s=!1,t?(a=t,e.Ht()):e.zt()})}else e.Ht()}).then(function(){r.finish(a)}),r.result()},e.prototype.kl=function(){var t=this.Xf.fh();t>0&&isFinite(t)&&(this.rc=this.Fs()*(t-this.qf-this.ps))},e.prototype.ca=function(){for(var t=this,e=[],n=this;n;n=n.if)n.Nf.forEach(function(n){if(T.c.Fh(n)){var i=n.Ta();e.push(i)}m.b(n)&&(i=n.Ta(),e.push(i)),T.e.Dh(n)&&n._l(t).forEach(function(t){e.push(t)})});return e},e}(w.b),C=/^[^A-Za-z0-9_\u009E\u009F\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02AF\u037B-\u037D\u0386\u0388-\u0482\u048A-\u0527]*([A-Za-z0-9_\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02AF\u037B-\u037D\u0386\u0388-\u0482\u048A-\u0527][^A-Za-z0-9_\u009E\u009F\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02AF\u037B-\u037D\u0386\u0388-\u0482\u048A-\u0527]*)?/,O=function(){function t(){}return t.prototype.Jc=function(t,e,n,i,r,o){if(e.after)e.me=t.length;else{var a=n-e.ye,s=t.data;(a=173==s.charCodeAt(a)?this.xl(t,s,a,e):this.yl(t,s,a,e))>0&&(e=this.Tl(e,a,t))}return e},t.prototype.xl=function(t,e,n,i){return t.replaceData(n,e.length-n,i.He?"":k(i)),n+1},t.prototype.yl=function(t,e,n,i){var r=e.charAt(n);n++;var a=e.charAt(n);return t.replaceData(n,e.length-n,!i.He&&o.x(r)&&o.x(a)?k(i):""),n},t.prototype.Tl=function(t,e,n){return(t=t.modify()).me+=e,t.breakBefore=null,t},t}();function k(t){return t.ze||t.parent&&t.parent.ze||"-"}O.instance=new O;var L=function(t){function e(e,n){var i=t.call(this)||this;return i.Ga=e,i.Nl=null,i.ml=0,i.Sl=!1,i.context={wl:null},i.breakAfter=n||null,i}return N(e,t),e.prototype.Lf=function(t){return new D(this.Ga,this.breakAfter,this.context)},e.prototype.Of=function(t,e){e.Nf=[],e.if||y.a()},e.prototype.Df=function(e){t.prototype.Df.call(this,e);for(var n=e;n;){var i=n.Le;i&&c.f(i.parentNode,i),n=n.parent}},e.prototype.Jh=function(e,n){t.prototype.Jh.call(this,e,n),this.Nl=n.Wa,this.ml=n.ps,this.Sl=n.overflown},e.prototype.ta=function(e,n){t.prototype.ta.call(this,e,n),n.Wa=this.Nl,n.ps=this.ml,n.overflown=this.Sl},e}(f.a),D=function(){function t(t,e,n){this.Ga=t,this.breakAfter=e,this.context=n}return t.prototype.Pf=function(t,e){var n=this,i=E.c("DefaultLayoutMode.doLayout");return m.d(t,e).then(function(){e.Pf(t,n.Ga,n.breakAfter).then(function(t){n.context.wl=t.wl,i.finish(t.Aa)})}),i.result()},t.prototype.accept=function(t,e){var n=this;return!(!e.Xf.Hu()&&!e.Wa)||e.Nf.length<=0||e.Nf.every(function(i){return i.Qa(t,n.context.wl,e)})},t.prototype._f=function(t,e,n,i){if(!i){var r=n.Nf.some(function(e){return e.kf(t)});i=!r}return n.Nf.forEach(function(r){r._f(i,t,e,n)}),i},t}(),R=function(t){function e(e,n,i,r,o,a,s){var u=t.call(this,n,i,r,o,a)||this;return u.Te=e,u.Al=s,u.ih=[],u.Rl=[],u.oh=!0,u}return N(e,t),e.prototype.ef=function(e){var n=this;return t.prototype.ef.call(this,e).Pt(function(t){return t&&n.Cl(t),E.d(t)})},e.prototype.Ol=function(t){var e=this.Al.Vs(),n=e.x2-e.x1,i=e.y2-e.y1;function r(e,n){e.forEach(function(e){var i=o.t(t,e);if(i&&"%"===i.charAt(i.length-1)){var r=parseFloat(i),a=n*r/100;o.F(t,e,a+"px")}})}r(["width","max-width","min-width"],n),r(["height","max-height","min-height"],i),r(["margin-top","margin-right","margin-bottom","margin-left","padding-top","padding-right","padding-bottom","padding-left"],this.vertical?i:n),["margin-top","margin-right","margin-bottom","margin-left"].forEach(function(e){"auto"===o.t(t,e)&&o.F(t,e,"0")})},e.prototype.Cl=function(t){for(;t.parent;)t=t.parent;r.a(1===t.Le.nodeType);var e=t.Le;if(this.ih.push(e),this.oh&&this.Ol(e),this.Rl.push(this.Ah(e)),this.oh){var n=this.Te;if(this.Al.vertical){if("block-end"===n||"left"===n){var i=o.t(e,"height");""!==i&&"auto"!==i&&o.F(e,"margin-top","auto")}}else if("block-end"===n||"bottom"===n){var a=o.t(e,"width");""!==a&&"auto"!==a&&o.F(e,"margin-left","auto")}}},e.prototype.uh=function(){var t=this;return Math.max.apply(null,this.ih.map(function(e,n){var i=t.eh.ue(e),r=t.Rl[n];return t.vertical?r.top+i.height+r.bottom:r.left+i.width+r.right}))},e}(x)},function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return r});var i=[];function r(){i=[]}},function(t,e,n){"use strict";n.r(e);var i,r,o,a=!1;!function(t){t.LTR="ltr",t.RTL="rtl"}(i||(i={})),function(t){t.LEFT="left",t.RIGHT="right"}(r||(r={})),function(t){t.LOADING="loading",t.INTERACTIVE="interactive",t.COMPLETE="complete"}(o||(o={}));var s={PageProgression:i,PageSide:r,ReadyState:o},u=n(9),l=n(6),h=function(){function t(t){this.Il=t,this.timestamps={},this.Ll=c,this.registerStartTiming=this.registerStartTiming=c,this.registerEndTiming=this.registerEndTiming=c}return t.prototype.Pl=function(t,e){p.call(this,t,"start",e)},t.prototype.Fl=function(t,e){p.call(this,t,"end",e)},t.prototype.printTimings=function(){var t=this.timestamps,e="";Object.keys(t).forEach(function(n){for(var i=t[n],r=i.length,o=0;o<r;o++){var a=i[o];e+=n,r>1&&(e+="("+o+")"),e+=" => start: "+a.start+", end: "+a.end+", duration: "+(a.end-a.start)+"\n"}}),l.b.info(e)},t.prototype.disable=function(){this.Ll=c,this.registerStartTiming=this.registerStartTiming=c,this.registerEndTiming=this.registerEndTiming=c},t.prototype.enable=function(){this.Ll=p,this.registerStartTiming=this.registerStartTiming=f,this.registerEndTiming=this.registerEndTiming=d},t.prototype.isEnabled=function(){return this.registerStartTiming===f},t}();function c(){}function p(t,e,n){n||(n=this.Il.now());var i,r=this.timestamps[t];r||(r=this.timestamps[t]=[]);for(var o=r.length-1;o>=0&&(!(i=r[o])||i[e]);o--)i=null;i||(i={},r.push(i)),i[e]=n}function f(t,e){this.Ll(t,"start",e)}function d(t,e){this.Ll(t,"end",e)}var v={now:Date.now},g=new h(window&&window.performance||v);g.Pl("load_vivliostyle");var m={profiler:{registerStartTiming:g.registerStartTiming,registerEndTiming:g.registerEndTiming,printTimings:g.printTimings,disable:g.disable,enable:g.enable}},y=n(7),b=n(1);function E(t){if(1==t.nodeType){var e=t.getAttribute("id");if(e&&e.match(/^[-a-zA-Z_0-9.\u007F-\uFFFF]+$/))return e}return null}function w(t){return"^"+t}function T(t){return t.replace(/[\[\]\(\),=;^]/g,w)}function N(t){return t.substr(1)}function S(t){return t?t.replace(/\^[\[\]\(\),=;^]/g,N):t}function _(t){var e=[];do{var n=t.match(/^(\^,|[^,])*/),i=S(n[0]);if(!(t=t.substr(n[0].length+1))&&!e.length)return i;e.push(i)}while(t);return e}function A(t){for(var e={};t;){var n=t.match(/^;([^;=]+)=(([^;]|\^;)*)/);if(!n)return e;e[n[1]]=_(n[2]),t=t.substr(n[0].length)}return e}var I=function(){function t(){}return t.prototype.rt=function(t){t.append("!")},t.prototype.Dl=function(t){return!1},t}(),x=function(){function t(t,e,n){this.index=t,this.id=e,this.Ml=n}return t.prototype.rt=function(t){t.append("/"),t.append(this.index.toString()),(this.id||this.Ml)&&(t.append("["),this.id&&t.append(this.id),this.Ml&&(t.append(";s="),t.append(this.Ml)),t.append("]"))},t.prototype.Dl=function(t){if(1!=t.node.nodeType)throw new Error("E_CFI_NOT_ELEMENT");var e,n=t.node,i=n.children,r=i.length,o=Math.floor(this.index/2)-1;if(o<0||0==r)e=n.firstChild,t.node=e||n;else{if(e=i[Math.min(o,r-1)],1&this.index){var a=e.nextSibling;a&&1!=a.nodeType?e=a:t.after=!0}t.node=e}if(this.id&&(t.after||this.id!=E(t.node)))throw new Error("E_CFI_ID_MISMATCH");return t.Ml=this.Ml,!0},t}(),C=function(){function t(t,e,n,i){this.offset=t,this.Ul=e,this.Gl=n,this.Ml=i}return t.prototype.Dl=function(t){if(this.offset>0&&!t.after){for(var e=this.offset,n=t.node;;){var i=n.nodeType;if(1==i)break;var r=n.nextSibling;if(3<=i&&i<=5){var o=n.textContent.length;if(e<=o)break;if(!r){e=o;break}e-=o}if(!r){e=0;break}n=r}t.node=n,t.offset=e}return t.Ml=this.Ml,!0},t.prototype.rt=function(t){t.append(":"),t.append(this.offset.toString()),(this.Ul||this.Gl||this.Ml)&&(t.append("["),(this.Ul||this.Gl)&&(this.Ul&&t.append(T(this.Ul)),t.append(","),this.Gl&&t.append(T(this.Gl))),this.Ml&&(t.append(";s="),t.append(this.Ml)),t.append("]"))},t}(),O=function(){function t(){this.steps=null}return t.prototype.Bl=function(t){var e=t.match(/^#?epubcfi\((.*)\)$/);if(!e)throw new Error("E_CFI_NOT_CFI");for(var n=e[1],i=0,r=[];;){var o=void 0;switch(n.charAt(i)){case"/":if(i++,!(e=n.substr(i).match(/^(0|[1-9][0-9]*)(\[([-a-zA-Z_0-9.\u007F-\uFFFF]+)(;([^\]]|\^\])*)?\])?/)))throw new Error("E_CFI_NUMBER_EXPECTED");i+=e[0].length;var a=parseInt(e[1],10),s=e[3];o=A(e[4]),r.push(new x(a,s,b.g(o.s)));break;case":":if(i++,!(e=n.substr(i).match(/^(0|[1-9][0-9]*)(\[((([^\];,]|\^[\];,])*)(,(([^\];,]|\^[\];,])*))?)(;([^]]|\^\])*)?\])?/)))throw new Error("E_CFI_NUMBER_EXPECTED");i+=e[0].length;var u=parseInt(e[1],10),l=e[4];l&&(l=S(l));var h=e[7];h&&(h=S(h)),o=A(e[10]),r.push(new C(u,l,h,b.g(o.s)));break;case"!":i++,r.push(new I);break;case"~":case"@":case"":return void(this.steps=r);default:throw new Error("E_CFI_PARSE_ERROR")}}},t.prototype.navigate=function(e){for(var n={node:e.documentElement,offset:0,after:!1,Ml:null,ref:null},i=0;i<this.steps.length;i++)if(!this.steps[i].Dl(n)){n.ref=new t,n.ref.steps=this.steps.slice(i+1);break}return n},t.prototype.trim=function(t,e){return t.replace(/\s+/g," ").match(e?/^[ -\uD7FF\uE000-\uFFFF]{0,8}/:/[ -\uD7FF\uE000-\uFFFF]{0,8}$/)[0].replace(/^\s/,"").replace(/\s$/,"")},t.prototype.zl=function(t,e,n,i){for(var r=[],o=t.parentNode,a="",s="";t;){switch(t.nodeType){case 3:case 4:case 5:var u=t.textContent,l=u.length;n?(e+=l,a||(a=u)):(e>l&&(e=l),n=!0,a=u.substr(0,e),s=u.substr(e)),t=t.previousSibling;continue;case 8:t=t.previousSibling;continue}break}for((e>0||a||s)&&(a=this.trim(a,!1),s=this.trim(s,!0),r.push(new C(e,a,s,i)),i=null);o&&o&&9!=o.nodeType;){for(var h=n?null:E(t),c=n?1:0;t;)1==t.nodeType&&(c+=2),t=t.previousSibling;r.push(new x(c,h,i)),i=null,t=o,o=o.parentNode,n=!1}r.reverse(),this.steps?(r.push(new I),this.steps=r.concat(this.steps)):this.steps=r},t.prototype.toString=function(){if(!this.steps)return"";var t=new b.d;t.append("epubcfi(");for(var e=0;e<this.steps.length;e++)this.steps[e].rt(t);return t.append(")"),t.toString()},t}(),k=n(20),L=n(4);function D(t){var e={};return Object.keys(t).forEach(function(n){e[n]=Array.from(t[n])}),e}var R,P=function(){function t(t,e){this.Hl=t,this.resolved=e,this.jl=null,this.te=-1,this.Xl=-1}return t.prototype.equals=function(t){return this===t||!!t&&this.Hl===t.Hl&&this.resolved===t.resolved&&this.te===t.te&&this.Xl===t.Xl},t.prototype.Vl=function(){return this.resolved},t.prototype.resolve=function(){this.resolved=!0},t.prototype.unresolve=function(){this.resolved=!1},t}(),M=function(){function t(t,e){this.Yl=t,this.wo=e}return t.prototype.Ki=function(t,e){t=this.Yl.Wl.$l(t,this.wo),this.Yl.ql[t]=e},t.prototype.Kl=function(){return this.Yl.Kl()},t}(),F=function(){function t(t,e,n,i){this.Yl=t,this.wo=e,this.nn=n,this.Zl=i,this.styler=null}return t.prototype.Ql=function(t){this.styler=t},t.prototype.Jl=function(t){var e=t.match(/^[^#]*#(.*)$/);return e?e[1]:null},t.prototype.tv=function(t){var e=this.Yl.Wl.sa(b.C(t,this.wo),this.wo);return"#"===e.charAt(0)&&(e=e.substring(1)),e},t.prototype.Ei=function(t,e){var n=this,i=new L.t(this.Zl,function(){return e((i=n.Yl.nv[t])&&i.length?i[i.length-1]:null);var i},"page-counter-"+t);return this.Yl.iv(t,function(t){return e(t[0])},i),i},t.prototype._i=function(t,e){var n=this,i=new L.t(this.Zl,function(){return e(n.Yl.nv[t]||[])},"page-counters-"+t);return this.Yl.iv(t,e,i),i},t.prototype.rv=function(t,e,n){var i=this.Yl.ql[e];return!i&&n&&t&&(this.styler.ev(t),i=this.Yl.ql[e]),i||null},t.prototype.sv=function(t){return this.Yl.currentPage.qr[t]?this.Yl.nv:this.Yl.ov[t]||null},t.prototype.yi=function(t,e,n){var i=this.Jl(t),r=this.tv(t),o=this.rv(i,r,!1);if(o&&o[e]){var a=o[e];return new L.f(this.nn,n(a[a.length-1]||null))}var s=this;return new L.t(this.Zl,function(){if(o=s.rv(i,r,!0)){if(o[e]){var t=o[e];return n(t[t.length-1]||null)}var a=s.sv(r);if(a){if(s.Yl.uv(r),a[e]){var u=a[e];return n(u[u.length-1]||null)}return n(0)}return s.Yl.hv(r,!1),"??"}return s.Yl.hv(r,!1),"??"},"target-counter-"+e+"-of-"+t)},t.prototype.Ni=function(t,e,n){var i=this.Jl(t),r=this.tv(t),o=this;return new L.t(this.Zl,function(){var t=o.sv(r);if(t){o.Yl.uv(r);var a=t[e]||[],s=o.rv(i,r,!0)[e]||[];return n(a.concat(s))}return o.Yl.hv(r,!1),"??"},"target-counters-"+e+"-of-"+t)},t}(),U=function(){function t(t){this.Wl=t,this.ql={},this.ov={},this.nv={},this.av={},this.fv=[],this.cv={},this.currentPage=null,this.lv=[],this.vv=[],this.dv=[],this.pv={},this.bv={},this.wv=[],this.nv.page=[0]}return t.prototype.mv=function(t){return new M(this,t)},t.prototype.gv=function(t,e,n){return new F(this,t,e,n)},t.prototype.Ev=function(t){this.currentPage=t},t.prototype.kv=function(t,e){this.nv[t]?this.nv[t].push(e):this.nv[t]=[e]},t.prototype._v=function(t){var e=this.nv.page;e&&e.length?e[e.length-1]=t:this.nv.page=[t]},t.prototype.xv=function(t,e){var n;this.av=D(this.nv);var i,r=t["counter-reset"];if(r){var o=r.evaluate(e);o&&(n=k.b(o,!0))}if(n)for(var a in n)this.kv(a,n[a]);var s=t["counter-increment"];if(s){var u=s.evaluate(e);u&&(i=k.b(u,!1))}for(var l in i?"page"in i||(i.page=1):(i={}).page=1,i){this.nv[l]||this.kv(l,0);var h=this.nv[l];h[h.length-1]+=i[l]}},t.prototype.yv=function(t){this.fv.push(this.nv),this.nv=D(t)},t.prototype.Tv=function(){this.nv=this.fv.pop()},t.prototype.uv=function(t){var e=this.pv[t],n=this.bv[t];n||(n=this.bv[t]=[]);for(var i=!1,r=0;r<this.vv.length;){var o=this.vv[r];if(o.Hl===t){if(o.resolve(),this.vv.splice(r,1),e){var a=e.indexOf(o);a>=0&&e.splice(a,1)}n.push(o),i=!0}else r++}i||this.hv(t,!0)},t.prototype.hv=function(t,e){if(!this.lv.some(function(e){return e.Hl===t})){var n=new P(t,e);this.lv.push(n)}},t.prototype.Nv=function(t,e){var n=this,i=Object.keys(this.currentPage.qr);if(i.length>0){var r=D(this.nv);i.forEach(function(i){n.ov[i]=r;var o=n.cv[i];if(o&&o.Xl<e){var a=n.bv[i];if(a){var s,u=n.pv[i];for(u||(u=n.pv[i]=[]);s=a.shift();)s.unresolve(),u.push(s)}}n.cv[i]={te:t,Xl:e}})}for(var o,a=this.av;o=this.lv.shift();){o.jl=a,o.te=t,o.Xl=e;var s=void 0;o.Vl()?(s=this.bv[o.Hl])||(s=this.bv[o.Hl]=[]):(s=this.pv[o.Hl])||(s=this.pv[o.Hl]=[]),s.every(function(t){return!o.equals(t)})&&s.push(o)}this.currentPage=null},t.prototype.Sv=function(t){var e=this,n=[];Object.keys(t.qr).forEach(function(t){var i=e.pv[t];i&&(n=n.concat(i))}),n.sort(function(t,e){return t.te-e.te||t.Xl-e.Xl});var i=[],r=null;return n.forEach(function(t){r&&r.te===t.te&&r.Xl===t.Xl?r.refs.push(t):(r={te:t.te,Xl:t.Xl,jl:t.jl,refs:[t]},i.push(r))}),i},t.prototype.Av=function(t){this.dv.push(this.vv),this.vv=t},t.prototype.Rv=function(){this.vv=this.dv.pop()},t.prototype.iv=function(t,e,n){"pages"===t&&this.wv.push({expr:n,format:e})},t.prototype.Kl=function(){return this.qs.bind(this)},t.prototype.qs=function(t,e,n){if(this.wv.findIndex(function(e){return e.expr===t})>=0){var i=n.createElement("span");return i.textContent=e,i.setAttribute(B,t.key),i}return null},t.prototype.Cv=function(t){var e=this,n=t.root.querySelectorAll("["+B+"]"),i=this.nv.page[0];Array.from(n).forEach(function(t){var n=t.getAttribute(B),r=e.wv.findIndex(function(t){return t.expr.key===n});y.a(r>=0),t.textContent=e.wv[r].format([i])})},t.prototype.Ov=function(t){return new z(this,t)},t}(),B="data-vivliostyle-pages-counter",z=function(){function t(t,e){this.Yl=t,this.Xl=e}return t.prototype.Qa=function(t){if(!t||t.after)return!0;var e=t.Le;if(!e||1!==e.nodeType)return!0;var n=e.getAttribute("id")||e.getAttribute("name");if(!n)return!0;if(!this.Yl.bv[n]&&!this.Yl.pv[n])return!0;var i=this.Yl.cv[n];return!i||this.Xl>=i.Xl},t}(),H=n(5),G=n(10),V=n(2),X=n(16),j=n(0),W=n(12),Y=n(3),K=n(8),$=(R=function(t,e){return(R=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}R(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),q=W.d,Z=function(t){function e(e,n,i,r,o){var a=t.call(this,e,n,"block-end",null,i,o)||this;return a.Ue=r,a}return $(e,t),e.prototype.Wo=function(t){return!(t instanceof e)},e}(W.b),Q=function(t){function e(e,n,i,r){return t.call(this,e,"block-end",n,i,r)||this}return $(e,t),e.prototype.Xo=function(){return 1/0},e.prototype.iu=function(t){return t instanceof Z||this.Xo()<t.Xo()},e}(q),J=function(){function t(t){this.footnote=t}return t.prototype.Qa=function(t){var e=t.We();return!K.u(e,this.footnote.jo)},t}(),tt=function(){function t(){}return t.prototype.kh=function(t){return"footnote"===t.Te},t.prototype._h=function(t){return t instanceof Z},t.prototype.xh=function(t,e,n){var i=W.a.REGION,r=e.Eu(i);e.Eu(W.a.PAGE).Gu(r)&&(i=W.a.PAGE);var o=t.We();y.a(e.ae);var a=new Z(o,i,e.ae,t.Ue,t.Se);return e.Zo(a),Y.d(a)},t.prototype.Th=function(t,e,n,i){var r=t[0].float;return new Q(r.Be,t,n,i)},t.prototype.Tu=function(t,e){var n=e.Eu(t.Be).uu.filter(function(t){return t instanceof Q});return y.a(n.length<=1),n[0]||null},t.prototype.Nh=function(t,e,n){t.Yf=!0,t.oh=!1;var i=t.element;y.a(i),t.vertical=n.sh.Iv(e.vertical,n.sh.Aa&&"rtl"===n.sh.Aa.direction,i),t.Ol(i),n.Sc(i,t),n.Ac(i,t)},t.prototype.forbid=function(t,e){var n=t;switch(n.Ue){case j.t.line:var i=new J(n);e.bh(i,n.Be)}},t}();W.f.register(new tt);var et=n(22),nt=n(14),it=n(18),rt=n(29),ot=n(23),at=n(26),st=n(31),ut=n(15),lt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ht=function(){function t(t,e){this.parent=t,this.Lv=e,this.Ch="RepetitiveElementsOwner",this.ri=!1,this.Pv=null}return t.prototype.Ct=function(){return"Repetitive elements owner formatting context (RepetitiveElementsOwnerFormattingContext)"},t.prototype.Qh=function(t,e){return e},t.prototype.pu=function(){return this.parent},t.prototype.Ta=function(){return this.Pv},t.prototype.Fv=function(t){var e=this.Dv(t);return e?e.Le:null},t.prototype.Dv=function(t){do{if(!t.Qe(this)&&t.ke===this.Lv)return t}while(t=t.parent);return null},t.prototype.Mv=function(t){var e=this;this.Pv||st.b.some(function(t){return t.root===e.Lv&&(e.Pv=t.elements,!0)})||(this.Pv=new ct(t,this.Lv),st.b.push({root:this.Lv,elements:this.Pv}))},t.prototype.Jh=function(){},t.prototype.ta=function(t){},t}(),ct=function(){function t(t,e){this.vertical=t,this.Uv=e,this.Gv=null,this.Bv=null,this.zv=null,this.Hv=null,this.jv=null,this.Xv=null,this.Vv=0,this.Yv=0,this.$v=!1,this.Wv=!1,this.qv=!0,this.Kv=!0,this.Zv=!1,this.Qv=null,this.Jv=null,this.nd=[],this.rd=[],this.ed=!1}return t.prototype.sd=function(t){this.jv||(this.jv=K.x(t,0),this.Gv=t.ke,this.zv=t.Le)},t.prototype.od=function(t){this.Xv||(this.Xv=K.x(t,0),this.Bv=t.ke,this.Hv=t.Le)},t.prototype.ud=function(t){this.zv&&(this.Vv=nt.b(this.zv,t,this.vertical),this.zv=null),this.Hv&&(this.Yv=nt.b(this.Hv,t,this.vertical),this.Hv=null)},t.prototype.hd=function(){this.$v=this.Wv=!1,this.qv=!0,this.Kv=!0},t.prototype.ad=function(t,e,n){return!this.jv||this.$v?Y.d(!0):this.fd(this.jv,t,e,n)},t.prototype.ld=function(t,e,n){return!this.Xv||this.Wv?Y.d(!0):this.fd(this.Xv,t,e,n)},t.prototype.fd=function(t,e,n,i){var r=this,o=e.Le.ownerDocument,a=e.Le,s=o.createElement("div");a.appendChild(s);var u=new ot.PseudoColumn(i,s,e),l=u.vf().Wa;return u.vf().Wa=null,this.vd=!0,u.layout(new K.a(t),!0).Pt(function(){return r.vd=!1,a.removeChild(s),r.dd(s,a,n),u.vf().Wa=l,Y.d(!0)})},t.prototype.dd=function(t,e,n){if(e)for(;t.firstChild;){var i=t.firstChild;t.removeChild(i),i.setAttribute(K.m,"1"),n?e.insertBefore(i,n):e.appendChild(i)}},t.prototype.aa=function(t){var e=0;return t&&!this.xf(t)?e:((!this.Wv||t&&this.pd(t))&&(e+=this.Yv),this.$v||(e+=this.Vv),e)},t.prototype.va=function(t){var e=0;return t&&!this.xf(t)?e:(t&&this.pd(t)&&(e+=this.Yv),this.Kv||(e+=this.Vv),e)},t.prototype.pd=function(t){var e=this;return this.bd(t,this.rd,function(n){return e.wd(e.Jv,t,!1)})},t.prototype.xf=function(t){var e=this;return this.bd(t,this.nd,function(n){return e.wd(e.Uv,t,!0)})},t.prototype.bd=function(t,e,n){var i=e.filter(function(e){return e.Aa.ke===t.ke&&e.Aa.after===t.after});if(i.length>0)return i[0].result;var r=n(t);return e.push({Aa:t,result:r}),r},t.prototype.wd=function(t,e,n){for(var i=[],r=t;r;r=r.parentNode){if(e.ke===r)return e.after;i.push(r)}for(var o=e.ke;o;o=o.parentNode){var a=i.indexOf(o);if(a>=0)return!!n&&0===a;for(var s=o;s;s=s.previousElementSibling)if(i.includes(s))return!0}return e.after},t.prototype.Na=function(t){return t&&this.Qv===t.ke},t.prototype.md=function(){return!!(!this.Wv&&this.qv&&this.Xv||!this.$v&&this.Kv&&this.jv)},t.prototype.gd=function(){!this.Wv&&this.qv&&this.Xv?this.Wv=!0:!this.$v&&this.Kv&&this.jv&&(this.$v=!0)},t.prototype.Ed=function(){this.$v=!1,this.Kv=!1},t.prototype.kd=function(){this.Wv=!1,this.qv=!1},t.prototype._d=function(){return!!this.jv},t.prototype.xd=function(){return!!this.Xv},t.prototype.yd=function(t){return this.Gv===t},t.prototype.Td=function(t){return this.Bv===t},t}(),pt=function(){function t(t){this.le=t}return t.prototype.accept=function(t,e){return!!t},t.prototype._f=function(t,e,n,i){var r=this.le.Ta();return r&&(y.a(n.eh),r.Zv||(r.ud(n),r.Zv=!0)),i},t}(),ft=function(){function t(t){this.le=t}return t.prototype.accept=function(t,e){return!0},t.prototype._f=function(t,e,n,i){return i},t}(),dt=function(t){function e(e,n){var i=t.call(this,e)||this;return i.processor=n,i}return lt(e,t),e.prototype.Pf=function(t,e){return this.processor.Nd(t,e)},e.prototype.accept=function(t,e){return!1},e}(pt),vt=function(t){function e(e,n){var i=t.call(this,e)||this;return i.processor=n,i}return lt(e,t),e.prototype.Pf=function(t,e){return t.Qe(this.le)||t.after||e.Nf.unshift(new gt(t)),this.processor.Pf(t,e)},e}(ft),gt=function(){function t(t){this.Ih="RepetitiveElementsOwner";var e=Et(t.le);this.Aa=e.Dv(t)}return t.prototype.Qa=function(t,e,n){var i=this.Ta();return!(i&&!nt.c(this.Aa.Le)&&i.md()&&(e&&!t||t&&t.overflow))},t.prototype.kf=function(t){var e=this.Ta();return!!e&&!!e.md()&&(e.gd(),!0)},t.prototype._f=function(t,e,n,i){var r=this.Ta();r&&t&&i.tf&&(null==e||r.pd(e))&&r.kd()},t.prototype.qh=function(t,e){var n=Et(this.Aa.le),i=this.Ta();if(!i)return Y.d(!0);var r=this.Aa;return function(t,e,n){var i=t.Ta();if(i){var r=t.Dv(e);if(r.Le){var o=r.Le.firstChild;return i.ad(r,o,n)}}return Y.d(!0)}(n,r,e).Pt(function(){return function(t,e,n){var i=t.Ta();if(i&&!i.Wv){var r=t.Dv(e);if(r.Le)return i.ld(r,null,n)}return Y.d(!0)}(n,r,e).Pt(function(){return i.hd(),Y.d(!0)})})},t.prototype.Ta=function(){return Et(this.Aa.le).Ta()},t.prototype.yf=function(e){return e instanceof t&&Et(this.Aa.le)===Et(e.Aa.le)},t.prototype.Tf=function(){return 10},t}(),mt=function(t){function e(e,n){var i=t.call(this)||this;return i.le=e,i.processor=n,i}return lt(e,t),e.prototype.Lf=function(t){var e=this.le.Ta();return t.Qe(this.le)||e.Zv?(t.Qe(this.le)||t.after||e&&e.Ed(),new vt(this.le,this.processor)):new dt(this.le,this.processor)},e}(rt.a),yt=function(t){function e(e,n){var i=t.call(this)||this;return i.le=e,i.column=n,i}return lt(e,t),e.prototype.Yh=function(t){var e=this.le,n=t.Aa,i=e.Ta();if(n.parent&&e.Lv===n.parent.ke){switch(n.Fe){case"header":if(!i._d())return i.sd(n),Y.d(!0);n.Fe="none";break;case"footer":if(!i.xd())return i.od(n),Y.d(!0);n.Fe="none"}i.Qv||(i.Qv=n.ke)}return ot.EdgeSkipper.prototype.Yh.call(this,t)},e.prototype.$h=function(t){var e=this.le,n=t.Aa;return n.ke===e.Lv&&(e.Ta().Jv=t.Ya&&t.Ya.ke,t.break=!0),"header"===n.Fe||"footer"===n.Fe?Y.d(!0):ot.EdgeSkipper.prototype.$h.call(this,t)},e}(ot.EdgeSkipper);function bt(t,e){t&&function(t,e){for(var n=t;n;n=n.parent){var i=n.le;i&&i instanceof ht&&!n.Qe(i)&&e(i,n)}}(t.after?t.parent:t,function(t,n){ut.e.Ph(t)||e.Nf.push(new gt(n))})}function Et(t){return y.a(t instanceof ht),t}!function(t){lt(function(e,n){var i=t.call(this)||this;return i.le=e,i.column=n,i},t)}(ot.EdgeSkipper);var wt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return lt(e,t),e.prototype.layout=function(t,e,n){if(e.Bh(t))return e.zh(t);var i=Et(t.le);return i.Fv(t)?(n&&bt(t.parent,e),t.Qe(i)?it.b.prototype.layout.call(this,t,e,n):new mt(i,this).layout(t,e)):e.mc(t)},e.prototype.Yh=function(t){var e=function(t){var e=t.le;return e&&e instanceof ht?e:null}(t).Ta();return!!e&&(e.vd||!e.yd(t.ke)&&!e.Td(t.ke)||t.Le.parentNode.removeChild(t.Le),!1)},e.prototype.Nd=function(t,e){Et(t.le);var n=Y.c("BlockLayoutProcessor.doInitialLayout");return this.Sd(t,e).Dt(n),n.result()},e.prototype.Sd=function(t,e){var n=Et(t.le),i=new yt(n,e);return new ot.LayoutIterator(i,e.sh).iterate(t)},e.prototype.Pf=function(t,e){var n=Et(t.le),i=Y.c("doLayout"),r=e.sh.Ua(t,!1);return at.c(r,e).then(function(t){var r=t;i.Bt(function(t){for(var i=function(){var i=!0;if(e.dl(r,!1).then(function(o){r=o,e.Xf.Hu()?t.Ht():e.Wa?t.Ht():r&&e.ac(r)?t.Ht():r&&r.after&&r.ke==n.Lv?t.Ht():i?i=!1:t.zt()}),i)return i=!1,{value:void 0}};r;){var o=i();if("object"==typeof o)return o.value}t.Ht()}).then(function(){i.finish(r)})}),i.result()},e.prototype.qh=function(t,e,n,i){return it.b.prototype.qh.call(this,t,e,n,i)},e.prototype.Wh=function(t,e,n,i){it.b.prototype.Wh(t,e,n,i)},e}(it.b));u.d(u.a.RESOLVE_LAYOUT_PROCESSOR,function(t){return t instanceof ht&&!ut.e.Ph(t)?wt:null});var Tt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Nt=function(){function t(t,e){this.rowIndex=t,this.ke=e,this.cells=[]}return t.prototype.Ad=function(t){this.cells.push(t)},t.prototype.Rd=function(){return Math.min.apply(null,this.cells.map(function(t){return t.height}))},t}(),St=function(){function t(t,e,n){this.rowIndex=t,this.Cd=e,this.height=0,this.Od=null,this.Id=n,this.colSpan=n.colSpan||1,this.rowSpan=n.rowSpan||1}return t.prototype.Ld=function(t){this.height=t},t.prototype.Pd=function(t){this.Od=t},t}(),_t=function(t,e,n){this.rowIndex=t,this.Cd=e,this.cell=n},At=function(){function t(t,e,n){this.column=t,this.Fd=n,this.empty=!1,this.Dd=new ot.PseudoColumn(t,e,n)}return t.prototype.sf=function(){var t=this.Fd.Le,e=this.Fd.verticalAlign;"middle"!==e&&"bottom"!==e||b.F(t,"vertical-align","top");var n=this.Dd.sf(!0);return b.F(t,"vertical-align",e),n},t}(),It=function(t,e){this.Le=t,this.side=e},xt=function(t){function e(e,n,i,r){var o=t.call(this,e,n,i,r)||this;return o.Md=null,o.rowIndex=null,o.le=e.le,o}return Tt(e,t),e.prototype.wa=function(e,n){var i=t.prototype.wa.call(this,e,n);return n<this.ga()?null:this.Ud().every(function(t){return!!t.Aa})?i:null},e.prototype.ga=function(){var e=t.prototype.ga.call(this);return this.Ud().forEach(function(t){e+=t.uf.ga()}),e},e.prototype.Ud=function(){if(!this.Md){this.le;var t=this.Gd();this.Md=t.map(function(t){return t.sf()})}return this.Md},e.prototype.Bd=function(){return null!=this.rowIndex?this.rowIndex:this.rowIndex=this.le.zd(this.position.ke)},e.prototype.Gd=function(){return this.le.Hd(this.Bd()).map(this.le.jd,this.le)},e}(et.b),Ct=function(t){function e(e,n,i){var r=t.call(this)||this;return r.rowIndex=e,r.Xd=n,r.le=i,r.Md=null,r}return Tt(e,t),e.prototype.wa=function(t,e){if(e<this.ga())return null;var n=this.Gd(),i=this.Ud(),r=i.every(function(t){return!!t.Aa})&&i.some(function(t,e){var i=n[e].Dd,r=t.Aa;return!i.af(r)&&!i.ff(r)});return this.Xd.overflow=i.some(function(t){return t.Aa&&t.Aa.overflow}),r?this.Xd:null},e.prototype.ga=function(){var t=this.le,e=t.Vd(this.rowIndex),n=0;return t.Yd(e)||(n+=10),this.Ud().forEach(function(t){n+=t.uf.ga()}),n},e.prototype.Ud=function(){if(!this.Md){var t=this.Gd();this.Md=t.map(function(t){return t.sf()})}return this.Md},e.prototype.Gd=function(){return this.le.$d(this.rowIndex).map(this.le.jd,this.le)},e}(et.a),Ot=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.Wd=n,i.Ch="Table",i.vertical=!1,i.columnCount=-1,i.qd=0,i.captions=[],i.Kd=null,i.Zd=null,i.Ae=0,i.rows=[],i.slots=[],i.Qd=[],i.Jd=null,i.tp=[],i.Pv=null,i}return Tt(e,t),e.prototype.Ct=function(){return"Table formatting context (Table.TableFormattingContext)"},e.prototype.Qh=function(t,e){if(!e)return e;switch(t.display){case"table-row":return 0===this.tp.length;case"table-cell":return!this.tp.some(function(e){return e.np.steps[0].node===t.ke});default:return e}},e.prototype.pu=function(){return this.parent},e.prototype.ip=function(){this.Qd=[]},e.prototype.rp=function(t,e){this.rows[t]=e},e.prototype.ep=function(t){var e=this.slots[t];return e||(e=this.slots[t]=[]),e},e.prototype.Ad=function(t,e){var n=this.rows[t];n||(this.rp(t,new Nt(t,null)),n=this.rows[t]),y.a(n),n.Ad(e);for(var i=t+e.rowSpan,r=this.ep(t),o=0;r[o];)o++;for(;t<i;t++){r=this.ep(t);for(var a=o;a<o+e.colSpan;a++){var s=r[a]=new _t(t,a,e);e.Od||e.Pd(s)}}},e.prototype.Vd=function(t){var e=this.rows[t];return y.a(e),e},e.prototype.zd=function(t){return this.rows.findIndex(function(e){return t===e.ke})},e.prototype.sp=function(t,e,n){var i=this.Qd[t];i||(i=this.Qd[t]=[]),i[e]=n},e.prototype.$d=function(t){return this.ep(t).reduce(function(t,e){return e.cell!==t[t.length-1]?t.concat(e.cell):t},[])},e.prototype.Hd=function(t){return this.$d(t).filter(function(e){return e.rowIndex+e.rowSpan-1>t})},e.prototype.jd=function(t){return this.Qd[t.rowIndex]&&this.Qd[t.rowIndex][t.Cd]},e.prototype.Yd=function(t){return t.Rd()>this.qd/2},e.prototype.up=function(){return this.columnCount<0&&(this.columnCount=Math.max.apply(null,this.rows.map(function(t){return t.cells.reduce(function(t,e){return t+e.colSpan},0)}))),this.columnCount},e.prototype.hp=function(t){var e=this;this.rows.forEach(function(n){n.cells.forEach(function(n){var i=t.ue(n.Id);n.Id=null,n.Ld(e.vertical?i.width:i.height)})})},e.prototype.ap=function(t){if(!t)return null;var e=null,n=0,i=0;t:for(n=0;n<this.Qd.length;n++)if(this.Qd[n])for(i=0;i<this.Qd[n].length;i++)if(this.Qd[n][i]&&t===this.Qd[n][i].Dd.vf()){e=this.rows[n].cells[i];break t}if(!e)return null;for(;n<this.slots.length;n++)for(;i<this.slots[n].length;i++){var r=this.slots[n][i];if(r.cell===e)return{rowIndex:r.rowIndex,Cd:r.Cd}}return null},e.prototype.fp=function(t){var e=this,n=[];return this.slots.reduce(function(i,r,o){if(o>=t.rowIndex)return i;var a=e.jd(r[t.Cd].cell);return!a||n.includes(a)?i:(e.cp(a.Dd.vf(),i),n.push(a),i)},[])},e.prototype.lp=function(){var t=this,e=[];return this.rows.forEach(function(n){n.cells.forEach(function(n,i){e[i]||(e[i]={collected:[],elements:[]});var r=e[i],o=t.jd(n);o&&!r.collected.includes(o)&&(t.cp(o.Dd.vf(),r.elements),r.collected.push(o))})}),[new kt(e.map(function(t){return t.elements}))]},e.prototype.cp=function(t,e){t.Nf.forEach(function(t){if(ut.c.Fh(t)){var n=t.Ta();e.push(n)}ut.e.Dh(t)&&t._l(null).forEach(function(t){e.push(t)})})},e.prototype.Jh=function(){return[].concat(this.tp)},e.prototype.ta=function(t){this.tp=t},e}(ht),kt=function(){function t(t){this.vp=t}return t.prototype.aa=function(t){return this.dp(t,function(t){return t.current})},t.prototype.va=function(t){return this.dp(t,function(t){return t.minimum})},t.prototype.dp=function(t,e){var n=0;return this.vp.forEach(function(i){var r=et.c(t,i);n=Math.max(n,e(r))}),n},t}();function Lt(t){return y.a(t instanceof Ot),t}function Dt(t){return function(t){return"table-row-group"===t||"table-header-group"===t||"table-footer-group"===t}(t)||function(t){return"table"===t||"inline-table"===t}(t)}function Rt(t,e,n){var i=t.Aa,r=i.display,o=i.parent?i.parent.display:null,a=!1;if("inline-table"===o&&!(i.le instanceof Ot))for(var s=i.parent;s;s=s.parent)if(s.le instanceof Ot){a=s.le===e;break}return a||"table-row"===r&&!Dt(o)||"table-cell"===r&&"table-row"!==o&&!Dt(o)||i.le instanceof Ot&&i.le!==e?n.mc(i).Pt(function(e){return t.Aa=e,Y.d(!0)}):null}var Pt=function(t){function e(e,n){var i=t.call(this)||this;return i.le=e,i.column=n,i.rowIndex=-1,i.Cd=0,i.pp=!1,i.Gf=[],i.bp=!1,i}return Tt(e,t),e.prototype.Yh=function(e){var n=this.le,i=Rt(e,n,this.column);if(i)return i;this.wp(e);var r=e.Aa,o=r.display,a=n.Ta();switch(o){case"table":n.Ae=r.Ae;break;case"table-caption":var s=new It(r.Le,r.captionSide);n.captions.push(s);break;case"table-header-group":return a._d()||(this.bp=!0,a.sd(r)),Y.d(!0);case"table-footer-group":return a.xd()||(this.bp=!0,a.od(r)),Y.d(!0);case"table-row":this.bp||(this.pp=!0,this.rowIndex++,y.a(r.ke),this.Cd=0,n.rp(this.rowIndex,new Nt(this.rowIndex,r.ke)),a.Qv||(a.Qv=r.ke))}return t.prototype.Yh.call(this,e)},e.prototype.$h=function(e){var n=this.le,i=e.Aa,r=i.display,o=this.column.eh;if(this.wp(e),i.ke===n.Wd){var a=o.na(n.Fv(i));n.qd=parseFloat(a[n.vertical?"height":"width"]),n.Ta().Jv=e.Ya&&e.Ya.ke,e.break=!0}else switch(r){case"table-header-group":case"table-footer-group":if(this.bp)return this.bp=!1,Y.d(!0);break;case"table-row":this.bp||(n.Jd=i.Le,this.pp=!1);break;case"table-cell":if(!this.bp){this.pp||(this.rowIndex++,this.Cd=0,this.pp=!0);var s=i.Le;n.Ad(this.rowIndex,new St(this.rowIndex,this.Cd,s)),this.Cd++}}return t.prototype.$h.call(this,e)},e.prototype.Pa=function(t){this.mp(t)},e.prototype.Fa=function(t){this.mp(t)},e.prototype.Da=function(t){this.mp(t)},e.prototype.Ma=function(t){this.mp(t)},e.prototype.mp=function(t){var e=t.Aa;e&&e.Le&&!nt.e(e)&&this.Gf.push(e.clone())},e.prototype.wp=function(t){this.Gf.length>0&&this.column.gc(t.Aa,this.Gf),this.Gf=[]},e}(ot.EdgeSkipper),Mt=function(t){function e(e,n){var i=t.call(this,!0)||this;return i.le=e,i.column=n,i.pp=!1,i.gp=-1,i.Ep=0,i.kp=n.tf,n.tf=!1,i}return Tt(e,t),e.prototype._p=function(){this.column.tf=this.kp},e.prototype.xp=function(t){var e=this.le.Zd;y.a(e);for(var n=0,i=0;i<t.colSpan;i++)n+=e[t.Od.Cd+i];return n+this.le.Ae*(t.colSpan-1)},e.prototype.yp=function(t,e,n){var i=t.rowIndex,r=t.Cd,o=t.colSpan,a=e.Le;e.verticalAlign,o>1&&(b.F(a,"box-sizing","border-box"),b.F(a,this.le.vertical?"height":"width",this.xp(t)+"px"));var s=a.ownerDocument.createElement("div");a.appendChild(s);var u=new At(this.column,s,e);return this.le.sp(i,r,u),1===n.primary.steps.length&&n.primary.after&&(u.empty=!0),u.Dd.layout(n,!0).Ft(!0)},e.prototype.Tp=function(t){var e=this.le.tp[0];return!!e&&e.cell.Od.Cd===t},e.prototype.Np=function(){var t=this.le.tp;if(0===t.length)return[];var e=[],n=0;do{var i=t[n],r=i.cell.rowIndex;if(r<this.gp){var o=e[r];o||(o=e[r]=[]),o.push(i),t.splice(n,1)}else n++}while(n<t.length);return e},e.prototype.Sp=function(t){var e=this,n=this.le,i=this.Np(),r=i.reduce(function(t){return t+1},0);if(0===r)return Y.d(!0);var o=this.column.sh,a=t.Aa;a.Le.parentNode.removeChild(a.Le);var s=Y.c("layoutRowSpanningCellsFromPreviousFragment"),u=Y.d(!0),l=0,h=[];return i.forEach(function(t){u=u.Pt(function(){var i=K.v(t[0].np.steps[1],a.parent);return o.vc(i,!1).Pt(function(){var a=Y.d(!0),s=0;function u(t){for(;s<t;){if(!h.includes(s)){var e=i.Le.ownerDocument.createElement("td");b.F(e,"padding","0"),i.Le.appendChild(e)}s++}}return t.forEach(function(t){a=a.Pt(function(){var n=t.cell;u(n.Od.Cd);var a=t.np,c=K.v(a.steps[0],i);return c.me=a.me,c.after=a.after,c.ge=a.steps[0].ge+1,o.vc(c,!1).Pt(function(){for(var i=t.Ap,o=0;o<n.colSpan;o++)h.push(s+o);return s+=n.colSpan,e.yp(n,c,i).Pt(function(){return c.Le.rowSpan=n.rowIndex+n.rowSpan-e.gp+r-l,Y.d(!0)})})})}),a.Pt(function(){return u(n.up()),l++,Y.d(!0)})})})}),u.then(function(){o.vc(a,!0,t.Ra).then(function(){s.finish(!0)})}),s.result()},e.prototype.Rp=function(t){var e=this;if(this.Cp||this.Op)return Y.d(!0);var n=t.Aa,i=this.le;return this.gp<0?(y.a(n.ke),this.gp=i.zd(n.ke)):this.gp++,this.Ep=0,this.pp=!0,this.Sp(t).Pt(function(){return e.Ip(),e.column.Ka(t.Ya,null,!0,t.ja)&&0===i.Hd(e.gp-1).length&&(e._p(),n.overflow=!0,t.break=!0),Y.d(!0)})},e.prototype.Ip=function(){var t=this;this.le.Vd(this.gp).cells.forEach(function(e){var n=t.le.tp[e.Cd];if(n&&n.cell.Od.Cd==e.Od.Cd){var i=n.np.steps[0],r=t.column.sh.xmldoc.Lp(i.node);at.e(r,i.ge+1,1)}})},e.prototype.Pp=function(t){var e=this;if(this.Cp||this.Op)return Y.d(!0);var n=t.Aa;this.pp||(this.gp<0?this.gp=0:this.gp++,this.Ep=0,this.pp=!0);var i=this.le.Vd(this.gp).cells[this.Ep],r=n.copy().modify();r.after=!0,t.Aa=r;var o,a=Y.c("startTableCell");if(this.Tp(i.Od.Cd)){var s=this.le.tp.shift();n.ge=s.np.steps[0].ge+1,o=Y.d(s.Ap)}else o=this.column.Ua(n,t.Ra).Pt(function(t){t.Le&&n.Le.removeChild(t.Le);var e=K.x(t,0);return Y.d(new K.a(e))});return o.then(function(r){y.a(n),e.yp(i,n,r).then(function(){e.$h(t),e.Ep++,a.finish(!0)})}),a.result()},e.prototype.Ba=function(t){var e=Rt(t,Lt(this.le),this.column);if(e)return e;var n=t.Aa,i=this.le.Ta(),r=n.display;return"table-header-group"===r&&i&&i.yd(n.ke)?(this.Cp=!0,Y.d(!0)):"table-footer-group"===r&&i&&i.Td(n.ke)?(this.Op=!0,Y.d(!0)):"table-row"===r?this.Rp(t):"table-cell"===r?this.Pp(t):Y.d(!0)},e.prototype.Ha=function(t){var e=t.Aa;if("table-row"===e.display&&(this.pp=!1,!this.Cp&&!this.Op)){var n=e.copy().modify();n.after=!1;var i=new Ct(this.gp,n,this.le);this.column.Mf.push(i)}return Y.d(!0)},e.prototype.$h=function(n){var i=n.Aa,r=this.le.Ta(),o=i.display;if("table-header-group"===o?r&&!r.vd&&r.yd(i.ke)?(this.Cp=!1,i.Le.parentNode.removeChild(i.Le)):b.F(i.Le,"display","table-row-group"):"table-footer-group"===o&&(r&&!r.vd&&r.Td(i.ke)?(this.Op=!1,i.Le.parentNode.removeChild(i.Le)):b.F(i.Le,"display","table-row-group")),o&&e.Fp[o])i.Le.parentNode.removeChild(i.Le);else{if(i.ke!==this.le.Wd)return t.prototype.$h.call(this,n);i.overflow=this.column.al(i,null),this._p(),n.break=!0}return Y.d(!0)},e.Fp={"table-caption":!0,"table-column-group":!0,"table-column":!0},e}(ot.EdgeSkipper),Ft=[],Ut=function(){function t(){}return t.prototype.Dp=function(t,e){var n=Lt(t.le),i=new Pt(n,e);return new ot.LayoutIterator(i,e.sh).iterate(t)},t.prototype.Mp=function(t,e,n,i){for(var r=t.ownerDocument,o=r.createElement("tr"),a=[],s=0;s<e;s++){var u=r.createElement("td");o.appendChild(u),a.push(u)}t.parentNode.insertBefore(o,t.nextSibling);var l=a.map(function(t){var e=i.ue(t);return n?e.height:e.width});return t.parentNode.removeChild(o),l},t.prototype.Up=function(t){for(var e=[],n=t.firstElementChild;n;)"colgroup"===n.localName&&e.push(n),n=n.nextElementSibling;return e},t.prototype.Gp=function(t){var e=[];return t.forEach(function(t){var n=t.span;t.removeAttribute("span");for(var i=t.firstElementChild;i;){if("col"===i.localName){var r=i.span;for(i.removeAttribute("span"),n-=r;r-- >1;){var o=i.cloneNode(!0);t.insertBefore(o,i),e.push(o)}e.push(i)}i=i.nextElementSibling}for(;n-- >0;)i=t.ownerDocument.createElement("col"),t.appendChild(i),e.push(i)}),e},t.prototype.Bp=function(t,e,n,i){if(t.length<n){var r=i.ownerDocument.createElement("colgroup");e.push(r);for(var o=t.length;o<n;o++){var a=i.ownerDocument.createElement("col");r.appendChild(a),t.push(a)}}},t.prototype.zp=function(t,e,n){var i=t.vertical,r=t.Jd;if(r){y.a(r),t.Jd=null;var o=r.ownerDocument.createDocumentFragment(),a=t.up();if(a>0){var s=t.Zd=this.Mp(r,a,i,n.eh),u=this.Up(e),l=this.Gp(u);this.Bp(l,u,a,e),l.forEach(function(t,e){b.F(t,i?"height":"width",s[e]+"px")}),u.forEach(function(t){o.appendChild(t.cloneNode(!0))}),t.Kd=o}else t.Kd=o}},t.prototype.Nd=function(t,e){var n=this,i=Lt(t.le);i.vertical=t.vertical,i.Mv(t.vertical),y.a(t.ke);var r,o,a,s=(r=t.ke,o=Ft.findIndex(function(t){return t.root===r}),(a=Ft[o])?a.Hp:null);!function(t){var e=Ft.findIndex(function(e){return e.root===t});e>=0&&Ft.splice(e,1)}(t.ke);var u=Y.c("TableLayoutProcessor.doInitialLayout"),l=t.copy();return this.Dp(t,e).then(function(r){var o=r.Le,a=e.eh.ue(o),h=e.vertical?a.left:a.bottom;if(h+=(e.vertical?-1:1)*et.c(t,e.ca()).current,!(e.ya(h)||s&&s.jp))return e.Mf.push(new Ht(l)),void u.finish(r);n.zp(i,o,e),i.hp(e.eh),u.finish(null)}),u.result()},t.prototype.Xp=function(t,e,n){var i=t.captions;i.forEach(function(t,r){t&&(e.insertBefore(t.Le,n),"top"===t.side&&(i[r]=null))})},t.prototype.Vp=function(t,e,n){t.Kd&&0===this.Up(e).length&&e.insertBefore(t.Kd.cloneNode(!0),n)},t.prototype.Yp=function(t,e){if(t.Kd&&e){var n=this.Up(e);n&&n.forEach(function(t){e.removeChild(t)})}},t.prototype.Pf=function(t,e){var n=Lt(t.le),i=n.Fv(t),r=i.firstChild;this.Xp(n,i,r),this.Vp(n,i,r);var o=new Mt(n,e),a=new ot.LayoutIterator(o,e.sh),s=Y.c("TableFormattingContext.doLayout");return a.iterate(t).Dt(s),s.result()},t.prototype.layout=function(t,e,n){var i=Lt(t.le);return i.Fv(t)?(n&&bt(t.parent,e),new Bt(i,this).layout(t,e)):e.mc(t)},t.prototype.Vh=function(t,e,n,i){return new xt(t,e,n,i)},t.prototype.Yh=function(t){return!1},t.prototype.$h=function(t,e){return!1},t.prototype.qh=function(t,e,n,i){var r=Lt(e.le);if("table-row"===e.display){y.a(e.ke);var o,a=r.zd(e.ke);if(r.tp=[],(o=e.after?r.Hd(a):r.$d(a)).length){var s=Y.c("TableLayoutProcessor.finishBreak"),u=0;return s.Bt(function(t){if(u!==o.length){var e=o[u++],n=r.jd(e),i=n.sf().Aa;y.a(i);var s=n.Fd,l=s.We(),h=new K.a(i.We());r.tp.push({np:l,Ap:h,cell:e});var c=s.Le;n.column.sh.Zh(n.Fd),a<e.rowIndex+e.rowSpan-1&&(c.rowSpan=a-e.rowIndex+1),n.empty?t.zt():n.Dd.qh(i,!1,!0).then(function(){y.a(n),function(t,e,n){var i=e.Ta();if(i){var r=e.vertical,o=t.column,a=t.Dd.lf(),s=t.Fd.Le,u=o.eh.ue(s),l=o.Tc(s);if(r){var h=u.right-o.rf-i.aa(n)-l.right;b.F(a,"max-width",h+"px")}else{var c=o.rf-i.aa(n)-u.top-l.top;b.F(a,"max-height",c+"px")}b.F(a,"overflow","hidden")}}(n,r,i),t.zt()})}else t.Ht()}).then(function(){t.Wh(e,!1),t.sh.Zh(e),r.ip(),s.finish(!0)}),s.result()}}return r.ip(),it.d.qh(t,e,n,i)},t.prototype.Wh=function(t,e,n,i){it.b.prototype.Wh(t,e,n,i)},t}(),Bt=function(t){function e(e,n){var i=t.call(this)||this;return i.$p=e,i.processor=n,i}return Tt(e,t),e.prototype.Lf=function(t){var e=this.$p.Ta();return e&&e.Zv?(t.ke!==this.$p.Wd||t.after||e&&e.Ed(),new Vt(this.$p,this.processor)):new zt(this.$p,this.processor)},e.prototype.Df=function(e){t.prototype.Df.call(this,e);var n=this.$p.Fv(e);this.processor.Yp(this.$p,n)},e.prototype.ta=function(e,n){t.prototype.ta.call(this,e,n),this.$p.ip()},e}(rt.a),zt=function(t){function e(e,n){var i=t.call(this,e)||this;return i.processor=n,i}return Tt(e,t),e.prototype.Pf=function(t,e){return this.processor.Nd(t,e)},e}(pt),Ht=function(t){function e(e){return t.call(this,e,null,e.overflow,0)||this}return Tt(e,t),e.prototype.ga=function(){if(!this.pa)throw new Error("EdgeBreakPosition.prototype.updateEdge not called");return(this.overflows?3:0)+(this.position.parent?this.position.parent.Ge:0)},e.prototype.la=function(t){t.Nf.push(new Gt(this.position.ke))},e}(et.b),Gt=function(){function t(t){this.Wp=t,this.Ih="EntireTable"}return t.prototype.Qa=function(t,e,n){return y.a(!t.overflow),!1},t.prototype.kf=function(t){return!0},t.prototype._f=function(t,e,n,i){y.a(e.ke),Ft.push({root:e.ke,Hp:{jp:!0}})},t.prototype.qh=function(t,e){return Y.d(!0)},t.prototype.yf=function(e){return e instanceof t&&e.Wp===this.Wp},t.prototype.Tf=function(){return 0},t}(),Vt=function(t){function e(e,n){var i=t.call(this,e)||this;return i.processor=n,i}return Tt(e,t),e.prototype.Pf=function(t,e){var n=this.le.Ta();if(n&&!n.pd(t)){var i=new Xt(t);e.Nf.some(function(t){return i.yf(t)})||e.Nf.unshift(i)}return this.processor.Pf(t,e)},e}(ft),Xt=function(t){function e(e){var n=t.call(this,e)||this;return n.Ih="TableRow",n.qp=[],n}return Tt(e,t),e.prototype.Qa=function(t,e,n){var i=this.Ta();return!(i&&!n.if&&!nt.c(this.Aa.Le)&&i.md()&&(e&&!t||t&&t.overflow))},e.prototype.kf=function(e){var n=Lt(this.Aa.le);return!!this.Kp(e,n).some(function(t){return t.constraints.some(function(t){return t.kf(e)})})||t.prototype.kf.call(this,e)},e.prototype._f=function(e,n,i,r){var o=Lt(this.Aa.le);if(this.qp=this.Kp(n,o),this.qp.forEach(function(t){t.constraints.forEach(function(n){n._f(e,t.uf,i,r)})}),!e){var a=o.Fv(this.Aa);(new Ut).Yp(o,a),this.Zp(i)}t.prototype._f.call(this,e,n,i,r)},e.prototype.qh=function(e,n){var i=this,r=(Lt(this.Aa.le),Y.c("finishBreak")),o=this.qp.reduce(function(t,e){return t.concat(e.constraints.map(function(t){return{constraint:t,uf:e.uf}}))},[]),a=0;return r.loop(function(){if(a<o.length){var t=o[a++];return t.constraint.qh(t.uf,n).Ft(!0)}return Y.d(!1)}).then(function(){r.finish(!0)}),r.result().Pt(function(){return t.prototype.qh.call(i,e,n)})},e.prototype.Zp=function(t){if(t&&"table-row"===t.display&&t.Le)for(;t.Le.previousElementSibling;){var e=t.Le.previousElementSibling;e.parentNode&&e.parentNode.removeChild(e)}},e.prototype.Kp=function(t,e){return this.Qp(t,e).map(function(t){return{constraints:t.fragment.Dd.vf().Nf,uf:t.uf}})},e.prototype.Qp=function(t,e){var n=Number.MAX_VALUE;t&&"table-row"===t.display&&(y.a(t.ke),n=e.zd(t.ke)+1),n=Math.min(e.Qd.length,n);for(var i=[],r=0;r<n;r++)e.Qd[r]&&e.Qd[r].forEach(function(t){t&&i.push({fragment:t,uf:t.sf().Aa})});return i},e.prototype._l=function(t){var e=Lt(this.Aa.le),n=e.ap(t);return n?e.fp(n):e.lp()},e.prototype.yf=function(t){return t instanceof e&&Lt(this.Aa.le)===Lt(t.Aa.le)},e}(gt),jt=new Ut;u.d(u.a.RESOLVE_FORMATTING_CONTEXT,function(t,e,n,i,r,o){if(!e)return null;if(n===j.t.table){var a=t.parent;return new Ot(a?a.le:null,t.ke)}return null}),u.d(u.a.RESOLVE_LAYOUT_PROCESSOR,function(t){return t instanceof Ot?jt:null});var Wt=n(13);function Yt(t){return t.reduce(function(t,e){return t+e},0)/t.length}var Kt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),$t=function(t,e){this.Jp=t,this.penalty=e};function qt(t){return t.vertical?t.width:t.height}function Zt(t,e){t.vertical?t.width=e:t.height=e}var Qt=function(){function t(t,e,n){this.tb=t,this.nb=e,this.ib=n,this.rb=qt(t)}return t.prototype.eb=function(t){var e=this,n=Y.c("ColumnBalancer#balanceColumns");e.sb(t),e.ob(t),e.tb.clear();var i=[e.ub(t)];return n.Bt(function(t){e.hb(i)?(e.ab(i),e.nb().then(function(n){e.ob(n),e.tb.clear(),n?(i.push(e.ub(n)),t.zt()):t.Ht()})):t.Ht()}).then(function(){var t=i.reduce(function(t,e){return e.penalty<t.penalty?e:t},i[0]);e.fb(t.Jp),e.cb(),n.finish(t.Jp)}),n.result()},t.prototype.ub=function(t){var e=this.lb(t);return new $t(t,e)},t.prototype.sb=function(t){},t.prototype.cb=function(){Zt(this.tb,this.rb)},t.prototype.ob=function(t){var e=this.ib.Bu();t&&(t.pb=e)},t.prototype.fb=function(t){var e=this.tb.element;t.columns.forEach(function(t){e.appendChild(t.element)}),y.a(t.pb),this.ib.zu(t.pb)},t}(),Jt=1;function te(t){var e=t[t.length-1];if(0===e.penalty)return!1;var n=t[t.length-2];if(n&&e.penalty>=n.penalty)return!1;var i=e.Jp.columns;return Math.max.apply(null,i.map(function(t){return t.ps}))>Math.max.apply(null,i.map(function(t){return t.mh()}))+Jt}function ee(t,e){var n=t[t.length-1].Jp.columns,i=Math.max.apply(null,n.map(function(t){return isNaN(t.rc)?t.ps:t.ps-t.rc+Jt}))-Jt;i<qt(e)?Zt(e,i):Zt(e,qt(e)-1)}var ne=function(t){function e(e,n,i,r){var o=t.call(this,i,e,n)||this;return o.columnCount=r,o.bb=null,o.wb=!1,o}return Kt(e,t),e.prototype.sb=function(t){var e=t.columns.reduce(function(t,e){return t+e.ps},0);Zt(this.tb,e/this.columnCount),this.bb=t.position},e.prototype.mb=function(t){return this.bb?this.bb.Je(t):null===t},e.prototype.lb=function(t){if(!this.mb(t.position))return 1/0;var e=t.columns;return ie(e)?1/0:Math.max.apply(null,e.map(function(t){return t.ps}))},e.prototype.hb=function(t){if(1===t.length)return!0;if(this.wb)return te(t);var e=t[t.length-1];return this.mb(e.Jp.position)&&!ie(e.Jp.columns)?(this.wb=!0,!0):qt(this.tb)<this.rb},e.prototype.ab=function(t){if(this.wb)ee(t,this.tb);else{var e=Math.min(this.rb,qt(this.tb)+.1*this.rb);Zt(this.tb,e)}},e}(Qt);function ie(t){if(t.length<=1)return!1;var e=t[t.length-1].ps;return t.slice(0,t.length-1).every(function(t){return e>t.ps})}var re,oe=function(t){function e(e,n,i){return t.call(this,i,e,n)||this}return Kt(e,t),e.prototype.lb=function(t){if(t.columns.every(function(t){return 0===t.ps}))return 1/0;var e,n,i=t.columns.filter(function(t){return!t.Wa}).map(function(t){return t.ps});return n=Yt(e=i),Yt(e.map(function(t){var e=t-n;return e*e}))},e.prototype.hb=function(t){return te(t)},e.prototype.ab=function(t){ee(t,this.tb)},e}(Qt),ae=n(24),se=function(t,e,n){this.gb=t,this.Eb=e,this.kb=n},ue=function(){function t(){this.map=[]}return t.prototype._b=function(){return 0==this.map.length?0:this.map[this.map.length-1].Eb},t.prototype.xb=function(){return 0==this.map.length?0:this.map[this.map.length-1].kb},t.prototype.yb=function(t){if(0==this.map.length)this.map.push(new se(t,t,t));else{var e=this.map[this.map.length-1],n=e.kb+t-e.Eb;e.Eb==e.gb?(e.Eb=t,e.gb=t,e.kb=n):this.map.push(new se(t,t,n))}},t.prototype.Tb=function(t){0==this.map.length?this.map.push(new se(t,0,0)):this.map[this.map.length-1].Eb=t},t.prototype.Nb=function(t){var e=this,n=b.i(this.map.length,function(n){return t<=e.map[n].Eb}),i=this.map[n];return i.kb-Math.max(0,i.gb-t)},t.prototype.Sb=function(t){var e=this,n=b.i(this.map.length,function(n){return t<=e.map[n].kb}),i=this.map[n];return i.gb-(i.kb-t)},t}(),le=function(){function t(e,n,i,r,o,a,s,u){if(this.context=e,this.style=n,this.offset=i,this.ri=r,this.rs=o,this.Ab=a,this.Rb=s,this.Cb=u,this.Ob=null,this.Ib=null,this.Lb={},this.Pb=null,this.Fb=null,this.breakBefore=null,this.ae=o.ae,this.Db()){var l=n._pseudos;if(l&&l.before){var h=new t(e,l.before,i,!1,o,this.Mb(),s,!0),c=h.Ub("content");K.y(c)&&(this.Pb=h,this.breakBefore=h.breakBefore)}}this.breakBefore=Wt.d(this.Gb("before"),this.breakBefore),this.Rb&&Wt.c(this.breakBefore)&&(o.breakBefore=Wt.d(o.breakBefore,this.breakBefore))}return t.prototype.Bb=function(e,n,i){if(this.Db()){var r=this.style._pseudos;if(r&&r.after){var o=new t(this.context,r.after,e,!1,this.rs,n,i,!0),a=o.Ub("content");K.y(a)&&(this.Fb=o)}}},t.prototype.Ub=function(t,e){if(!(t in this.Lb)){var n=this.style[t];this.Lb[t]=n?n.evaluate(this.context,t):e||null}return this.Lb[t]},t.prototype.zb=function(){return this.Ub("display",j.t.inline)},t.prototype.Mb=function(){if(null===this.Ob){var t=this.zb(),e=this.Ub("position"),n=this.Ub("float");this.Ob=ae.d(t,e,n,this.ri)}return this.Ob},t.prototype.Db=function(){return null===this.Ib&&(this.Ib=this.Cb&&this.zb()!==j.t.none),this.Ib},t.prototype.Gb=function(t){var e=null;if(this.Mb()){var n=this.Ub("break-"+t);n&&(e=n.toString())}return e},t}(),he=function(){function t(t){this.context=t,this.stack=[],this.Ab=!0,this.Rb=!0,this.Hb=[]}return t.prototype.empty=function(){return 0===this.stack.length},t.prototype.jb=function(){return this.stack[this.stack.length-1]},t.prototype.Xb=function(){var t=this.jb();return t?t.rs.ae:null},t.prototype.Vb=function(){return this.stack.every(function(t){return t.zb()!==j.t.none})},t.prototype.push=function(t,e,n,i){var r=this.jb();i&&r&&i.ae!==r.ae&&this.Hb.push({Ab:this.Ab,Rb:this.Rb});var o=i||r.rs,a=this.Rb||!!i,s=this.Vb(),u=new le(this.context,t,e,n,o,a||this.Ab,a,s);return this.stack.push(u),this.Ab=u.Db()?!u.Pb&&u.Mb():this.Ab,this.Rb=u.Db()?!u.Pb&&a:this.Rb,u},t.prototype.Yb=function(t){var e=this.jb();if((this.Ab||this.Rb)&&e.Db()){var n=e.Ub("white-space",j.t.normal).toString(),i=K.z(n);y.a(null!==i),K.p(t,i)||(this.Ab=!1,this.Rb=!1)}},t.prototype.pop=function(t){var e=this.stack.pop();if(e.Bb(t,this.Ab,this.Rb),this.Rb&&e.Fb){var n=e.Fb.Gb("before");e.rs.breakBefore=Wt.d(e.rs.breakBefore,n)}var i=this.jb();if(i)if(i.ae===e.ae)e.Db()&&(this.Ab=this.Rb=!1);else{var r=this.Hb.pop();this.Ab=r.Ab,this.Rb=r.Rb}return e},t.prototype.$b=function(t){if(!t.Ab)return t.offset;var e=this.stack.length-1,n=this.stack[e];for(n===t&&(e--,n=this.stack[e]);e>=0;){if(n.ae!==t.ae)return t.offset;if(!n.Ab)return n.offset;if(n.ri)return n.offset;t=n,n=this.stack[--e]}throw new Error("No block start offset found!")},t}(),ce=function(){function t(t,e,n,i,r,o,a,s){this.xmldoc=t,this.scope=n,this.context=i,this.Wb=r,this.ir=o,this.Ri=a,this.qb={},this.Kb={},this.flows={},this.Zb=[],this.Qb=null,this.Jb=null,this.tw=null,this.primary=!0,this.nw=[],this.iw=!1,this.rw=!1,this.ew={},this.sw=!0,this.root=t.root,this.ow=e,this.last=this.root,this.cascade=e.Si(i,a,s,t.lang),this.uw=new ue;var u=t.Lp(this.root);this.hw=u,this.aw=new he(i),this.uw.yb(u);var l=this.fw(this.root);switch(this.cascade.Wi(this.root,l,u),this.cw(l,!1),this.root.namespaceURI){case b.a.XHTML:case b.a.FB2:this.sw=!1}this.nw.push(!0),this.Kb={},this.Kb["e"+u]=l,this.hw++,this.lw(-1)}return t.prototype.dw=function(t,e,n){var i=t[n];return i&&i.evaluate(this.context)!==e[n]},t.prototype.pw=function(t,e){for(var n in e){var i=t[n];if(i)this.qb[n]=i,delete t[n];else{var r=e[n];r&&(this.qb[n]=new H.c(r,G.c))}}},t.prototype.cw=function(t,e){var n=this;if(["writing-mode","direction"].forEach(function(i){!t[i]||e&&n.qb[i]||(n.qb[i]=t[i])}),!this.iw){var i=this.dw(t,this.ir.bw,"background-color")?t["background-color"].evaluate(this.context):null,r=this.dw(t,this.ir.bw,"background-image")?t["background-image"].evaluate(this.context):null;(i&&i!==j.t.inherit||r&&r!==j.t.inherit)&&(this.pw(t,this.ir.bw),this.iw=!0)}if(!this.rw)for(var o=0;o<pe.length;o++)if(this.dw(t,this.ir.ww,pe[o])){this.pw(t,this.ir.ww),this.rw=!0;break}if(!e){var a=t["font-size"];if(a){var s=a.evaluate(this.context),u=s.num;switch(s.unit){case"em":case"rem":u*=this.context.ln;break;case"ex":u*=this.context.ln*L.G.ex/L.G.em;break;case"%":u*=this.context.ln/100;break;default:var l=L.G[s.unit];l&&(u*=l)}this.context.un=u}}},t.prototype.mw=function(){for(var t=0;!this.sw&&(t+=5e3,this.gw(t,0)!=Number.POSITIVE_INFINITY););return this.qb},t.prototype.fw=function(t){if(t.style instanceof CSSStyleDeclaration){var e=t.getAttribute("style");if(e)return H.E(this.scope,this.ir,this.xmldoc.url,e)}return{}},t.prototype.Ew=function(){return this.hw},t.prototype.lw=function(t){if(!(t>=this.hw)){var e=this.context,n=this.xmldoc.Lp(this.root);if(t<n){var i=this.ua(this.root,!1);y.a(i);var r=(u=H.s(i,"flow-into"))?u.evaluate(e,"flow-into").toString():"body",o=this.kw(r,i,this.root,n);this.aw.empty()&&this.aw.push(i,n,!0,o)}var a=this.xmldoc._w(t),s=this.xmldoc.xw(a,0,!1);if(!(s>=this.hw))for(;;){if(1!=a.nodeType)s+=a.textContent.length;else{var u,l=a,h=this.ua(l,!1);(u=h["flow-into"])&&(r=u.evaluate(e,"flow-into").toString(),this.kw(r,h,l,s)),s++}if(s>=this.hw)break;var c=a.firstChild;if(null==c)for(;!(c=a.nextSibling);)if((a=a.parentNode)===this.root)return;a=c}}},t.prototype.yw=function(t){this.Qb=t;for(var e=0;e<this.Zb.length;e++)this.Qb.Tw(this.Zb[e],this.flows[this.Zb[e].ae])},t.prototype.Nw=function(t){this.Jb=t;for(var e=0;null!=this.Jb&&(e+=5e3,this.gw(e,0)!=Number.POSITIVE_INFINITY););},t.prototype.ev=function(t){if(t){this.tw=t;for(var e=0;this.tw&&(e+=5e3,this.gw(e,0)!==Number.POSITIVE_INFINITY););this.tw=null}},t.prototype.kw=function(t,e,n,i){var r=0,o=Number.POSITIVE_INFINITY,a=!1,s=!1,u=!1,l=e["flow-options"];if(l){var h=k.d(l.evaluate(this.context,"flow-options"));a=!!h.exclusive,s=!!h.static,u=!!h.last}var c=e["flow-linger"];c&&(o=k.c(c.evaluate(this.context,"flow-linger"),Number.POSITIVE_INFINITY));var p=e["flow-priority"];p&&(r=k.c(p.evaluate(this.context,"flow-priority"),0));var f=this.ew[i]||null,d=this.flows[t];if(!d){var v=this.aw.Xb();d=this.flows[t]=new K.f(t,v)}var g=new K.g(t,n,i,r,o,a,s,u,f);return this.Zb.push(g),this.Jb==t&&(this.Jb=null),this.Qb&&this.Qb.Tw(g,d),g},t.prototype.Sw=function(t,e,n){if(Wt.c(t)){var i=this.flows[n].ce;(0===i.length||i[i.length-1]<e)&&i.push(e)}var r=this.ew[e];this.ew[e]=Wt.d(r,t)},t.prototype.gw=function(t,e){var n=-1;if(t<=this.hw&&(n=this.uw.Nb(t)+e)<this.uw.xb())return this.uw.Sb(n);if(null==this.last)return Number.POSITIVE_INFINITY;for(var i=this.context;;){var r=this.last.firstChild;if(null==r)for(;;){if(1==this.last.nodeType){this.cascade.nr(this.last),this.primary=this.nw.pop();var o=null;if((h=this.aw.pop(this.hw)).Fb){var a=h.Fb.Gb("before");this.Sw(a,h.Fb.Ab?this.aw.$b(h):h.Fb.offset,h.ae),o=h.Fb.Gb("after")}o=Wt.d(o,h.Gb("after")),this.Sw(o,this.hw,h.ae)}if(r=this.last.nextSibling)break;if(this.last=this.last.parentNode,this.last===this.root)return this.last=null,t<this.hw&&(n<0&&(n=this.uw.Nb(t)+e),n<=this.uw.xb())?this.uw.Sb(n):Number.POSITIVE_INFINITY}if(this.last=r,1!=this.last.nodeType)this.hw+=this.last.textContent.length,this.aw.Yb(this.last),this.primary?this.uw.yb(this.hw):this.uw.Tb(this.hw);else{var s=this.last,u=this.fw(s);this.nw.push(this.primary),this.cascade.Wi(s,u,this.hw);var l=s.getAttribute("id")||s.getAttributeNS(b.a.XML,"id");l&&l===this.tw&&(this.tw=null),this.sw||"body"!=s.localName||s.parentNode!=this.root||(this.cw(u,!0),this.sw=!0);var h=void 0,c=u["flow-into"];if(c){var p=c.evaluate(i,"flow-into").toString(),f=this.kw(p,u,s,this.hw);this.primary=!!this.Wb[p],h=this.aw.push(u,this.hw,s===this.root,f)}else h=this.aw.push(u,this.hw,s===this.root);var d=this.aw.$b(h);if(this.Sw(h.breakBefore,d,h.ae),h.Pb){var v=h.Pb.Gb("after");this.Sw(v,h.Pb.Ab?d:h.offset,h.ae)}if(this.primary&&h.zb()===j.t.none&&(this.primary=!1),this.Kb["e"+this.hw]=u,this.hw++,this.primary?this.uw.yb(this.hw):this.uw.Tb(this.hw),t<this.hw&&(n<0&&(n=this.uw.Nb(t)+e),n<=this.uw.xb()))return this.uw.Sb(n)}}},t.prototype.ua=function(t,e){var n=this.xmldoc.Lp(t),i="e"+n;return e&&(n=this.xmldoc.xw(t,0,!0)),this.hw<=n&&this.gw(n,0),this.Kb[i]},t.prototype.ha=function(t,e){},t}(),pe=["column-count","column-width","column-fill"],fe="/*\n * Copyright 2013 Google, Inc.\n * Copyright 2015 Trim-marks Inc.\n * Copyright 2019 Vivliostyle Foundation\n *\n * CSS property validation.\n */\nNUM = POS_NUM | ZERO | NEGATIVE;\nNNEG_NUM = POS_NUM | ZERO;\nINT = POS_INT | ZERO | NEGATIVE;\nNNEG_INT = POS_INT | ZERO;\nPERCENTAGE = POS_PERCENTAGE | ZERO | NEGATIVE;\nSTRICT_PERCENTAGE = POS_PERCENTAGE | ZERO_PERCENTAGE | NEGATIVE;\nNNEG_PERCENTAGE = POS_PERCENTAGE | ZERO;\nLENGTH = POS_LENGTH | ZERO | NEGATIVE;\nNNEG_LENGTH = POS_LENGTH | ZERO | NEGATIVE;\nPLENGTH = LENGTH | PERCENTAGE;\nPPLENGTH = POS_LENGTH | ZERO | POS_PERCENTAGE;\nALENGTH = LENGTH | auto;\nAPLENGTH = PLENGTH | auto;\nPAPLENGTH = PPLENGTH | auto;\nANGLE = POS_ANGLE | ZERO | NEGATIVE;\nLENGTH_OR_NUM = LENGTH | NUM;\nANGLE_OR_NUM = ANGLE | NUM;\nSCOLOR = HASHCOLOR | aliceblue: #F0F8FF | antiquewhite: #FAEBD7 | aqua: #00FFFF | aquamarine: #7FFFD4 | azure: #F0FFFF |\n    beige: #F5F5DC | bisque: #FFE4C4 | black: #000000 | blanchedalmond: #FFEBCD | blue: #0000FF | blueviolet: #8A2BE2 | brown: #A52A2A |\n    burlywood: #DEB887 | cadetblue: #5F9EA0 | chartreuse: #7FFF00 | chocolate: #D2691E | coral: #FF7F50 | cornflowerblue: #6495ED |\n    cornsilk: #FFF8DC | crimson: #DC143C | cyan: #00FFFF | darkblue: #00008B | darkcyan: #008B8B | darkgoldenrod: #B8860B |\n    darkgray: #A9A9A9 | darkgreen: #006400 | darkgrey: #A9A9A9 | darkkhaki: #BDB76B | darkmagenta: #8B008B | darkolivegreen: #556B2F |\n    darkorange: #FF8C00 | darkorchid: #9932CC | darkred: #8B0000 | darksalmon: #E9967A | darkseagreen: #8FBC8F | darkslateblue: #483D8B |\n    darkslategray: #2F4F4F | darkslategrey: #2F4F4F | darkturquoise: #00CED1 | darkviolet: #9400D3 | deeppink: #FF1493 |\n    deepskyblue: #00BFFF | dimgray: #696969 | dimgrey: #696969 | dodgerblue: #1E90FF | firebrick: #B22222 | floralwhite: #FFFAF0 |\n    forestgreen: #228B22 | fuchsia: #FF00FF | gainsboro: #DCDCDC | ghostwhite: #F8F8FF | gold: #FFD700 | goldenrod: #DAA520 |\n    gray: #808080 | green: #008000 | greenyellow: #ADFF2F | grey: #808080 | honeydew: #F0FFF0 | hotpink: #FF69B4 | indianred: #CD5C5C |\n    indigo: #4B0082 | ivory: #FFFFF0 | khaki: #F0E68C | lavender: #E6E6FA | lavenderblush: #FFF0F5 | lawngreen: #7CFC00 |\n    lemonchiffon: #FFFACD | lightblue: #ADD8E6 | lightcoral: #F08080 | lightcyan: #E0FFFF | lightgoldenrodyellow: #FAFAD2 |\n    lightgray: #D3D3D3 | lightgreen: #90EE90 | lightgrey: #D3D3D3 | lightpink: #FFB6C1 | lightsalmon: #FFA07A | lightseagreen: #20B2AA |\n    lightskyblue: #87CEFA | lightslategray: #778899 | lightslategrey: #778899 | lightsteelblue: #B0C4DE | lightyellow: #FFFFE0 |\n    lime: #00FF00 | limegreen: #32CD32 | linen: #FAF0E6 | magenta: #FF00FF | maroon: #800000 | mediumaquamarine: #66CDAA |\n    mediumblue: #0000CD | mediumorchid: #BA55D3 | mediumpurple: #9370DB | mediumseagreen: #3CB371 | mediumslateblue: #7B68EE |\n    mediumspringgreen: #00FA9A | mediumturquoise: #48D1CC | mediumvioletred: #C71585 | midnightblue: #191970 | mintcream: #F5FFFA |\n    mistyrose: #FFE4E1 | moccasin: #FFE4B5 | navajowhite: #FFDEAD | navy: #000080 | oldlace: #FDF5E6 | olive: #808000 |\n    olivedrab: #6B8E23 | orange: #FFA500 | orangered: #FF4500 | orchid: #DA70D6 | palegoldenrod: #EEE8AA | palegreen: #98FB98 |\n    paleturquoise: #AFEEEE | palevioletred: #DB7093 | papayawhip: #FFEFD5 | peachpuff: #FFDAB9 | peru: #CD853F | pink: #FFC0CB |\n    plum: #DDA0DD | powderblue: #B0E0E6 | purple: #800080 | rebeccapurple: #663399 | red: #FF0000 | rosybrown: #BC8F8F | royalblue: #4169E1 |\n    saddlebrown: #8B4513 | salmon: #FA8072 | sandybrown: #F4A460 | seagreen: #2E8B57 | seashell: #FFF5EE | sienna: #A0522D |\n    silver: #C0C0C0 | skyblue: #87CEEB | slateblue: #6A5ACD | slategray: #708090 | slategrey: #708090 | snow: #FFFAFA |\n    springgreen: #00FF7F | steelblue: #4682B4 | tan: #D2B48C | teal: #008080 | thistle: #D8BFD8 | tomato: #FF6347 |\n    turquoise: #40E0D0 | violet: #EE82EE | wheat: #F5DEB3 | white: #FFFFFF | whitesmoke: #F5F5F5 | yellow: #FFFF00 |\n    yellowgreen: #9ACD32 | transparent | currentcolor;\nRGBCOLOR = rgb(INT{3}) | rgb(STRICT_PERCENTAGE{3});\nRGBACOLOR = rgba(NUM{4}) | rgba(STRICT_PERCENTAGE{3} NUM);\nHSLCOLOR = hsl(NUM PERCENTAGE{2});\nHSLACOLOR = hsl(NUM PERCENTAGE{2} NUM);\nCOLOR = SCOLOR | RGBCOLOR | RGBACOLOR | HSLCOLOR | HSLACOLOR;\nBG_POSITION_TERM = PLENGTH | left | center | right | top | bottom;\nSIDE_OR_CORNER =  [left | right] || [top | bottom];\nCOLOR_STOP = SPACE(COLOR [PERCENTAGE | LENGTH]?);\nLINEAR_GRADIENT = linear-gradient([ANGLE | SPACE(to SIDE_OR_CORNER)]? COLOR_STOP+) |\n                  repeating-linear-gradient([ANGLE | SPACE(to SIDE_OR_CORNER)]? COLOR_STOP+) |;\nGRADIENT_EXTENT = closest-corner | closest-side | farthest-corner | farthest-side;\nGRADIENT_POSITION = at BG_POSITION_TERM{1,4};\nGRADIENT_SHAPE = SPACE(circle LENGTH? GRADIENT_POSITION?) | SPACE(ellipse PLENGTH{2}? GRADIENT_POSITION?)| SPACE([circle | ellipse] GRADIENT_EXTENT? GRADIENT_POSITION?);\nRADIAL_GRADIENT = radial-gradient([GRADIENT_SHAPE | SPACE(GRADIENT_POSITION)]? COLOR_STOP+) |\n                  repeating-radial-gradient([GRADIENT_SHAPE | SPACE(GRADIENT_POSITION)]? COLOR_STOP+);\nURI_OR_NONE = URI | none;\nIMAGE =  URI | LINEAR_GRADIENT | RADIAL_GRADIENT | none;\nazimuth = ANGLE | [[ left-side | far-left | left | center-left | center | center-right | right | far-right | right-side ] || behind ] | leftwards | rightwards;\nbackground-attachment = COMMA( [scroll | fixed | local]+ );\nbackground-color = COLOR;\nbackground-image = COMMA( IMAGE+ );\nbackground-position = COMMA( SPACE(BG_POSITION_TERM{1,4})+ ); /* relaxed */\nbackground-repeat = COMMA( [repeat | repeat-x | repeat-y | no-repeat]+ );\nborder-collapse = collapse | separate;\nBORDER_SIDE_COLOR = COLOR;\nBORDER_SIDE_STYLE = none | hidden | dotted | dashed | solid | double | groove | ridge | inset | outset;\nBORDER_SIDE_WIDTH = thin: 1px | medium: 3px | thick: 5px | NNEG_LENGTH;\nborder-spacing = LENGTH LENGTH?;\nborder-top-color = BORDER_SIDE_COLOR;\nborder-right-color = BORDER_SIDE_COLOR;\nborder-bottom-color = BORDER_SIDE_COLOR;\nborder-left-color = BORDER_SIDE_COLOR;\nborder-top-style = BORDER_SIDE_STYLE;\nborder-right-style = BORDER_SIDE_STYLE;\nborder-bottom-style = BORDER_SIDE_STYLE;\nborder-left-style = BORDER_SIDE_STYLE;\nborder-top-width = BORDER_SIDE_WIDTH;\nborder-right-width = BORDER_SIDE_WIDTH;\nborder-bottom-width = BORDER_SIDE_WIDTH;\nborder-left-width = BORDER_SIDE_WIDTH;\nBORDER_RADIUS = PLENGTH{1,2};\nborder-top-left-radius = BORDER_RADIUS;\nborder-top-right-radius = BORDER_RADIUS;\nborder-bottom-right-radius = BORDER_RADIUS;\nborder-bottom-left-radius = BORDER_RADIUS;\nborder-image-source = IMAGE;\nborder-image-slice = [NUM | PERCENTAGE]{1,4} || fill; /* relaxed */\nborder-image-width = [NUM | PLENGTH | auto]{1,4};\nborder-image-outset = [NUM | LENGTH]{1,4};\nborder-image-repeat = [ stretch | repeat | round | space ]{1,2};\nbottom = APLENGTH;\ncaption-side = top | bottom;\nclear = none | left | right | top | bottom | both | all | same;\nclip = rect(ALENGTH{4}) | rect(SPACE(ALENGTH{4})) | auto;\ncolor = COLOR;\nLIST_STYLE_TYPE = disc | circle | square | decimal | decimal-leading-zero | lower-roman |\n    upper-roman | lower-greek | lower-latin | upper-latin | armenian | georgian | lower-alpha |\n    upper-alpha | russian | upper-russian | lower-russian | cjk-ideographic | trad-chinese-informal |\n    hebrew | none;\nTYPE_OR_UNIT_IN_ATTR = string | color | url | integer | number | length | angle | time | frequency;\nATTR = attr(SPACE(IDENT TYPE_OR_UNIT_IN_ATTR?) [ STRING | IDENT | COLOR | INT | NUM | PLENGTH | ANGLE | POS_TIME | FREQUENCY]?);\nCONTENT = normal | none |\n    [ STRING | URI | counter(IDENT LIST_STYLE_TYPE?) |\n    counters(IDENT STRING LIST_STYLE_TYPE?) | ATTR |\n    target-counter([ STRING | URI ] IDENT LIST_STYLE_TYPE?) |\n    target-counter(ATTR IDENT LIST_STYLE_TYPE?) |\n    target-counters([ STRING | URI ] IDENT STRING LIST_STYLE_TYPE?) |\n    target-counters(ATTR IDENT STRING LIST_STYLE_TYPE?) |\n    open-quote | close-quote | no-open-quote | no-close-quote ]+;\ncontent = CONTENT;\nCOUNTER = [ IDENT INT? ]+ | none;\ncounter-increment = COUNTER;\ncounter-reset = COUNTER;\ncounter-set = COUNTER;\ncue-after = URI_OR_NONE;\ncue-before = URI_OR_NONE;\ncursor = COMMA(URI* [ auto | crosshair | default | pointer | move | e-resize | ne-resize | nw-resize |\n    n-resize | se-resize | sw-resize | s-resize | w-resize | text | wait | help | progress ]);\ndirection = ltr | rtl;\ndisplay = inline | block | list-item | inline-block | table | inline-table | table-row-group |\n    table-header-group | table-footer-group | table-row | table-column-group | table-column |\n    table-cell | table-caption | none | oeb-page-head | oeb-page-foot | flex | inline-flex |\n    ruby | ruby-base | ruby-text | ruby-base-container | ruby-text-container | run-in | compact | marker;\nelevation = ANGLE | below | level | above | higher | lower;\nempty-cells = show | hide;\nFAMILY = SPACE(IDENT+) | STRING;\nFAMILY_LIST = COMMA( FAMILY+ );\nfont-family = FAMILY_LIST;\nfont-size = xx-small | x-small | small | medium | large | x-large | xx-large | larger | smaller | PPLENGTH | POS_NUM;\nfont-style = normal | italic | oblique;\nfont-variant = normal | small-caps;\nfont-weight = normal | bold | bolder | lighter | 100 | 200 | 300 | 400 | 500 | 600 | 700 | 800 | 900;\nheight = PAPLENGTH | POS_NUM ;\nleft = APLENGTH;\nletter-spacing = normal | LENGTH_OR_NUM;\nline-height = normal | POS_NUM | PPLENGTH;\nlist-style-image = IMAGE;\nlist-style-position = inside | outside;\nlist-style-type = LIST_STYLE_TYPE;\nmargin-right = APLENGTH;\nmargin-left = APLENGTH;\nmargin-top = APLENGTH;\nmargin-bottom = APLENGTH;\nNPLENGTH = none | PLENGTH;\nmax-height = NPLENGTH;\nmax-width = NPLENGTH;\nmin-height = auto | PLENGTH;\nmin-width = auto | PLENGTH;\norphans = POS_INT;\noutline-offset = LENGTH;\noutline-color = COLOR | invert;\noutline-style = BORDER_SIDE_STYLE;\noutline-width = BORDER_SIDE_WIDTH;\noverflow = visible | hidden | scroll | auto;\npadding-right = PPLENGTH;\npadding-left = PPLENGTH;\npadding-top = PPLENGTH;\npadding-bottom = PPLENGTH;\nPAGE_BREAK = auto | always | avoid | left | right | recto | verso;\npage-break-after = PAGE_BREAK;\npage-break-before = PAGE_BREAK;\npage-break-inside = avoid | auto;\nPAUSE = POS_TIME | ZERO | POS_PERCENTAGE;\npause-after = PAUSE;\npause-before = PAUSE;\npitch-range = NUM;\npitch = FREQUENCY | x-low | low | medium | high | x-high;\nplay-during = [URI [ mix || repeat ]?] | auto | none;\nposition = static | relative | absolute | fixed;\nquotes = [STRING STRING]+ | none;\nrichness = NUM;\nright = APLENGTH;\nspeak-header = once | always;\nspeak-numeral = digits | continuous;\nspeak-punctuation = code | none;\nspeech-rate = NUM | x-slow | slow | medium | fast | x-fast | faster | slower;\nstress = NUM;\ntable-layout = auto | fixed;\ntext-align = left | right | center | justify | start | end;\ntext-decoration = none | [ underline || overline || line-through || blink ];\ntext-indent = PLENGTH;\ntext-transform = capitalize | uppercase | lowercase | none;\ntop = APLENGTH;\nvertical-align = baseline | sub | super | top | text-top | middle | bottom | text-bottom | PLENGTH;\nvisibility = visible | hidden | collapse;\nvoice-family = FAMILY_LIST;\nvolume = NUM | PERCENTAGE | silent | x-soft | soft | medium | loud | x-loud;\nwhite-space = normal | pre | nowrap | pre-wrap | pre-line;\nwidows = POS_INT;\nwidth = PAPLENGTH | POS_NUM ;\nword-spacing = normal | LENGTH_OR_NUM;\nz-index = auto | INT;\n\n[epub,moz,ms,webkit]hyphens = auto | manual | none;\n[webkit]hyphenate-character = auto | STRING;\n\n/* css-logical */\nmargin-block-start = APLENGTH;\nmargin-block-end = APLENGTH;\nmargin-inline-start = APLENGTH;\nmargin-inline-end = APLENGTH;\npadding-block-start = APLENGTH;\npadding-block-end = APLENGTH;\npadding-inline-start = APLENGTH;\npadding-inline-end = APLENGTH;\nborder-block-start-color = BORDER_SIDE_COLOR;\nborder-block-end-color = BORDER_SIDE_COLOR;\nborder-inline-start-color = BORDER_SIDE_COLOR;\nborder-inline-end-color = BORDER_SIDE_COLOR;\nborder-block-start-style = BORDER_SIDE_STYLE;\nborder-block-end-style = BORDER_SIDE_STYLE;\nborder-inline-start-style = BORDER_SIDE_STYLE;\nborder-inline-end-style = BORDER_SIDE_STYLE;\nborder-block-start-width = BORDER_SIDE_WIDTH;\nborder-block-end-width = BORDER_SIDE_WIDTH;\nborder-inline-start-width = BORDER_SIDE_WIDTH;\nborder-inline-end-width = BORDER_SIDE_WIDTH;\nblock-start = APLENGTH;\nblock-end = APLENGTH;\ninline-start = APLENGTH;\ninline-end = APLENGTH;\nblock-size = PAPLENGTH | POS_NUM;\ninline-size = PAPLENGTH | POS_NUM;\nmax-block-size = NPLENGTH;\nmax-inline-size = NPLENGTH;\nmin-block-size = auto | PLENGTH;\nmin-inline-size = auto | PLENGTH;\n\nSHAPE = auto | rectangle( PLENGTH{4} ) |  ellipse( PLENGTH{4} ) |  circle( PLENGTH{3} ) |\n    polygon( SPACE(PLENGTH+)+ );\n[epubx]shape-inside = SHAPE;\n[epubx,webkit]shape-outside = SHAPE;\n[epubx,ms]wrap-flow = auto | both | start | end | maximum | clear | around /* epub al */;\n\nTRANSFORM_FUNCTION = matrix(NUM{6}) | translate(PLENGTH{1,2}) | translateX(PLENGTH) | translateY(PLENGTH) |\n scale(NUM{1,2}) | scaleX(NUM) | scaleY(NUM) | rotate(ANGLE) | skewX(ANGLE) | skewY(ANGLE);\n[epub,ms]transform = none | TRANSFORM_FUNCTION+;\n[epub,ms]transform-origin = [[[ top | bottom | left | right] PLENGTH?] | center | PLENGTH]{1,2}; /* relaxed */\n\nBOX = border-box | padding-box | content-box;\nSHADOW = SPACE(inset || LENGTH{2,4} || COLOR); /* relaxed */\n[webkit]background-size = COMMA( SPACE( [PLENGTH | auto ]{1,2} | cover | contain)+ );\n[webkit]background-origin = COMMA( BOX+ );\n[webkit]background-clip = COMMA( BOX+ );\n[webkit]box-shadow = none | COMMA( SHADOW+ );\ntext-shadow = none |  COMMA( SHADOW+ );\n[webkit]box-decoration-break = slice | clone;\nFILTER_FUNCTION = blur(LENGTH) | brightness(NUM | PERCENTAGE) | contrast(NUM | PERCENTAGE) | drop-shadow(SPACE(LENGTH{2,3} COLOR?))\n                | grayscale(NUM | PERCENTAGE) | hue-rotate(ANGLE) | invert(NUM | PERCENTAGE) | opacity(NUM | PERCENTAGE)\n                | saturate(NUM | PERCENTAGE) | sepia(NUM | PERCENTAGE);\nFILTER_FUNCTION_LIST = FILTER_FUNCTION+;\n[webkit]filter = none | FILTER_FUNCTION_LIST;\n\nopacity = NUM;\n\n[moz,webkit]column-width = LENGTH | auto;\n[moz,webkit]column-count = INT | auto;\n[moz,webkit]column-gap = LENGTH | normal;\n[moz,webkit]column-rule-color = COLOR;\n[moz,webkit]column-rule-style = BORDER_SIDE_STYLE;\n[moz,webkit]column-rule-width = BORDER_SIDE_WIDTH;\nBREAK = auto | avoid | avoid-page | page | left | right | recto | verso | avoid-column | column | avoid-region | region;\nbreak-before = BREAK;\nbreak-after = BREAK;\nbreak-inside = auto | avoid | avoid-page | avoid-column | avoid-region;\n[webkit]column-span = none | auto | all;\n[moz]column-fill = auto | balance | balance-all;\n\nsrc = COMMA([SPACE(URI format(STRING+)?) | local(FAMILY)]+); /* for font-face */\n\n[epubx,webkit]flow-from = IDENT;\n[epubx,webkit]flow-into = IDENT;\n[epubx]flow-linger = INT | none;\n[epubx]flow-priority = INT;\n[epubx]flow-options = none | [ exclusive || last || static ];\n[epubx]page = INT | auto;\n[epubx]min-page-width = LENGTH;\n[epubx]min-page-height = LENGTH;\n[epubx]required = true | false;\n[epubx]enabled = true | false;\n[epubx]conflicting-partitions = COMMA(IDENT+);\n[epubx]required-partitions = COMMA(IDENT+);\n[epubx]snap-height = LENGTH | none;\n[epubx]snap-width = LENGTH | none;\n[epubx]flow-consume = all | some;\n[epubx]utilization = NUM;\n[epubx]text-zoom = font-size | scale;\n\n[adapt]template = URI_OR_NONE;\n[adapt]behavior = IDENT;\n\n/* CSS Fonts */\nfont-size-adjust = none | NNEG_NUM;\n[webkit]font-kerning = auto | normal | none;\nfont-variant-east-asian = normal | [[ jis78 | jis83 | jis90 | jis04 | simplified | traditional ] || [ full-width | proportional-width ] || ruby];\nfont-feature-settings = COMMA( SPACE( STRING [ on | off | INT ]? )+ );\nfont-stretch = normal | wider | narrower | ultra-condensed | extra-condensed | condensed | semi-condensed | semi-expanded | expanded | extra-expanded | ultra-expanded;\n\n/* CSS Images */\nimage-resolution = RESOLUTION;\nobject-fit = fill | contain | cover | none | scale-down;\nobject-position = COMMA( SPACE(BG_POSITION_TERM{1,4})+ ); /* relaxed */\n\n/* CSS Paged Media */\nPAGE_SIZE = a5 | a4 | a3 | b5 | b4 | jis-b5 | jis-b4 | letter | legal | ledger;\nbleed = auto | LENGTH;\nmarks = none | [ crop || cross ];\nsize = POS_LENGTH{1,2} | auto | [ PAGE_SIZE || [ portrait | landscape ] ];\n\n/* CSS Page Floats */\nfloat-reference = inline | column | region | page;\nfloat = block-start | block-end | inline-start | inline-end | snap-block | snap-inline | left | right | top | bottom | none | footnote;\nfloat-min-wrap-block = PPLENGTH;\n\n/* CSS Ruby */\nruby-align = start | center | space-between | space-around;\nruby-position = over | under | inter-character;\n\n/* CSS Size Adjust */\n[moz,ms]text-size-adjust = auto | none | POS_PERCENTAGE;\n\n/* CSS Text */\n[ms,webkit]line-break = auto | loose | normal | strict;\noverflow-wrap = normal | break-word;\n[moz]tab-size = NNEG_INT | NNEG_LENGTH;\n[moz,ms]text-align-last = auto | start | end | left | right | center | justify;\n[ms]text-justify = auto | none | inter-word | inter-character | inter-ideograph /* specified in UA stylesheet for IE */;\n[ms]word-break = normal | keep-all | break-all | break-word;\n[ms]word-wrap = normal | break-word;\n\n/* CSS Text Decoration */\n[webkit]text-decoration-color = COLOR;\n[webkit]text-decoration-line = none | [ underline || overline || line-through || blink ];\n[webkit]text-decoration-skip = none | [ objects || spaces || ink || edges || box-decoration ];\n[webkit]text-decoration-style = solid | double | dotted | dashed | wavy;\n[epub,webkit]text-emphasis-color = COLOR;\n[webkit]text-emphasis-position = [ over | under ] [ right | left ];\n[epub,webkit]text-emphasis-style = none | [[ filled | open ] || [ dot | circle | double-circle | triangle | sesame ]] | STRING;\n[ms,webkit]text-underline-position = auto | [ under || [ left | right ]];\n\n/* CSS Transforms */\n[ms,webkit]backface-visibility = visible | hidden;\n\n/* CSS UI */\nbox-sizing = content-box | padding-box | border-box;\n[ms]text-overflow = [clip | ellipsis | STRING]{1,2};\n\n/* CSS Writing Modes */\n[webkit]text-combine = none | horizontal;\n[epub,ms]text-combine-horizontal = none | all | [ digits POS_INT? ]; /* relaxed */\ntext-combine-upright = none | all | [ digits POS_INT? ]; /* relaxed */\n[epub,webkit]text-orientation = mixed | upright | sideways-right | sideways-left | sideways | use-glyph-orientation /* the following values are kept for backward-compatibility */ | vertical-right | rotate-right | rotate-left | rotate-normal | auto;\nunicode-bidi = normal | embed | isolate | bidi-override | isolate-override | plaintext;\n[epub,webkit]writing-mode = horizontal-tb | vertical-rl | lr-tb | rl-tb | tb-rl | lr | rl | tb;\n\n/* CSS Flex box */\nFLEX_BASIS = content | PAPLENGTH;\nflex-direction = row | row-reverse | column | column-reverse;\nflex-wrap = nowrap | wrap | wrap-reverse;\norder = INT;\nflex-grow = NNEG_NUM;\nflex-shrink = NNEG_NUM;\nflex-basis = FLEX_BASIS;\nflex = none | [ [ NNEG_NUM NNEG_NUM? ] || FLEX_BASIS ];\njustify-content = flex-start | flex-end | center | space-between | space-around;\nalign-items = flex-start | flex-end | center | baseline | stretch;\nalign-self = auto | flex-start | flex-end | center | baseline | stretch;\nalign-content = flex-start | flex-end | center | space-between | space-around | stretch;\n\n/* Pointer Events */\n[ms]touch-action = auto | none | [ pan-x || pan-y ] | manipulation;\n\n/* SVG 2 */\nOPACITY_VALUE = NUM | PERCENTAGE;\nDASH_ARRAY = COMMA( SPACE( [ LENGTH | PERCENTAGE | NUM ]+ )+ );\nPAINT = none | child | child(INT) | COLOR | SPACE( URI [none | COLOR]? ) | context-fill | context-stroke;\ncolor-interpolation = auto | sRGB | linearRGB;\ncolor-rendering = auto | optimizeSpeed | optimizeQuality;\nfill = PAINT;\nfill-opacity = OPACITY_VALUE;\nfill-rule = nonzero | evenodd;\nglyph-orientation-vertical = auto | NUM | ANGLE;\nimage-rendering = auto | optimizeSpeed | optimizeQuality | crisp-edges | pixelated;\nmarker-start = none | URI;\nmarker-mid = none | URI;\nmarker-end = none | URI;\npointer-events = bounding-box | visiblePainted | visibleFill | visibleStroke | visible | painted | fill | stroke | all | none;\npaint-order = normal | [ fill || stroke || markers ];\nshape-rendering = auto | optimizeSpeed | crispEdges | geometricPrecision;\nstop-color = COLOR;\nstop-opacity = OPACITY_VALUE;\nstroke = PAINT;\nstroke-dasharray = none | DASH_ARRAY;\nstroke-dashoffset = PERCENTAGE | LENGTH_OR_NUM;\nstroke-linecap = butt | round | square;\nstroke-linejoin = miter | round | bevel;\nstroke-miterlimit = NUM;\nstroke-opacity = OPACITY_VALUE;\nstroke-width = PERCENTAGE | LENGTH_OR_NUM;\ntext-anchor = start | middle | end;\ntext-rendering = auto | optimizeSpeed | optimizeLegibility | geometricPrecision;\nvector-effect = none | SPACE( [ non-scaling-stroke | non-scaling-size | non-rotation | fixed-position ]+ [ viewport | screen ]? );\n\n/* SVG 1.1 */\nalignment-baseline = auto | baseline | before-edge | text-before-edge | middle | central | after-edge | text-after-edge | ideographic | alphabetic | hanging | mathematical;\nbaseline-shift = baseline | sub | super | PERCENTAGE | LENGTH_OR_NUM;\ndominant-baseline = auto | use-script | no-change | reset-size | ideographic | alphabetic | hanging | mathematical | central | middle | text-after-edge | text-before-edge;\nmask = none | URI;\n\n/* css-masking-1 */\nSHAPE_RADIUS = PLENGTH | closest-side | farthest-side;\nFILL_RULE = nonzero | evenodd;\nSHAPE_BOX = BOX | margin-box;\nGEOMETRY_BOX = SHAPE_BOX | fill-box | stroke-box | view-box;\nBASIC_SHAPE =\n    inset( SPACE( PLENGTH{1,4} [ round PLENGTH{1,4} [ SLASH PLENGTH{1,4} ]? ]? ) )\n  | circle(  SPACE( [SHAPE_RADIUS]?    [at BG_POSITION_TERM{1,4}]? ) )\n  | ellipse( SPACE( SHAPE_RADIUS{2}? [at BG_POSITION_TERM{1,4}]? ) )\n  | polygon( FILL_RULE? COMMA( SPACE( PLENGTH{2} )+ )+ );\n[webkit]clip-path = none | URI | [ BASIC_SHAPE || GEOMETRY_BOX ];\nclip-rule = nonzero | evenodd;\n\n/* filters */\nflood-color = COLOR;\nflood-opacity = OPACITY_VALUE;\nlighting-color = COLOR;\n\n/* compositing-1 */\nBLEND_MODE = normal | multiply | screen | overlay | darken | lighten | color-dodge | color-burn | hard-light | soft-light | difference | exclusion | hue | saturation | color | luminosity;\nmix-blend-mode = BLEND_MODE;\nisolation = auto | isolate;\nbackground-blend-mode = COMMA( BLEND_MODE+ );\n\n/* CSS GCPM */\nfootnote-policy = auto | line;\n\n[viv]repeat-on-break = auto | none | header | footer;\n\nDEFAULTS\n\nbackground-attachment: scroll;\nbackground-color: transparent;\nbackground-image: none;\nbackground-repeat: repeat;\nbackground-position: 0% 0%;\nbackground-clip: border-box;\nbackground-origin: padding-box;\nbackground-size: auto;\nborder-top-color: currentColor;\nborder-right-color: currentColor;\nborder-bottom-color: currentColor;\nborder-left-color: currentColor;\nborder-top-style: none;\nborder-right-style: none;\nborder-bottom-style: none;\nborder-left-style: none;\nborder-top-width: 3px;\nborder-right-width: 3px;\nborder-bottom-width: 3px;\nborder-left-width: 3px;\nborder-top-left-radius: 0;\nborder-top-right-radius: 0;\nborder-bottom-right-radius: 0;\nborder-bottom-left-radius: 0;\nborder-image-source: none;\nborder-image-slice: 100%;\nborder-image-width: 1;\nborder-image-outset: 0;\nborder-image-repeat: stretch;\ncolumn-count: auto;\ncolumn-gap: normal;\ncolumn-width: auto;\ncolumn-rule-color: currentColor;\ncolumn-rule-style: none;\ncolumn-rule-width: 3px;\ncolumn-fill: balance;\noutline-color: currentColor;\noutline-style: none;\noutline-width: 3px;\nflex-direction: row;\nflex-wrap: nowrap;\nfont-family: serif;\nfont-style: normal;\nfont-size: medium;\nfont-variant: normal;\nfont-weight: normal;\nfont-stretch: normal;\nline-height: normal;\nlist-style-image: none;\nlist-style-position: outside;\nlist-style-type: disc;\nmargin-bottom: auto;\nmargin-left: auto;\nmargin-right: auto;\nmargin-top: auto;\npadding-bottom: auto;\npadding-left: auto;\npadding-right: auto;\npadding-top: auto;\ntext-emphasis-color: currentColor;\ntext-emphasis-style: none;\nmarker-start: none;\nmarker-mid: none;\nmarker-end: none;\n\n\nSHORTHANDS\n\nbackground = COMMA background-image [background-position [ / background-size ]] background-repeat\n     background-attachment [background-origin background-clip] background-color; /* background-color is a special case, see the code */\nborder-top = border-top-width border-top-style border-top-color;\nborder-right = border-right-width border-right-style border-right-color;\nborder-bottom = border-bottom-width border-bottom-style border-bottom-color;\nborder-left = border-left-width border-left-style border-left-color;\nborder-width = INSETS border-top-width border-right-width border-bottom-width border-left-width;\nborder-style = INSETS border-top-style border-right-style border-bottom-style border-left-style;\nborder-color = INSETS border-top-color border-right-color border-bottom-color border-left-color;\nborder = border-width border-style border-color;\nborder-image = border-image-source border-image-slice [ / border-image-width [ / border-image-outset ] ]\n     border-image-repeat;\nborder-radius = INSETS_SLASH border-top-left-radius border-top-right-radius\n     border-bottom-right-radius border-bottom-left-radius;\n[moz,webkit]columns = column-width column-count;\n[moz,webkit]column-rule = column-rule-width column-rule-style column-rule-color;\nflex-flow = flex-direction flex-wrap;\noeb-column-number = column-count;\noutline = outline-width outline-style outline-color;\nlist-style = list-style-type list-style-position list-style-image;\nmargin = INSETS margin-top margin-right margin-bottom margin-left;\npadding = INSETS padding-top padding-right padding-bottom padding-left;\npause = INSETS pause-before pause-after;\nfont = FONT font-style font-variant font-weight font-stretch /* font-size line-height font-family are special-cased */;\n[epub,webkit]text-emphasis = text-emphasis-style text-emphasis-color;\nmarker = INSETS marker-start marker-mid marker-end;\n\n/* css-logical */\nmargin-block = INSETS margin-block-start margin-block-end;\nmargin-inline = INSETS margin-inline-start margin-inline-end;\npadding-block = INSETS padding-block-start padding-block-end;\npadding-inline = INSETS padding-inline-start padding-inline-end;\nborder-block-width = INSETS border-block-start-width border-block-end-width;\nborder-block-style = INSETS border-block-start-style border-block-end-style;\nborder-block-color = INSETS border-block-start-color border-block-end-color;\nborder-inline-width = INSETS border-inline-start-width border-inline-end-width;\nborder-inline-style = INSETS border-inline-start-style border-inline-end-style;\nborder-inline-color = INSETS border-inline-start-color border-inline-end-color;\nborder-block = border-block-width border-block-style border-block-color;\nborder-inline = border-inline-width border-inline-style border-inline-color;\nborder-block-start = border-block-start-width border-block-start-style border-block-start-color;\nborder-block-end = border-block-end-width border-block-end-style border-block-end-color;\nborder-inline-start = border-inline-start-width border-inline-start-style border-inline-start-color;\nborder-inline-end = border-inline-end-width border-inline-end-style border-inline-end-color;\ninset-block-start = block-start;\ninset-block-end = block-end;\ninset-inline-start = inline-start;\ninset-inline-end = inline-end;\ninset-block = INSETS block-start block-end;\ninset-inline = INSETS inline-start inline-end;\n\n/* old names  */\n[adapt,webkit]margin-before = margin-block-start;\n[adapt,webkit]margin-after = margin-block-end;\n[adapt,webkit]margin-start = margin-inline-start;\n[adapt,webkit]margin-end = margin-inline-end;\n[adapt,webkit]padding-before = padding-block-start;\n[adapt,webkit]padding-after = padding-block-end;\n[adapt,webkit]padding-start = padding-inline-start;\n[adapt,webkit]padding-end = padding-inline-end;\n[adapt,webkit]border-before-color = border-block-start-color;\n[adapt,webkit]border-after-color = border-block-end-color;\n[adapt,webkit]border-start-color = border-inline-start-color;\n[adapt,webkit]border-end-color = border-inline-end-color;\n[adapt,webkit]border-before-style = border-block-start-style;\n[adapt,webkit]border-after-style = border-block-end-style;\n[adapt,webkit]border-start-style = border-inline-start-style;\n[adapt,webkit]border-end-style = border-inline-end-style;\n[adapt,webkit]border-before-width = border-block-start-width;\n[adapt,webkit]border-after-width = border-block-end-width;\n[adapt,webkit]border-start-width = border-inline-start-width;\n[adapt,webkit]border-end-width = border-inline-end-width;\n[adapt,webkit]before = block-start;\n[adapt,webkit]after = block-end;\n[adapt,webkit]start = inline-start;\n[adapt,webkit]end = inline-end;\n",de=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ve=function(){function t(t){this.validator=t,this.success=null,this.failure=null,this.code=0}return t.prototype.Aw=function(){return 0!=this.code},t.prototype.Rw=function(){this.code=-1},t.prototype.Cw=function(){return-1==this.code},t.prototype.Ow=function(){this.code=-2},t.prototype.Iw=function(){return-2==this.code},t.prototype.Lw=function(t){this.code=2*t+1},t.prototype.Pw=function(){return this.code>0&&this.code%2!=0},t.prototype.Fw=function(t){this.code=2*t+2},t.prototype.Dw=function(){return this.code>0&&this.code%2==0},t.prototype.Mw=function(){return Math.floor((this.code-1)/2)},t}(),ge=function(t,e){this.where=t,this.success=e,this.what=-1};!function(t){t[t.FOLLOW=1]="FOLLOW",t[t.OPTIONAL=2]="OPTIONAL",t[t.REPEATED=3]="REPEATED",t[t.ALTERNATE=4]="ALTERNATE"}(re||(re={}));var me=function(){function t(){this.nodes=[],this.connections=[],this.match=[],this.nomatch=[],this.error=[],this.Uw=!0}return t.prototype.connect=function(t,e){for(var n=0;n<t.length;n++)this.connections[t[n]].what=e;t.splice(0,t.length)},t.prototype.clone=function(){for(var e,n,i,r=new t,o=0;o<this.nodes.length;o++){var a=this.nodes[o],s=new ve(a.validator);s.code=a.code,r.nodes.push(s)}for(o=0;o<this.connections.length;o++){var u=this.connections[o],l=new ge(u.where,u.success);l.what=u.what,r.connections.push(l)}return(e=r.match).push.apply(e,this.match),(n=r.nomatch).push.apply(n,this.nomatch),(i=r.error).push.apply(i,this.error),r},t.prototype.Gw=function(t,e,n){var i=this.nodes.length,r=new ve(we);n>=0?e?r.Lw(n):r.Fw(n):e?r.Rw():r.Ow(),this.nodes.push(r),this.connect(t,i);var o=new ge(i,!0),a=new ge(i,!1);t.push(this.connections.length),this.connections.push(a),t.push(this.connections.length),this.connections.push(o)},t.prototype.Bw=function(){for(var t=[this.match,this.nomatch,this.error],e=0;e<t.length;e++)this.Gw(t[e],!1,-1)},t.prototype.zw=function(){if(this.nodes.length)throw new Error("invalid call");this.Gw(this.match,!0,-1)},t.prototype.Hw=function(t){this.Gw(this.match,!1,t)},t.prototype.jw=function(t){if(this.nodes.length)throw new Error("invalid call");var e=new ve(we);e.Lw(t),this.nodes.push(e);var n=new ge(0,!0),i=new ge(0,!1);this.nomatch.push(this.connections.length),this.connections.push(i),this.match.push(this.connections.length),this.connections.push(n)},t.prototype.Xw=function(t){var e=this.nodes.length;this.nodes.push(new ve(t));var n=new ge(e,!0),i=new ge(e,!1);this.connect(this.match,e),this.Uw?(this.nomatch.push(this.connections.length),this.Uw=!1):this.error.push(this.connections.length),this.connections.push(i),this.match.push(this.connections.length),this.connections.push(n)},t.prototype.Vw=function(){return 1==this.nodes.length&&!this.nodes[0].Aw()},t.prototype.Yw=function(){return this.Vw()&&this.nodes[0].validator instanceof be},t.prototype.$w=function(t,e){if(0!=t.nodes.length){var n=this.nodes.length;if(e==re.ALTERNATE&&1==n&&t.Yw()&&this.Yw())this.nodes[0].validator=this.nodes[0].validator.combine(t.nodes[0].validator);else{for(var i=0;i<t.nodes.length;i++)this.nodes.push(t.nodes[i]);e==re.ALTERNATE?(this.Uw=!0,this.connect(this.nomatch,n)):this.connect(this.match,n);var r=this.connections.length;for(i=0;i<t.connections.length;i++){var o=t.connections[i];o.where+=n,o.what>=0&&(o.what+=n),this.connections.push(o)}for(i=0;i<t.match.length;i++)this.match.push(t.match[i]+r);if(e==re.REPEATED&&this.connect(this.match,n),e==re.OPTIONAL||e==re.REPEATED)for(i=0;i<t.nomatch.length;i++)this.match.push(t.nomatch[i]+r);else if(this.Uw){for(i=0;i<t.nomatch.length;i++)this.nomatch.push(t.nomatch[i]+r);this.Uw=t.Uw}else for(i=0;i<t.nomatch.length;i++)this.error.push(t.nomatch[i]+r);for(i=0;i<t.error.length;i++)this.error.push(t.error[i]+r);t.nodes=null,t.connections=null}}},t.prototype.finish=function(t,e){var n=this.nodes.length;this.nodes.push(t),this.nodes.push(e),this.connect(this.match,n),this.connect(this.nomatch,n+1),this.connect(this.error,n+1);for(var i=0,r=this.connections;i<r.length;i++){var o=r[i];o.success?this.nodes[o.where].success=this.nodes[o.what]:this.nodes[o.where].failure=this.nodes[o.what]}for(var a=0;a<n;a++)if(null==this.nodes[a].failure||null==this.nodes[a].success)throw new Error("Invalid validator state");return this.nodes[0]},t}(),ye=function(t){function e(){return t.call(this)||this}return de(e,t),e.prototype.Ww=function(t,e){var n=t[e].visit(this);return n?[n]:null},e}(j.m),be=function(t){function e(e,n,i){var r=t.call(this)||this;return r.allowed=e,r.idents=n,r.units=i,r}return de(e,t),e.prototype.T=function(t){return 1&this.allowed?t:null},e.prototype.S=function(t){return 2048&this.allowed?t:null},e.prototype.R=function(t){return 2&this.allowed?t:null},e.prototype.U=function(t){return this.idents[t.name.toLowerCase()]||(4&this.allowed?t:null)},e.prototype.X=function(t){return 0!=t.num||512&this.allowed?t.num<0&&!(256&this.allowed)?null:this.units[t.unit]?t:null:"%"==t.unit&&1024&this.allowed?t:null},e.prototype.V=function(t){return 0==t.num?512&this.allowed?t:null:t.num<=0&&!(256&this.allowed)?null:16&this.allowed?t:null},e.prototype.Y=function(t){return 0==t.num?512&this.allowed?t:null:t.num<=0&&!(256&this.allowed)?null:48&this.allowed?t:this.idents[""+t.num]||null},e.prototype.$=function(t){return 64&this.allowed?t:null},e.prototype.W=function(t){return 128&this.allowed?t:null},e.prototype.Z=function(t){return null},e.prototype.tt=function(t){return null},e.prototype.nt=function(t){return null},e.prototype.it=function(t){return 2046&this.allowed?t:null},e.prototype.combine=function(t){var n={},i={};for(var r in this.idents)n[r]=this.idents[r];for(var r in t.idents)n[r]=t.idents[r];for(var o in this.units)i[o]=this.units[o];for(var o in t.units)i[o]=t.units[o];return new e(this.allowed|t.allowed,n,i)},e}(ye),Ee={},we=new be(0,Ee,Ee),Te=function(t){function e(e){var n=t.call(this)||this;return n.qw=new ve(null),n.Kw=new ve(null),n.first=e.finish(n.qw,n.Kw),n}return de(e,t),e.prototype.Zw=function(t,e,n){for(var i=e?[]:t,r=this.first,o=n,a=null,s=null;r!==this.qw&&r!==this.Kw;)if(o>=t.length)r=r.failure;else{var u=t[o],l=u;if(r.Aw()){var h=!0;r.Cw()?(a?a.push(s):a=[s],s=[]):r.Iw()?s=a.length>0?a.pop():null:r.Dw()?s[r.Mw()]="taken":h=null==s[r.Mw()],r=h?r.success:r.failure}else{if(0==o&&!e&&r.validator instanceof Ne&&this instanceof Ne){if(l=new j.j(t).visit(r.validator)){o=t.length,r=r.success;continue}}else if(0==o&&!e&&r.validator instanceof Se&&this instanceof Ne){if(l=new j.b(t).visit(r.validator)){o=t.length,r=r.success;continue}}else l=u.visit(r.validator);if(!l){r=r.failure;continue}if(l!==u&&t===i){i=[];for(var c=0;c<o;c++)i[c]=t[c]}t!==i&&(i[o-n]=l),o++,r=r.success}}return r===this.qw&&(e?i.length>0:o==t.length)?i:null},e.prototype.Qw=function(t){for(var e=null,n=this.first;n!==this.qw&&n!==this.Kw;)t?n.Aw()?n=n.success:(e=t.visit(n.validator))?(t=null,n=n.success):n=n.failure:n=n.failure;return n===this.qw?e:null},e.prototype.T=function(t){return this.Qw(t)},e.prototype.S=function(t){return this.Qw(t)},e.prototype.R=function(t){return this.Qw(t)},e.prototype.U=function(t){return this.Qw(t)},e.prototype.X=function(t){return this.Qw(t)},e.prototype.V=function(t){return this.Qw(t)},e.prototype.Y=function(t){return this.Qw(t)},e.prototype.$=function(t){return this.Qw(t)},e.prototype.W=function(t){return this.Qw(t)},e.prototype.Z=function(t){return null},e.prototype.tt=function(t){return null},e.prototype.nt=function(t){return this.Qw(t)},e.prototype.it=function(t){return null},e}(ye),Ne=function(t){function e(e){return t.call(this,e)||this}return de(e,t),e.prototype.Z=function(t){var e=this.Zw(t.values,!1,0);return e===t.values?t:e?new j.j(e):null},e.prototype.tt=function(t){for(var e=this.first,n=!1;e;){if(e.validator instanceof Se){n=!0;break}e=e.failure}if(n){var i=this.Zw(t.values,!1,0);return i===t.values?t:i?new j.b(i):null}return null},e.prototype.Ww=function(t,e){return this.Zw(t,!0,e)},e}(Te),Se=function(t){function e(e){return t.call(this,e)||this}return de(e,t),e.prototype.Z=function(t){return this.Qw(t)},e.prototype.tt=function(t){var e=this.Zw(t.values,!1,0);return e===t.values?t:e?new j.b(e):null},e.prototype.Ww=function(t,e){for(var n,i=this.first;i!==this.Kw;){if(n=i.validator.Ww(t,e))return n;i=i.failure}return null},e}(Te),_e=function(t){function e(e,n){var i=t.call(this,n)||this;return i.name=e,i}return de(e,t),e.prototype.Qw=function(t){return null},e.prototype.nt=function(t){if(t.name.toLowerCase()!=this.name)return null;var e=this.Zw(t.values,!1,0);return e===t.values?t:e?new j.e(t.name,e):null},e}(Te),Ae=function(){function t(){}return t.prototype.Jw=function(t,e,n){return e},t.prototype.success=function(t,e){},t}(),Ie=function(t){function e(e,n){var i=t.call(this)||this;return i.name=n,i.validator=e.validators[i.name],i}return de(e,t),e.prototype.Jw=function(t,e,n){if(n.values[this.name])return e;var i=this.validator.Ww(t,e);if(i){var r=i.length,o=r>1?new j.j(i):i[0];return this.success(o,n),e+r}return e},e.prototype.success=function(t,e){e.values[this.name]=t},e}(Ae),xe=function(t){function e(e,n){var i=t.call(this,e,n[0])||this;return i.names=n,i}return de(e,t),e.prototype.success=function(t,e){for(var n=0;n<this.names.length;n++)e.values[this.names[n]]=t},e}(Ie),Ce=function(t){function e(e,n){var i=t.call(this)||this;return i.nodes=e,i.slash=n,i}return de(e,t),e.prototype.Jw=function(t,e,n){var i=e;if(this.slash){if(t[e]!=j.w)return i;if(++e==t.length)return i}var r=this.nodes[0].Jw(t,e,n);if(r==e)return i;e=r;for(var o=1;o<this.nodes.length&&e<t.length&&(r=this.nodes[o].Jw(t,e,n))!=e;o++)e=r;return e},e}(Ae),Oe=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.syntax=null,e.tm=null,e.error=!1,e.values={},e.ir=null,e}return de(e,t),e.prototype.nm=function(t){this.ir=t},e.prototype.im=function(t){return new Ie(this.ir,t)},e.prototype.clone=function(){var t=new this.constructor;return t.syntax=this.syntax,t.tm=this.tm,t.ir=this.ir,t},e.prototype.init=function(t,e){this.syntax=t,this.tm=e},e.prototype.finish=function(t,e){if(!this.error){for(var n=0,i=this.tm;n<i.length;n++){var r=i[n];e.Ir(r,this.values[r]||this.ir.rm[r],t)}return!0}return!1},e.prototype.sm=function(t,e){for(var n=0,i=this.tm;n<i.length;n++){var r=i[n];e.Ir(r,j.t.inherit,t)}},e.prototype.Zw=function(t){return this.error=!0,0},e.prototype.Qw=function(t){return this.Zw([t]),null},e.prototype.T=function(t){return this.Qw(t)},e.prototype.R=function(t){return this.Qw(t)},e.prototype.U=function(t){return this.Qw(t)},e.prototype.X=function(t){return this.Qw(t)},e.prototype.V=function(t){return this.Qw(t)},e.prototype.Y=function(t){return this.Qw(t)},e.prototype.$=function(t){return this.Qw(t)},e.prototype.W=function(t){return this.Qw(t)},e.prototype.Z=function(t){return this.Zw(t.values),null},e.prototype.tt=function(t){return this.error=!0,null},e.prototype.nt=function(t){return this.Qw(t)},e.prototype.it=function(t){return this.error=!0,null},e}(j.m),ke=function(t){function e(){return t.call(this)||this}return de(e,t),e.prototype.Zw=function(t){for(var e=0,n=0;e<t.length;){var i=this.syntax[n].Jw(t,e,this);if(i>e)e=i,n=0;else if(++n==this.syntax.length){this.error=!0;break}}return e},e}(Oe),Le=function(t){function e(){return t.call(this)||this}return de(e,t),e.prototype.Zw=function(t){if(t.length>this.syntax.length||0==t.length)return this.error=!0,0;for(var e=0;e<this.syntax.length;e++){for(var n=e;n>=t.length;)n=1==n?0:n-2;if(this.syntax[e].Jw(t,n,this)!=n+1)return this.error=!0,0}return t.length},e.prototype.om=function(){return new xe(this.ir,this.tm)},e}(Oe),De=function(t){function e(){return t.call(this)||this}return de(e,t),e.prototype.Zw=function(t){for(var e=t.length,n=0;n<t.length;n++)if(t[n]===j.w){e=n;break}if(e>this.syntax.length||0==t.length)return this.error=!0,0;for(n=0;n<this.syntax.length;n++){for(var i=n;i>=e;)i=1==i?0:i-2;var r=void 0;if(e+1<t.length)for(r=e+n+1;r>=t.length;)r-=r==e+2?1:2;else r=i;var o=[t[i],t[r]];if(2!=this.syntax[n].Jw(o,0,this))return this.error=!0,0}return t.length},e}(Oe),Re=function(t){function e(){return t.call(this)||this}return de(e,t),e.prototype.um=function(t,e){for(var n=0,i=this.tm;n<i.length;n++){var r=i[n],o=e[r]||this.ir.rm[r],a=t[r];a||(a=[],t[r]=a),a.push(o)}},e.prototype.tt=function(t){for(var e={},n=0;n<t.values.length;n++)if(this.values={},t.values[n]instanceof j.b?this.error=!0:(t.values[n].visit(this),this.um(e,this.values),this.values["background-color"]&&n!=t.values.length-1&&(this.error=!0)),this.error)return null;for(var i in this.values={},e)this.values[i]="background-color"==i?e[i].pop():new j.b(e[i]);return null},e}(ke),Pe=function(t){function e(){return t.call(this)||this}return de(e,t),e.prototype.init=function(e,n){t.prototype.init.call(this,e,n),this.tm.push("font-family","line-height","font-size")},e.prototype.Zw=function(e){var n=t.prototype.Zw.call(this,e);if(n+2>e.length)return this.error=!0,n;this.error=!1;var i=this.ir.validators;if(!e[n].visit(i["font-size"]))return this.error=!0,n;if(this.values["font-size"]=e[n++],e[n]===j.w){if(++n+2>e.length)return this.error=!0,n;if(!e[n].visit(i["line-height"]))return this.error=!0,n;this.values["line-height"]=e[n++]}var r=n==e.length-1?e[n]:new j.j(e.slice(n,e.length));return r.visit(i["font-family"])?(this.values["font-family"]=r,e.length):(this.error=!0,n)},e.prototype.tt=function(t){if(t.values[0].visit(this),this.error)return null;for(var e=[this.values["font-family"]],n=1;n<t.values.length;n++)e.push(t.values[n]);var i=new j.b(e);return i.visit(this.ir.validators["font-family"])?this.values["font-family"]=i:this.error=!0,null},e.prototype.U=function(t){var e=this.ir.hm[t.name];if(e)for(var n in e)this.values[n]=e[n];else this.error=!0;return null},e}(ke),Me={SIMPLE:ke,INSETS:Le,INSETS_SLASH:De,COMMA:Re,FONT:Pe},Fe=function(){function t(){this.validators={},this.prefixes={},this.rm={},this.am={},this.hm={},this.shorthands={},this.ww={},this.bw={}}return t.prototype.fm=function(t,e){var n;if(e.type==V.a.NUMERIC)n=new j.i(e.num,e.text);else if(e.type==V.a.HASH)n=G.h(e.text);else{if(e.type!=V.a.IDENT)throw new Error("unexpected replacement");n=j.r(e.text)}if(t.Yw()){var i=t.nodes[0].validator.idents;for(var r in i)i[r]=n;return t}throw new Error("unexpected replacement")},t.prototype.lm=function(t,e){var n=new me;if("||"==t){for(var i=0;i<e.length;i++){var r=new me;r.jw(i),r.$w(e[i],re.FOLLOW),r.Hw(i),n.$w(r,0==i?re.FOLLOW:re.ALTERNATE)}var o=new me;return o.zw(),o.$w(n,re.REPEATED),o.Bw(),o}var a=void 0;switch(t){case" ":a=re.FOLLOW;break;case"|":case"||":a=re.ALTERNATE;break;default:throw new Error("unexpected op")}for(i=0;i<e.length;i++)n.$w(e[i],0==i?re.FOLLOW:a);return n},t.prototype.vm=function(t,e,n){for(var i=new me,r=0;r<e;r++)i.$w(t.clone(),re.FOLLOW);if(n==Number.POSITIVE_INFINITY)i.$w(t,re.REPEATED);else for(r=e;r<n;r++)i.$w(t.clone(),re.OPTIONAL);return i},t.prototype.primitive=function(t){var e=new me;return e.Xw(t),e},t.prototype.dm=function(t,e){var n;switch(t){case"COMMA":n=new Se(e);break;case"SPACE":n=new Ne(e);break;default:n=new _e(t.toLowerCase(),e)}return this.primitive(n)},t.prototype.pm=function(){this.am.HASHCOLOR=this.primitive(new be(64,Ee,Ee)),this.am.POS_INT=this.primitive(new be(32,Ee,Ee)),this.am.POS_NUM=this.primitive(new be(16,Ee,Ee)),this.am.POS_PERCENTAGE=this.primitive(new be(8,Ee,{"%":j.o})),this.am.NEGATIVE=this.primitive(new be(256,Ee,Ee)),this.am.ZERO=this.primitive(new be(512,Ee,Ee)),this.am.ZERO_PERCENTAGE=this.primitive(new be(1024,Ee,Ee)),this.am.POS_LENGTH=this.primitive(new be(8,Ee,{em:j.o,ex:j.o,ch:j.o,rem:j.o,vw:j.o,vh:j.o,vi:j.o,vb:j.o,vmin:j.o,vmax:j.o,pvw:j.o,pvh:j.o,pvi:j.o,pvb:j.o,pvmin:j.o,pvmax:j.o,cm:j.o,mm:j.o,in:j.o,px:j.o,pt:j.o,pc:j.o,q:j.o})),this.am.POS_ANGLE=this.primitive(new be(8,Ee,{deg:j.o,grad:j.o,rad:j.o,turn:j.o})),this.am.POS_TIME=this.primitive(new be(8,Ee,{s:j.o,ms:j.o})),this.am.FREQUENCY=this.primitive(new be(8,Ee,{Hz:j.o,kHz:j.o})),this.am.RESOLUTION=this.primitive(new be(8,Ee,{dpi:j.o,dpcm:j.o,dppx:j.o})),this.am.URI=this.primitive(new be(128,Ee,Ee)),this.am.IDENT=this.primitive(new be(4,Ee,Ee)),this.am.STRING=this.primitive(new be(2,Ee,Ee)),this.am.SLASH=this.primitive(new be(2048,Ee,Ee));var t={"font-family":j.r("sans-serif")};this.hm.caption=t,this.hm.icon=t,this.hm.menu=t,this.hm["message-box"]=t,this.hm["small-caption"]=t,this.hm["status-bar"]=t},t.prototype.bm=function(t){return!!t.match(/^[A-Z_0-9]+$/)},t.prototype.wm=function(t,e){var n=t.token();if(n.type==V.a.EOF)return null;var i={"":!0};if(n.type==V.a.O_BRK){do{if(t.consume(),(n=t.token()).type!=V.a.IDENT)throw new Error("Prefix name expected");i[n.text]=!0,t.consume(),n=t.token()}while(n.type==V.a.COMMA);if(n.type!=V.a.C_BRK)throw new Error("']' expected");t.consume(),n=t.token()}if(n.type!=V.a.IDENT)throw new Error("Property name expected");if(2==e?"SHORTHANDS"==n.text:"DEFAULTS"==n.text)return t.consume(),null;var r=n.text;if(t.consume(),2!=e){if(t.token().type!=V.a.EQ)throw new Error("'=' expected");this.bm(r)||(this.prefixes[r]=i)}else if(t.token().type!=V.a.COLON)throw new Error("':' expected");return r},t.prototype.gm=function(t){for(var e=function(){var e=n.wm(t,1);if(!e)return{value:void 0};for(var i=[],r=[],o="",a=void 0,s=!0,u=n,l=function(){if(0==i.length)throw new Error("No values");return 1==i.length?i[0]:u.lm(o,i)},h=function(t){if(s)throw new Error("'"+t+"': unexpected");if(o&&o!=t)throw new Error("mixed operators: '"+t+"' and '"+o+"'");o=t,s=!0},c=null;!c;){t.consume();var p=t.token();switch(p.type){case V.a.IDENT:if(s||h(" "),n.bm(p.text)){var f=n.am[p.text];if(!f)throw new Error("'"+p.text+"' unexpected");i.push(f.clone())}else(d={})[p.text.toLowerCase()]=j.r(p.text),i.push(n.primitive(new be(0,d,Ee)));s=!1;break;case V.a.INT:var d;(d={})[""+p.num]=new j.g(p.num),i.push(n.primitive(new be(0,d,Ee))),s=!1;break;case V.a.BAR:h("|");break;case V.a.BAR_BAR:h("||");break;case V.a.O_BRK:s||h(" "),r.push({vals:i,op:o,b:"["}),o="",i=[],s=!0;break;case V.a.FUNC:s||h(" "),r.push({vals:i,op:o,b:"(",fn:p.text}),o="",i=[],s=!0;break;case V.a.C_BRK:a=l();var v=r.pop();if("["!=v.b)throw new Error("']' unexpected");(i=v.vals).push(a),o=v.op,s=!1;break;case V.a.C_PAR:a=l();var g=r.pop();if("("!=g.b)throw new Error("')' unexpected");(i=g.vals).push(n.dm(g.fn,a)),o=g.op,s=!1;break;case V.a.COLON:if(s)throw new Error("':' unexpected");t.consume(),i.push(n.fm(i.pop(),t.token()));break;case V.a.QMARK:if(s)throw new Error("'?' unexpected");i.push(n.vm(i.pop(),0,1));break;case V.a.STAR:if(s)throw new Error("'*' unexpected");i.push(n.vm(i.pop(),0,Number.POSITIVE_INFINITY));break;case V.a.PLUS:if(s)throw new Error("'+' unexpected");i.push(n.vm(i.pop(),1,Number.POSITIVE_INFINITY));break;case V.a.O_BRC:if(t.consume(),(p=t.token()).type!=V.a.INT)throw new Error("<int> expected");var m=p.num,y=m;if(t.consume(),(p=t.token()).type==V.a.COMMA){if(t.consume(),(p=t.token()).type!=V.a.INT)throw new Error("<int> expected");y=p.num,t.consume(),p=t.token()}if(p.type!=V.a.C_BRC)throw new Error("'}' expected");i.push(n.vm(i.pop(),m,y));break;case V.a.SEMICOL:if(c=l(),r.length>0)throw new Error("unclosed '"+r.pop().b+"'");break;default:throw new Error("unexpected token")}}t.consume(),n.bm(e)?n.am[e]=c:c.Vw()?n.validators[e]=c.nodes[0].validator:n.validators[e]=new Ne(c)},n=this;;){var i=e();if("object"==typeof i)return i.value}},t.prototype.Em=function(t){for(;;){var e=this.wm(t,2);if(!e)return;for(var n=[];;){t.consume();var i=t.token();if(i.type==V.a.SEMICOL){t.consume();break}switch(i.type){case V.a.IDENT:n.push(j.r(i.text));break;case V.a.NUM:n.push(new j.h(i.num));break;case V.a.INT:n.push(new j.g(i.num));break;case V.a.NUMERIC:n.push(new j.i(i.num,i.text));break;default:throw new Error("unexpected token")}}this.rm[e]=n.length>1?new j.j(n):n[0]}},t.prototype.km=function(t){for(;;){var e=this.wm(t,3);if(!e)return;var n=t.dt(1),i=void 0;n.type==V.a.IDENT&&Me[n.text]?(i=new Me[n.text],t.consume()):i=new ke,i.nm(this);for(var r=!1,o=[],a=!1,s=[],u=[];!r;)switch(t.consume(),(n=t.token()).type){case V.a.IDENT:if(this.validators[n.text])o.push(i.im(n.text)),u.push(n.text);else{if(!(this.shorthands[n.text]instanceof Le))throw new Error("'"+n.text+"' is neither a simple property nor an inset shorthand");var l=this.shorthands[n.text];o.push(l.om()),u.push.apply(u,l.tm)}break;case V.a.SLASH:if(o.length>0||a)throw new Error("unexpected slash");a=!0;break;case V.a.O_BRK:s.push({slash:a,syntax:o}),o=[],a=!1;break;case V.a.C_BRK:var h=new Ce(o,a),c=s.pop();o=c.syntax,a=c.slash,o.push(h);break;case V.a.SEMICOL:r=!0,t.consume();break;default:throw new Error("unexpected token")}i.init(o,u),this.shorthands[e]=i}},t.prototype.parse=function(t){var e=new V.b(t,null);this.gm(e),this.Em(e),this.km(e),this.bw=this._m(["background"]),this.ww=this._m(["margin","border","padding","columns","column-gap","column-rule","column-fill"])},t.prototype._m=function(t){for(var e={},n=0,i=t;n<i.length;n++)for(var r=i[n],o=this.shorthands[r],a=0,s=o?o.tm:[r];a<s.length;a++){var u=s[a],h=this.rm[u];h?e[u]=h:l.b.warn("Unknown property in makePropSet:",u)}return e},t.prototype.Rr=function(t,e,n,i){var r="",o=t,a=(t=t.toLowerCase()).match(/^-([a-z]+)-([-a-z0-9]+)$/);a&&(r=a[1],t=a[2]);var s=this.prefixes[t];if(s&&s[r]){var u=this.validators[t];if(u){var l=e===j.t.inherit||e.st()?e:e.visit(u);l?i.Ir(t,l,n):i.Cr(o,e)}else{var h=this.shorthands[t].clone();e===j.t.inherit?h.sm(n,i):(e.visit(h),h.finish(n,i)||i.Cr(o,e))}}else i.Or(o,e)},t}();function Ue(){var t=new Fe;return t.pm(),t.parse(fe),t}var Be=n(17),ze={"font-style":j.t.normal,"font-variant":j.t.normal,"font-weight":j.t.normal},He="OTTO"+(new Date).valueOf(),Ge=1;function Ve(t,e){var n={};for(var i in t)n[i]=H.s(t,i).evaluate(e,i);return function(t){for(var e in ze)t[e]||(t[e]=ze[e])}(n),n}var Xe=function(){function t(t){this.properties=t,this.xm=[],this.blobs=[],this.ym=function(t){var e=new b.d;for(var n in ze)e.append(" "),e.append(t[n].toString());return e.toString()}(this.properties),this.src=this.properties.src?this.properties.src.toString():null;var e=this.properties["font-family"];this.family=e?e.stringValue():null}return t.prototype.Tm=function(t){return this.ym==t.ym},t.prototype.Nm=function(t,e){var n=new b.d;for(var i in n.append("@font-face {\n  font-family: "),n.append(this.family),n.append(";\n  "),ze)n.append(i),n.append(": "),this.properties[i].rt(n,!0),n.append(";\n  ");if(e){n.append('src: url("');var r=X.d(e);n.append(r),this.xm.push(r),this.blobs.push(e),n.append('")')}else n.append("src: "),n.append(t);return n.append(";\n}\n"),n.toString()},t}(),je=function(){function t(t){this.deobfuscator=t,this.Sm={}}return t.prototype.Am=function(t,e){var n=t.family,i=this.Sm[n],r=e.family;if(i){if(i!=r)throw new Error("E_FONT_FAMILY_INCONSISTENT "+t.family)}else this.Sm[n]=r},t.prototype.Rm=function(t){if(t instanceof j.b){for(var e=[],n=0,i=t.values;n<i.length;n++){var r=i[n],o=this.Sm[r.stringValue()];o&&e.push(j.r(o)),e.push(r)}return new j.b(e)}var a=this.Sm[t.stringValue()];return a?new j.b([j.r(a),t]):t},t}(),We=function(){function t(t,e,n){this.head=t,this.body=e,this.Cm={},this.Om=0,this.Im=n||"Fnt_"}return t.prototype.Lm=function(t,e){var n=t.family,i=e.Sm[n];return i||(i=this.Im+ ++this.Om,e.Sm[n]=i,i)},t.prototype.Pm=function(t,e,n){var i=Y.c("initFont"),r=this,o=t.src,a={};for(var s in ze)a[s]=t.properties[s];var u=r.Lm(t,n);a["font-family"]=j.r(u);var h=new Xe(a),c=r.body.ownerDocument.createElement("span");c.textContent="M";var p=(new Date).valueOf()+1e3,f=r.head.ownerDocument.createElement("style"),d=He+Ge++;for(var v in f.textContent=h.Nm("",X.e([d])),r.head.appendChild(f),r.body.appendChild(c),c.style.visibility="hidden",c.style.fontFamily=u,ze)b.F(c,v,a[v].toString());var g=c.getBoundingClientRect(),m=g.right-g.left,y=g.bottom-g.top;f.textContent=h.Nm(o,e),l.b.info("Starting to load font:",o);var E=!1;return i.loop(function(){var t=c.getBoundingClientRect(),e=t.right-t.left,n=t.bottom-t.top;return m!=e||y!=n?(E=!0,Y.d(!1)):(new Date).valueOf()>p?Y.d(!1):i.sleep(10)}).then(function(){E?l.b.info("Loaded font:",o):l.b.warn("Failed to load font:",o),r.body.removeChild(c),i.finish(h)}),i.result()},t.prototype.Fm=function(t,e){var n=t.src,i=this.Cm[n],r=this;return i?i.piggyback(function(i){var r=i;r.Tm(t)?(e.Am(t,r),l.b.warn("Found already-loaded font:",n)):l.b.warn("E_FONT_FACE_INCOMPATIBLE",t.src)}):(i=new Be.a(function(){var i=Y.c("loadFont"),o=e.deobfuscator?e.deobfuscator(n):null;return o?X.c(n,X.b.BLOB).then(function(n){n.Mh?o(n.Mh).then(function(n){r.Pm(t,n,e).Dt(i)}):i.finish(null)}):r.Pm(t,null,e).Dt(i),i.result()},"loadFont "+n),this.Cm[n]=i,i.start()),i},t.prototype.Dm=function(t,e){for(var n=[],i=0,r=t;i<r.length;i++){var o=r[i];o.src&&o.family?n.push(this.Fm(o,e)):l.b.warn("E_FONT_FACE_INVALID")}return Be.c(n)},t}(),Ye=n(30),Ke=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),$e=1,qe=function(){function t(t,e,n,i,r){this.name=e,this.Mm=n,this.classes=i,this.parent=r,this.specified={},this.children=[],this.Um=null,this.index=0,this._scope=t,this.key="p"+$e++,r&&(this.index=r.children.length,r.children.push(this))}return Object.defineProperty(t.prototype,"scope",{get:function(){return this._scope},enumerable:!0,configurable:!0}),t.prototype.Si=function(t){throw new Error("E_UNEXPECTED_CALL")},t.prototype.clone=function(t){throw new Error("E_UNEXPECTED_CALL")},t.prototype.Gm=function(t){var e=this.specified,n=t.specified;for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])},t.prototype.Bm=function(t){for(var e=0;e<this.children.length;e++)this.children[e].clone({parent:t})},t}(),Ze=function(t){function e(e){var n=t.call(this,e,null,null,[],null)||this;return n.specified.width=new H.c(j.q,0),n.specified.height=new H.c(j.p,0),n}return Ke(e,t),e}(qe),Qe=function(t){function e(e,n){var i=t.call(this,e,function(t,e){var n=t.match(/^([^.]+)\.([^.]+)$/);if(n){var i=r.Um.zm[n[1]];if(i){var o=this.Hm(i);if(o)return e?o.jm(n[2]):o.Xm(n[2])}}return null})||this;i.Um=n;var r=i;return i}return Ke(e,t),e}(L.m),Je=function(t){function e(e,n,i,r,o,a,s){var u=t.call(this,e,n,i,r,o)||this;return u.condition=a,u.specificity=s,u.zm={},e instanceof Qe||(u._scope=new Qe(e,u)),u.Um=u,u.specified.width=new H.c(j.q,0),u.specified.height=new H.c(j.p,0),u.specified["wrap-flow"]=new H.c(j.t.auto,0),u.specified.position=new H.c(j.t.relative,0),u.specified.overflow=new H.c(j.t.visible,0),u}return Ke(e,t),e.prototype.Si=function(t){return new gn(t,this)},e.prototype.clone=function(t){var n=new e(this.scope,this.name,t.Mm||this.Mm,this.classes,this.parent,this.condition,this.specificity);return this.Gm(n),this.Bm(n),n},e.prototype.Vm=function(){this.scope.Um=this},e}(qe),tn=function(t){function e(e,n,i,r,o){var a=t.call(this,e,n,i,r,o)||this;return a.Um=o.Um,n&&(a.Um.zm[n]=a.key),a.specified["wrap-flow"]=new H.c(j.t.auto,0),a}return Ke(e,t),e.prototype.Si=function(t){return new mn(t,this)},e.prototype.clone=function(t){var n=new e(t.parent.scope,this.name,this.Mm,this.classes,t.parent);return this.Gm(n),this.Bm(n),n},e}(qe),en=function(t){function e(e,n,i,r,o){var a=t.call(this,e,n,i,r,o)||this;return a.Um=o.Um,n&&(a.Um.zm[n]=a.key),a}return Ke(e,t),e.prototype.Si=function(t){return new yn(t,this)},e.prototype.clone=function(t){var n=new e(t.parent.scope,this.name,this.Mm,this.classes,t.parent);return this.Gm(n),this.Bm(n),n},e}(qe);function nn(t,e,n){return e&&e!==j.t.auto?e.et(t,n):null}function rn(t,e,n){return e&&e!==j.t.auto?e.et(t,n):t.zero}function on(t,e,n){return e?e===j.t.auto?null:e.et(t,n):t.zero}function an(t,e,n,i){return e&&n!==j.t.none?e.et(t,i):t.zero}function sn(t,e,n){return e?e===j.t._true?t._true:e===j.t._false?t._false:e.et(t,t.zero):n}var un=function(){function t(t,e){this.Ym=t,this.$m=e,this.cascaded={},this.style={},this.Wm=null,this.qm=null,this.children=[],this.Km=!1,this.Zm=!1,this.Qm=!1,this.Jm=!1,this.tg=0,this.ng=0,this.ig=null,this.rg={},this.eg={},this.vertical=!1,this.rtl=!1,this.sg=!1,t&&t.children.push(this)}return t.prototype.reset=function(){this.tg=0,this.ng=0},t.prototype.og=function(t,e){var n=this.Xm(t),i=this.Xm(e);if(!n||!i)throw new Error("E_INTERNAL");return L.C(this.$m.scope,n,i)},t.prototype.Xm=function(t){var e=this.rg[t];if(e)return e;var n=this.style[t];switch(n&&(e=n.et(this.$m.scope,this.$m.scope.zero)),t){case"margin-left-edge":e=this.Xm("left");break;case"margin-top-edge":e=this.Xm("top");break;case"margin-right-edge":e=this.og("border-right-edge","margin-right");break;case"margin-bottom-edge":e=this.og("border-bottom-edge","margin-bottom");break;case"border-left-edge":e=this.og("margin-left-edge","margin-left");break;case"border-top-edge":e=this.og("margin-top-edge","margin-top");break;case"border-right-edge":e=this.og("padding-right-edge","border-right-width");break;case"border-bottom-edge":e=this.og("padding-bottom-edge","border-bottom-width");break;case"padding-left-edge":e=this.og("border-left-edge","border-left-width");break;case"padding-top-edge":e=this.og("border-top-edge","border-top-width");break;case"padding-right-edge":e=this.og("right-edge","padding-right");break;case"padding-bottom-edge":e=this.og("bottom-edge","padding-bottom");break;case"left-edge":e=this.og("padding-left-edge","padding-left");break;case"top-edge":e=this.og("padding-top-edge","padding-top");break;case"right-edge":e=this.og("left-edge","width");break;case"bottom-edge":e=this.og("top-edge","height")}if(!e){var i=void 0;if("extent"==t)i=this.vertical?"width":"height";else if("measure"==t)i=this.vertical?"height":"width";else{var r=this.vertical?H.m:H.l;for(var o in i=t,r)i=i.replace(o,r[o])}i!=t&&(e=this.Xm(i))}return e&&(this.rg[t]=e),e},t.prototype.jm=function(t){var e=this.eg[t];if(e)return e;switch(t){case"columns":var n=this.$m.scope,i=new L.A(n,0),r=this.Xm("column-count"),o=this.Xm("column-width"),a=this.Xm("column-gap");e=L.P(n,L.N(n,new L.d(n,"min",[i,r]),L.C(n,o,a)),a)}return e&&(this.eg[t]=e),e},t.prototype.ug=function(){var t=this.$m.scope,e=this.style,n=sn(t,e.enabled,t._true),i=nn(t,e.page,t.zero);if(i){var r=new L.s(t,"page-number");n=L.D(t,n,new L.i(t,i,r))}var o=nn(t,e["min-page-width"],t.zero);o&&(n=L.D(t,n,new L.j(t,new L.s(t,"page-width"),o)));var a=nn(t,e["min-page-height"],t.zero);a&&(n=L.D(t,n,new L.j(t,new L.s(t,"page-height"),a))),n=this.hg(n),e.enabled=new j.c(n)},t.prototype.hg=function(t){return t},t.prototype.ag=function(){var t=this.$m.scope,e=this.style,n=this.Ym?this.Ym.style.width.et(t,null):null,i=nn(t,e.left,n),r=nn(t,e["margin-left"],n),o=an(t,e["border-left-width"],e["border-left-style"],n),a=rn(t,e["padding-left"],n),s=nn(t,e.width,n),u=nn(t,e["max-width"],n),l=rn(t,e["padding-right"],n),h=an(t,e["border-right-width"],e["border-right-style"],n),c=nn(t,e["margin-right"],n),p=nn(t,e.right,n),f=L.C(t,o,a),d=L.C(t,o,l);if(i&&p&&s){var v=L.P(t,n,L.C(t,s,L.C(t,L.C(t,i,f),d)));r?c?p=L.P(t,v,c):c=L.P(t,v,L.C(t,p,r)):(v=L.P(t,v,p),c?r=L.P(t,v,c):c=r=L.N(t,v,new L.f(t,.5)))}else{r||(r=t.zero),c||(c=t.zero),i||p||s||(i=t.zero),i||s?i||p?s||p||(s=this.Wm,this.Km=!0):i=t.zero:(s=this.Wm,this.Km=!0);var g=L.P(t,n,L.C(t,L.C(t,r,f),L.C(t,c,d)));this.Km&&(u||(u=L.P(t,g,i||p)),this.vertical||!nn(t,e["column-width"],null)&&!nn(t,e["column-count"],null)||(s=u,this.Km=!1)),i?s?p||(p=L.P(t,g,L.C(t,i,s))):s=L.P(t,g,L.C(t,i,p)):i=L.P(t,g,L.C(t,p,s))}var m=rn(t,e["snap-width"]||(this.Ym?this.Ym.style["snap-width"]:null),n);e.left=new j.c(i),e["margin-left"]=new j.c(r),e["border-left-width"]=new j.c(o),e["padding-left"]=new j.c(a),e.width=new j.c(s),e["max-width"]=new j.c(u||s),e["padding-right"]=new j.c(l),e["border-right-width"]=new j.c(h),e["margin-right"]=new j.c(c),e.right=new j.c(p),e["snap-width"]=new j.c(m)},t.prototype.fg=function(){var t=this.$m.scope,e=this.style,n=this.Ym?this.Ym.style.width.et(t,null):null,i=this.Ym?this.Ym.style.height.et(t,null):null,r=nn(t,e.top,i),o=nn(t,e["margin-top"],n),a=an(t,e["border-top-width"],e["border-top-style"],n),s=rn(t,e["padding-top"],n),u=nn(t,e.height,i),l=nn(t,e["max-height"],i),h=rn(t,e["padding-bottom"],n),c=an(t,e["border-bottom-width"],e["border-bottom-style"],n),p=nn(t,e["margin-bottom"],n),f=nn(t,e.bottom,i),d=L.C(t,a,s),v=L.C(t,c,h);if(r&&f&&u){var g=L.P(t,i,L.C(t,u,L.C(t,L.C(t,r,d),v)));o?p?f=L.P(t,g,o):p=L.P(t,g,L.C(t,f,o)):(g=L.P(t,g,f),p?o=L.P(t,g,p):p=o=L.N(t,g,new L.f(t,.5)))}else{o||(o=t.zero),p||(p=t.zero),r||f||u||(r=t.zero),r||u?r||f?u||f||(u=this.qm,this.Zm=!0):r=t.zero:(u=this.qm,this.Zm=!0);var m=L.P(t,i,L.C(t,L.C(t,o,d),L.C(t,p,v)));this.Zm&&(l||(l=L.P(t,m,r||f)),this.vertical&&(nn(t,e["column-width"],null)||nn(t,e["column-count"],null))&&(u=l,this.Zm=!1)),r?u?f||(f=L.P(t,m,L.C(t,r,u))):u=L.P(t,m,L.C(t,f,r)):r=L.P(t,m,L.C(t,f,u))}var y=rn(t,e["snap-height"]||(this.Ym?this.Ym.style["snap-height"]:null),n);e.top=new j.c(r),e["margin-top"]=new j.c(o),e["border-top-width"]=new j.c(a),e["padding-top"]=new j.c(s),e.height=new j.c(u),e["max-height"]=new j.c(l||u),e["padding-bottom"]=new j.c(h),e["border-bottom-width"]=new j.c(c),e["margin-bottom"]=new j.c(p),e.bottom=new j.c(f),e["snap-height"]=new j.c(y)},t.prototype.cg=function(){var t=this.$m.scope,e=this.style,n=nn(t,e[this.vertical?"height":"width"],null),i=nn(t,e["column-width"],n),r=nn(t,e["column-count"],null),o=function(t,e,n){return e&&e!==j.t.normal?e.et(t,null):null}(t,e["column-gap"]);o||(o=new L.x(t,1,"em")),i&&!r&&(r=new L.d(t,"floor",[L.H(t,L.C(t,n,o),L.C(t,i,o))]),r=new L.d(t,"max",[t.one,r])),r||(r=t.one),i=L.P(t,L.H(t,L.C(t,n,o),r),o),e["column-width"]=new j.c(i),e["column-count"]=new j.c(r),e["column-gap"]=new j.c(o)},t.prototype.depends=function(t,e,n){return this.style[t].et(this.$m.scope,null).depend(e,n)},t.prototype.init=function(t){t.lg(this.$m.key,this);var e=this.$m.scope,n=this.style,i=this,r=this.Ym?this.Ym.vg(t):null,o=H.n(this.cascaded,t,r,!1,null);this.vertical=H.z(o,t,!!this.Ym&&this.Ym.vertical),this.rtl=H.y(o,t,!!this.Ym&&this.Ym.rtl),H.k(o,n,this.vertical,this.rtl,function(t,e){return e.value}),this.Wm=new L.t(e,function(){return i.tg},"autoWidth"),this.qm=new L.t(e,function(){return i.ng},"autoHeight"),this.ag(),this.fg(),this.cg(),this.ug()},t.prototype.dg=function(t,e){var n=this.style[e];return n&&(n=G.i(t,n,e)),n},t.prototype.pg=function(t,e){var n=this.style[e];return n&&(n=G.i(t,n,e)),j.x(n,t)},t.prototype.bg=function(t,e){var n=H.t(this.cascaded,e);if(n){for(var i=[],r=0;r<n.length;r++){var o=n[r].evaluate(t,"");o&&o!==j.o&&i.push(o)}if(i.length)return i}return null},t.prototype.vg=function(t){var e=this.bg(t,"region-id");if(e){for(var n=[],i=0;i<e.length;i++)n[i]=e[i].toString();return n}return null},t.prototype.wg=function(t,e,n,i){this.mg(t,e.element,n,i)},t.prototype.mg=function(t,e,n,i){var r=this.dg(t,n);r&&(r.ot()&&L.O(r.unit)&&(r=j.n(r,t)),"font-family"===n&&(r=i.Rm(r)),b.F(e,n,r.toString()))},t.prototype.gg=function(t,e,n,i){var r=this.dg(t,n);r&&i.push(new K.d(e.element,n,r))},t.prototype.Eg=function(t,e){var n=this.pg(t,"left"),i=this.pg(t,"margin-left"),r=this.pg(t,"padding-left"),o=this.pg(t,"border-left-width"),a=this.pg(t,"width");e.Gs(n,a),b.F(e.element,"margin-left",i+"px"),b.F(e.element,"padding-left",r+"px"),b.F(e.element,"border-left-width",o+"px"),e.marginLeft=i,e.borderLeft=o,e.paddingLeft=r},t.prototype.kg=function(t,e){var n=this.pg(t,"right"),i=this.pg(t,"snap-height"),r=this.pg(t,"margin-right"),o=this.pg(t,"padding-right"),a=this.pg(t,"border-right-width");if(b.F(e.element,"margin-right",r+"px"),b.F(e.element,"padding-right",o+"px"),b.F(e.element,"border-right-width",a+"px"),e.marginRight=r,e.borderRight=a,this.vertical&&i>0){var s=n+e.ys(),u=s-Math.floor(s/i)*i;u>0&&(e.gs=i-u,o+=e.gs)}e.paddingRight=o,e.bs=i},t.prototype._g=function(t,e){var n=this.pg(t,"snap-height"),i=this.pg(t,"top"),r=this.pg(t,"margin-top"),o=this.pg(t,"padding-top"),a=this.pg(t,"border-top-width");if(e.top=i,e.marginTop=r,e.borderTop=a,e.ws=n,!this.vertical&&n>0){var s=i+e.ks(),u=s-Math.floor(s/n)*n;u>0&&(e.Es=n-u,o+=e.Es)}e.paddingTop=o,b.F(e.element,"top",i+"px"),b.F(e.element,"margin-top",r+"px"),b.F(e.element,"padding-top",o+"px"),b.F(e.element,"border-top-width",a+"px")},t.prototype.xg=function(t,e){var n=this.pg(t,"margin-bottom"),i=this.pg(t,"padding-bottom"),r=this.pg(t,"border-bottom-width"),o=this.pg(t,"height")-e.Es;b.F(e.element,"height",o+"px"),b.F(e.element,"margin-bottom",n+"px"),b.F(e.element,"padding-bottom",i+"px"),b.F(e.element,"border-bottom-width",r+"px"),e.height=o-e.Es,e.marginBottom=n,e.borderBottom=r,e.paddingBottom=i},t.prototype.yg=function(t,e){this.vertical?this.kg(t,e):this._g(t,e)},t.prototype.Tg=function(t,e){this.vertical?this.Eg(t,e):this.xg(t,e)},t.prototype.Ng=function(t,e){this.vertical?(this._g(t,e),this.xg(t,e)):(this.kg(t,e),this.Eg(t,e))},t.prototype.Sg=function(t,e){b.F(e.element,"border-top-width","0px");var n=this.pg(t,"max-height");this.Qm?e.Us(0,n):(this._g(t,e),n-=e.Es,e.height=n,b.F(e.element,"height",n+"px"))},t.prototype.Ag=function(t,e){b.F(e.element,"border-left-width","0px");var n=this.pg(t,"max-width");if(this.Jm)e.Gs(0,n);else{this.kg(t,e),n-=e.gs,e.width=n;var i=this.pg(t,"right");b.F(e.element,"right",i+"px"),b.F(e.element,"width",n+"px")}},t.prototype.Rg=function(t,e,n,i,r){this.Ym&&this.vertical==this.Ym.vertical||b.F(e.element,"writing-mode",this.vertical?"vertical-rl":"horizontal-tb"),(this.vertical?this.Km:this.Zm)?this.vertical?this.Ag(t,e):this.Sg(t,e):(this.yg(t,e),this.Tg(t,e)),(this.vertical?this.Zm:this.Km)?this.vertical?this.Sg(t,e):this.Ag(t,e):this.Ng(t,e);for(var o=0;o<ln.length;o++)this.wg(t,e,ln[o],i)},t.prototype.Cg=function(t,e,n,i){for(var r=0;r<cn.length;r++)this.wg(t,e,cn[r],i)},t.prototype.Og=function(t,e,n){for(var i=0;i<pn.length;i++)this.mg(t,e,pn[i],n)},t.prototype.Ig=function(t,e,n,i,r,o,a){this.vertical?this.tg=e.ps+e.gs:this.ng=e.ps+e.Es;var s=(this.vertical||!i)&&this.Zm,u=(!this.vertical||!i)&&this.Km,l=null;if((u||s)&&(u&&b.F(e.element,"width","auto"),s&&b.F(e.element,"height","auto"),l=o.ue(i?i.element:e.element),u&&(this.tg=Math.ceil(l.right-l.left-e.paddingLeft-e.borderLeft-e.paddingRight-e.borderRight),this.vertical&&(this.tg+=e.gs)),s&&(this.ng=l.bottom-l.top-e.paddingTop-e.borderTop-e.paddingBottom-e.borderBottom,this.vertical||(this.ng+=e.Es))),(this.vertical?this.Zm:this.Km)&&this.Ng(t,e),(this.vertical?this.Km:this.Zm)&&((this.vertical?this.Jm:this.Qm)&&this.yg(t,e),this.Tg(t,e)),r>1){var h=this.pg(t,"column-rule-width"),c=this.dg(t,"column-rule-style"),p=this.dg(t,"column-rule-color");if(h>0&&c&&c!=j.t.none&&p!=j.t.transparent)for(var f=this.pg(t,"column-gap"),d=this.vertical?e.height:e.width,v=this.vertical?"border-top":"border-left",g=1;g<r;g++){var m=(d+f)*g/r-f/2+e.paddingLeft-h/2,y=e.height+e.paddingTop+e.paddingBottom,E=e.element.ownerDocument.createElement("div");b.F(E,"position","absolute"),b.F(E,this.vertical?"left":"top","0px"),b.F(E,this.vertical?"top":"left",m+"px"),b.F(E,this.vertical?"height":"width","0px"),b.F(E,this.vertical?"width":"height",y+"px"),b.F(E,v,h+"px "+c.toString()+(p?" "+p.toString():"")),e.element.insertBefore(E,e.element.firstChild)}}for(g=0;g<hn.length;g++)this.wg(t,e,hn[g],a);for(g=0;g<fn.length;g++)this.gg(t,e,fn[g],n.Wr)},t.prototype.Lg=function(t,e){var n=this.cascaded,i=this.$m.specified;for(var r in i)H.x(r)&&H.F(n,r,H.s(i,r));if(this.$m.Mm==dn)for(var o in e)(o.match(/^background-/)||"writing-mode"==o)&&(n[o]=e[o]);if("layout-host"==this.$m.Mm)for(var a in e)a.match(/^background-/)||"writing-mode"==a||(n[a]=e[a]);t.ji(this.$m.classes,null,n),n.content&&(n.content=n.content.Ln(new H.e(t,null,t.wi))),this.init(t.context);for(var s=0,u=this.$m.children;s<u.length;s++)u[s].Si(this).Lg(t,e);t.Ji()},t.prototype.Pg=function(t){this.Km&&(this.Jm=this.depends("right",this.Wm,t)||this.depends("margin-right",this.Wm,t)||this.depends("border-right-width",this.Wm,t)||this.depends("padding-right",this.Wm,t)),this.Zm&&(this.Qm=this.depends("top",this.qm,t)||this.depends("margin-top",this.qm,t)||this.depends("border-top-width",this.qm,t)||this.depends("padding-top",this.qm,t));for(var e=0,n=this.children;e<n.length;e++)n[e].Pg(t)},t}(),ln=["border-left-style","border-right-style","border-top-style","border-bottom-style","border-left-color","border-right-color","border-top-color","border-bottom-color","outline-style","outline-color","outline-width","overflow","visibility"],hn=["border-top-left-radius","border-top-right-radius","border-bottom-right-radius","border-bottom-left-radius","border-image-source","border-image-slice","border-image-width","border-image-outset","border-image-repeat","background-attachment","background-color","background-image","background-repeat","background-position","background-clip","background-origin","background-size","opacity","z-index","background-blend-mode","isolation","mix-blend-mode","filter"],cn=["color","font-family","font-size","font-style","font-weight","font-variant","line-height","letter-spacing","text-align","text-decoration","text-indent","text-transform","white-space","word-spacing","font-feature-settings","font-kerning","font-size-adjust","font-variant-east-asian","font-stretch","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-shadow","text-underline-position"],pn=["width","height","image-resolution","object-fit","object-position"],fn=["transform","transform-origin"],dn="background-host",vn=function(t){function e(e){return t.call(this,null,e)||this}return Ke(e,t),e.prototype.Lg=function(e,n){t.prototype.Lg.call(this,e,n),this.children.sort(function(t,e){return e.$m.specificity-t.$m.specificity||t.$m.index-e.$m.index})},e}(un),gn=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.ig=i,i}return Ke(e,t),e.prototype.hg=function(t){var e=this.$m.Um;return e.condition&&(t=L.D(e.scope,t,e.condition)),t},e.prototype.Fg=function(t,e,n){},e}(un),mn=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.ig=e.ig,i}return Ke(e,t),e}(un),yn=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.ig=e.ig,i}return Ke(e,t),e.prototype.Dg=function(t,e,n){var i=null;if(e instanceof j.f&&(i=[e]),e instanceof j.b&&(i=e.values),i)for(var r=this.$m.scope,o=0;o<i.length;o++)if(i[o]instanceof j.f){var a=L.M(i[o].name,"enabled"),s=new L.s(r,a);n&&(s=new L.w(r,s)),t=L.D(r,t,s)}return t},e.prototype.hg=function(t){var e=this.$m.scope,n=this.style,i=sn(e,n.required,e._false)!==e._false;if(i||this.Zm){var r=function(t,e,n){return e?e.et(t,t.zero):new L.f(t,"body")}(e,n["flow-from"]),o=new L.d(e,"has-content",[r]);t=L.D(e,t,o)}if(t=this.Dg(t,n["required-partitions"],!1),t=this.Dg(t,n["conflicting-partitions"],!0),i){var a=this.ig.style.enabled,s=a?a.et(e,null):e._true;s=L.D(e,s,t),this.ig.style.enabled=new j.c(s)}return t},e.prototype.Rg=function(e,n,i,r,o){b.F(n.element,"overflow","hidden"),t.prototype.Rg.call(this,e,n,i,r,o)},e}(un),bn=function(t){function e(e,n,i,r){var o=t.call(this,e,n,!1)||this;return o.target=i,o.ir=r,o}return Ke(e,t),e.prototype.property=function(t,e,n){this.ir.Rr(t,e,n,this)},e.prototype.Or=function(t,e){this.report("E_INVALID_PROPERTY "+t+": "+e.toString())},e.prototype.Cr=function(t,e){this.report("E_INVALID_PROPERTY_VALUE "+t+": "+e.toString())},e.prototype.Ir=function(t,e,n){this.target.specified[t]=new H.c(e,n?G.d:G.e)},e}(G.f),En=function(t){function e(e,n,i,r){return t.call(this,e,n,i,r)||this}return Ke(e,t),e}(bn),wn=function(t){function e(e,n,i,r){var o=t.call(this,e,n,i,r)||this;return i.specified.width=new H.c(j.s,0),i.specified.height=new H.c(j.s,0),o}return Ke(e,t),e.prototype.vo=function(t,e,n){var i=new en(this.scope,t,e,n,this.target),r=new En(this.scope,this.owner,i,this.ir);this.owner.Dr(r)},e.prototype.do=function(t,n,i){var r=new tn(this.scope,t,n,i,this.target),o=new e(this.scope,this.owner,r,this.ir);this.owner.Dr(o)},e}(bn),Tn=function(t){function e(e,n,i,r){return t.call(this,e,n,i,r)||this}return Ke(e,t),e.prototype.vo=function(t,e,n){var i=new en(this.scope,t,e,n,this.target),r=new En(this.scope,this.owner,i,this.ir);this.owner.Dr(r)},e.prototype.do=function(t,e,n){var i=new tn(this.scope,t,e,n,this.target),r=new wn(this.scope,this.owner,i,this.ir);this.owner.Dr(r)},e}(bn),Nn=n(19),Sn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();function _n(t){var e=t["writing-mode"];e=e&&e.value;var n=t.direction;return n=n&&n.value,e===j.t.vertical_lr||e!==j.t.vertical_rl&&n!==j.t.rtl?i.LTR:i.RTL}var An,In,xn={a5:{width:new j.i(148,"mm"),height:new j.i(210,"mm")},a4:{width:new j.i(210,"mm"),height:new j.i(297,"mm")},a3:{width:new j.i(297,"mm"),height:new j.i(420,"mm")},b5:{width:new j.i(176,"mm"),height:new j.i(250,"mm")},b4:{width:new j.i(250,"mm"),height:new j.i(353,"mm")},"jis-b5":{width:new j.i(182,"mm"),height:new j.i(257,"mm")},"jis-b4":{width:new j.i(257,"mm"),height:new j.i(364,"mm")},letter:{width:new j.i(8.5,"in"),height:new j.i(11,"in")},legal:{width:new j.i(8.5,"in"),height:new j.i(14,"in")},ledger:{width:new j.i(11,"in"),height:new j.i(17,"in")}},Cn=new j.i(.24,"pt"),On=new j.i(3,"mm"),kn=new j.i(10,"mm"),Ln=new j.i(13,"mm");function Dn(t){var e={width:j.q,height:j.p,bleed:j.u,Mg:j.u},n=t.size;if(n&&n.value!==j.t.auto){var i=n.value,r=void 0,o=void 0;if(i.at()?(r=i.values[0],o=i.values[1]):(r=i,o=null),r.ot())e.width=r,e.height=o||r;else{var a=r.name&&xn[r.name.toLowerCase()];a&&(o&&o===j.t.landscape?(e.width=a.height,e.height=a.width):(e.width=a.width,e.height=a.height))}}var s=t.marks;s&&s.value!==j.t.none&&(e.Mg=Ln);var u=t.bleed;return u&&u.value!==j.t.auto?u.value&&u.value.ot()&&(e.bleed=u.value):s&&(s.value.at()?s.value.values.some(function(t){return t===j.t.crop}):s.value===j.t.crop)&&(e.bleed=new j.i(6,"pt")),e}function Rn(t,e){var n={},i=t.bleed.num*e.ft(t.bleed.unit,!1),r=t.Mg.num*e.ft(t.Mg.unit,!1),o=i+r,a=t.width;a===j.q?e.pref.defaultPaperSize?n.qt=e.pref.defaultPaperSize.width*e.ft("px",!1):n.qt=(e.pref.Xt?Math.floor(e.rn/2)-e.pref.pageBorder:e.rn)-2*o:n.qt=a.num*e.ft(a.unit,!1);var s=t.height;return s===j.p?e.pref.defaultPaperSize?n.Kt=e.pref.defaultPaperSize.height*e.ft("px",!1):n.Kt=e.en-2*o:n.Kt=s.num*e.ft(s.unit,!1),n.bleed=i,n.Mg=r,n.Ug=o,n}function Pn(t,e,n){var i=t.createElementNS(b.a.SVG,"svg");return i.setAttribute("width",e),i.setAttribute("height",n),i.style.position="absolute",i}function Mn(t,e,n){n=n||"polyline";var i=t.createElementNS(b.a.SVG,n);return i.setAttribute("stroke","black"),i.setAttribute("stroke-width",e),i.setAttribute("fill","none"),i}!function(t){t.TOP_LEFT="top left",t.TOP_RIGHT="top right",t.BOTTOM_LEFT="bottom left",t.BOTTOM_RIGHT="bottom right"}(An||(An={})),function(t){t.TOP="top",t.BOTTOM="bottom",t.LEFT="left",t.RIGHT="right"}(In||(In={}));var Fn,Un,Bn=(Fn={width:!0,height:!0,"block-size":!0,"inline-size":!0,margin:!0,padding:!0,border:!0,outline:!0,"outline-width":!0,"outline-style":!0,"outline-color":!0},["left","right","top","bottom","before","after","start","end","block-start","block-end","inline-start","inline-end"].forEach(function(t){Fn["margin-"+t]=!0,Fn["padding-"+t]=!0,Fn["border-"+t+"-width"]=!0,Fn["border-"+t+"-style"]=!0,Fn["border-"+t+"-color"]=!0}),Fn);!function(t){t.START="start",t.CENTER="center",t.END="end"}(Un||(Un={}));var zn,Hn,Gn={"top-left-corner":{order:1,Gg:!0,Bg:!1,zg:!0,Hg:!0,jg:null},"top-left":{order:2,Gg:!0,Bg:!1,zg:!1,Hg:!1,jg:Un.START},"top-center":{order:3,Gg:!0,Bg:!1,zg:!1,Hg:!1,jg:Un.CENTER},"top-right":{order:4,Gg:!0,Bg:!1,zg:!1,Hg:!1,jg:Un.END},"top-right-corner":{order:5,Gg:!0,Bg:!1,zg:!1,Hg:!0,jg:null},"right-top":{order:6,Gg:!1,Bg:!1,zg:!1,Hg:!0,jg:Un.START},"right-middle":{order:7,Gg:!1,Bg:!1,zg:!1,Hg:!0,jg:Un.CENTER},"right-bottom":{order:8,Gg:!1,Bg:!1,zg:!1,Hg:!0,jg:Un.END},"bottom-right-corner":{order:9,Gg:!1,Bg:!0,zg:!1,Hg:!0,jg:null},"bottom-right":{order:10,Gg:!1,Bg:!0,zg:!1,Hg:!1,jg:Un.END},"bottom-center":{order:11,Gg:!1,Bg:!0,zg:!1,Hg:!1,jg:Un.CENTER},"bottom-left":{order:12,Gg:!1,Bg:!0,zg:!1,Hg:!1,jg:Un.START},"bottom-left-corner":{order:13,Gg:!1,Bg:!0,zg:!0,Hg:!1,jg:null},"left-bottom":{order:14,Gg:!1,Bg:!1,zg:!0,Hg:!1,jg:Un.END},"left-middle":{order:15,Gg:!1,Bg:!1,zg:!0,Hg:!1,jg:Un.CENTER},"left-top":{order:16,Gg:!1,Bg:!1,zg:!0,Hg:!1,jg:Un.START}},Vn=(zn=Gn,Object.keys(zn).sort(function(t,e){return zn[t].order-zn[e].order})),Xn="vivliostyle-page-rule-master",jn="_marginBoxes",Wn=function(t){function e(e,n,i){var r=t.call(this,e,null,Xn,[],n,null,0)||this;r.Xg={};var o=Dn(i),a=new Yn(r.scope,r,i,o);return r.Vg=a.key,r.Yg(i),r.$g(i,o),r}return Sn(e,t),e.prototype.Yg=function(t){var e=t[jn];if(e){var n=this;Vn.forEach(function(i){e[i]&&(n.Xg[i]=new Kn(n.scope,n,i,t))})}},e.prototype.$g=function(t,e){for(var n in this.specified.position=new H.c(j.t.relative,0),this.specified.width=new H.c(e.width,0),this.specified.height=new H.c(e.height,0),t)Bn[n]||"background-clip"===n||(this.specified[n]=t[n])},e.prototype.Si=function(t){return new $n(t,this)},e}(Je),Yn=function(t){function e(e,n,i,r){var o=t.call(this,e,null,null,[],n)||this;return o.Wg=r,o.specified["z-index"]=new H.c(new j.g(0),0),o.$g(i),o}return Sn(e,t),e.prototype.$g=function(t){for(var e in this.specified["flow-from"]=new H.c(j.r("body"),0),this.specified.position=new H.c(j.t.absolute,0),this.specified.overflow=new H.c(j.t.visible,0),Bn)Bn.hasOwnProperty(e)&&(this.specified[e]=t[e])},e.prototype.Si=function(t){return new Jn(t,this)},e}(en),Kn=function(t){function e(e,n,i,r){var o=t.call(this,e,null,null,[],n)||this;return o.qg=i,o.$g(r),o}return Sn(e,t),e.prototype.$g=function(t){var e=t[jn][this.qg];for(var n in t){var i=t[n],r=e[n];(H.v[n]||r&&r.value===j.t.inherit)&&(this.specified[n]=i)}for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i=e[n])&&i.value!==j.t.inherit&&(this.specified[n]=i)},e.prototype.Si=function(t){return new ti(t,this)},e}(en),$n=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.Kg=null,i.Zg={},i}return Sn(e,t),e.prototype.Lg=function(e,n){var i=this.cascaded;for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r))switch(r){case"writing-mode":case"direction":i[r]=n[r]}t.prototype.Lg.call(this,e,n)},e.prototype.ag=function(){var t=this.style;t.left=j.u,t["margin-left"]=j.u,t["border-left-width"]=j.u,t["padding-left"]=j.u,t["padding-right"]=j.u,t["border-right-width"]=j.u,t["margin-right"]=j.u,t.right=j.u},e.prototype.fg=function(){var t=this.style;t.top=j.u,t["margin-top"]=j.u,t["border-top-width"]=j.u,t["padding-top"]=j.u,t["padding-bottom"]=j.u,t["border-bottom-width"]=j.u,t["margin-bottom"]=j.u,t.bottom=j.u},e.prototype.Qg=function(t){this.Kg=t;var e=this.style;e.width=new j.c(t.Jg),e.height=new j.c(t.tE),e["padding-left"]=new j.c(t.marginLeft),e["padding-right"]=new j.c(t.marginRight),e["padding-top"]=new j.c(t.marginTop),e["padding-bottom"]=new j.c(t.marginBottom)},e.prototype.Fg=function(t,e,n){var i=e.ne,r={start:this.Kg.marginLeft,end:this.Kg.marginRight,extent:this.Kg.Jg},o={start:this.Kg.marginTop,end:this.Kg.marginBottom,extent:this.Kg.tE};this.nE(i.top,!0,r,t,n),this.nE(i.bottom,!0,r,t,n),this.nE(i.left,!1,o,t,n),this.nE(i.right,!1,o,t,n)},e.prototype.nE=function(t,e,n,i,r){var o=Un.START,a=Un.CENTER,s=Un.END,u=this.$m.scope,l={},h={},c={};for(var p in t){var f=Gn[p];if(f){var d=t[p],v=this.Zg[p],g=new qn(d,v.style,e,u,r);l[f.jg]=d,h[f.jg]=v,c[f.jg]=g}}var m={start:n.start.evaluate(i),end:n.end.evaluate(i),extent:n.extent.evaluate(i)},y=this.iE(c,m.extent),b=!1,E={};Object.keys(l).forEach(function(t){var o=t,a=nn(u,h[o].style[e?"max-width":"max-height"],n.extent);if(a){var s=a.evaluate(i);if(y[o]>s){var p=c[o]=new Qn(l[o],h[o].style,e,u,r,s);E[o]=p.rE(),b=!0}}}),b&&(y=this.iE(c,m.extent),b=!1,[o,a,s].forEach(function(t){y[t]=E[t]||y[t]}));var w={};Object.keys(l).forEach(function(t){var o=t,a=nn(u,h[o].style[e?"min-width":"min-height"],n.extent);if(a){var s=a.evaluate(i);if(y[o]<s){var p=c[o]=new Qn(l[o],h[o].style,e,u,r,s);w[o]=p.rE(),b=!0}}}),b&&(y=this.iE(c,m.extent),[o,a,s].forEach(function(t){y[t]=w[t]||y[t]}));var T=m.start+m.extent,N=m.start+(m.start+m.extent);[o,a,s].forEach(function(t){var n=y[t];if(n){var i=l[t],r=0;switch(t){case o:r=e?i.left:i.top;break;case a:r=(N-n)/2;break;case s:r=T-n}e?i.Gs(r,n-i.xs()-i.ys()):i.Us(r,n-i.ks()-i._s())}})},e.prototype.iE=function(t,e){var n=t[Un.START],i=t[Un.CENTER],r=t[Un.END],o={};if(i){var a=[n,r].filter(function(t){return t}),s=a.length?new Zn(a):null,u=this.eE(i,s,e);u.xSize&&(o[Un.CENTER]=u.xSize);var l=(e-(u.xSize||i.rE()))/2;n&&n.sE()&&(o[Un.START]=l),r&&r.sE()&&(o[Un.END]=l)}else{var h=this.eE(n,r,e);h.xSize&&(o[Un.START]=h.xSize),h.ySize&&(o[Un.END]=h.ySize)}return o},e.prototype.eE=function(t,e,n){var i={xSize:null,ySize:null};if(t&&e)if(t.sE()&&e.sE()){var r=t.oE(),o=e.oE();if(r>0&&o>0){var a=r+o;if(a<n)i.xSize=n*r/a;else{var s=t.uE(),u=s+e.uE();u<n?i.xSize=s+(n-u)*(r-s)/(a-u):u>0&&(i.xSize=n*s/u)}i.xSize>0&&(i.ySize=n-i.xSize)}else r>0?i.xSize=n:o>0&&(i.ySize=n)}else t.sE()?i.xSize=Math.max(n-e.rE(),0):e.sE()&&(i.ySize=Math.max(n-t.rE(),0));else t?t.sE()&&(i.xSize=n):e&&e.sE()&&(i.ySize=n);return i},e.prototype.Rg=function(e,n,i,r,o){t.prototype.Rg.call(this,e,n,i,r,o),n.element.setAttribute("data-vivliostyle-page-box",!0)},e}(gn),qn=function(){function t(t,e,n,i,r){this.container=t,this.hE=n,this.eh=r,this.size=null,this.aE=!nn(i,e[n?"width":"height"],new L.x(i,0,"px"))}return t.prototype.sE=function(){return this.aE},t.prototype.fE=function(){if(!this.size){var t=this.hE?[Nn.a.MAX_CONTENT_WIDTH,Nn.a.MIN_CONTENT_WIDTH]:[Nn.a.MAX_CONTENT_HEIGHT,Nn.a.MIN_CONTENT_HEIGHT];this.size=Nn.b(this.eh,this.container.element,t)}return this.size},t.prototype.oE=function(){var t=this.fE();return this.hE?this.container.xs()+t[Nn.a.MAX_CONTENT_WIDTH]+this.container.ys():this.container.ks()+t[Nn.a.MAX_CONTENT_HEIGHT]+this.container._s()},t.prototype.uE=function(){var t=this.fE();return this.hE?this.container.xs()+t[Nn.a.MIN_CONTENT_WIDTH]+this.container.ys():this.container.ks()+t[Nn.a.MIN_CONTENT_HEIGHT]+this.container._s()},t.prototype.rE=function(){return this.hE?this.container.xs()+this.container.width+this.container.ys():this.container.ks()+this.container.height+this.container._s()},t}(),Zn=function(){function t(t){this.params=t}return t.prototype.sE=function(){return this.params.some(function(t){return t.sE()})},t.prototype.oE=function(){var t=this.params.map(function(t){return t.oE()});return Math.max.apply(null,t)*t.length},t.prototype.uE=function(){var t=this.params.map(function(t){return t.uE()});return Math.max.apply(null,t)*t.length},t.prototype.rE=function(){var t=this.params.map(function(t){return t.rE()});return Math.max.apply(null,t)*t.length},t}(),Qn=function(t){function e(e,n,i,r,o,a){var s=t.call(this,e,n,i,r,o)||this;return s.cE=a,s}return Sn(e,t),e.prototype.sE=function(){return!1},e.prototype.oE=function(){return this.rE()},e.prototype.uE=function(){return this.rE()},e.prototype.rE=function(){return this.hE?this.container.xs()+this.cE+this.container.ys():this.container.ks()+this.cE+this.container._s()},e}(qn),Jn=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.Jg=null,i.tE=null,i.marginTop=null,i.marginRight=null,i.marginBottom=null,i.marginLeft=null,i}return Sn(e,t),e.prototype.Lg=function(e,n){var i=this.cascaded;for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(r.match(/^column.*$/)||r.match(/^background-/))&&(i[r]=n[r]);t.prototype.Lg.call(this,e,n),this.Ym.Qg({Jg:this.Jg,tE:this.tE,marginTop:this.marginTop,marginRight:this.marginRight,marginBottom:this.marginBottom,marginLeft:this.marginLeft})},e.prototype.ag=function(){var t=this.lE({start:"left",end:"right",extent:"width"});this.Jg=t.vE,this.marginLeft=t.dE,this.marginRight=t.pE},e.prototype.fg=function(){var t=this.lE({start:"top",end:"bottom",extent:"height"});this.tE=t.vE,this.marginTop=t.dE,this.marginBottom=t.pE},e.prototype.lE=function(t){var e=this.style,n=this.$m.Wg,i=this.$m.scope,r=t.start,o=t.end,a=t.extent,s=n[a].et(i,null),u=nn(i,e[a],s),l=nn(i,e["margin-"+r],s),h=nn(i,e["margin-"+o],s),c=rn(i,e["padding-"+r],s),p=rn(i,e["padding-"+o],s),f=an(i,e["border-"+r+"-width"],e["border-"+r+"-style"],s),d=an(i,e["border-"+o+"-width"],e["border-"+o+"-style"],s),v=L.P(i,s,L.C(i,L.C(i,f,c),L.C(i,d,p)));return u?(v=L.P(i,v,u),l||h?l?h=L.P(i,v,l):l=L.P(i,v,h):h=l=L.N(i,v,new L.f(i,.5))):(l||(l=i.zero),h||(h=i.zero),u=L.P(i,v,L.C(i,l,h))),e[r]=new j.c(l),e[o]=new j.c(h),e["margin-"+r]=j.u,e["margin-"+o]=j.u,e["padding-"+r]=new j.c(c),e["padding-"+o]=new j.c(p),e["border-"+r+"-width"]=new j.c(f),e["border-"+o+"-width"]=new j.c(d),e[a]=new j.c(u),e["max-"+a]=new j.c(u),{vE:L.P(i,s,L.C(i,l,h)),dE:l,pE:h}},e.prototype.Rg=function(e,n,i,r,o){t.prototype.Rg.call(this,e,n,i,r,o),i.$r=n.element,e.hn=parseFloat(i.$r.style.width),e.an=parseFloat(i.$r.style.height)},e}(yn),ti=function(t){function e(e,n){var i=t.call(this,e,n)||this;i.sg=!0;var r=n.qg;return i.bE=Gn[r],e.Zg[r]=i,i}return Sn(e,t),e.prototype.Rg=function(e,n,i,r,o){this.wE(e,n.element),t.prototype.Rg.call(this,e,n,i,r,o)},e.prototype.wE=function(t,e){b.F(e,"display","flex");var n=this.dg(t,"vertical-align"),i=null;n===j.r("middle")?i="center":n===j.r("top")?i="flex-start":n===j.r("bottom")&&(i="flex-end"),i&&(b.F(e,"flex-flow",this.vertical?"row":"column"),b.F(e,"justify-content",i))},e.prototype.jg=function(t,e){var n=this.style,i=this.$m.scope,r=t.start,o=t.end,a=t.extent,s="left"===r,u=s?e.Jg:e.tE,l=nn(i,n[a],u),h=s?e.marginLeft:e.marginTop;if(this.bE.jg===Un.START)n[r]=new j.c(h);else if(l){var c=rn(i,n["margin-"+r],u),p=rn(i,n["margin-"+o],u),f=rn(i,n["padding-"+r],u),d=rn(i,n["padding-"+o],u),v=an(i,n["border-"+r+"-width"],n["border-"+r+"-style"],u),g=an(i,n["border-"+o+"-width"],n["border-"+o+"-style"],u),m=L.C(i,l,L.C(i,L.C(i,f,d),L.C(i,L.C(i,v,g),L.C(i,c,p))));switch(this.bE.jg){case Un.CENTER:n[r]=new j.c(L.C(i,h,L.H(i,L.P(i,u,m),new L.f(i,2))));break;case Un.END:n[r]=new j.c(L.P(i,L.C(i,h,u),m))}}},e.prototype.mE=function(t,e){var n=this.style,i=this.$m.scope,r=t.inside,o=t.outside,a=t.extent,s=e["margin"+o.charAt(0).toUpperCase()+o.substring(1)],u=on(i,n["margin-"+r],s),l=on(i,n["margin-"+o],s),h=rn(i,n["padding-"+r],s),c=rn(i,n["padding-"+o],s),p=an(i,n["border-"+r+"-width"],n["border-"+r+"-style"],s),f=an(i,n["border-"+o+"-width"],n["border-"+o+"-style"],s),d=nn(i,n[a],s),v=null;function g(t){if(v)return v;v={extent:d?d.evaluate(t):null,gE:u?u.evaluate(t):null,EE:l?l.evaluate(t):null};var e=s.evaluate(t),n=0;return[p,h,c,f].forEach(function(e){e&&(n+=e.evaluate(t))}),(null===v.gE||null===v.EE)&&n+v.extent+v.gE+v.EE>e&&(null===v.gE&&(v.gE=0),null===v.EE&&(v.EE=0)),null!==v.extent&&null!==v.gE&&null!==v.EE&&(v.EE=null),null===v.extent&&null!==v.gE&&null!==v.EE?v.extent=e-n-v.gE-v.EE:null!==v.extent&&null===v.gE&&null!==v.EE?v.gE=e-n-v.extent-v.EE:null!==v.extent&&null!==v.gE&&null===v.EE?v.EE=e-n-v.extent-v.gE:null===v.extent?(v.gE=v.EE=0,v.extent=e-n):v.gE=v.EE=(e-n-v.extent)/2,v}n[a]=new j.c(new L.t(i,function(){var t=g(this).extent;return null===t?0:t},a)),n["margin-"+r]=new j.c(new L.t(i,function(){var t=g(this).gE;return null===t?0:t},"margin-"+r)),n["margin-"+o]=new j.c(new L.t(i,function(){var t=g(this).EE;return null===t?0:t},"margin-"+o)),"left"===r?n.left=new j.c(L.C(i,e.marginLeft,e.Jg)):"top"===r&&(n.top=new j.c(L.C(i,e.marginTop,e.tE)))},e.prototype.ag=function(){var t=this.Ym.Kg;this.bE.zg?this.mE({inside:"right",outside:"left",extent:"width"},t):this.bE.Hg?this.mE({inside:"left",outside:"right",extent:"width"},t):this.jg({start:"left",end:"right",extent:"width"},t)},e.prototype.fg=function(){var t=this.Ym.Kg;this.bE.Gg?this.mE({inside:"bottom",outside:"top",extent:"height"},t):this.bE.Bg?this.mE({inside:"top",outside:"bottom",extent:"height"},t):this.jg({start:"top",end:"bottom",extent:"height"},t)},e.prototype.Ig=function(e,n,i,r,o,a,s){t.prototype.Ig.call(this,e,n,i,r,o,a,s);var u=i.ne,l=this.$m.qg,h=this.bE;h.zg||h.Hg?h.Gg||h.Bg||(h.zg?u.left[l]=n:h.Hg&&(u.right[l]=n)):h.Gg?u.top[l]=n:h.Bg&&(u.bottom[l]=n)},e}(yn),ei=function(){function t(t,e,n,i,r){this.kE=t,this.Zl=e,this._E=n,this.context=i,this.xE=r,this.yE={},this.TE()}return t.prototype.TE=function(){var t=this.Zl,e=new L.s(t,"page-number"),n=new L.i(t,new L.q(t,e,new L.f(t,2)),t.zero);t.Qt("recto-page",new L.w(t,n)),t.Qt("verso-page",n),(this.context.NE||_n(this.xE))===i.LTR?(t.Qt("left-page",n),t.Qt("right-page",new L.w(t,n))):(t.Qt("left-page",new L.w(t,n)),t.Qt("right-page",n))},t.prototype.SE=function(){var t={};return this.kE.ji([],"",t),this.kE.Ji(),t},t.prototype.AE=function(t,e){var n=t.$m;if(0===Object.keys(e).length)return n.Vm(),t;var i=this.RE(e,n),r=this.yE[i];return r||(r=n.Mm===dn?this.CE(e):this.OE(e,n),this.yE[i]=r),r.$m.Vm(),r},t.prototype.RE=function(t,e){var n=this.IE(t);return e.key+"^"+n},t.prototype.IE=function(t){var e=[];for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var i,r=t[n];i=r instanceof H.c?""+r.value:this.IE(r),e.push(n+i+(r.priority||""))}return e.sort().join("^")},t.prototype.CE=function(t){var e=new Wn(this.Zl,this._E.$m,t).Si(this._E);return e.Lg(this.kE,this.xE),e.Pg(this.context),e},t.prototype.OE=function(t,e){var n=e.clone({Mm:Xn}),i=n.specified,r=t.size;if(r){var o=Dn(t),a=r.priority;i.width=H.i(this.context,i.width,new H.c(o.width,a)),i.height=H.i(this.context,i.height,new H.c(o.height,a))}["counter-reset","counter-increment"].forEach(function(e){i[e]&&(t[e]=i[e])});var s=n.Si(this._E);return s.Lg(this.kE,this.xE),s.Pg(this.context),s},t}(),ni=function(t){function e(e){var n=t.call(this)||this;return n.LE=e,n}return Sn(e,t),e.prototype.apply=function(t){t.Li===this.LE&&this.chained.apply(t)},e.prototype.Sn=function(){return 3},e.prototype.Xn=function(t){return this.chained&&t.Yn(t.pagetypes,this.LE,this.chained),!0},e}(H.d),ii=function(t){function e(e){var n=t.call(this)||this;return n.scope=e,n}return Sn(e,t),e.prototype.apply=function(t){1===new L.s(this.scope,"page-number").evaluate(t.context)&&this.chained.apply(t)},e.prototype.Sn=function(){return 2},e}(H.d),ri=function(t){function e(e){var n=t.call(this)||this;return n.scope=e,n}return Sn(e,t),e.prototype.apply=function(t){new L.s(this.scope,"left-page").evaluate(t.context)&&this.chained.apply(t)},e.prototype.Sn=function(){return 1},e}(H.d),oi=function(t){function e(e){var n=t.call(this)||this;return n.scope=e,n}return Sn(e,t),e.prototype.apply=function(t){new L.s(this.scope,"right-page").evaluate(t.context)&&this.chained.apply(t)},e.prototype.Sn=function(){return 1},e}(H.d),ai=function(t){function e(e){var n=t.call(this)||this;return n.scope=e,n}return Sn(e,t),e.prototype.apply=function(t){new L.s(this.scope,"recto-page").evaluate(t.context)&&this.chained.apply(t)},e.prototype.Sn=function(){return 1},e}(H.d),si=function(t){function e(e){var n=t.call(this)||this;return n.scope=e,n}return Sn(e,t),e.prototype.apply=function(t){new L.s(this.scope,"verso-page").evaluate(t.context)&&this.chained.apply(t)},e.prototype.Sn=function(){return 1},e}(H.d),ui=function(t){function e(e,n){return t.call(this,e,n,null,null,null)||this}return Sn(e,t),e.prototype.apply=function(t){!function(t,e,n,i,r){H.B(t,e,n,i,null,null,null);var o=n[jn];if(o){var a=H.q(e,jn);for(var s in o)if(o.hasOwnProperty(s)){var u=a[s];u||(u={},a[s]=u),H.B(t,u,o[s],i,null,null,null)}}}(t.context,t.currentStyle,this.style,this.specificity)},e}(H.a),li=function(t){function e(e,n,i,r,o){var a=t.call(this,e,n,null,i,null,r,!1)||this;return a.PE=o,a.FE=[],a.DE="",a.ME=[],a}return Sn(e,t),e.prototype.oo=function(){this.xr()},e.prototype.cr=function(t,e){y.a(e),this.DE=e,e&&(this.chain.push(new ni(e)),this.specificity+=65536)},e.prototype.vr=function(t,e){switch(e&&this.ar("E_INVALID_PAGE_SELECTOR :"+t+"("+e.join("")+")"),this.ME.push(":"+t),t.toLowerCase()){case"first":this.chain.push(new ii(this.scope)),this.specificity+=256;break;case"left":this.chain.push(new ri(this.scope)),this.specificity+=1;break;case"right":this.chain.push(new oi(this.scope)),this.specificity+=1;break;case"recto":this.chain.push(new ai(this.scope)),this.specificity+=1;break;case"verso":this.chain.push(new si(this.scope)),this.specificity+=1;break;default:this.ar("E_INVALID_PAGE_SELECTOR :"+t)}},e.prototype.UE=function(){var t;t=this.DE||this.ME.length?[this.DE].concat(this.ME.sort()):null,this.FE.push({selectors:t,specificity:this.specificity}),this.DE="",this.ME=[]},e.prototype.kr=function(){this.UE(),t.prototype.kr.call(this)},e.prototype.Tr=function(){this.UE(),t.prototype.Tr.call(this)},e.prototype.Ir=function(e,n,i){var r=this;if("bleed"!==e&&"marks"!==e||this.FE.some(function(t){return null===t.selectors})){t.prototype.Ir.call(this,e,n,i);var o=H.s(this.rr,e),a=this.PE;if("bleed"===e||"marks"===e)a[""]||(a[""]={}),Object.keys(a).forEach(function(t){H.F(a[t],e,o)});else if("size"===e){var s=a[""];this.FE.forEach(function(t){var n=new H.c(o.value,o.priority+t.specificity),i=t.selectors?t.selectors.join(""):"",u=a[i];if(u){var l=H.s(u,e);n=l?H.i(null,n,l):n,H.F(u,e,n)}else u=a[i]={},H.F(u,e,n),s&&["bleed","marks"].forEach(function(t){s[t]&&H.F(u,t,s[t])},r)})}}},e.prototype.or=function(t){this.cascade.Yn(this.cascade.pagetypes,"*",t)},e.prototype.Ar=function(t){return new ui(this.rr,t)},e.prototype.uo=function(t){var e=H.q(this.rr,jn),n=e[t];n||(n={},e[t]=n);var i=new hi(this.scope,this.owner,this.ir,n);this.owner.Dr(i)},e}(H.b),hi=function(t){function e(e,n,i,r){var o=t.call(this,e,n,!1)||this;return o.ir=i,o.GE=r,o}return Sn(e,t),e.prototype.property=function(t,e,n){this.ir.Rr(t,e,n,this)},e.prototype.Cr=function(t,e){this.report("E_INVALID_PROPERTY_VALUE "+t+": "+e.toString())},e.prototype.Or=function(t,e){this.report("E_INVALID_PROPERTY "+t+": "+e.toString())},e.prototype.Ir=function(t,e,n){var i=n?this.Lr():this.Pr(),r=new H.c(e,i);H.F(this.GE,t,r)},e}(G.f),ci=n(27),pi=n(25),fi=n(21),di=function(t,e,n){return t.replace(/[uU][rR][lL]\(\s*"((\\([^0-9a-fA-F]+|[0-9a-fA-F]+\s*)|[^"\r\n])+)"/gm,function(t,i){return'url("'+n.sa(i,e)+'"'}).replace(/[uU][rR][lL]\(\s*'((\\([^0-9a-fA-F]+|[0-9a-fA-F]+\s*)|[^'\r\n])+)'/gm,function(t,i){return"url('"+n.sa(i,e)+"'"}).replace(/[uU][rR][lL]\(\s*((\\([^0-9a-fA-F]+|[0-9a-fA-F]+\s*)|[^"'\r\n\)\s])+)/gm,function(t,i){return"url("+n.sa(i,e)})},vi=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),gi={},mi={"text-indent":"0px","margin-top":"0px","padding-top":"0px","border-top-width":"0px","border-top-style":"none","border-top-color":"transparent","border-top-left-radius":"0px","border-top-right-radius":"0px"},yi={"text-indent":"0px","margin-right":"0px","padding-right":"0px","border-right-width":"0px","border-right-style":"none","border-right-color":"transparent","border-top-right-radius":"0px","border-bottom-right-radius":"0px"},bi={"margin-top":"0px"},Ei={"margin-right":"0px"},wi=function(t){function e(e,n,i,r,o,a,s,u,l,h,c,p,f){var d=t.call(this)||this;return d.ae=e,d.context=n,d.viewport=i,d.styler=r,d.BE=o,d.xmldoc=a,d.zE=s,d.HE=u,d.jE=l,d.page=h,d.XE=c,d.VE=p,d.Wl=f,d.Aa=null,d.YE=null,d.Yf=!1,d.ke=null,d.me=0,d.Le=null,d.document=i.document,d.qs=r.Ri.Kl(),d}return vi(e,t),e.prototype.clone=function(){return new e(this.ae,this.context,this.viewport,this.styler,this.BE,this.xmldoc,this.zE,this.HE,this.jE,this.page,this.XE,this.VE,this.Wl)},e.prototype.$E=function(t,e,n,i,r,o,a,s){var u=this.WE(n,this.BE,this.Yf,this.Aa,o);if(!u)return s;for(var l=[],h=fi.c.createElementNS(b.a.SHADOW,"root"),c=h,p=0,f=fi.e;p<f.length;p++){var d=f[p],v=void 0;if(d){if(!u[d])continue;if(!("footnote-marker"!=d||e&&this.Yf))continue;if(d.match(/^first-/)){var g=i.display;if(!g||g===j.t.inline)continue}if("before"===d||"after"===d){var m=u[d].content;if(!m||m===j.t.normal||m===j.t.none)continue}l.push(d),v=fi.c.createElementNS(b.a.XHTML,"span"),fi.f(v,d)}else v=fi.c.createElementNS(b.a.SHADOW,"content");c.appendChild(v),d.match(/^first-/)&&(c=v)}if(!l.length)return s;var y=new fi.b(t,n,r,o,this.qs);return new K.n(t,h,null,a,s,K.o.ROOTLESS,y)},e.prototype.WE=function(t,e,n,i,r){var o=H.u(t,"_pseudos");if(!o)return null;var a={},s=function(t){var i=a[t]={};H.C(i,o[t],r),H.D(i,r,o[t]),H.o(o[t],e,n,function(t,e){H.C(i,e,r),H.p(e,function(t){H.C(i,t,r)})})};for(var u in o)s(u);return a},e.prototype.qE=function(t,e,n,i,r){var o=this,a=Y.c("createRefShadow");return o.xmldoc.store.load(t).then(function(s){var u=s;if(u){var l=u.KE(t);if(l){var h=o.jE.ZE(u);r=new K.n(n,l,u,i,r,e,h)}}a.finish(r)}),a.result()},e.prototype.QE=function(t,e,n,i,r,o,a){var s,u=this,l=Y.c("createShadows"),h=i.template;if(h instanceof j.l){var c=h.url;s=u.qE(c,K.o.ROOTLESS,t,a,null)}else s=Y.d(null);return s.then(function(s){var h=null;if(t.namespaceURI==b.a.SHADOW&&"include"==t.localName){var c=t.getAttribute("href"),p=null;c?p=a?a.xmldoc:u.xmldoc:a&&(c=a.owner.namespaceURI==b.a.XHTML?a.owner.getAttribute("href"):a.owner.getAttributeNS(b.a.XLINK,"href"),p=a._e?a._e.xmldoc:u.xmldoc),c&&(c=b.C(c,p.url),h=u.qE(c,K.o.ROOTED,t,a,s))}null==h&&(h=Y.d(s));var f=null;h.then(function(e){if(i.display===j.t.table_cell){var n=b.C("user-agent.xml#table-cell",b.D);f=u.qE(n,K.o.ROOTLESS,t,a,e)}else f=Y.d(e)}),f.then(function(s){s=u.$E(t,e,n,i,r,o,a,s),l.finish(s)})}),l.result()},e.prototype.cc=function(t,e){this.YE=t,this.Yf=e},e.prototype.JE=function(t,e,n,i){var r=this.context,o=H.n(n,r,this.BE,this.Yf,this.Aa);t=H.z(o,r,t),e=H.y(o,r,e);var a=this;H.k(o,i,t,e,function(t,e){var n=e.evaluate(r,t);return"font-family"==t&&(n=a.zE.Rm(n)),n});var s=i.position,u=i.float,l=ae.c(i.display||j.t.inline,s,u,this.ke===this.xmldoc.root);return["display","position","float"].forEach(function(t){l[t]&&(i[t]=l[t])}),t},e.prototype.tk=function(t){for(var e=this.Aa.ke,n=[],i=null,r=this.Aa.pe,o=-1;e&&1==e.nodeType;){var a=r&&r.root==e;if(!a||r.type==K.o.ROOTLESS){var s=(r?r.styler:this.styler).ua(e,!1);n.push(s),i=i||b.u(e)}a?(e=r.owner,r=r._e):(e=e.parentNode,o++)}for(var u=0===o,l=this.context.ft("em",u),h={"font-size":new H.c(new j.i(l,"px"),0)},c=new H.g(h,this.context),p=n.length-1;p>=0;--p){var f=n[p],d=[];for(var v in f)H.w(v)&&d.push(v);d.sort(j.v);for(var g=0,m=d;g<m.length;g++){var y=m[g];c.Mn(y);var E=H.s(f,y);E.value!==j.t.inherit&&(h[y]=E.Ln(c))}}for(var w in t)H.w(w)||(h[w]=t[w]);return{lang:i,rr:h}},e.prototype.nk=function(t){return t=b.C(t,this.xmldoc.url),this.VE[t]||t},e.prototype.ik=function(){this.Aa.lang=b.u(this.Aa.ke)||this.Aa.parent&&this.Aa.parent.lang||this.Aa.lang},e.prototype.rk=function(t){var e=H.r().filter(function(e){return t[e]});if(e.length){var n=this.Aa.je;if(this.Aa.parent)for(var i in n=this.Aa.je={},this.Aa.parent.je)n[i]=this.Aa.parent.je[i];e.forEach(function(e){var i=t[e];if(i){if(i instanceof j.g)n[e]=i.num;else if(i instanceof j.f)n[e]=i.name;else if(i instanceof j.i){var r=i;switch(r.unit){case"dpi":case"dpcm":case"dppx":n[e]=r.num*L.G[r.unit]}}else n[e]=i;delete t[e]}})}},e.prototype.ek=function(t,e,n,i,r,o){for(var a=u.b(u.a.RESOLVE_FORMATTING_CONTEXT),s=0;s<a.length;s++){var l=a[s](t,e,n,i,r,o);if(l)return void(t.le=l)}},e.prototype.sk=function(t,e){var n=this,i=!0,r=Y.c("createElementView"),o=n.ke,a=n.Aa.pe?n.Aa.pe.styler:n.styler,s=a.ua(o,!1);if(!n.Aa.pe){var u=this.xmldoc.Lp(o);pi.b.pf(u,n.Aa.ge,0)}var l={};if(!n.Aa.parent){var h=n.tk(s);s=h.rr,n.Aa.lang=h.lang}var c=s["float-reference"]&&W.g(s["float-reference"].value.toString());n.Aa.parent&&c&&W.h(c)&&(h=n.tk(s),s=h.rr,n.Aa.lang=h.lang),n.Aa.vertical=n.JE(n.Aa.vertical,"rtl"===n.Aa.direction,s,l),a.ha(o,l),this.rk(l),this.ik(),l.direction&&(n.Aa.direction=l.direction.toString());var p=l["flow-into"];if(p&&p.toString()!=n.ae)return r.finish(!1),r.result();var f=l.display;if(f===j.t.none)return r.finish(!1),r.result();var d=null==n.Aa.parent;return n.Aa.Ce=f===j.t.flex,n.QE(o,d,s,l,a,n.context,n.Aa.pe).then(function(u){n.Aa.be=u;var h=l.position,p=l.float,v=l.clear,g=n.Aa.vertical?j.t.vertical_rl:j.t.horizontal_tb,m=n.Aa.parent?n.Aa.parent.vertical?j.t.vertical_rl:j.t.horizontal_tb:g,y=ae.e(o);n.Aa.Oe=ae.a(f,h,p,l.overflow,g,m,y),n.Aa.Ie=ae.b(h),!n.Aa.qe()||p===j.t.footnote||c&&W.h(c)||(p=null,v=null);var E=p===j.t.left||p===j.t.right||p===j.t.top||p===j.t.bottom||p===j.t.inline_start||p===j.t.inline_end||p===j.t.block_start||p===j.t.block_end||p===j.t.snap_block||p===j.t.footnote;p&&(delete l.float,p===j.t.footnote&&(n.Yf?(E=!1,l.display=j.t.block):l.display=j.t.inline)),v&&(v===j.t.inherit&&n.Aa.parent&&n.Aa.parent.Ne&&(v=j.r(n.Aa.parent.Ne)),v!==j.t.left&&v!==j.t.right&&v!==j.t.top&&v!==j.t.bottom&&v!==j.t.both&&v!==j.t.all&&v!==j.t.same||(delete l.clear,l.display&&l.display!=j.t.inline&&(n.Aa.Ne=v.toString())));var w=f===j.t.list_item&&l["ua-list-item-count"];if((E||l["break-inside"]&&l["break-inside"]!==j.t.auto)&&n.Aa.Ge++,f&&f!==j.t.inline&&ae.f(f)&&n.Aa.Ge++,n.Aa.inline=!E&&!f||ae.f(f)||ae.g(f),n.Aa.display=f?f.toString():"inline",n.Aa.Te=E?p.toString():null,n.Aa.Be=c||W.a.INLINE,n.Aa.Se=l["float-min-wrap-block"]||null,n.Aa.columnSpan=l["column-span"],!n.Aa.inline){var T=l["break-after"];T&&(n.Aa.breakAfter=T.toString());var N=l["break-before"];N&&(n.Aa.breakBefore=N.toString())}n.Aa.verticalAlign=l["vertical-align"]&&l["vertical-align"].toString()||"baseline",n.Aa.captionSide=l["caption-side"]&&l["caption-side"].toString()||"top";var S=l["border-collapse"];if(!S||S===j.r("separate")){var _=l["border-spacing"],A=void 0,I=void 0;_&&(_.at()?(A=_.values[0],I=_.values[1]):A=I=_,A.ot()&&(n.Aa.Ae=j.x(A,n.context)),I.ot()&&(n.Aa.Re=j.x(I,n.context)))}n.Aa.Ue=l["footnote-policy"];var x=l["x-first-pseudo"];if(x){var C=n.Aa.parent?n.Aa.parent.Xe:null;n.Aa.Xe=new K.e(C,x.num)}n.Aa.inline||n.uk(o,s,a,n.context);var O=l["white-space"];if(O){var k=K.z(O.toString());null!==k&&(n.Aa.whitespace=k)}var L=l["hyphenate-character"];L&&L!==j.t.auto&&(n.Aa.ze=L.str);var D=l["word-break"],R=l["overflow-wrap"]||["word-wrap"];n.Aa.He=D===j.t.break_all||R===j.t.break_word,n.ek(n.Aa,t,f,h,p,d),n.Aa.parent&&n.Aa.parent.le&&(t=n.Aa.parent.le.Qh(n.Aa,t)),n.Aa.inline||(n.Aa.Fe=n.hk(l),n.ak(o,a));var P,M=!1,F=null,U=[],B=o.namespaceURI,z=o.localName;if(B==b.a.XHTML)"html"==z||"body"==z||"script"==z||"link"==z||"meta"==z?z="div":"vide_"==z?z="video":"audi_"==z?z="audio":"object"==z&&(M=!!n.XE),o.getAttribute(fi.a)&&s.content&&s.content.value&&s.content.value.url&&(z="img");else if(B==b.a.epub)z="span",B=b.a.XHTML;else if(B==b.a.FB2){if(B=b.a.XHTML,"image"==z){z="div";var H=o.getAttributeNS(b.a.XLINK,"href");if(H&&"#"==H.charAt(0)){var G=n.xmldoc.KE(H);if(G){F=n.createElement(B,"img");var V="data:"+(G.getAttribute("content-type")||"image/jpeg")+";base64,"+G.textContent.replace(/[ \t\n\t]/g,"");U.push(Be.b(F,V))}}}else z=Ti[z];z||(z=n.Aa.inline?"span":"div")}else if(B==b.a.NCX)if(B=b.a.XHTML,"ncx"==z||"navPoint"==z)z="div";else if("navLabel"==z){z="span";var X=o.parentNode;if(X){for(var $=null,q=X.firstChild;q;q=q.nextSibling)if(1==q.nodeType){var Z=q;if(Z.namespaceURI==b.a.NCX&&"content"==Z.localName){$=Z.getAttribute("src");break}}$&&(z="a",(o=o.ownerDocument.createElementNS(B,"a")).setAttribute("href",$))}}else z="span";else B==b.a.SHADOW?(B=b.a.XHTML,z=n.Aa.inline?"span":"div"):M=!!n.XE;if(w)t?z="li":(z="div",f=j.t.block,l.display=f);else if("body"==z||"li"==z)z="div";else if("q"==z)z="span";else if("a"==z){var Q=l["hyperlink-processing"];Q&&"normal"!=Q.toString()&&(z="span")}if(l.behavior&&"none"!=l.behavior.toString()&&n.XE&&(M=!0),o.dataset&&"true"===o.getAttribute("data-math-typeset")&&(M=!0),M){var J=n.Aa.parent?n.Aa.parent.Le:null;P=n.XE(o,J,l)}else P=Y.d(null);P.then(function(a){var s;a?M&&(i="true"==a.getAttribute("data-adapt-process-children")):a=n.createElement(B,z),"a"==z&&a.addEventListener("click",n.page.ie,!1),F&&(n.Bc(n.Aa,"inner",F),a.appendChild(F)),"iframe"==a.localName&&a.namespaceURI==b.a.XHTML&&(s=a).addEventListener("load",function(){s.contentWindow.navigator.epubReadingSystem={name:"adapt",version:"0.1",layoutStyle:"paginated",hasFeature:function(t,e){switch(t){case"mouse-events":return!0}return!1}}},!1);var u=n.Aa.je["image-resolution"],h=[],c=l.width,p=l.height,f=o.getAttribute("width"),d=o.getAttribute("height"),v=c===j.t.auto||!c&&!f,g=p===j.t.auto||!p&&!d;if(o.namespaceURI!=b.a.FB2||"td"==z){for(var m=o.attributes,y=m.length,E=null,T=0;T<y;T++){var N=m[T],S=N.namespaceURI,_=N.localName,A=N.nodeValue;if(S){if("http://www.w3.org/2000/xmlns/"==S)continue;S==b.a.XLINK&&"href"==_&&(A=n.nk(A))}else{if(_.match(/^on/))continue;if("style"==_)continue;if(("id"==_||"name"==_)&&t){A=n.Wl.$l(A,n.xmldoc.url),a.setAttribute(_,A),n.page.oe(a,A);continue}if("src"==_||"href"==_||"poster"==_?(A=n.nk(A),"href"===_&&(A=n.Wl.sa(A,n.xmldoc.url))):"srcset"==_&&(A=A.split(",").map(function(t){return n.nk(t.trim())}).join(",")),"poster"===_&&"video"===z&&B===b.a.XHTML&&v&&g){var I=new Image,x=Be.b(I,A);U.push(x),h.push({image:I,element:a,fetcher:x})}}if(B==b.a.SVG&&/^[A-Z\-]+$/.test(_)&&(_=_.toLowerCase()),n.fk(_)&&(A=di(A,n.xmldoc.url,n.Wl)),S){var C=gi[S];C&&(_=C+":"+_)}"src"!=_||S||"img"!=z&&"input"!=z||B!=b.a.XHTML?"href"==_&&"image"==z&&B==b.a.SVG&&S==b.a.XLINK?n.page.fetchers.push(Be.b(a,A)):S?a.setAttributeNS(S,_,A):a.setAttribute(_,A):E=A}if(E){I="input"===z?new Image:a;var O=Be.b(I,E);I!==a&&(a.src=E),v||g?(v&&g&&u&&1!==u&&h.push({image:I,element:a,fetcher:O}),U.push(O)):n.page.fetchers.push(O)}}delete l.content;var k=l["list-style-image"];if(k&&k instanceof j.l){var L=k.url;U.push(Be.b(new Image,L))}if(n.ck(l),n.lk(a,l),!n.Aa.inline){var D=null;if(t?e&&(D=n.Aa.vertical?Ei:bi):D="clone"!==n.Aa.je["box-decoration-break"]?n.Aa.vertical?yi:mi:n.Aa.vertical?Ei:bi,D)for(var R in D)b.F(a,R,D[R])}w&&a.setAttribute("value",l["ua-list-item-count"].stringValue()),n.Le=a,U.length?Be.c(U).then(function(){u>0&&n.vk(h,u,l,n.Aa.vertical),r.finish(i)}):r.Gt().then(function(){r.finish(i)})})}),r.result()},e.prototype.uk=function(t,e,n,i){var r=this.WE(e,this.BE,this.Yf,this.Aa,i);if(r&&r["after-if-continues"]&&r["after-if-continues"].content){var o=new fi.b(t,e,n,i,this.qs);this.Aa.Me=new at.a(t,o)}},e.prototype.fk=function(t){return e.SVG_URL_ATTRIBUTES.includes(t.toLowerCase())},e.prototype.vk=function(t,e,n,i){var r=this;t.forEach(function(t){if("load"===t.fetcher.get().get()){var o=t.image,a=o.width/e,s=o.height/e,u=t.element;if(a>0&&s>0)if(n["box-sizing"]===j.t.border_box&&(n["border-left-style"]!==j.t.none&&(a+=j.x(n["border-left-width"],r.context)),n["border-right-style"]!==j.t.none&&(a+=j.x(n["border-right-width"],r.context)),n["border-top-style"]!==j.t.none&&(s+=j.x(n["border-top-width"],r.context)),n["border-bottom-style"]!==j.t.none&&(s+=j.x(n["border-bottom-width"],r.context))),e>1){var l=n["max-width"]||j.t.none,h=n["max-height"]||j.t.none;if(l===j.t.none&&h===j.t.none)b.F(u,"max-width",a+"px");else if(l!==j.t.none&&h===j.t.none)b.F(u,"width",a+"px");else if(l===j.t.none&&h!==j.t.none)b.F(u,"height",s+"px");else{y.a(l.ot()),y.a(h.ot());var c=l,p=h;"%"!==c.unit?b.F(u,"max-width",Math.min(a,j.x(c,r.context))+"px"):"%"!==p.unit?b.F(u,"max-height",Math.min(s,j.x(p,r.context))+"px"):i?b.F(u,"height",s+"px"):b.F(u,"width",a+"px")}}else if(e<1){var f=n["min-width"]||j.u,d=n["min-height"]||j.u;y.a(f.ot()),y.a(f.ot());var v=f,g=d;0===v.num&&0===g.num?b.F(u,"min-width",a+"px"):0!==v.num&&0===g.num?b.F(u,"width",a+"px"):0===v.num&&0!==g.num?b.F(u,"height",s+"px"):"%"!==v.unit?b.F(u,"min-width",Math.max(a,j.x(v,r.context))+"px"):"%"!==g.unit?b.F(u,"min-height",Math.max(s,j.x(g,r.context))+"px"):i?b.F(u,"height",s+"px"):b.F(u,"width",a+"px")}}})},e.prototype.ck=function(t){var e=this;u.b(u.a.PREPROCESS_ELEMENT_STYLE).forEach(function(n){n(e.Aa,t)})},e.prototype.ak=function(t,e){for(var n=t.firstChild;n;n=n.nextSibling)if(1===n.nodeType){var i={},r=e.ua(n,!1);if(this.JE(this.Aa.vertical,"rtl"===this.Aa.direction,r,i),this.hk(i)){if(this.Aa.le instanceof ht&&!this.Aa.Qe(this.Aa.le))return;var o=this.Aa.parent,a=o&&o.le;return this.Aa.le=new ht(a,this.Aa.ke),void this.Aa.le.Mv(this.Aa.vertical)}}},e.prototype.hk=function(t){var e=t["repeat-on-break"];return e!==j.t.none&&(e===j.t.auto&&(e=t.display===j.t.table_header_group?j.t.header:t.display===j.t.table_footer_group?j.t.footer:j.t.none),e&&e!==j.t.none)?e.toString():null},e.prototype.dk=function(){var t=this,e=Y.c("createTextNodeView");return this.pk().then(function(){var n=t.me||0,i=ci.d(t.Aa.Ee).substr(n);t.Le=document.createTextNode(i),e.finish(!0)}),e.result()},e.prototype.pk=function(){if(null!=this.Aa.Ee)return Y.d(!0);var t,e=this,n=t=e.ke.textContent,i=Y.c("preprocessTextContent"),r=u.b(u.a.PREPROCESS_TEXT_CONTENT),o=0;return i.loop(function(){return o>=r.length?Y.d(!1):r[o++](e.Aa,n).Pt(function(t){return n=t,Y.d(!0)})}).then(function(){e.Aa.Ee=ci.a(t,n),i.finish(!0)}),i.result()},e.prototype.bk=function(t,e){var n,i=this,r=Y.c("createNodeView"),o=!0;return 1==i.ke.nodeType?n=i.sk(t,e):8==i.ke.nodeType?(i.Le=null,n=Y.d(!0)):n=i.dk(),n.then(function(t){if(o=t,i.Aa.Le=i.Le,i.Le){var e=i.Aa.parent?i.Aa.parent.Le:i.YE;e&&e.appendChild(i.Le)}r.finish(o)}),r.result()},e.prototype.vc=function(t,e,n){return this.Aa=t,t?(this.ke=t.ke,this.me=t.me):(this.ke=null,this.me=-1),this.Le=null,this.Aa?this.bk(e,!!n):Y.d(!0)},e.prototype.wk=function(t){if(null==t.pe||"content"!=t.ke.localName||t.ke.namespaceURI!=b.a.SHADOW)return t;var e,n,i,r=t.ye,o=t.pe,a=t.parent;o.xe?(i=o.xe,e=o.root,(n=o.type)==K.o.ROOTLESS&&(e=e.firstChild)):(i=o._e,e=o.owner.firstChild,n=K.o.ROOTLESS);var s=t.ke.nextSibling;if(s?(t.ke=s,t.Ve()):t.we?t=t.we:e?t=null:(t=t.parent.modify()).after=!0,e){var u=new K.k(e,a,r);return u.pe=i,u.de=n,u.we=t,u}return t.ye=r,t},e.prototype.mk=function(t){var e=t.ye+1;if(t.after){if(!t.parent)return null;if(t.de!=K.o.ROOTED){var n=t.ke.nextSibling;if(n)return(t=t.modify()).ye=e,t.ke=n,t.Ve(),this.wk(t)}return t.we?((t=t.we.modify()).ye=e,t):((t=t.parent.modify()).ye=e,t.after=!0,t)}if(t.be){var i=t.be.root;if(t.be.type==K.o.ROOTLESS&&(i=i.firstChild),i){var r=new K.k(i,t,e);return r.pe=t.be,r.de=t.be.type,this.wk(r)}}var o=t.ke.firstChild;return o?this.wk(new K.k(o,t,e)):(1!=t.ke.nodeType&&(e+=ci.d(t.Ee).length-1-t.me),(t=t.modify()).ye=e,t.after=!0,t)},e.prototype.gk=function(t,e,n){var i=H.s(e,"hyperlink-processing");if(!i)return!1;var r=i.evaluate(this.context,"hyperlink-processing");return!!r&&r.toString()==n},e.prototype.Ua=function(t,e){var n=this,i=this.mk(t);if(!i||i.after)return Y.d(i);var r=Y.c("nextInTree");return this.vc(i,!0,e).then(function(t){i.Le&&t||((i=i.modify()).after=!0,i.Le||(i.inline=!0)),n.dispatchEvent({type:"nextInTree",Aa:i}),r.finish(i)}),r.result()},e.prototype.Ek=function(t){if(t instanceof j.b)for(var e=t.values,n=0;n<e.length;n++)this.Ek(e[n]);else if(t instanceof j.l){var i=t.url;this.page.fetchers.push(Be.b(new Image,i))}},e.prototype.lk=function(t,e){var n=e["background-image"];n&&this.Ek(n);var i=e.position===j.t.relative;for(var r in e)if(!Ni[r]){var o=e[r];(o=o.visit(new k.a(this.xmldoc.url,this.Wl))).ot()&&L.O(o.unit)&&(o=j.n(o,this.context)),K.s[r]||i&&K.t[r]?this.page.Wr.push(new K.d(t,r,o)):b.F(t,r,o.toString())}},e.prototype.Bc=function(t,e,n){if(!t.after){var i=this.ke,r=(t.pe?t.pe.styler:this.styler).ua(i,!1),o=H.u(r,"_pseudos");if(o&&(r=o[e])){var a={};t.vertical=this.JE(t.vertical,"rtl"===t.direction,r,a);var s=a.content;K.y(s)&&(s.visit(new K.c(n,this.context,s,this.qs)),delete a.content),this.lk(n,a)}}},e.prototype.bc=function(t,e){var n=Y.c("peelOff"),i=t.Xe,r=t.me,o=t.after;if(e>0){var a=t.Le.textContent;t.Le.textContent=a.substr(0,e),r+=e}else if(!o&&t.Le&&0==r){var s=t.Le.parentNode;s&&s.removeChild(t.Le)}for(var u=t.ye+e,l=[];t.Xe===i;)l.push(t),t=t.parent;var h=l.pop(),c=h.we,p=this;return n.loop(function(){for(;l.length>0;){h=l.pop(),t=new K.k(h.ke,t,u),0==l.length&&(t.me=r,t.after=o),t.de=h.de,t.pe=h.pe,t.be=h.be,t.we=h.we?h.we:c,c=null;var e=p.vc(t,!1);if(e.Mt())return e}return Y.d(!1)}).then(function(){n.finish(t)}),n.result()},e.prototype.createElement=function(t,e){return t==b.a.XHTML?this.document.createElement(e):this.document.createElementNS(t,e)},e.prototype.Iv=function(t,e,n){var i={},r=H.u(this.HE,"_pseudos");if(t=this.JE(t,e,this.HE,i),r&&r.before){var o={},a=this.createElement(b.a.XHTML,"span");fi.f(a,"before"),n.appendChild(a),this.JE(t,e,r.before,o),delete o.content,this.lk(a,o)}return delete i.content,this.lk(n,i),t},e.prototype.Zh=function(t){t&&t.Ze(function(t){var e=t.je["box-decoration-break"];if(!e||"slice"===e){var n=t.Le;y.a(n instanceof Element),t.vertical?(b.F(n,"padding-left","0"),b.F(n,"border-left","none"),b.F(n,"border-top-left-radius","0"),b.F(n,"border-bottom-left-radius","0")):(b.F(n,"padding-bottom","0"),b.F(n,"border-bottom","none"),b.F(n,"border-bottom-left-radius","0"),b.F(n,"border-bottom-right-radius","0"))}})},e.prototype.nh=function(t,e,n){var i=t.num,r=t.unit;if(L.J(r)){for(var o=e;o&&1!==o.nodeType;)o=o.parentNode;y.a(o);var a=parseFloat(n.na(o)["font-size"]);return y.a(this.context),H.j(t,a,this.context).num}var s=this.context.ft(r,!1);return s?i*s:t},e.prototype.kk=function(t,e){if(t.pe){if(!e.pe)return!1;var n=1===t.node.nodeType?t.node:t.node.parentElement,i=1===e.node.nodeType?e.node:e.node.parentElement;return t.pe.owner===e.pe.owner&&fi.d(n)===fi.d(i)}return t.node===e.node},e.prototype._k=function(t,e){var n=this;return t.me===e.me&&t.after==e.after&&t.steps.length===e.steps.length&&t.steps.every(function(t,i){var r=e.steps[i];return n.kk(t,r)})},e.prototype.El=function(t){return!!fi.d(t)},e.SVG_URL_ATTRIBUTES=["color-profile","clip-path","cursor","filter","marker","marker-start","marker-end","marker-mid","fill","stroke","mask"],e}(b.c),Ti={a:"a",sub:"sub",sup:"sup",table:"table",tr:"tr",td:"td",th:"th",code:"code",body:"div",p:"p",v:"p",date:"p",emphasis:"em",strong:"strong",style:"span",strikethrough:"del"},Ni={"box-decoration-break":!0,"float-min-wrap-block":!0,"float-reference":!0,"flow-into":!0,"flow-linger":!0,"flow-options":!0,"flow-priority":!0,"footnote-policy":!0,page:!0},Si=function(){function t(t){this.xk=t.xk,this.window=t.window}return t.prototype.yk=function(t,e){var n=e.left,i=e.top;return{left:t.left-n,top:t.top-i,right:t.right-n,bottom:t.bottom-i,width:t.width,height:t.height}},t.prototype.Sh=function(t){var e=this,n=t.getClientRects(),i=this.xk.getBoundingClientRect();return Array.from(n).map(function(t){return e.yk(t,i)})},t.prototype.ue=function(t){var e=t.getBoundingClientRect(),n=this.xk.getBoundingClientRect();return this.yk(e,n)},t.prototype.na=function(t){return this.window.getComputedStyle(t,null)},t}(),_i=function(){function t(t,e,n,i,r){this.window=t,this.fontSize=e,this.document=t.document,this.root=n||this.document.body;var o=this.root.firstElementChild;o||((o=this.document.createElement("div")).setAttribute("data-vivliostyle-outer-zoom-box","true"),this.root.appendChild(o));var a=o.firstElementChild;a||((a=this.document.createElement("div")).setAttribute("data-vivliostyle-spread-container","true"),o.appendChild(a));var s=o.nextElementSibling;s||((s=this.document.createElement("div")).setAttribute("data-vivliostyle-layout-box","true"),this.root.appendChild(s)),this.Tk=o,this.Nk=a,this.xk=s;var u=new Si(this).na(this.root);this.width=i||parseFloat(u.width)||t.innerWidth,this.height=r||parseFloat(u.height)||t.innerHeight}return t.prototype.Sk=function(){b.F(this.Tk,"width",""),b.F(this.Tk,"height",""),b.F(this.Nk,"width",""),b.F(this.Nk,"height",""),b.F(this.Nk,"transform","")},t.prototype.zoom=function(t,e,n){b.F(this.Tk,"width",t*n+"px"),b.F(this.Tk,"height",e*n+"px"),b.F(this.Nk,"width",t+"px"),b.F(this.Nk,"height",e+"px"),b.F(this.Nk,"transform","scale("+n+")")},t.prototype.clear=function(){for(var t=this.root;t.lastChild;)t.removeChild(t.lastChild)},t}(),Ai="data-adapt-eloff",Ii=function(){function t(t,e,n){this.store=t,this.url=e,this.document=n,this.lang=null,this.Ak=-1,this.hw=1,this.root=n.documentElement;var i=null,r=null;if(this.root.namespaceURI==b.a.XHTML){for(var o=this.root.firstChild;o;o=o.nextSibling)if(1==o.nodeType&&(s=o).namespaceURI==b.a.XHTML)switch(s.localName){case"head":r=s;break;case"body":i=s}this.lang=this.root.getAttribute("lang")}else if(this.root.namespaceURI==b.a.FB2){for(r=this.root,o=this.root.firstChild;o;o=o.nextSibling)1==o.nodeType&&(s=o).namespaceURI==b.a.FB2&&"body"==s.localName&&(i=s);var a=this.doc().child("FictionBook").child("description").child("title-info").child("lang").textContent();a.length>0&&(this.lang=a[0])}else if(this.root.namespaceURI==b.a.SSE)for(var s=this.root.firstElementChild;s;s=s.nextElementSibling){var u=s.localName;"meta"===u?r=s:"body"===u&&(i=s)}this.body=i,this.head=r,this.last=this.root,this.last.setAttribute(Ai,"0")}return t.prototype.doc=function(){return new ki([this.document])},t.prototype.Lp=function(t){var e=t.getAttribute(Ai);if(e)return parseInt(e,10);for(var n=this.hw,i=this.last;i!=t;){var r=i.firstChild;if(!r)for(;!(r=i.nextSibling);)if(null==(i=i.parentNode))throw new Error("Internal error");i=r,1==r.nodeType?(r.setAttribute(Ai,n.toString()),++n):n+=r.textContent.length}return this.hw=n,this.last=t,n-1},t.prototype.xw=function(t,e,n){var i=0,r=t,o=null;if(1==r.nodeType){if(!n)return this.Lp(r)}else{if(i=e,!(o=r.previousSibling))return r=r.parentNode,i+=1,this.Lp(r)+i;r=o}for(;;){for(;r.lastChild;)r=r.lastChild;if(1==r.nodeType)break;if(i+=r.textContent.length,!(o=r.previousSibling)){r=r.parentNode;break}r=o}return i+=1,this.Lp(r)+i},t.prototype.Rk=function(){return this.Ak<0&&(this.Ak=this.xw(this.root,0,!0)),this.Ak},t.prototype._w=function(t){for(var e,n=this,i=this.root,r=function(){if((e=o.Lp(i))>=t)return{value:i};var r=i.children;if(!r)return"break";var a=b.i(r.length,function(e){var i=r[e];return n.Lp(i)>t});if(0==a)return"break";i=r[a-1]},o=this;;){var a=r();if("object"==typeof a)return a.value;if("break"===a)break}for(var s=e+1,u=i,l=u.firstChild||u.nextSibling,h=null;;){if(l){if(1==l.nodeType)break;if(h=u=l,(s+=l.textContent.length)>t)break}else if(!(u=u.parentNode))break;l=u.nextSibling}return h||i},t.prototype.Ck=function(t){var e=t.getAttribute("id");e&&!this.Ok[e]&&(this.Ok[e]=t);var n=t.getAttributeNS(b.a.XML,"id");n&&!this.Ok[n]&&(this.Ok[n]=t);for(var i=t.firstElementChild;i;i=i.nextElementSibling)this.Ck(i)},t.prototype.KE=function(t){var e=t.match(/([^#]*)#(.+)$/);if(!e||e[1]&&e[1]!=this.url)return null;var n=e[2],i=this.document.getElementById(n);return!i&&this.document.getElementsByName&&(i=this.document.getElementsByName(n)[0]),i||(this.Ok||(this.Ok={},this.Ck(this.document.documentElement)),i=this.Ok[n]),i},t}();function xi(t,e,n){var i,r=n||new DOMParser;try{i=r.parseFromString(t,e)}catch(t){}if(!i)return null;var o=i.documentElement;if("parsererror"===o.localName)return null;for(var a=o.firstElementChild;a;a=a.nextElementSibling)if("parsererror"===a.localName)return null;return i}function Ci(t,e){var n=t.responseXML;if(!n){var i=new DOMParser,r=t.responseText;if(r){var o=function(t){var e=t.contentType;if(e){for(var n=Object.keys(Hn),i=0;i<n.length;i++)if(Hn[n[i]]===e)return e;if(e.match(/\+xml$/))return Hn.APPLICATION_XML}var r=t.url.match(/\.([^.\/]+)$/);if(r)switch(r[1]){case"html":case"htm":return Hn.TEXT_HTML;case"xhtml":case"xht":return Hn.APPLICATION_XHTML_XML;case"svg":case"svgz":return Hn.IMAGE_SVG_XML;case"opf":case"xml":return Hn.APPLICATION_XML}return null}(t);if((n=xi(r,o||Hn.APPLICATION_XML,i))&&!o){var a=n.documentElement;"html"!==a.localName.toLowerCase()||a.namespaceURI?"svg"===a.localName.toLowerCase()&&n.contentType!==Hn.IMAGE_SVG_XML&&(n=xi(r,Hn.IMAGE_SVG_XML,i)):n=xi(r,Hn.TEXT_HTML,i)}n||(n=xi(r,Hn.TEXT_HTML,i))}}var s=n?new Ii(e,t.url,n):null;return Y.d(s)}!function(t){t.TEXT_HTML="text/html",t.TEXT_XML="text/xml",t.APPLICATION_XML="application/xml",t.APPLICATION_XHTML_XML="application/xhtml_xml",t.IMAGE_SVG_XML="image/svg+xml"}(Hn||(Hn={}));var Oi=new(function(){function t(t){this.fn=t}return t.prototype.check=function(t){return this.fn(t)},t.prototype.Ik=function(e,n){var i=this;return new t(function(t){return i.check(t)&&1==t.nodeType&&t.getAttribute(e)==n})},t.prototype.Lk=function(e,n){var i=this;return new t(function(t){if(!i.check(t))return!1;var r=new ki([t]);return r=r.child(e),n&&(r=r.predicate(n)),r.size()>0})},t}())(function(t){return!0}),ki=function(){function t(t){this.nodes=t}return t.prototype.Pk=function(){return this.nodes},t.prototype.size=function(){return this.nodes.length},t.prototype.predicate=function(e){for(var n=[],i=0,r=this.nodes;i<r.length;i++){var o=r[i];e.check(o)&&n.push(o)}return new t(n)},t.prototype.Fk=function(e){for(var n=[],i=function(t){n.push(t)},r=0;r<this.nodes.length;r++)e(this.nodes[r],i);return new t(n)},t.prototype.forEach=function(t){for(var e=[],n=0;n<this.nodes.length;n++)e.push(t(this.nodes[n]));return e},t.prototype.Dk=function(t){for(var e=[],n=0;n<this.nodes.length;n++){var i=t(this.nodes[n]);null!=i&&e.push(i)}return e},t.prototype.child=function(t){return this.Fk(function(e,n){for(var i=e.firstChild;i;i=i.nextSibling)1==i.nodeType&&i.localName==t&&n(i)})},t.prototype.Mk=function(){return this.Fk(function(t,e){for(var n=t.firstChild;n;n=n.nextSibling)1==n.nodeType&&e(n)})},t.prototype.attribute=function(t){return this.Dk(function(e){return 1==e.nodeType?e.getAttribute(t):null})},t.prototype.textContent=function(){return this.forEach(function(t){return t.textContent})},t}(),Li=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Di=new Be.a(function(){var t=Y.c("uaStylesheetBase"),e=Ue(),n=b.C("user-agent-base.css",b.D),i=new H.b(null,null,null,null,null,e,!0);return i.yr(G.g.USER_AGENT),H.G(i.cascade),G.k('@namespace html "http://www.w3.org/1999/xhtml";\n\nhtml|html, html|address, html|blockquote, html|body, html|dd, html|div,\nhtml|dl, html|dt, html|fieldset, html|form, html|frame, html|frameset,\nhtml|h1, html|h2, html|h3, html|h4, html|h5, html|h6, html|noframes,\nhtml|ol, html|p, html|ul, html|center, html|dir, html|hr, html|menu, html|pre,\nhtml|article, html|section, html|nav, html|aside, html|hgroup, html|footer, html|header,\nhtml|figure, html|figcaption, html|main {\n   display: block;\n   unicode-bidi: normal;\n}\nhtml|li {\n  display: list-item;\n}\nhtml|head {\n  display: none !important;\n}\nhtml|table {\n  display: table;\n}\nhtml|tr {\n  display: table-row;\n}\nhtml|thead {\n  display: table-header-group;\n  break-after: avoid;\n}\nhtml|tbody {\n  display: table-row-group;\n}\nhtml|tfoot {\n  display: table-footer-group;\n  break-before: avoid;\n}\nhtml|col {\n  display: table-column;\n}\nhtml|colgroup {\n  display: table-column-group;\n}\nhtml|td, html|th {\n  display: table-cell;\n}\nhtml|caption {\n  display: table-caption;\n  text-align: center;\n}\nhtml|th {\n  font-weight: bolder;\n  text-align: center;\n}\nhtml|script {\n  display: none;\n}\nhtml|body {\n  margin: 8px;\n}\nhtml|h1 {\n  font-size: 2em;\n  margin-block-start: 0.67em;\n  margin-block-end: 0.67em;\n  margin-inline-start: 0em;\n  margin-inline-end: 0em;\n}\nhtml|h2 {\n  font-size: 1.5em;\n  margin-block-start: 0.75em;\n  margin-block-end: 0.75em;\n  margin-inline-start: 0em;\n  margin-inline-end: 0em;\n}\nhtml|h3 {\n  font-size: 1.17em;\n  margin-block-start: 0.83em;\n  margin-block-end: 0.83em;\n  margin-inline-start: 0em;\n  margin-inline-end: 0em;\n}\nhtml|h4, html|p, html|blockquote, html|ul, html|fieldset,\nhtml|form, html|ol, html|dl, html|dir, html|menu, html|h5, html|h6 {\n  margin-block-start: 1em;\n  margin-block-end: 1em;\n  margin-inline-start: 0em;\n  margin-inline-end: 0em;\n}\nhtml|h5 {\n  font-size: .83em;\n}\nhtml|h6 {\n  font-size: .75em;\n}\nhtml|h1, html|h2, html|h3, html|h4, html|h5, html|h6, html|b, html|strong {\n  font-weight: bolder;\n}\nhtml|h1, html|h2, html|h3, html|h4, html|h5, html|h6 {\n  break-after: avoid;\n}\nhtml|blockquote {\n  margin-block-start: 0px;\n  margin-block-end: 0px;\n  margin-inline-start: 40px;\n  margin-inline-end: 40px;\n}\nhtml|i, html|cite, html|em, html|var, html|address {\n  font-style: italic;\n}\nhtml|pre, html|tt, html|code, html|kbd, html|samp {\n  font-family: monospace;\n}\nhtml|pre {\n  white-space: pre;\n}\nhtml|button, html|textarea, html|input, html|select {\n  display: inline-block;\n}\nhtml|big {\n  font-size: 1.17em;\n}\nhtml|small, html|sub, html|sup {\n  font-size: .83em;\n}\nhtml|sub {\n  vertical-align: sub;\n}\nhtml|sup {\n  vertical-align: super;\n}\nhtml|table {\n  border-spacing: 2px;\n}\nhtml|thead, html|tbody, html|tfoot {\n  vertical-align: middle;\n}\n/* for XHTML tables without tbody */\nhtml|table > html|tr {\n  vertical-align: middle;\n}\nhtml|td, html|th {\n  vertical-align: inherit;\n}\nhtml|s, html|strike, html|del {\n  text-decoration: line-through;\n}\nhtml|hr {\n  border: 1px inset;\n}\nhtml|ol, html|ul, html|dir, html|menu, html|dd {\n  margin: 0px;\n  margin-inline-start: 40px;\n}\nhtml|ol {\n  list-style-type: decimal;\n}\nhtml|ol html|ul, html|ul html|ol, html|ul html|ul, html|ol html|ol {\n  margin-top: 0;\n  margin-bottom: 0;\n}\nhtml|u, html|ins {\n  text-decoration: underline;\n}\nhtml|center {\n  text-align: center;\n}\nhtml|q:before {\n  content: open-quote;\n}\nhtml|q:after {\n  content: close-quote;\n}\n\nhtml|audio, html|video {\n  break-inside: avoid;\n}\n\nhtml|ruby {\n  display: ruby;\n}\nhtml|rp {\n  display: none;\n}\nhtml|rbc {\n  display: ruby-base-container;\n}\nhtml|rtc {\n  display: ruby-text-container;\n}\nhtml|rb {\n  display: ruby-base;\n  white-space: nowrap;\n}\nhtml|rt {\n  display: ruby-text;\n}\nhtml|ruby, html|rb, html|rt, html|rbc, html|rtc {\n  unicode-bidi: isolate;\n}\n\nhtml|rtc, html|rt {\n  font-variant-east-asian: ruby;\n  text-emphasis: none;\n  white-space: nowrap;\n  line-height: 1;\n}\n\nhtml|rtc:lang(zh), html|rt:lang(zh) {\n  ruby-align: center;\n}\n\nhtml|rtc, html|rt {\n  font-size: 50%;\n}\n\nhtml|rtc:lang(zh-TW), html|rt:lang(zh-TW) {\n  font-size: 30%;\n}\n\nhtml|rtc > html|rt, html|rtc > html|rt:lang(zh-TW) {\n  font-size: 100%;\n}\n\n/* Bidi settings */\nhtml|bdo[dir="ltr"] {\n  direction: ltr;\n  unicode-bidi: bidi-override;\n}\nhtml|bdo[dir="rtl"] {\n  direction: rtl;\n  unicode-bidi: bidi-override;\n}\nhtml|*[dir="ltr"] {\n  direction: ltr;\n  unicode-bidi: embed;\n}\nhtml|*[dir="rtl"] {\n  direction: rtl;\n  unicode-bidi: embed;\n}\n\n/*------------------ epub-specific ---------------------*/\n\n@namespace epub "http://www.idpf.org/2007/ops";\n\nhtml|a[epub|type="noteref"] {\n  font-size: 0.75em;\n  vertical-align: super;\n  line-height: 0.01;\n}\n\nhtml|a[epub|type="noteref"]:href-epub-type(footnote) {\n  -adapt-template: url(user-agent.xml#footnote);\n  text-decoration: none;\n}\n\nhtml|aside[epub|type="footnote"] {\n  display: none;\n}\n\nhtml|aside[epub|type="footnote"]:footnote-content {\n  display: block;\n  margin: 0.25em;\n  font-size: 1.2em;\n  line-height: 1.2;\n}\n\nepub|trigger {\n  display: none;\n}\n\nepub|switch {\n  display: inline;\n}\n\nepub|default {\n  display: inline;\n}\n\nepub|case {\n  display: none;\n}\n\nepub|case[required-namespace::supported] {\n  display: inline;\n}\n\nepub|case[required-namespace::supported] ~ epub|case {\n  display: none;\n}\n\nepub|case[required-namespace::supported] ~ epub|default {\n  display: none;\n}\n\n/*--------------- ncx and toc ----------------------*/\n\n@namespace ncx "http://www.daisy.org/z3986/2005/ncx/";\n\nncx|ncx {\n  display: block;\n  padding-top: 10px;\n  padding-bottom: 10px;\n}\n\nncx|content {\n  display: none;\n}\n\nbody > * {\n  -adapt-behavior: body-child;\n}\n\n[role=doc-toc], [role=directory], nav, .toc, #toc,\n#table-of-contents, #contents {\n  -adapt-behavior: toc-root;\n}\n\n[role=doc-toc] a,\n[role=directory] a,\nnav a,\n.toc a,\n#toc a,\nncx|navLabel {\n  -adapt-behavior: toc-node-anchor;\n}\n\n[role=doc-toc] li,\n[role=directory] li,\nnav li,\n.toc li,\n#toc li,\nncx|navPoint {\n  -adapt-behavior: toc-node;\n}\n\n[role=doc-toc] li > *:first-child,\n[role=directory] li > *:first-child,\nnav li > *:first-child,\n.toc li > *:first-child,\n#toc li > *:first-child {\n  -adapt-behavior: toc-node-first-child;\n}\n\n[role=doc-toc] ol,\n[role=directory] ol,\nnav ol,\n.toc ol,\n#toc ol,\n[role=doc-toc] ul,\n[role=directory] ul,\nnav ul,\n.toc ul,\n#toc ul,\nol[role=doc-toc],\nol[role=directory],\nol.toc,\nol#toc,\nul[role=doc-toc],\nul[role=directory],\nul.toc,\nul#toc {\n  -adapt-behavior: toc-container;\n}\n\n/*---------------- fb2 ---------------------*/\n\n@namespace fb2 "http://www.gribuser.ru/xml/fictionbook/2.0";\n\nfb2|FictionBook {\n  display: block;\n}\n\nfb2|body {\n  font-family: serif;\n  margin: 8px;\n  column-width: 25em;\n}\n\nfb2|a {\n  line-height: 0.1;\n  vertical-align: super;\n  font-size: 0.7em;\n}\n\nfb2|sub {\n  line-height: 0.1;\n  font-size: 0.7em;\n}\n\nfb2|sup {\n  line-height: 0.1;\n  font-size: 0.7em;\n}\n\nfb2|table {\n  display: table;\n  font-size: 0.8em;\n  font-family: sans-serif;\n  margin: 0.5em;\n  border-collapse: collapse;\n  border: 1px solid black;\n}\n\nfb2|td {\n  border: 1px solid black;\n  padding: 0.3em;\n}\n\nfb2|th {\n  font-weight: bold;\n  text-align: center;\n  border: 1px solid black;\n  background-color: #CEE;\n  padding: 0.3em;\n}\n\nfb2|code {\n  font-family: monospace;\n}\n\nfb2|p {\n  display: block;\n  margin: 0px;\n  text-indent: 1.5em;\n  text-align: justify;\n}\n\nfb2|title fb2|p {\n  margin: 0px 0px 0.5em 0px;\n  text-indent: 0px;\n  text-align: inherit;\n}\n\nfb2|title {\n  font-size: 2.2em;\n  font-weight: bold;\n  break-inside: avoid;\n  break-after: avoid;\n  text-align: center;\n  margin: 1em 0px 0.5em 0px;\n  display: block;\n}\n\nfb2|section {\n  display: block;\n}\n\nfb2|section fb2|title {\n  font-size: 1.8em;\n  text-align: center;\n  margin: 1em 0px 0.5em 0px;\n}\n\nfb2|section fb2|section fb2|title {\n  font-size: 1.5em;\n  text-align: left;\n  margin: 1em 0px 0.5em 1.5625em;\n}\n\nfb2|section fb2|section fb2|section fb2|title {\n  font-size: 1.3em;\n  text-align: left;\n  margin: 1em 0px 0.5em 1.923em;\n}\n\nfb2|section fb2|section fb2|section fb2|section fb2|title {\n  font-size: 1.2em;\n  text-align: left;\n  margin: 1em 0px 0.5em 2.083em;\n}\n\nfb2|section fb2|section fb2|section fb2|section fb2|section fb2|title {\n  font-size: 1.1em;\n  text-align: left;\n  margin: 1em 0px 0.5em 2.272em;\n}\n\nfb2|section fb2|section fb2|section fb2|section fb2|section fb2|section fb2|title {\n  text-align: left;\n  margin: 1em 0px 0.5em 2.5em;\n}\n\nfb2|epigraph {\n  text-align: left;\n  font-style: italic;\n  margin: 1em 1em 2em 30%;\n  display: block;\n}\n\nfb2|image {\n  text-align: center;\n  padding: 3px;\n}\n\nfb2|image::inner {\n  max-width: 95%;\n}\n\nfb2|image::after {\n  display: block;\n  content: attr(title);\n}\n\nfb2|v {\n  text-indent: -1em;\n  padding-left: 1em;\n  margin: 0px;\n  display: block;\n}\nfb2|poem {\n  margin: 0.5em 0px 0.5em 2em;\n  display: block;\n}\nfb2|date {\n  margin: 0.5em 0px 0.5em 50%;\n  font-style: italic;\n  display: block;\n}\nfb2|stanza {\n  margin: 0.5em 0px;\n  break-inside: avoid;\n  display: block;\n}\nfb2|empty-line {\n  height: 1em;\n  margin: 0px;\n  display: block;\n}\nfb2|cite {\n  margin: 0.5em 0px 0.5em 1em;\n  font-size: 0.95em;\n  display: block;\n}\nfb2|subtitle {\n  text-indent: 0px;\n  text-align: center;\n  font-style: italic;\n  font-weight: bold;\n  margin: 0.5em 2em;\n  break-inside: avoid;\n  break-after: avoid;\n  display: block;\n}\nfb2|annotation {\n  margin: 1em 0px 1em 2em;\n  text-indent: 0px;\n  font-style: italic;\n  display: block;\n}\nfb2|text-author {\n  text-indent: 0px;\n  margin: 0.2em 0px 0px 3em;\n  display: block;\n}\nfb2|emphasis {\n  font-style: italic;\n}\nfb2|strong {\n  font-weight: bold;\n}\nfb2|strikethrough {\n  text-decoration: line-through;\n}\nfb2|*.italic {\n  font-style: italic;\n}\nfb2|*.bold {\n  font-weight: bold;\n}\n\nfb2|binary, fb2|description, fb2|stylesheet {\n  display: none;\n}\n\nfb2|a[type="note"] {\n  font-size: 0.75em;\n  vertical-align: super;\n  line-height: 0.01;\n  text-decoration: none;\n  -adapt-template: url(user-agent.xml#footnote);\n}\n\nfb2|body[name="notes"] {\n  display: none;\n}\n\nfb2|body[name="notes"] fb2|title {\n  display: inline;\n  vertical-align: super;\n  line-height: 0.01;\n  text-align: left;\n  font-size: 0.75em;\n  font-weight: bold;\n  margin: 0px;\n}\n\nfb2|body[name="notes"] fb2|p {\n  text-indent: 0px;\n  display: inline;  /* for now */\n}\n\nfb2|body[name="notes"] fb2|p + fb2|p {\n  display: block;\n}\n\nfb2|body[name="notes"] fb2|section {\n  text-indent: 0px;\n  line-height: 1.2;\n  font-size: 1.2em;\n}\n',i,n,null,null).Dt(t),t.result()},"uaStylesheetBaseFetcher"),Ri=function(){function t(t,e,n,i,r,o,a,s,u,l){this.store=t,this.nn=e,this.Zl=n,this.cascade=i,this.Uk=r,this.Gk=o,this.Bk=a,this.zk=s,this.Hk=u,this.PE=l,this.jk=t.jk,this.ir=t.ir,this.Zl.tn("has-content",function(t){t=t;var e=this.Xk,n=e.cs(t);return this.Vk(e.fs(t))&&e.ss(t,this.Yk)&&!!n&&!this.$k(n)}),this.Zl.Qt("page-number",new L.t(this.Zl,function(){return this.Wk+this.Xk.page},"page-number"))}return t.prototype.qk=function(t,e,n,i){if(this.Hk.length){var r=new L.g(this.nn,t,e,n),o=H.A(r,this.Hk),a=o.width,s=o.height,u=o["text-zoom"],l=1;if(a&&s||u){var h=L.G.em;if((u?u.evaluate(r,"text-zoom"):null)===j.t.scale&&(l=h/n,n=h,t*=l,e*=l),a&&s){var c=j.x(a.evaluate(r,"width"),r),p=j.x(s.evaluate(r,"height"),r);if(c>0&&p>0)return{width:i&&i.Xt?2*(c+i.pageBorder):c,height:p,fontSize:n}}}}return{width:t,height:e,fontSize:n}},t}(),Pi=function(t){function e(e,n,i,r,o,a,s,u,l,h,c,p){var f=t.call(this,e.nn,r.width,r.height,r.fontSize)||this;for(var d in f.style=e,f.xmldoc=n,f.viewport=r,f.eh=o,f.Kk=a,f.XE=s,f.VE=u,f.Wk=l,f.Wl=h,f.Yl=c,f.Wb={body:!0},f._E=null,f.styler=null,f.Zk=null,f.Xk=null,f.Qk=null,f.Yk=0,f.Jk={},f.t_=null,f.n_={},f.NE=null,f.i_={},f.r_=0,f.e_=0,f.lang=n.lang||i,f.faces=new je(f.style.jk),f.s_=new W.e(null,null,null,null,null,null,null),f.NE=p||null,e.zk){var v=e.zk[d],g=H.s(v,"flow-consume");g&&(g.evaluate(f,"flow-consume")==j.t.all?f.Wb[d]=!0:delete f.Wb[d])}return f}return Li(e,t),e.prototype.init=function(){var t=this,e=Y.c("StyleInstance.init"),n=this.Yl.mv(this.xmldoc.url),i=this.Yl.gv(this.xmldoc.url,this.style.nn,this.style.Zl);this.styler=new ce(this.xmldoc,this.style.cascade,this.style.nn,this,this.Wb,this.style.ir,n,i),i.Ql(this.styler),this.styler.yw(this),this.Zk={},this.Zk[this.xmldoc.url]=this.styler;var r=this.styler.mw();this.NE||(this.NE=_n(r));var o=this.style.Uk;this._E=new vn(o);var a=this.style.cascade.Si(this,n,i,this.lang);this._E.Lg(a,r),this._E.Pg(this),this.t_=new ei(a,this.style.Zl,this._E,this,r);for(var s=[],u=0,l=this.style.Gk;u<l.length;u++){var h=l[u];if(!h.condition||h.condition.evaluate(this)){var c=Ve(h.properties,this),p=new Xe(c);s.push(p)}}this.Kk.Dm(s,this.faces).Dt(e);var f=this.style.PE;return Object.keys(f).forEach(function(e){var n=Rn(Dn(f[e]),t);t.i_[e]={width:n.qt+2*n.Ug,height:n.Kt+2*n.Ug}}),e.result()},e.prototype.ZE=function(t){var e=this.Zk[t.url];if(!e){var n=this.style.store.o_(t),i=new L.g(n.nn,this.qt(),this.Kt(),this.ln),r=this.Yl.mv(t.url),o=this.Yl.gv(t.url,n.nn,n.Zl);e=new ce(t,n.cascade,n.nn,i,this.Wb,n.ir,r,o),this.Zk[t.url]=e}return e},e.prototype.lg=function(t,e){this.Jk[t]=e},e.prototype.Hm=function(t){return this.Jk[t]},e.prototype.Tw=function(t,e){var n=this.Xk;if(n){n.flows[t.ae]?e=n.flows[t.ae]:n.flows[t.ae]=e;var i=n.os[t.ae];i||(i=new K.i,n.os[t.ae]=i);var r=K.w(t.element),o=new K.a(r),a=new K.h(o,t);i.positions.push(a)}},e.prototype.u_=function(t){for(var e=Number.POSITIVE_INFINITY,n=0;n<t.positions.length;n++){for(var i=t.positions[n].ts.primary,r=i.steps[0].node,o=i.me,a=i.after,s=0;r.ownerDocument!=this.xmldoc.document;)s++,r=i.steps[s].node,a=!1,o=0;var u=this.xmldoc.xw(r,o,a);u<e&&(e=u)}return e},e.prototype.h_=function(t,e){if(!t)return 0;var n=Number.POSITIVE_INFINITY;for(var i in this.Wb){var r=t.os[i];if(e||r&&0!=r.positions.length||!this.Xk||(this.styler.Nw(i),r=this.Xk.os[i],t!=this.Xk&&r&&(r=r.clone(),t.os[i]=r)),r){var o=this.u_(r);o<n&&(n=o)}}return n},e.prototype.a_=function(t){for(var e in l.b.debug("Location - page",this.Xk.page),l.b.debug("  current:",t),l.b.debug("  lookup:",this.Yk),this.Xk.os)for(var n=0,i=this.Xk.os[e].positions;n<i.length;n++){var r=i[n];l.b.debug("  Chunk",e+":",r.rs.startOffset)}},e.prototype.Vk=function(t){switch(t){case"left":case"right":case"recto":case"verso":return new L.s(this.style.Zl,t+"-page").evaluate(this);default:return!0}},e.prototype.f_=function(t){for(var e in t.os){var n=t.os[e];if(n&&n.positions.length>0){var i=n.positions[0].rs;if(this.u_(n)===i.startOffset){var r=n.positions[0].rs.breakBefore,o=Wt.e(n.es);n.es=Wt.a(Wt.d(o,r))}}}},e.prototype.c_=function(t){var e=this.Xk,n=this.h_(e);if(n==Number.POSITIVE_INFINITY)return null;for(var i,r=this._E.children,o=0;o<r.length;o++)if((i=r[o]).$m.Mm!==Xn){var a=1,s=i.dg(this,"utilization");s&&s.ut()&&(a=s.num);var u=this.ft("em",!1),l=this.qt()*this.Kt(),h=Math.ceil(a*l/(u*u));this.Yk=this.styler.gw(n,h),y.a(e),this.f_(e),this.Qk=e.clone(),this.l_(),this.dn(this.style.Zl);var c=i.dg(this,"enabled");if(!c||c===j.t._true)return this.t_.AE(i,t)}throw new Error("No enabled page masters")},e.prototype.$k=function(t){var e=this.Qk.flows,n=e[t.ae].fe;if(n){var i=t.startOffset,r=e[n].ce;if(!r.length||i<r[0])return!1;var o=b.i(r.length,function(t){return r[t]>i})-1,a=r[o],s=this.Qk.os[n],u=this.u_(s);return!(a<u)&&(u<a||!this.Vk(s.es))}return!1},e.prototype.v_=function(t,e){var n=this.Xk.flows[e];n.le||(n.le=new it.a(null)),t.nf=n.le},e.prototype.d_=function(t){var e=t.Xf,n=e.Cu(),i=Y.c("layoutDeferredPageFloats"),r=!1,o=0;return i.Bt(function(i){if(o!==n.length){var a=n[o++],s=a.float,u=(new W.f).ku(s),l=u.Tu(s,e);if(!l||!l.tu(s))return e._u(s)||e.Iu(s)?(e.Ou(a),void i.Ht()):void t.Mc(a,u,null,l).then(function(t){if(t){var n=e.parent.Hu();n?i.Ht():(e.Hu()&&!n&&(r=!0,e.validate()),i.zt())}else i.Ht()});i.zt()}else i.Ht()}).then(function(){r&&e.invalidate(),i.finish(!0)}),i.result()},e.prototype.p_=function(t,e){if(t.Xf.Pu().length>0){if(t.cf){var n=void 0;return e?(n=e.clone()).primary=t.cf:n=new K.a(t.cf),n}return y.a("column.lastAfterPosition === null"),null}return null},e.prototype.b_=function(t,e){var n=this.Xk.os[e];if(!n||!this.Vk(n.es))return Y.d(!0);n.es="any",this.v_(t,e),t.init(),this.Wb[e]&&t.bands.length>0&&(t.Qf=!1);var i=this,r=Y.c("layoutColumn");return this.d_(t).then(function(){if(t.Xf.Hu())r.finish(!0);else{var o=[],a=[],s=!0;r.Bt(function(r){if(t.Xf.Su(e))r.Ht();else{for(var u=function(){for(var e=0;a.includes(e);)e++;var u=n.positions[e];if(u.rs.startOffset>i.Yk||i.$k(u.rs))return"break";for(var l=e+1;l<n.positions.length;l++)if(!a.includes(l)){var h=n.positions[l];if(h.rs.startOffset>i.Yk||i.$k(h.rs))break;h.rs.ve(u.rs)&&(u=h,e=l)}var c=u.rs,p=!0;return t.layout(u.ts,s,n.breakAfter).then(function(l){if(t.Xf.Hu())r.Ht();else{if(s=!1,u.rs.repeated&&(null===l||c.exclusive)&&o.push(e),c.exclusive)return a.push(e),void r.Ht();var h=!!l||!!t.Wa,f=i.p_(t,l);t.Wa&&f?(u.ts=f,n.breakAfter=t.Wa,t.Wa=null):(a.push(e),(l||f)&&(u.ts=l||f,o.push(e)),t.Wa&&(n.es=Wt.a(t.Wa))),h?r.Ht():(t.Qf=!1,p?p=!1:r.zt())}}),p?(p=!1,{value:void 0}):void 0};n.positions.length-a.length>0;){var l=u();if("object"==typeof l)return l.value;if("break"===l)break}r.Ht()}}).then(function(){if(!t.Xf.Hu()){n.positions=n.positions.filter(function(t,e){return o.includes(e)||!a.includes(e)}),"column"===n.breakAfter&&(n.breakAfter=null),t.kl();var e=t.Xf.ah();t.Cc(e)}r.finish(!0)})}}),r.result()},e.prototype.Ov=function(t){var e=this.Xk.page-1,n=this.Yl.Ov(e);return new Ye.a([n].concat(t.ph()))},e.prototype.w_=function(t,e,n,i,r,o,a,s,u,l,h,c,p,f){var d,v=this,g=t.vertical?t.Km&&t.Jm:t.Zm&&t.Qm,m=r.element,y=new W.e(s,W.a.COLUMN,null,a,null,null,null),E=v.Xk.clone(),w=Y.c("createAndLayoutColumn");return w.Bt(function(t){var w=v.Ov(y);if(u>1){var T=v.viewport.document.createElement("div");if(b.F(T,"position","absolute"),m.appendChild(T),(d=new Ye.b(T,p,v.eh,w,y)).Qf=f,d.vertical=r.vertical,d.ws=r.ws,d.bs=r.bs,r.vertical){var N=o*(h+l)+r.paddingTop;d.Gs(r.paddingLeft,r.width),d.Us(N,h)}else{var S=o*(h+l)+r.paddingLeft;d.Us(r.paddingTop,r.height),d.Gs(S,h)}d.ls=e,d.vs=n}else(d=new Ye.b(m,p,v.eh,w,y)).Ms(r);d.exclusions=g?[]:i.concat(),d.ds=c,y.mu(d),d.width>=0?v.b_(d,a).then(function(){y.Hu()||y.finish(),d.Xf.Hu()&&!s.Hu()?(d.Xf.validate(),v.Xk=E.clone(),d.element!==m&&m.removeChild(d.element),t.zt()):t.Ht()}):(y.finish(),t.Ht())}).then(function(){w.finish(d)}),w.result()},e.prototype.m_=function(t,e,n){(e instanceof Jn||e instanceof gn&&!(e instanceof $n))&&t.mu(n)},e.prototype.g_=function(t,e,n,i){y.a(e instanceof yn);var r=e.dg(this,"writing-mode")||null,o=e.dg(this,"direction")||null;return new W.e(t,W.a.REGION,n,i,null,r,o)},e.prototype.E_=function(t,e,n,i,r,o,a,s,u){var l=this,h=l.Xk.clone(),c=l.g_(o,e,a,s),p=!0;function f(){return l.Xk=h.clone(),l.k_(t,e,n,i,r,o,c,a,s,u,p).Pt(function(t){return t?Y.d({columns:t,position:l.Xk}):Y.d(null)})}return f().Pt(function(t){if(!t)return Y.d(null);if(u<=1)return Y.d(t.columns);var n=e.dg(l,"column-fill")||j.t.balance,i=l.Xk.os[s];y.a(i);var r=function(t,e,n,i,r,o,a){if(e===j.t.auto)return null;var s=0===a.positions.length,u=o[o.length-1],l=!(!u||!u.Wa);return s||l?new ne(n,i,r,t):e===j.t.balance_all?new oe(n,i,r):(y.a(e===j.t.balance),null)}(u,n,f,c,a,t.columns,i);return r?(p=!1,o.lock(),c.lock(),r.eb(t).Pt(function(t){return o.unlock(),o.validate(),c.unlock(),l.Xk=t.position,Y.d(t.columns)})):Y.d(t.columns)})},e.prototype.k_=function(t,e,n,i,r,o,a,s,u,l,h){var c=this,p=Y.c("layoutFlowColumns"),f=c.Xk.clone(),d=e.pg(c,"column-gap"),v=l>1?e.pg(c,"column-width"):s.width,g=e.vg(c),m=e.dg(c,"shape-inside"),y=k.e(m,0,0,s.width,s.height,c),b=new wi(u,c,c.viewport,c.styler,g,c.xmldoc,c.faces,c.style.Bk,c,t,c.XE,c.VE,this.Wl),E=0,w=null,T=[];return p.Bt(function(t){c.w_(e,n,i,r,s,E++,u,a,l,d,v,y,b,h).then(function(e){return o.Hu()?(T=null,void t.Ht()):(!(e.Wa&&"column"!==e.Wa)&&E!==l||a.Hu()||a.finish(),a.Hu()?(E=0,c.Xk=f.clone(),a.validate(),void(a.gh()?(T=null,t.Ht()):t.zt())):(w=e,T[E-1]=w,w.Wa&&"column"!=w.Wa&&(E=l,"region"!=w.Wa&&(c.n_[u]=!0)),void(E<l?t.zt():t.Ht())))})}).then(function(){p.finish(T)}),p.result()},e.prototype.tb=function(t,e,n,i,r,o,a){var s=this;e.reset();var u=e.dg(s,"enabled");if(u&&u!==j.t._true)return Y.d(!0);var l=Y.c("layoutContainer"),h=e.dg(s,"wrap-flow")===j.t.auto,c=e.dg(s,"flow-from"),p=s.viewport.document.createElement("div"),f=e.dg(s,"position");b.F(p,"position",f?f.name:"absolute"),n.insertBefore(p,n.firstChild);var d,v=new K.b(p);v.vertical=e.vertical,v.exclusions=o,e.Rg(s,v,t,s.faces,s.eh),v.ls=i,v.vs=r,i+=v.left+v.marginLeft+v.borderLeft,r+=v.top+v.marginTop+v.borderTop,this.m_(a,e,v);var g=!1;if(c&&c.ht())if(s.n_[c.toString()])a.Hu()||e.Ig(s,v,t,null,1,s.eh,s.faces),d=Y.d(!0);else{var m=Y.c("layoutContainer.inner"),E=c.toString(),w=e.pg(s,"column-count");s.E_(t,e,i,r,o,a,v,E,w).then(function(n){if(!a.Hu()){var i=n[0];y.a(i),i.element===p&&(v=i),v.ps=Math.max.apply(null,n.map(function(t){return t.ps})),e.Ig(s,v,t,i,w,s.eh,s.faces);var r=s.Xk.os[E];r&&"region"===r.breakAfter&&(r.breakAfter=null)}m.finish(!0)}),d=m.result()}else{var T=e.dg(s,"content");if(T&&K.y(T)){var N="span";T.url&&(N="img");var S=s.viewport.document.createElement(N);T.visit(new K.c(S,s,T,s.Yl.Kl())),p.appendChild(S),"img"==N&&e.Og(s,S,s.faces),e.Cg(s,v,t,s.faces)}else e.sg&&(n.removeChild(p),g=!0);g||e.Ig(s,v,t,null,1,s.eh,s.faces),d=Y.d(!0)}return d.then(function(){if(a.Hu())l.finish(!0);else{if(!e.Zm||Math.floor(v.ps)>0){if(!g&&!h){var u=e.dg(s,"shape-outside"),c=v.Ys(u,s);o.push(c)}}else if(0==e.children.length)return n.removeChild(p),void l.finish(!0);var f=e.children.length-1;l.loop(function(){for(;f>=0;){var n=e.children[f--],u=s.tb(t,n,p,i,r,o,a);if(u.Mt())return u.Pt(function(){return Y.d(!a.Hu())});if(a.Hu())break}return Y.d(!1)}).then(function(){l.finish(!0)})}}),l.result()},e.prototype.__=function(){var t=this.Xk.page;for(var e in this.Xk.os)for(var n=this.Xk.os[e],i=n.positions.length-1;i>=0;i--){var r=n.positions[i];r.rs.startPage>=0&&r.rs.startPage+r.rs.linger-1<=t&&n.positions.splice(i,1)}},e.prototype.l_=function(){var t=this.Xk.page;for(var e in this.Xk.os)for(var n=this.Xk.os[e],i=n.positions.length-1;i>=0;i--){var r=n.positions[i];r.rs.startPage<0&&r.rs.startOffset<this.Yk&&(r.rs.startPage=t)}},e.prototype.x_=function(t){for(var e in this.Wb){var n=t.os[e];if(n&&n.positions.length>0)return!1}return!0},e.prototype.y_=function(t,e){var n=this,i=t.container===t.Yr;n.n_={},e?(n.Xk=e.clone(),n.styler.lw(e.us)):(n.Xk=new K.j,n.styler.lw(-1)),this.lang&&t.Yr.setAttribute("lang",this.lang),(e=n.Xk).page++,n.dn(n.style.Zl),n.Qk=e.clone();var o=i?{}:n.t_.SE(),a=n.c_(o);if(!a)return Y.d(null);var s=0;if(!i){t.ee(a.$m.specified.width.value===j.q),t.se(a.$m.specified.height.value===j.p),n.Yl.Ev(t),n.Yl.xv(o,n);var u=Rn(Dn(o),this);n.T_(u,t),function(t,e,n,i){var r=!1,o=!1,a=t.marks;if(a){var s=a.value;s.at()?s.values.forEach(function(t){t===j.t.crop?r=!0:t===j.t.cross&&(o=!0)}):s===j.t.crop?r=!0:s===j.t.cross&&(o=!0)}if(r||o){var u=n.container,l=u.ownerDocument;y.a(l);var h=e.bleed,c=j.x(Cn,i),p=j.x(On,i),f=j.x(kn,i);if(h){var d=t["background-color"];d&&d.value&&(n.Yr.style.backgroundColor=d.value.stringValue())}r&&Object.keys(An).forEach(function(t){var e=An[t],n=function(t,e,n,i,r,o){var a=i;a<=r+2*L.G.mm&&(a=r+i/2);var s=Math.max(i,a),u=r+s+n/2,l=Pn(t,u,u),h=[[0,r+i],[i,r+i],[i,r+i-a]],c=h.map(function(t){return[t[1],t[0]]});e!==An.TOP_RIGHT&&e!==An.BOTTOM_RIGHT||(h=h.map(function(t){return[r+s-t[0],t[1]]}),c=c.map(function(t){return[r+s-t[0],t[1]]})),e!==An.BOTTOM_LEFT&&e!==An.BOTTOM_RIGHT||(h=h.map(function(t){return[t[0],r+s-t[1]]}),c=c.map(function(t){return[t[0],r+s-t[1]]}));var p=Mn(t,n);p.setAttribute("points",h.map(function(t){return t.join(",")}).join(" ")),l.appendChild(p);var f=Mn(t,n);return f.setAttribute("points",c.map(function(t){return t.join(",")}).join(" ")),l.appendChild(f),e.split(" ").forEach(function(t){l.style[t]=o+"px"}),l}(l,e,c,f,h,p);u.appendChild(n)}),o&&Object.keys(In).forEach(function(t){var e=In[t],n=function(t,e,n,i,r){var o,a,s=2*i;e===In.TOP||e===In.BOTTOM?(o=s,a=i):(o=i,a=s);var u=Pn(t,o,a),l=Mn(t,n);l.setAttribute("points","0,"+a/2+" "+o+","+a/2),u.appendChild(l);var h=Mn(t,n);h.setAttribute("points",o/2+",0 "+o/2+","+a),u.appendChild(h);var c,p=Mn(t,n,"circle");switch(p.setAttribute("cx",o/2),p.setAttribute("cy",a/2),p.setAttribute("r",i/4),u.appendChild(p),e){case In.TOP:c=In.BOTTOM;break;case In.BOTTOM:c=In.TOP;break;case In.LEFT:c=In.RIGHT;break;case In.RIGHT:c=In.LEFT}return Object.keys(In).forEach(function(t){var n=In[t];n===e?u.style[n]=r+"px":n!==c&&(u.style[n]="0",u.style["margin-"+n]="auto")}),u}(l,e,c,f,p);u.appendChild(n)})}}(o,u,t,this),s=u.Mg+u.bleed}var l=!i&&a.dg(n,"writing-mode")||j.t.horizontal_tb;this.cn=l!=j.t.horizontal_tb;var h=a.dg(n,"direction")||j.t.ltr,c=new W.e(n.s_,W.a.PAGE,null,null,null,l,h),p=Y.c("layoutNextPage");return p.Bt(function(e){n.tb(t,a,t.Yr,s,s,[],c).then(function(){c.Hu()||c.finish(),c.Hu()?(n.Xk=n.Qk.clone(),c.validate(),e.zt()):e.Ht()})}).then(function(){if(a.Fg(n,t,n.eh),!i){var o=new L.s(a.$m.scope,"left-page");t.side=o.evaluate(n)?r.LEFT:r.RIGHT,n.__(),e=n.Xk,Object.keys(e.os).forEach(function(t){var i=e.os[t],r=i.breakAfter;!r||"page"!==r&&n.Vk(r)||(i.breakAfter=null)})}n.Xk=n.Qk=null,e.us=n.styler.Ew();var s=n.style.store.N_(n.xmldoc);t.finish(s,n.eh),n.x_(e)&&(e=null),p.finish(e)}),p.result()},e.prototype.T_=function(t,e){this.sn=t.qt,this.on=t.Kt,this.e_=t.qt+2*t.Ug,this.r_=t.Kt+2*t.Ug,e.container.style.width=this.e_+"px",e.container.style.height=this.r_+"px",e.Yr.style.left=t.Mg+"px",e.Yr.style.right=t.Mg+"px",e.Yr.style.top=t.Mg+"px",e.Yr.style.bottom=t.Mg+"px",e.Yr.style.padding=t.bleed+"px",e.Yr.style.paddingTop=t.bleed+.01+"px"},e}(L.g),Mi=function(t){function e(e,n,i,r){var o=t.call(this,e.nn,e,n,i,r,e.ir,!i)||this;return o.S_=e,o.A_=!1,o}return Li(e,t),e.prototype.co=function(){},e.prototype.lo=function(t,e,n){var i=new Je(this.S_.Zl,t,e,n,this.S_.Uk,this.condition,this.owner.Pr());this.S_.Dr(new Tn(i.scope,this.S_,i,this.ir))},e.prototype.ho=function(t){var n=t.expr;null!=this.condition&&(n=L.D(this.scope,this.condition,n)),this.S_.Dr(new e(this.S_,n,this,this.regionId))},e.prototype.eo=function(){this.S_.Dr(new H.f(this.scope,this.owner))},e.prototype.no=function(){var t={};this.S_.Gk.push({properties:t,condition:this.condition}),this.S_.Dr(new H.h(this.scope,this.owner,null,t,this.S_.ir))},e.prototype.fo=function(t){var e=this.S_.zk[t];e||(e={},this.S_.zk[t]=e),this.S_.Dr(new H.h(this.scope,this.owner,null,e,this.S_.ir))},e.prototype.ro=function(){var t={};this.S_.Hk.push(t),this.S_.Dr(new H.h(this.scope,this.owner,this.condition,t,this.S_.ir))},e.prototype.io=function(t){var e=this.S_.Bk;if(t){var n=H.q(e,"_pseudos");(e=n[t])||(e={},n[t]=e)}this.S_.Dr(new H.h(this.scope,this.owner,null,e,this.S_.ir))},e.prototype.so=function(){this.A_=!0,this.xr()},e.prototype.oo=function(){var t=new li(this.S_.Zl,this.S_,this,this.ir,this.S_.PE);this.S_.Dr(t),t.oo()},e.prototype.Tr=function(){if(H.b.prototype.Tr.call(this),this.A_){this.A_=!1;var t="R"+this.S_.R_++;this.special("region-id",j.r(t)),this.Nr();var n=new e(this.S_,this.condition,this,t);this.S_.Dr(n),n.Tr()}},e}(H.b);function Fi(t){var e=t.getAttribute("content");if(!e)return"";for(var n,i={};null!=(n=e.match(/^,?\s*([-A-Za-z_.][-A-Za-z_0-9.]*)\s*=\s*([-+A-Za-z_0-9.]*)\s*/));)e=e.substr(n[0].length),i[n[1]]=n[2];var r=i.width-0,o=i.height-0;return r&&o?"@-epubx-viewport{width:"+r+"px;height:"+o+"px;}":""}var Ui=function(t){function e(e){var n=t.call(this)||this;return n.ir=e,n.R_=0,n.Gk=[],n.Bk={},n.zk={},n.Hk=[],n.PE={},n.nn=new L.m(null),n.Zl=new L.m(n.nn),n.Uk=new Ze(n.nn),n.C_=new Mi(n,null,null,null),n.slave=n.C_,n}return Li(e,t),e.prototype.error=function(t,e){l.b.warn("CSS parser:",t)},e}(G.a);function Bi(t,e){return e.O_(t)}var zi=function(t){function e(e){var n=t.call(this,Bi,X.b.DOCUMENT)||this;return n.jk=e,n.I_={},n.L_={},n.P_={},n.F_={},n.ir=null,n.styleSheets=[],n.D_=!1,n}return Li(e,t),e.prototype.init=function(t,e){var n=this;this.M_(t,e);var i=b.C("user-agent.xml",b.D),r=Y.c("OPSDocStore.init");return this.ir=Ue(),Di.get().then(function(){n.load(i).then(function(){n.D_=!0,r.finish(!0)})}),r.result()},e.prototype.o_=function(t){return this.P_[t.url]},e.prototype.N_=function(t){return this.F_[t.url]},e.prototype.M_=function(t,e){this.U_(),t&&t.forEach(this.G_,this),e&&e.forEach(this.B_,this)},e.prototype.U_=function(){this.styleSheets.splice(0)},e.prototype.G_=function(t){var e=t.url;e&&(e=b.C(b.n(e),b.h)),this.styleSheets.push({url:e,text:t.text,flavor:G.g.AUTHOR,classes:null,media:null})},e.prototype.B_=function(t){var e=t.url;e&&(e=b.C(b.n(e),b.h)),this.styleSheets.push({url:e,text:t.text,flavor:G.g.USER,classes:null,media:null})},e.prototype.O_=function(t){var e=Y.c("OPSDocStore.load"),n=this,i=t.url,r=i.endsWith("?viv-toc-box");return Ci(t,n).then(function(t){if(t){if(n.D_)for(var o=u.b(u.a.PREPROCESS_SINGLE_DOCUMENT),a=0;a<o.length;a++)try{o[a](t.document)}catch(t){l.b.warn("Error during single document preprocessing:",t)}var s=[],h=t.document.getElementsByTagNameNS(b.a.epub,"trigger");for(a=0;a<h.length;a++){var c=h[a],p=c.getAttributeNS(b.a.EV,"observer"),f=c.getAttributeNS(b.a.EV,"event"),d=c.getAttribute("action"),v=c.getAttribute("ref");p&&f&&d&&v&&s.push({observer:p,event:f,action:d,ref:v})}n.F_[i]=s;var g=[],m=b.C("user-agent-page.css",b.D);g.push({url:m,text:'@namespace html "http://www.w3.org/1999/xhtml";\n@namespace fb2 "http://www.gribuser.ru/xml/fictionbook/2.0";\n\nhtml|body, fb2|body {\n  hyphens: -epubx-expr(pref-hyphenate?"auto":"manual");\n}\n\n@-adapt-footnote-area {\n  display: block;\n  margin-block-start: 0.5em;\n  margin-block-end: 0.5em;\n}\n\n@-adapt-footnote-area ::before {\n  display: block;\n  border-block-start-width: 1px;\n  border-block-start-style: solid;\n  border-block-start-color: black;\n  margin-block-end: 0.4em;\n  margin-inline-start: 0;\n  margin-inline-end: 60%;\n}\n\n/* default page master */\n@-epubx-page-master :background-host {\n  @-epubx-partition :layout-host {\n    -epubx-flow-from: body;\n    top: -epubx-expr(header.margin-bottom-edge);\n    bottom: -epubx-expr(page-height - footer.margin-top-edge);\n    left: 0px;\n    right: 0px;\n    column-width: 25em;\n  }\n  @-epubx-partition footer :oeb-page-foot {\n    writing-mode: horizontal-tb;\n    -epubx-flow-from: oeb-page-foot;\n    bottom: 0px;\n    left: 0px;\n    right: 0px;\n  }\n  @-epubx-partition header :oeb-page-head {\n    writing-mode: horizontal-tb;\n    -epubx-flow-from: oeb-page-head;\n    top: 0px;\n    left: 0px;\n    right: 0px;\n  }\n}\n\n@page {\n  @top-left-corner {\n    text-align: right;\n    vertical-align: middle;\n  }\n  @top-left {\n    text-align: left;\n    vertical-align: middle;\n  }\n  @top-center {\n    text-align: center;\n    vertical-align: middle;\n  }\n  @top-right {\n    text-align: right;\n    vertical-align: middle;\n  }\n  @top-right-corner {\n    text-align: left;\n    vertical-align: middle;\n  }\n  @left-top {\n    text-align: center;\n    vertical-align: top;\n  }\n  @left-middle {\n    text-align: center;\n    vertical-align: middle;\n  }\n  @left-bottom {\n    text-align: center;\n    vertical-align: bottom;\n  }\n  @right-top {\n    text-align: center;\n    vertical-align: top;\n  }\n  @right-middle {\n    text-align: center;\n    vertical-align: middle;\n  }\n  @right-bottom {\n    text-align: center;\n    vertical-align: bottom;\n  }\n  @bottom-left-corner {\n    text-align: right;\n    vertical-align: middle;\n  }\n  @bottom-left {\n    text-align: left;\n    vertical-align: middle;\n  }\n  @bottom-center {\n    text-align: center;\n    vertical-align: middle;\n  }\n  @bottom-right {\n    text-align: right;\n    vertical-align: middle;\n  }\n  @bottom-right-corner {\n    text-align: left;\n    vertical-align: middle;\n  }\n}\n\n@media print {\n  @page {\n    margin: 10%;\n  }\n}\n',flavor:G.g.USER_AGENT,classes:null,media:null});var y=t.head;if(!r&&y)for(var E=y.firstChild;E;E=E.nextSibling)if(1==E.nodeType){var w=E,T=w.namespaceURI,N=w.localName;if(T==b.a.XHTML)if("style"==N){var S=w.getAttribute("class"),_=w.getAttribute("media"),A=w.getAttribute("title");g.push({url:i,text:w.textContent,flavor:G.g.AUTHOR,classes:A?S:null,media:_})}else if("link"==N){var I=w.getAttribute("rel");if(S=w.getAttribute("class"),_=w.getAttribute("media"),"stylesheet"==I||"alternate stylesheet"==I&&S){var x=w.getAttribute("href");x=b.C(x,i),A=w.getAttribute("title"),g.push({url:x,text:null,classes:A?S:null,media:_,flavor:G.g.AUTHOR})}}else"meta"==N&&"viewport"==w.getAttribute("name")&&g.push({url:i,text:Fi(w),flavor:G.g.AUTHOR,classes:null,media:null});else if(T==b.a.FB2)"stylesheet"==N&&"text/css"==w.getAttribute("type")&&g.push({url:i,text:w.textContent,flavor:G.g.AUTHOR,classes:null,media:null});else if(T==b.a.SSE&&"property"===N){var C=w.getElementsByTagName("name")[0];if(C&&"stylesheet"===C.textContent){var O=w.getElementsByTagName("value")[0];O&&(x=b.C(O.textContent,i),g.push({url:x,text:null,classes:null,media:null,flavor:G.g.AUTHOR}))}}}if(!r)for(a=0;a<n.styleSheets.length;a++)g.push(n.styleSheets[a]);var k="";for(a=0;a<g.length;a++)k+=g[a].url,k+="^",g[a].text&&(k+=g[a].text),k+="^";var L=n.I_[k];if(L)return n.P_[i]=L,void e.finish(t);var D=n.L_[k];D||(D=new Be.a(function(){var t=Y.c("fetchStylesheet"),e=0,i=new Ui(n.ir);return t.loop(function(){if(e<g.length){var t=g[e++];return i.yr(t.flavor),null!==t.text?G.k(t.text,i,t.url,t.classes,t.media).Ft(!0):G.l(t.url,i,t.classes,t.media)}return Y.d(!1)}).then(function(){var e=i.C_.finish();L=new Ri(n,i.nn,i.Zl,e,i.Uk,i.Gk,i.Bk,i.zk,i.Hk,i.PE),n.I_[k]=L,delete n.L_[k],t.finish(L)}),t.result()},"FetchStylesheet "+i),n.L_[k]=D,D.start()),D.get().then(function(r){n.P_[i]=r,e.finish(t)})}else e.finish(null)}),e.result()},e}(X.a);function Hi(t){return String.fromCharCode(t>>>24&255,t>>>16&255,t>>>8&255,255&t)}function Gi(t){return(255&t.charCodeAt(0))<<24|(255&t.charCodeAt(1))<<16|(255&t.charCodeAt(2))<<8|255&t.charCodeAt(3)}function Vi(t){var e=new b.d;e.append(t);var n=55-t.length&63;for(e.append("");n>0;)n--,e.append("\0");e.append("\0\0\0\0"),e.append(Hi(8*t.length)),t=e.toString();for(var i,r=[1732584193,4023233417,2562383102,271733878,3285377520],o=[],a=0;a<t.length;a+=64){for(i=0;i<16;i++)o[i]=Gi(t.substr(a+4*i,4));for(;i<80;i++){var s=o[i-3]^o[i-8]^o[i-14]^o[i-16];o[i]=s<<1|s>>>31}var u=r[0],l=r[1],h=r[2],c=r[3],p=r[4],f=void 0;for(i=0;i<80;i++)f=i<20?1518500249+(l&h|~l&c):i<40?1859775393+(l^h^c):i<60?2400959708+(l&h|l&c|h&c):3395469782+(l^h^c),f+=(u<<5|u>>>27)+p+o[i],p=c,c=h,h=l<<30|l>>>2,l=u,u=f;r[0]=r[0]+u|0,r[1]=r[1]+l|0,r[2]=r[2]+h|0,r[3]=r[3]+c|0,r[4]=r[4]+p|0}return r}var Xi="",ji="",Wi=function(){function t(t,e,n,i,r,o,a,s,u,l){this.store=t,this.url=e,this.lang=n,this.eh=i,this.Kk=r,this.z_=a,this.VE=s,this.Wl=u,this.Yl=l,this.page=null,this.instance=null,this.pref=L.E(o),this.pref.Xt=!1}return t.prototype.H_=function(t,e){if(0!=e--)for(var n=t.firstChild;n;n=n.nextSibling)if(1==n.nodeType){var i=n;"auto"!=b.t(i,"height","auto")&&(b.F(i,"height","auto"),this.H_(i,e)),"absolute"==b.t(i,"position","static")&&(b.F(i,"position","relative"),this.H_(i,e))}},t.prototype.j_=function(t){var e=this.z_.j_(t);return function(t,n,i){var r=i.behavior;if(r)switch(r.toString()){case"body-child":t.parentElement.getAttribute("data-vivliostyle-primary-entry")&&(t.querySelector("[role=doc-toc], [role=directory], nav li a, .toc, #toc")||(i.display=j.t.none));break;case"toc-node-anchor":i.color=j.t.inherit,i["text-decoration"]=j.t.none;break;case"toc-node":i.display=j.t.block,i.margin=j.u,i.padding=j.u,i["padding-inline-start"]=new j.i(1.25,"em");break;case"toc-node-first-child":i.display=j.t.inline_block,i.margin=new j.i(.2,"em"),i["vertical-align"]=j.t.top,i.color=j.t.inherit,i["text-decoration"]=j.t.none}if(!r||"toc-node"!=r.toString()&&"toc-container"!=r.toString())return e(t,n,i);var o=t.firstChild;o&&1!==o.nodeType&&""===o.textContent.trim()&&t.replaceChild(t.ownerDocument.createComment(o.textContent),o);var a=n.getAttribute("data-adapt-class");"toc-node"==a&&(s=n.firstChild).textContent!=Xi&&(s.textContent=Xi,b.F(s,"cursor","pointer"),s.addEventListener("click",Yi,!1),s.setAttribute("role","button"),s.setAttribute("aria-expanded","false"),n.setAttribute("aria-expanded","false"),"0px"!==n.style.height&&(s.tabIndex=0));var s,u=n.ownerDocument.createElement("div");if(u.setAttribute("data-adapt-process-children","true"),"toc-node"==r.toString())if((s=n.ownerDocument.createElement("div")).textContent="",b.F(s,"margin","0.2em 0 0 -1em"),b.F(s,"margin-inline-start","-1em"),b.F(s,"margin-inline-end","0"),b.F(s,"display","inline-block"),b.F(s,"width","1em"),b.F(s,"text-align","center"),b.F(s,"vertical-align","top"),b.F(s,"cursor","default"),b.F(s,"font-family","Menlo,sans-serif"),u.appendChild(s),b.F(u,"overflow","hidden"),u.setAttribute("data-adapt-class","toc-node"),u.setAttribute("role","treeitem"),"toc-node"==a||"toc-container"==a){b.F(u,"height","0px");var l=t.firstElementChild;l&&"a"===l.localName&&(l.tabIndex=-1)}else n.setAttribute("role","tree");else"toc-node"==a&&(u.setAttribute("data-adapt-class","toc-container"),u.setAttribute("role","group"),u.setAttribute("aria-hidden","true"));return Y.d(u)}},t.prototype.showTOC=function(t,e,n,i,r){var o=this;if(this.page)return Y.d(this.page);var a=this,s=Y.c("showTOC"),u=new K.l(t,t);this.page=u;var l=this.url+"?viv-toc-box";return this.store.load(l).then(function(i){var l=o.store.resources[o.url];l&&l.body&&l.body.getAttribute("data-vivliostyle-primary-entry")&&i.body.setAttribute("data-vivliostyle-primary-entry",!0);var h=a.store.o_(i),c=h.qk(n,1e5,r);e=new _i(e.window,c.fontSize,e.root,c.width,c.height);var p=a.j_(i),f=new Pi(h,i,a.lang,e,a.eh,a.Kk,p,a.VE,0,a.Wl,a.Yl);a.instance=f,f.pref=a.pref,f.init().then(function(){f.y_(u,null).then(function(){Array.from(u.container.querySelectorAll("[data-vivliostyle-toc-box]>*>*>*>*>*[style*='display: none']")).forEach(function(t){t.setAttribute("aria-hidden","true"),t.setAttribute("hidden","hidden")}),a.H_(t,2),s.finish(u)})})}),s.result()},t.prototype.X_=function(){this.page&&(this.page.container.style.visibility="hidden",this.page.container.setAttribute("aria-hidden","true"))},t.prototype.isTOCVisible=function(){return!!this.page&&"visible"===this.page.container.style.visibility},t}();function Yi(t){var e=t.target,n=e.textContent==Xi;e.textContent=n?ji:Xi;var i=e.parentNode;e.setAttribute("aria-expanded",n?"true":"false"),i.setAttribute("aria-expanded",n?"true":"false");for(var r=i.firstChild;r;){if(1===r.nodeType){var o=r,a=o.getAttribute("data-adapt-class");if("toc-container"===a){if(o.setAttribute("aria-hidden",n?"false":"true"),o.firstChild){r=o.firstChild;continue}}else if("toc-node"===a&&(o.style.height=n?"auto":"0px",o.children.length>=2&&(o.children[1].tabIndex=n?0:-1),o.children.length>=3&&(o.children[0].tabIndex=n?0:-1,!n))){var s=o.children[0];if(s.textContent==ji){s.textContent=Xi,s.setAttribute("aria-expanded","false"),o.setAttribute("aria-expanded","false"),r=o.children[2];continue}}}for(;!r.nextSibling&&r.parentNode!==i;)r=r.parentNode;r=r.nextSibling}t.stopPropagation()}var Ki=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),$i=function(t){function e(){var e=t.call(this,null)||this;return e.V_={},e.Y_={},e.deobfuscators={},e.documents={},e.jk=e.W_(),e.q_=new X.a(Ci,X.b.DOCUMENT),e.K_=X.f(),e}return Ki(e,t),e.prototype.W_=function(){var t=this;return function(e){return t.deobfuscators[e]}},e.prototype.Z_=function(t,e,n){return this.q_.load(t,e,n)},e.prototype.Q_=function(t){this.q_.fetch(t)},e.prototype.J_=function(t,e,n){return this.K_.load(t,e,n)},e.prototype.tx=function(t){this.K_.fetch(t)},e.prototype.nx=function(t,e){var n=this,i=Y.c("loadPubDoc");return X.c(t,null,"HEAD").then(function(r){if(r.status>=400)n.ix(t,e).then(function(e){e?i.finish(e):(l.b.error("Failed to fetch a source document from "+t+" ("+r.status+(r.statusText?" "+r.statusText:"")+")"),i.finish(null))});else if(r.status||r.responseXML||r.responseText||r.Mh||r.contentType||/\/[^\/.]+(?:[#?]|$)/.test(t)&&(t=t.replace(/([#?]|$)/,"/$1")),"application/oebps-package+xml"==r.contentType||/\.opf(?:[#?]|$)/.test(t)){var o=t.match(/^((?:.*\/)?)([^\/]*)$/),a=o[1],s=o[2];n.sx(a,s,e).Dt(i)}else"application/ld+json"==r.contentType||"application/webpub+json"==r.contentType||"application/audiobook+json"==r.contentType||"application/json"==r.contentType||/\.json(?:ld)?(?:[#?]|$)/.test(t)?n.J_(t,!0).then(function(e){if(!e)return l.b.error("Received an empty response for "+t+". This may be caused by the server not allowing cross-origin resource sharing (CORS)."),void i.finish(null);var r=new ar(n,t);r.ox(e).then(function(){i.finish(r)})}):n.ux(t).then(function(r){r?i.finish(r):n.ix(t,e).then(function(e){e?i.finish(e):(l.b.error("Failed to load "+t+"."),i.finish(null))})})}),i.result()},e.prototype.ix=function(t,e){var n=this,i=Y.c("loadEPUBDoc");t.endsWith("/")||(t+="/"),e&&this.tx(t+"?r=list"),this.Q_(t+"META-INF/encryption.xml");var r=t+"META-INF/container.xml";return this.Z_(r).then(function(r){if(r){for(var o=0,a=r.doc().child("container").child("rootfiles").child("rootfile").attribute("full-path");o<a.length;o++){var s=a[o];if(s)return void n.sx(t,s,e).Dt(i)}i.finish(null)}}),i.result()},e.prototype.sx=function(t,e,n){var i=this,r=t+e,o=i.V_[r];if(o)return Y.d(o);var a=Y.c("loadOPF");return i.Z_(r,!0,"Failed to fetch EPUB OPF "+r).then(function(e){e?i.Z_(t+"META-INF/encryption.xml").then(function(s){(n?i.J_(t+"?r=list"):Y.d(null)).then(function(n){(o=new ar(i,t)).hx(e,s,n,t+"?r=manifest").then(function(){i.V_[r]=o,i.Y_[t]=o,a.finish(o)})})}):l.b.error("Received an empty response for EPUB OPF "+r+". This may be caused by the server not allowing cross-origin resource sharing (CORS).")}),a.result()},e.prototype.ux=function(t){var e=this,n=Y.c("loadWebPub");return this.load(t).then(function(i){if(i)if(i.document.querySelector("a[href='META-INF/'],a[href$='/META-INF/']"))n.finish(null);else{var r=i.document,o=new ar(e,t);r.body&&r.body.setAttribute("data-vivliostyle-primary-entry",!0);var a=r.querySelector("link[rel='publication'],link[rel='manifest'][type='application/webpub+json']");if(a){var s=a.getAttribute("href");if(/^#/.test(s)){var u=b.H(r.getElementById(s.substr(1)).textContent);o.ox(u,r).then(function(){n.finish(o)})}else e.J_(b.C(a.getAttribute("href"),t)).then(function(t){o.ox(t,r).then(function(){n.finish(o)})})}else o.ox({},r).then(function(){o.ax&&o.ax.src===i.url&&(r.querySelector("[role=doc-toc], [role=directory], nav, .toc, #toc")||(o.ax=null)),n.finish(o)})}else l.b.error("Received an empty response for "+t+". This may be caused by the server not allowing cross-origin resource sharing (CORS).")}),n.result()},e.prototype.lx=function(t,e){var n=Y.c("EPUBDocStore.load"),i=b.I(t);return(this.documents[i]=this.O_({status:200,statusText:"",url:i,contentType:e.contentType,responseText:null,responseXML:e,Mh:null})).Dt(n),n.result()},e.prototype.load=function(e){var n=b.I(e),i=this.documents[n];if(i)return i.Mt()?i:Y.d(i.get());var r=Y.c("EPUBDocStore.load");return(i=t.prototype.load.call(this,n,!0,"Failed to fetch a source document from "+n)).then(function(t){t?r.finish(t):n.startsWith("data:")?l.b.error("Failed to load "+n+". Invalid data."):n.startsWith("http:")&&b.h.startsWith("https:")?l.b.error("Failed to load "+n+'. Mixed Content ("http:" content on "https:" context) is not allowed.'):l.b.error("Received an empty response for "+n+". This may be caused by the server not allowing cross-origin resource sharing (CORS).")}),r.result()},e}(zi),qi=function(){function t(){this.id=null,this.src="",this.vx=null,this.title=null,this.bx=null,this.te=-1,this.wx=0,this.compressed=null,this.epage=0,this.epageCount=0,this.startPage=null,this.skipPagesBefore=null,this.mx=b.o}return t.prototype.gx=function(t,e){this.id=t.getAttribute("id"),this.src=b.C(t.getAttribute("href"),e),this.vx=t.getAttribute("media-type");var n=t.getAttribute("properties");n&&(this.mx=b.f(n.split(/\s+/)))},t.prototype.Ex=function(t){this.te=t.index,this.id="item"+(t.index+1),this.src=t.url,this.startPage=t.startPage,this.skipPagesBefore=t.skipPagesBefore},t}();function Zi(t){return t.id}function Qi(t){return"1040:"+function(t){for(var e=function(t){for(var e=Vi(t),n=new b.d,i=0;i<e.length;i++)n.append(Hi(e[i]));return n.toString()}(t),n=new b.d,i=0;i<e.length;i++)n.append((256|e.charCodeAt(i)).toString(16).substr(1));return n.toString()}(t)}var Ji={dcterms:"http://purl.org/dc/terms/",marc:"http://id.loc.gov/vocabulary/",media:"http://www.idpf.org/epub/vocab/overlays/#",rendition:"http://www.idpf.org/vocab/rendition/#",onix:"http://www.editeur.org/ONIX/book/codelists/current.html#",xsd:"http://www.w3.org/2001/XMLSchema#"},tr="http://idpf.org/epub/vocab/package/#",er={language:Ji.dcterms+"language",title:Ji.dcterms+"title",creator:Ji.dcterms+"creator",layout:Ji.rendition+"layout",kx:tr+"title-type",_x:tr+"display-seq",xx:tr+"alternate-script"};function nr(t,e){var n={};return function(i,r){var o,a=i.r||n,s=r.r||n;if(t==er.title&&(o="main"==a[er.kx])!=("main"==s[er.kx]))return o?-1:1;var u=parseInt(a[er._x],10);isNaN(u)&&(u=Number.MAX_VALUE);var l=parseInt(s[er._x],10);return isNaN(l)&&(l=Number.MAX_VALUE),u!=l?u-l:t!=er.language&&e&&(o=(a[er.language]||a[er.xx])==e)!=((s[er.language]||s[er.xx])==e)?o?-1:1:i.o-r.o}}function ir(){var t=window.MathJax;return t?t.Hub:null}var rr,or={"application/xhtml+xml":!0,"image/jpeg":!0,"image/png":!0,"image/svg+xml":!0,"image/gif":!0,"audio/mp3":!0},ar=function(){function t(t,e){this.store=t,this.yx=e,this.Tx=null,this.Nx=null,this.items=null,this.spine=null,this.Sx=null,this.Ax=null,this.uid=null,this.bindings={},this.lang=null,this.epageCount=0,this.Rx=!1,this.Cx=!0,this.Ox=null,this.metadata={},this.Ix=null,this.ax=null,this.cover=null,this.VE={},this.NE=null,this.Wl=this.Lx(),ir()&&(H.H[b.a.MATHML]=!0)}return t.prototype.Lx=function(){var t=this;return new(function(){function e(){}return e.prototype.$l=function(t,e){var n=e+(t?"#"+t:"");return"viv-id-"+b.r(n,":")},e.prototype.sa=function(e,n){var i=e.match(/^([^#]*)#?(.*)$/);if(i){var r=i[1]||n,o=i[2];if(r&&t.items.some(function(t){return t.src===r}))return"#"+this.$l(o,r)}return e},e.prototype.Px=function(t){"#"===t.charAt(0)&&(t=t.substring(1)),0===t.indexOf("viv-id-")&&(t=t.substring("viv-id-".length));var e=b.J(t,":").match(/^([^#]*)#?(.*)$/);return e?[e[1],e[2]]:[]},e}())},t.prototype.getMetadata=function(){return this.metadata},t.prototype.Fx=function(t){if(t.startsWith("data:"))return t===this.yx?"":t;if(this.yx){var e=b.C("",this.yx);return t===e||t+"/"===e?"":("/"!=e.charAt(e.length-1)&&(e+="/"),t.substr(0,e.length)==e?decodeURI(t.substr(e.length)):null)}return t},t.prototype.hx=function(t,e,n,r){var o=this;this.Tx=t,this.Nx=e;var a=t.doc().child("package"),s=a.attribute("unique-identifier")[0];if(s){var u=t.KE(t.url+"#"+s);u&&(this.uid=u.textContent.replace(/[ \n\r\t]/g,""))}var l={};for(var h in this.items=a.child("manifest").child("item").Pk().map(function(e){var n=new qi,i=e;n.gx(i,t.url);var r=i.getAttribute("fallback");return r&&!or[n.vx]&&(l[n.src]=r),!o.ax&&n.mx.nav&&(o.ax=n),!o.cover&&n.mx["cover-image"]&&(o.cover=n),n}),this.Sx=b.w(this.items,Zi),this.Ax=b.w(this.items,function(t){return o.Fx(t.src)}),l)for(var c=h;_=this.Sx[l[c]];){if(or[_.vx]){this.VE[h]=_.src;break}c=_.src}this.spine=a.child("spine").child("itemref").Pk().map(function(t,e){var n=t,i=n.getAttribute("idref"),r=o.Sx[i];return r&&(r.bx=n,r.te=e),r});var p=a.child("spine").attribute("toc")[0];p&&(this.Ix=this.Sx[p]);var f=a.child("spine").attribute("page-progression-direction")[0];f&&(this.NE=function(t){switch(t){case"ltr":return i.LTR;case"rtl":return i.RTL;default:throw new Error("unknown PageProgression: "+t)}}(f));for(var d=e?e.doc().child("encryption").child("EncryptedData").predicate(Oi.Lk("EncryptionMethod",Oi.Ik("Algorithm","http://www.idpf.org/2008/embedding"))).child("CipherData").child("CipherReference").attribute("URI"):[],v=a.child("bindings").child("mediaType").Pk(),g=0;g<v.length;g++){var m=v[g].getAttribute("handler");(I=v[g].getAttribute("media-type"))&&m&&this.Sx[m]&&(this.bindings[I]=this.Sx[m].src)}if(this.metadata=function(t,e){var n;if(e){for(var i in n={},Ji)n[i]=Ji[i];for(var r=void 0;null!=(r=e.match(/^\s*([A-Z_a-z\u007F-\uFFFF][-.A-Z_a-z0-9\u007F-\uFFFF]*):\s*(\S+)/));)e=e.substr(r[0].length),n[r[1]]=r[2]}else n=Ji;var o=function(t){if(t){var e=t.match(/^\s*(([^:]*):)?(\S+)\s*$/);if(e){var i=e[2]?n[e[2]]:tr;if(i)return i+e[3]}}return null},a=1,s=t.Mk().Dk(function(t){if("meta"==t.localName){var e=o(t.getAttribute("property"));if(e)return{name:e,value:t.textContent,id:t.getAttribute("id"),order:a++,refines:t.getAttribute("refines"),lang:null,scheme:o(t.getAttribute("scheme"))}}else if(t.namespaceURI==b.a.DC)return{name:Ji.dcterms+t.localName,order:a++,lang:t.getAttribute("xml:lang"),value:t.textContent,id:t.getAttribute("id"),refines:null,scheme:null};return null}),u=b.A(s,function(t){return t.refines}),l=function(t){return b.z(t,function(t,e){return t.map(function(t){var e={v:t.value,o:t.order};if(t.schema&&(e.s=t.scheme),t.id||t.lang){var n=u[t.id];if(n||t.lang){if(t.lang){var i={name:er.language,value:t.lang,lang:null,id:null,refines:t.id,scheme:null,order:t.order};n?n.push(i):n=[i]}var r=b.A(n,function(t){return t.name});e.r=l(r)}}return e})})},h=l(b.A(s,function(t){return t.refines?null:t.name})),c=null;h[er.language]&&(c=h[er.language][0].v);var p=function(t){for(var e in t){var n=t[e];n.sort(nr(e,c));for(var i=0;i<n.length;i++){var r=n[i].r;r&&p(r)}}};return p(h),h}(a.child("metadata"),a.attribute("prefix")[0]),this.metadata[er.language]&&(this.lang=this.metadata[er.language][0].v),this.metadata[er.layout]&&(this.Rx="pre-paginated"===this.metadata[er.layout][0].v),!n){if(d.length>0&&this.uid){var y=function(t){var e=function(t){for(var e=[],n=0,i=Vi(t);n<i.length;n++){var r=i[n];e.push(r>>>24&255,r>>>16&255,r>>>8&255,255&r)}return e}(t);return function(t){var n,i,r=Y.c("deobfuscator");return t.slice?(n=t.slice(0,1040),i=t.slice(1040,t.size)):(n=t.webkitSlice(0,1040),i=t.webkitSlice(1040,t.size-1040)),X.g(n).then(function(t){for(var n=new DataView(t),o=0;o<n.byteLength;o++){var a=n.getUint8(o);a^=e[o%20],n.setUint8(o,a)}r.finish(X.e([n,i]))}),r.result()}}(this.uid);for(g=0;g<d.length;g++)this.store.deobfuscators[this.yx+d[g]]=y}return this.Rx&&this.Dx(),Y.d(!0)}var E=new b.d,w={};if(d.length>0&&this.uid){var T=Qi(this.uid);for(g=0;g<d.length;g++)w[d[g]]=T}for(g=0;g<n.length;g++){var N=n[g],S=N.n;if(S){var _,A=decodeURI(S),I=null;(_=this.Ax[A])&&(_.compressed=0!=N.m,_.wx=N.c,_.vx&&(I=_.vx.replace(/\s+/g,"")));var x=w[A];(I||x)&&(E.append(S),E.append(" "),E.append(I||"application/octet-stream"),x&&(E.append(" "),E.append(x)),E.append("\n"))}}return o.Dx(),X.c(r,X.b.DEFAULT,"POST",E.toString(),"text/plain")},t.prototype.Dx=function(){for(var t=0,e=0,n=this.spine;e<n.length;e++){var i=n[e],r=this.Rx?1:Math.ceil(i.wx/1024);i.epage=t,i.epageCount=r,t+=r}this.epageCount=t,this.Ox&&this.Ox(this.epageCount)},t.prototype.Mx=function(t){this.Cx=t||this.Rx},t.prototype.Ux=function(t){var e=this;if(this.Ox=t,this.Cx)return this.Rx&&0==this.epageCount&&this.Dx(),Y.d(!0);var n=0,i=0,r=Y.c("countEPages");return r.Bt(function(t){if(i!==e.spine.length){var r=e.spine[i++];r.epage=n,e.store.load(r.src).then(function(i){var o=1800,a=i.lang||e.lang;a&&a.match(/^(ja|ko|zh)/)&&(o/=3),r.epageCount=Math.ceil(i.Rk()/o),n+=r.epageCount,e.epageCount=n,e.Ox&&e.Ox(e.epageCount),t.zt()})}else t.Ht()}).Dt(r),r.result()},t.prototype.Gx=function(t,e){var n=this;this.Sx={},this.Ax={},this.items=[],this.spine=this.items;var i=this.Tx=new Ii(null,"",(new DOMParser).parseFromString("<spine></spine>","text/xml"));return t.forEach(function(t){var e=new qi;e.Ex(t),y.a(e.id);var r=i.document.createElement("itemref");r.setAttribute("idref",e.id),i.root.appendChild(r),e.bx=r,n.Sx[e.id]=e;var o=n.Fx(t.url);null==o&&(o=t.url),n.Ax[o]=e,n.items.push(e)}),e?this.store.lx(t[0].url,e):Y.d(null)},t.prototype.ox=function(t,e){var n=this;t.readingProgression&&(this.NE=t.readingProgression),void 0===this.metadata&&(this.metadata={});var i=e&&e.title||t.name||t.metadata&&t.metadata.title;i&&(this.metadata[er.title]=[{v:i}]);var r=this.Fx(this.yx);!t.readingOrder&&e&&null!==r&&(t.readingOrder=[encodeURI(r)],Array.from(e.querySelectorAll("[role=doc-toc] a[href],[role=directory] a[href],nav li a[href],.toc a[href],#toc a[href]")).forEach(function(e){var i=b.I(b.C(e.getAttribute("href"),n.yx)),r=n.Fx(i),o=null!==r?encodeURI(r):i;-1==t.readingOrder.indexOf(o)&&t.readingOrder.push(o)}));var o=[],a=0,s=-1;[t.readingOrder,t.resources].forEach(function(e){e instanceof Array&&e.forEach(function(e){var i=t.readingOrder.includes(e),r="string"==typeof e?e:e.url||e.href,u="string"==typeof e?"":e.Bx||e.href&&e.type||"";if(i||"text/html"===u||"application/xhtml+xml"===u||/(^|\/)([^\/]+\.(x?html|htm|xht)|[^\/.]*)([#?]|$)/.test(r)){var l={url:b.C(b.n(r),n.yx),index:a++,startPage:null,skipPagesBefore:null};"contents"===e.rel&&-1===s&&(s=l.index),o.push(l)}})});var u=Y.c("initWithWebPubManifest");return this.Gx(o).then(function(){-1!==s&&(n.ax=n.items[s]),n.ax||(n.ax=n.Ax[r]),u.finish(!0)}),u.result()},t.prototype.zx=function(t,e){var n=this.spine[t],i=Y.c("getCFI");return this.store.load(n.src).then(function(t){var r=t._w(e),o=null;if(r){var a=t.xw(r,0,!1),s=e-a,u=new O;u.zl(r,s,!1,null),n.bx&&u.zl(n.bx,0,!1,null),o=u.toString()}i.finish(o)}),i.result()},t.prototype.Hx=function(t){var e=this;return Y.b("resolveFragment",function(n){if(t){var i,r=new O;if(r.Bl(t),e.Tx){var o=r.navigate(e.Tx.document);if(1!=o.node.nodeType||o.after||!o.ref)return void n.finish(null);var a=o.node,s=a.getAttribute("idref");if("itemref"!=a.localName||!s||!e.Sx[s])return void n.finish(null);i=e.Sx[s],r=o.ref}else i=e.spine[0];e.store.load(i.src).then(function(t){var e=r.navigate(t.document),o=t.xw(e.node,e.offset,e.after);n.finish({te:i.te,jx:o,Xl:-1})})}else n.finish(null)},function(e,n){l.b.warn(n,"Cannot resolve fragment:",t),e.finish(null)})},t.prototype.Xx=function(t){var e=this;return Y.b("resolveEPage",function(n){if(t<=0)n.finish({te:0,jx:0,Xl:-1});else if(e.Cx){var i=e.spine.findIndex(function(e){return 0==e.epage&&0==e.epageCount||e.epage<=t&&e.epage+e.epageCount>t});-1==i&&(i=e.spine.length-1);var r=e.spine[i];r&&0!=r.epageCount||(r=e.spine[--i]);var o=Math.floor(t-r.epage);n.finish({te:i,jx:-1,Xl:o})}else{var a=b.i(e.spine.length,function(n){var i=e.spine[n];return i.epage+i.epageCount>t});a==e.spine.length&&a--;var s=e.spine[a];e.store.load(s.src).then(function(e){(t-=s.epage)>s.epageCount&&(t=s.epageCount);var i=0;if(t>0){var r=e.Rk();(i=Math.round(r*t/s.epageCount))==r&&i--}n.finish({te:a,jx:i,Xl:-1})})}},function(e,n){l.b.warn(n,"Cannot resolve epage:",t),e.finish(null)})},t.prototype.Vx=function(t){var e=this.spine[t.te];if(this.Cx){var n=e.epage+t.Xl;return Y.d(n)}if(t.jx<=0)return Y.d(e.epage);var i=Y.c("getEPage");return this.store.load(e.src).then(function(n){var r=n.Rk(),o=Math.min(r,t.jx);i.finish(e.epage+o*e.epageCount/r)}),i.result()},t}(),sr=function(t,e){return{page:t,position:{te:t.te,Xl:e,jx:t.offset}}},ur=function(){function t(t,e,n,i,r){this.opf=t,this.viewport=e,this.Kk=n,this.Yx=r,this.$x=[],this.Wx=[],this.qx=!1,this.pref=L.E(i),this.eh=new Si(e),this.Yl=new U(t.Wl)}return t.prototype.Kx=function(t){var e=this.$x[t.te];return e?e.pages[t.Xl]:null},t.prototype.getCurrentPageProgression=function(t){if(this.opf.NE)return this.opf.NE;var e=this.$x[t?t.te:0];return e?e.instance.NE:null},t.prototype.Zx=function(t,e,n){e.container.style.display="none",e.container.style.visibility="visible",e.container.style.position="",e.container.style.top="",e.container.style.left="",e.container.setAttribute("data-vivliostyle-page-side",e.side);var i=t.pages[n];if(e.Kr=0==t.item.te&&0==n,t.pages[n]=e,this.opf.Cx){if(0==n&&t.item.te>0){var r=this.opf.spine[t.item.te-1];t.item.epage=r.epage+r.epageCount}t.item.epageCount=t.pages.length,this.opf.epageCount=this.opf.spine.reduce(function(t,e){return t+e.epageCount},0),this.opf.Ox&&this.opf.Ox(this.opf.epageCount)}if(i)t.instance.viewport.Nk.replaceChild(e.container,i.container),i.dispatchEvent({type:"replaced",target:null,currentTarget:null,preventDefault:null,Qx:e});else{var o=null;if(n>0)o=t.pages[n-1].container.nextElementSibling;else for(var a=t.item.te+1;a<this.$x.length;a++){var s=this.$x[a];if(s&&s.pages[0]){o=s.pages[0].container;break}}t.instance.viewport.Nk.insertBefore(e.container,o)}this.Yx({width:t.instance.e_,height:t.instance.r_},t.instance.i_,t.item.te,t.instance.Wk+n)},t.prototype.Jx=function(t,e){var n=Y.c("renderSinglePage"),i=this.ty(t,e),r=this;return t.instance.y_(i,e).then(function(o){var a=(e=o)?e.page-1:t.ny.length-1;r.Zx(t,i,a),r.Yl.Nv(i.te,a);var s=null;if(e){var u=t.ny[e.page];t.ny[e.page]=e,u&&t.pages[e.page]&&(e.Je(u)||(s=r.Jx(t,e)))}s||(s=Y.d(!0)),s.then(function(){var o=r.Yl.Sv(i),s=0;n.Bt(function(t){if(++s>o.length)t.Ht();else{var e=o[s-1];e.refs=e.refs.filter(function(t){return!t.Vl()}),0!==e.refs.length?r.iy(e.te).then(function(n){if(n){r.Yl.yv(e.jl),r.Yl.Av(e.refs);var o=n.ny[e.Xl];r.Jx(n,o).then(function(e){r.Yl.Tv(),r.Yl.Rv();var n=e.ey.position;n.te===i.te&&n.Xl===a&&(i=e.ey.page),t.zt()})}else t.zt()}):t.zt()}}).then(function(){i.container.parentElement||(i=t.pages[a]),i.Zr=!e&&t.item.te===r.opf.spine.length-1,i.Zr&&(y.a(r.viewport),r.Yl.Cv(r.viewport)),n.finish({ey:sr(i,a),sy:e})})})}),n.result()},t.prototype.oy=function(t,e){var n=t.Xl,i=-1;if(n<0){i=t.jx;var r=b.i(e.ny.length,function(t){return e.instance.h_(e.ny[t],!0)>i});n=r===e.ny.length?e.complete?e.ny.length-1:Number.POSITIVE_INFINITY:r-1}else n===Number.POSITIVE_INFINITY&&-1!==t.jx&&(i=t.jx);return{te:t.te,Xl:n,jx:i}},t.prototype.uy=function(t,e){var n=this,i=Y.c("findPage");return n.iy(t.te).then(function(r){if(r){var o,a=null;i.Bt(function(s){var u=n.oy(t,r);o=u.Xl,(a=r.pages[o])?s.Ht():r.complete?(o=r.ny.length-1,a=r.pages[o],s.Ht()):e?n.hy(u).then(function(t){t&&(a=t.page,o=t.position.Xl),s.Ht()}):i.sleep(100).then(function(){s.zt()})}).then(function(){y.a(a),i.finish(sr(a,o))})}else i.finish(null)}),i.result()},t.prototype.hy=function(t){var e=this,n=Y.c("renderPage");return e.iy(t.te).then(function(i){if(i){var r=e.oy(t,i),o=r.Xl,a=r.jx,s=i.pages[o];s?n.finish(sr(s,o)):n.Bt(function(t){if(o<i.ny.length)t.Ht();else{if(i.complete)return o=i.ny.length-1,void t.Ht();var n=i.ny[i.ny.length-1];e.Jx(i,n).then(function(e){var r=e.ey.page;if(n=e.sy){if(a>=0&&i.instance.h_(n)>a)return s=r,o=i.ny.length-2,void t.Ht();t.zt()}else s=r,o=e.ey.position.Xl,i.complete=!0,t.Ht()})}}).then(function(){s=s||i.pages[o];var t=i.ny[o];s?n.finish(sr(s,o)):e.Jx(i,t).then(function(t){t.sy||(i.complete=!0),n.finish(t.ey)})})}else n.finish(null)}),n.result()},t.prototype.renderAllPages=function(){return this.ay({te:this.opf.spine.length-1,Xl:Number.POSITIVE_INFINITY,jx:-1},!1)},t.prototype.ay=function(t,e){var n=this,i=Y.c("renderPagesUpto");t||(t={te:0,Xl:0,jx:0});var r,o=t.te,a=t.Xl,s=0;return e&&(s=o),i.Bt(function(e){var i={te:s,Xl:s===o?a:Number.POSITIVE_INFINITY,jx:s===o?t.jx:-1};n.hy(i).then(function(t){r=t,++s>o?e.Ht():e.zt()})}).then(function(){i.finish(r)}),i.result()},t.prototype.firstPage=function(t,e){return this.uy({te:0,Xl:0,jx:-1},e)},t.prototype.lastPage=function(t,e){return this.uy({te:this.opf.spine.length-1,Xl:Number.POSITIVE_INFINITY,jx:-1},e)},t.prototype.nextPage=function(t,e){var n=this,i=this,r=t.te,o=t.Xl,a=Y.c("nextPage");return i.iy(r).then(function(t){if(t){if(t.complete&&o==t.ny.length-1){if(r>=i.opf.spine.length-1)return void a.finish(null);r++,o=0;var s=n.$x[r],u=s&&s.pages[0],l=t.pages[t.pages.length-1];u&&l&&u.side==l.side&&(s.pages.forEach(function(t){t.container&&t.container.remove()}),n.$x[r]=null,n.Wx[r]=null)}else o++;i.uy({te:r,Xl:o,jx:-1},e).Dt(a)}else a.finish(null)}),a.result()},t.prototype.previousPage=function(t,e){var n=t.te,i=t.Xl;if(0==i){if(0==n)return Y.d(null);n--,i=Number.POSITIVE_INFINITY}else i--;return this.uy({te:n,Xl:i,jx:-1},e)},t.prototype.ly=function(t,e){var n=t.side===r.LEFT,o=this.getCurrentPageProgression(e)===i.LTR;return!n&&o||n&&!o},t.prototype.vy=function(t,e){var n=this,i=Y.c("getCurrentSpread"),o=this.Kx(t);if(!o)return Y.d({left:null,right:null});var a=o.side===r.LEFT;return(this.ly(o,t)?this.previousPage(t,e):this.nextPage(t,e)).then(function(e){var r=n.Kx(t),o=e&&e.page;o&&o.side===r.side&&(o=null),a?i.finish({left:r,right:o}):i.finish({left:o,right:r})}),i.result()},t.prototype.py=function(t,e){var n=this.Kx(t);if(!n)return Y.d(null);var i=this.ly(n,t),r=this.nextPage(t,e);if(i)return r;var o=this;return r.Pt(function(t){if(t){if(t.page.side===n.side)return r;var i=o.nextPage(t.position,e);return i.Pt(function(t){return t?i:r})}return Y.d(null)})},t.prototype.by=function(t,e){var n=this.Kx(t);if(!n)return Y.d(null);var i=this.ly(n,t),r=this.previousPage(t,e),o=n.container.previousElementSibling;if(i){var a=this;return r.Pt(function(t){return t?t.page.side===n.side?r:t.page.container!==o?r:a.previousPage(t.position,e):Y.d(null)})}return r},t.prototype.wy=function(t,e,n){var i=Y.c("navigateToEPage"),r=this;return this.opf.Xx(t).then(function(t){t?r.uy(t,n).Dt(i):i.finish(null)}),i.result()},t.prototype.my=function(t,e,n){var i=Y.c("navigateToCFI"),r=this;return r.opf.Hx(t).then(function(t){t?r.uy(t,n).Dt(i):i.finish(null)}),i.result()},t.prototype.gy=function(t,e,n){l.b.debug("Navigate to",t);var i=this.opf.Fx(b.I(t));if(!i){if(this.opf.Tx&&t.match(/^#epubcfi\(/))i=this.opf.Fx(this.opf.Tx.url);else if("#"===t.charAt(0)){var r=this.opf.Wl.Px(t);this.opf.Tx?null==(i=this.opf.Fx(r[0]))&&(i=r[0]):i=r[0],t=i+(r[1]?"#"+r[1]:"")}if(null==i)return Y.d(null)}var o=this.opf.Ax[i];if(!o){if(this.opf.Tx&&i==this.opf.Fx(this.opf.Tx.url)){var a=t.indexOf("#");if(a>=0)return this.my(t.substr(a+1),e,n)}return Y.d(null)}var s=Y.c("navigateTo"),u=this;return u.iy(o.te).then(function(i){if(i){var r=i.xmldoc.KE(t);r?u.uy({te:o.te,Xl:-1,jx:i.xmldoc.Lp(r)},n).Dt(s):e.te!==o.te?u.uy({te:o.te,Xl:0,jx:-1},n).Dt(s):s.finish(null)}else s.finish(null)}),s.result()},t.prototype.ty=function(t,e){var n=t.instance.viewport,i=n.document.createElement("div");i.setAttribute("data-vivliostyle-page-container","true"),i.setAttribute("role","region"),i.style.position="absolute",i.style.top="0",i.style.left="0",a||(i.style.visibility="hidden",i.setAttribute("aria-hidden","true")),n.xk.appendChild(i);var r=n.document.createElement("div");r.setAttribute("data-vivliostyle-bleed-box","true"),i.appendChild(r);var o=new K.l(i,r);if(o.te=t.item.te,o.position=e,o.offset=t.instance.h_(e),0===o.offset){var s=this.opf.Wl.$l("",t.item.src);r.setAttribute("id",s),o.oe(r,s)}if(n!==this.viewport){var u=L.L(this.viewport.width,this.viewport.height,n.width,n.height),l=G.m(null,new V.b(u,null),"");o.Wr.push(new K.d(i,"transform",l))}return o},t.prototype.Ey=function(t,e,n,i){var r=e.getAttribute("data"),o=null;if(r){r=b.C(r,t.url);var a=e.getAttribute("media-type");if(!a){var s=this.opf.Fx(r);if(s){var u=this.opf.Ax[s];u&&(a=u.vx)}}if(a){var l=this.opf.bindings[a];if(l){(o=this.viewport.document.createElement("iframe")).style.border="none";var h=b.y(r),c=b.y(a),p=new b.d;p.append(l),p.append("?src="),p.append(h),p.append("&type="),p.append(c);for(var f=e.firstChild;f;f=f.nextSibling)if(1==f.nodeType){var d=f;if("param"==d.localName&&d.namespaceURI==b.a.XHTML){var v=d.getAttribute("name"),g=d.getAttribute("value");v&&g&&(p.append("&"),p.append(encodeURIComponent(v)),p.append("="),p.append(encodeURIComponent(g)))}}o.setAttribute("src",p.toString());var m=e.getAttribute("width");m&&o.setAttribute("width",m);var y=e.getAttribute("height");y&&o.setAttribute("height",y)}}}return o||(o=this.viewport.document.createElement("span")).setAttribute("data-adapt-process-children","true"),Y.d(o)},t.prototype.ky=function(t,e,n,i){var r=ir();if(r){var o=n.ownerDocument,a=o.createElement("span");n.appendChild(a);var s=o.importNode(e,!0);this._y(s,t),a.appendChild(s);var u=r.queue;u.Push(["Typeset",r,a]);var l=Y.c("makeMathJaxView"),h=l.suspend();return u.Push(function(){h.schedule(a)}),l.result()}return Y.d(null)},t.prototype._y=function(t,e){if(null!=t){if(1===t.nodeType&&"mglyph"===t.tagName)for(var n=0,i=Array.from(t.attributes);n<i.length;n++){var r=i[n];if("src"===r.name){var o=b.C(r.nodeValue,e.url);r.namespaceURI?t.setAttributeNS(r.namespaceURI,r.name,o):t.setAttribute(r.name,o)}}t.firstChild&&this._y(t.firstChild,e),t.nextSibling&&this._y(t.nextSibling,e)}},t.prototype.xy=function(t,e,n,i){var r,o=n?n.ownerDocument:this.viewport.document,a=e.localName;switch(a){case"t":case"tab":case"ec":case"nt":case"fraction":case"comment":case"mark":r="span";break;case"ruby":case"rp":case"rt":r=a;break;default:r="div"}var s=o.createElement(r);return s.setAttribute("data-adapt-process-children","true"),Y.d(s)},t.prototype.j_=function(t){var e=this;return function(n,i,r){return"object"==n.localName&&n.namespaceURI==b.a.XHTML?e.Ey(t,n,i,r):n.namespaceURI==b.a.MATHML?e.ky(t,n,i,r):n.namespaceURI==b.a.SSE?e.xy(t,n,i,r):n.dataset&&"true"==n.dataset.mathTypeset?e.ky(t,n,i,r):Y.d(null)}},t.prototype.iy=function(t){var e=this;if(-1===t||t>=e.opf.spine.length)return Y.d(null);var n=e.$x[t];if(n)return Y.d(n);var i=Y.c("getPageViewItem"),r=this.Wx[t];if(r){var o=i.suspend();return r.push(o),i.result()}r=this.Wx[t]=[];var a=e.opf.spine[t],s=e.opf.store;return s.load(a.src).then(function(o){a.title=o.document.title;var u=s.o_(o),l=e.j_(o),h=e.viewport,c=u.qk(h.width,h.height,h.fontSize,e.pref);c.width==h.width&&c.height==h.height&&c.fontSize==h.fontSize||(h=new _i(h.window,c.fontSize,h.root,c.width,c.height));var p,f=e.$x[t-1];null!==a.startPage?p=a.startPage-1:(!(t>0)||f&&f.complete?p=f?f.instance.Wk+f.pages.length:0:(p=a.epage||t,e.opf.Rx||p%2!=0||p++),null!==a.skipPagesBefore&&(p+=a.skipPagesBefore)),e.Yl._v(p);var d=new Pi(u,o,e.opf.lang,h,e.eh,e.Kk,l,e.opf.VE,p,e.opf.Wl,e.Yl,e.opf.NE);d.pref=e.pref;var v=e.opf.metadata&&e.opf.metadata[er.title];d.Zt=v&&v[0]&&v[0].v||"",d.docTitle=a.title||"",d.init().then(function(){n={item:a,xmldoc:o,instance:d,ny:[null],pages:[],complete:!1},e.$x[t]=n,i.finish(n),r.forEach(function(t){t.schedule(n)})})}),i.result()},t.prototype.yy=function(){for(var t=0,e=this.$x;t<e.length;t++){var n=e[t];n&&n.pages.splice(0)}this.viewport.clear()},t.prototype.Ty=function(){for(var t=0,e=this.$x;t<e.length;t++){var n=e[t];if(n)for(var i=0,r=n.pages;i<r.length;i++){var o=r[i];if(o.Qr&&o.Jr)return!0}}return!1},t.prototype.Ny=function(){return this.$x.some(function(t){return t&&t.pages.length>0})},t.prototype.showTOC=function(t){var e=this.opf,n=e.ax||e.Ix;if(this.qx=t,!n)return Y.d(null);if(this.Sy&&this.Sy.page)return this.Sy.page.container.style.visibility="visible",this.Sy.page.container.setAttribute("aria-hidden","false"),Y.d(this.Sy.page);var i=Y.c("showTOC");this.Sy||(this.Sy=new Wi(e.store,n.src,e.lang,this.eh,this.Kk,this.pref,this,e.VE,e.Wl,this.Yl));var r=this.viewport,o=Math.min(350,Math.round(.67*r.width)-16),a=r.height-6,s=r.document.createElement("div");return r.root.appendChild(s),s.style.visibility="hidden",s.style.width=o+10+"px",s.style.maxHeight=a+"px",s.setAttribute("data-vivliostyle-toc-box","true"),s.setAttribute("role","navigation"),this.Sy.showTOC(s,r,o,a,this.viewport.fontSize).then(function(t){s.style.visibility="visible",s.setAttribute("aria-hidden","false"),i.finish(t)}),i.result()},t.prototype.X_=function(){this.Sy&&this.Sy.X_()},t.prototype.isTOCVisible=function(){return!!this.Sy&&this.Sy.isTOCVisible()},t}(),lr=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),hr="data-vivliostyle-viewer-status";!function(t){t.SINGLE_PAGE="singlePage",t.SPREAD="spread",t.AUTO_SPREAD="autoSpread"}(rr||(rr={}));var cr,pr=function(){function t(t,e,n,i){this.window=t,this.viewportElement=e,this.Ay=n,this.Ry=i,this.Cy=!1,this.Oy=null;var r=this;e.setAttribute("data-vivliostyle-viewer-viewport",!0),a&&e.setAttribute("data-vivliostyle-debug",!0),e.setAttribute(hr,"loading");var o=t.document;this.Kk=new We(o.head,e),this.init(),this.kick=function(){},this.Iy=function(){},this.Ly=function(){r.Py=!0,r.kick()},this.Fy=this.Fy.bind(this),this.Dy=function(t){},this.My=o.getElementById("vivliostyle-page-rules"),this.actions={loadPublication:this.loadPublication,loadXML:this.loadXML,configure:this.configure,moveTo:this.moveTo,toc:this.showTOC},this.Uy()}return t.prototype.init=function(){this.readyState=o.LOADING,this.Gy=[],this.opf=null,this.By=!1,this.zy=!1,this.Hy=0,this.jy=0,this.Py=!1,this.Xy=!1,this.Vy=null,this.currentPage=null,this.Yy=null,this.$y=null,this.fontSize=16,this.zoom=1,this.fitToScreen=!1,this.pageViewMode=rr.SINGLE_PAGE,this.Wy=!1,this.renderAllPages=!0,this.pref=L.F(),this.qy=[]},t.prototype.Uy=function(){var t=this,e=l.a;l.b.addListener(e.DEBUG,function(e){t.callback({t:"debug",content:e})}),l.b.addListener(e.INFO,function(e){t.callback({t:"info",content:e})}),l.b.addListener(e.WARN,function(e){t.callback({t:"warn",content:e})}),l.b.addListener(e.ERROR,function(e){t.callback({t:"error",content:e})})},t.prototype.callback=function(t){t.i=this.Ay,this.Ry(t)},t.prototype.Ky=function(t){this.readyState!==t&&(this.readyState=t,this.viewportElement.setAttribute(hr,t),this.callback({t:"readystatechange"}))},t.prototype.loadPublication=function(t){g.registerStartTiming("beforeRender"),this.Ky(o.LOADING);var e=t.url,n=t.fragment,i=!!t.zipmeta,r=t.authorStyleSheet,a=t.userStyleSheet;this.viewport=null;var s=Y.c("loadPublication"),u=this;return u.configure(t).then(function(){var t=new $i;t.init(r,a).then(function(){var r=b.C(b.n(e),u.window.location.href);u.Gy=[r],t.nx(r,i).then(function(t){t?(u.opf=t,u.render(n).then(function(){s.finish(!0)})):s.finish(!1)})})}),s.result()},t.prototype.loadXML=function(t){g.registerStartTiming("beforeRender"),this.Ky(o.LOADING);var e=t.url,n=t.document,i=t.fragment,r=t.authorStyleSheet,a=t.userStyleSheet;this.viewport=null;var s=Y.c("loadXML"),u=this;return u.configure(t).then(function(){var t=new $i;t.init(r,a).then(function(){var r=e.map(function(t,e){return{url:b.C(b.n(t.url),u.window.location.href),index:e,startPage:t.startPage,skipPagesBefore:t.skipPagesBefore}});u.Gy=r.map(function(t){return t.url}),u.opf=new ar(t,""),u.opf.Gx(r,n).then(function(){u.render(i).then(function(){s.finish(!0)})})})}),s.result()},t.prototype.render=function(t){this.Zy();var e=this;return(t?this.opf.Hx(t).Pt(function(t){return e.$y=t,Y.d(!0)}):Y.d(!0)).Pt(function(){return g.registerEndTiming("beforeRender"),e.resize()})},t.prototype.Qy=function(t){var e,n=parseFloat(t);if("string"==typeof t&&(e=t.match(/[a-z]+$/))){var i=e[0];if("em"===i||"rem"===i)return n*this.fontSize;if("ex"===i)return n*L.G.ex*this.fontSize/L.G.em;var r=L.G[i];if(r)return n*r}return n},t.prototype.configure=function(t){if("boolean"==typeof t.autoresize&&(t.autoresize?(this.Vy=null,this.window.addEventListener("resize",this.Ly,!1),this.Py=!0):this.window.removeEventListener("resize",this.Ly,!1)),"number"==typeof t.fontSize){var e=t.fontSize;e>=5&&e<=72&&this.fontSize!=e&&(this.fontSize=e,this.Py=!0)}if("object"==typeof t.viewport&&t.viewport){var n=t.viewport,i={marginLeft:this.Qy(n["margin-left"])||0,marginRight:this.Qy(n["margin-right"])||0,marginTop:this.Qy(n["margin-top"])||0,marginBottom:this.Qy(n["margin-bottom"])||0,width:this.Qy(n.width)||0,height:this.Qy(n.height)||0};(i.width>=200||i.height>=200)&&(this.window.removeEventListener("resize",this.Ly,!1),this.Vy=i,this.Py=!0)}return"boolean"==typeof t.hyphenate&&(this.pref.hyphenate=t.hyphenate,this.Py=!0),"boolean"==typeof t.horizontal&&(this.pref.horizontal=t.horizontal,this.Py=!0),"boolean"==typeof t.nightMode&&(this.pref.nightMode=t.nightMode,this.Py=!0),"number"==typeof t.lineHeight&&(this.pref.lineHeight=t.lineHeight,this.Py=!0),"number"==typeof t.columnWidth&&(this.pref.columnWidth=t.columnWidth,this.Py=!0),"string"==typeof t.fontFamily&&(this.pref.fontFamily=t.fontFamily,this.Py=!0),"boolean"==typeof t.load&&(this.Wy=t.load),"boolean"==typeof t.renderAllPages&&(this.renderAllPages=t.renderAllPages),"string"==typeof t.userAgentRootURL&&(b.E(t.userAgentRootURL.replace(/resources\/?$/,"")),b.G(t.userAgentRootURL)),"string"==typeof t.rootURL&&(b.E(t.rootURL),b.G(b.h+"resources/")),"string"==typeof t.pageViewMode&&t.pageViewMode!==this.pageViewMode&&(this.pageViewMode=t.pageViewMode,this.Py=!0),"number"==typeof t.pageBorder&&t.pageBorder!==this.pref.pageBorder&&(this.viewport=null,this.pref.pageBorder=t.pageBorder,this.Py=!0),"number"==typeof t.zoom&&t.zoom!==this.zoom&&(this.zoom=t.zoom,this.Xy=!0),"boolean"==typeof t.fitToScreen&&t.fitToScreen!==this.fitToScreen&&(this.fitToScreen=t.fitToScreen,this.Xy=!0),"object"==typeof t.defaultPaperSize&&"number"==typeof t.defaultPaperSize.width&&"number"==typeof t.defaultPaperSize.height&&(this.viewport=null,this.pref.defaultPaperSize=t.defaultPaperSize,this.Py=!0),this.Jy(t),Y.d(!0)},t.prototype.Jy=function(t){var e=this;u.b(u.a.CONFIGURATION).forEach(function(n){var i=n(t);e.Py=i.Py||e.Py,e.Xy=i.Xy||e.Xy})},t.prototype.Fy=function(t){var e=this.currentPage,n=this.Yy,i=t.target;n?n.left!==i&&n.right!==i||this.tT(t.Qx):e===t.target&&this.tT(t.Qx)},t.prototype.nT=function(t){var e=[];this.currentPage&&e.push(this.currentPage),this.Yy&&(e.push(this.Yy.left),e.push(this.Yy.right)),e.forEach(function(e){e&&t(e)})},t.prototype.iT=function(){var t=this;this.nT(function(e){e.removeEventListener("hyperlink",t.Dy,!1),e.removeEventListener("replaced",t.Fy,!1)})},t.prototype.rT=function(){this.iT(),this.nT(function(t){b.F(t.container,"display","none"),t.container.setAttribute("aria-hidden","true")}),this.currentPage=null,this.Yy=null},t.prototype.eT=function(t){t.addEventListener("hyperlink",this.Dy,!1),t.addEventListener("replaced",this.Fy,!1),b.F(t.container,"visibility","visible"),b.F(t.container,"display","block"),t.container.setAttribute("aria-hidden","false")},t.prototype.sT=function(t){this.rT(),this.currentPage=t,t.container.style.marginLeft="",t.container.style.marginRight="",this.eT(t)},t.prototype.oT=function(t){if(this.rT(),this.Yy=t,t.left&&t.right){var e=parseFloat(t.left.container.style.width),n=parseFloat(t.right.container.style.width);e&&n&&e!==n&&(e<n?t.left.container.style.marginLeft=n-e+"px":t.right.container.style.marginRight=e-n+"px")}t.left&&(this.eT(t.left),t.right?t.left.container.removeAttribute("data-vivliostyle-unpaired-page"):t.left.container.setAttribute("data-vivliostyle-unpaired-page",!0)),t.right&&(this.eT(t.right),t.left?t.right.container.removeAttribute("data-vivliostyle-unpaired-page"):t.right.container.setAttribute("data-vivliostyle-unpaired-page",!0))},t.prototype.uT=function(){var t=Y.c("reportPosition"),e=this;return y.a(e.$y),e.opf.zx(this.$y.te,this.$y.jx).then(function(n){var i=e.currentPage;(e.Wy&&i.fetchers.length>0?Be.c(i.fetchers):Y.d(!0)).then(function(){e.hT(i,n).Dt(t)})}),t.result()},t.prototype.aT=function(){var t=this.viewportElement;if(this.Vy){var e=this.Vy;return t.style.marginLeft=e.marginLeft+"px",t.style.marginRight=e.marginRight+"px",t.style.marginTop=e.marginTop+"px",t.style.marginBottom=e.marginBottom+"px",new _i(this.window,this.fontSize,t,e.width,e.height)}return new _i(this.window,this.fontSize,t)},t.prototype.fT=function(t){switch(this.pageViewMode){case rr.SINGLE_PAGE:return!1;case rr.SPREAD:return!0;case rr.AUTO_SPREAD:default:return t.width/t.height>=1.45&&t.width>800}},t.prototype.cT=function(t){this.pref.Xt=t,this.viewportElement.setAttribute("data-vivliostyle-spread-view",t.toString())},t.prototype.lT=function(){var t=this.aT(),e=this.fT(t),n=this.pref.Xt!==e;return this.cT(e),!(this.Vy||!this.viewport||this.viewport.fontSize!=this.fontSize||(n||t.width!=this.viewport.width||t.height!=this.viewport.height)&&(n||t.width!=this.viewport.width||t.height==this.viewport.height||!/Android|iPhone|iPad|iPod/.test(navigator.userAgent))&&(!this.vT||!this.vT.Ny()||this.vT.Ty()||(this.viewport.width=t.width,this.viewport.height=t.height,this.Xy=!0,0)))},t.prototype.dT=function(t,e,n,i){this.qy[i]=t,this.pT(e,n,i)},t.prototype.pT=function(t,e,n){if(!this.Cy&&this.My){var i="";Object.keys(t).forEach(function(e){i+="@page "+e+"{margin:0;size:";var n=t[e];i+=n.width+"px "+n.height+"px;}"}),this.My.textContent=i,this.Cy=!0}},t.prototype.bT=function(){this.My&&(this.My.textContent="",this.Cy=!1)},t.prototype.reset=function(){var t=!1,e=!1;this.vT&&(t=this.vT.isTOCVisible(),e=this.vT.qx,this.vT.X_(),this.vT.yy()),this.bT(),this.viewport=this.aT(),this.viewport.Sk(),this.vT=new ur(this.opf,this.viewport,this.Kk,this.pref,this.dT.bind(this)),t&&this.Iy({a:"toc",v:"show",autohide:e})},t.prototype.tT=function(t,e){this.Xy=!1,this.iT();var n=this;return this.pref.Xt?this.vT.vy(this.$y,e).Pt(function(e){return n.oT(e),n.wT(e),n.currentPage=t,Y.d(null)}):(this.sT(t),this.mT(t),this.currentPage=t,Y.d(null))},t.prototype.mT=function(t){var e=this.gT(t.dimensions);this.viewport.zoom(t.dimensions.width,t.dimensions.height,e)},t.prototype.wT=function(t){var e=this.ET(t);this.viewport.zoom(e.width,e.height,this.gT(e))},t.prototype.gT=function(t){return this.fitToScreen?this.kT(t):this.zoom},t.prototype.ET=function(t){var e=0,n=0;return t.left&&(e+=t.left.dimensions.width,n=t.left.dimensions.height),t.right&&(e+=t.right.dimensions.width,n=Math.max(n,t.right.dimensions.height)),t.left&&t.right&&(e+=2*this.pref.pageBorder,e+=Math.abs(t.left.dimensions.width-t.right.dimensions.width)),{width:e,height:n}},t.prototype.queryZoomFactor=function(t){if(!this.currentPage)throw new Error("no page exists.");switch(t){case cr.FIT_INSIDE_VIEWPORT:var e=void 0;return this.pref.Xt?(y.a(this.Yy),e=this.ET(this.Yy)):e=this.currentPage.dimensions,this.kT(e);default:throw new Error("unknown zoom type: "+t)}},t.prototype.kT=function(t){var e=this.viewport.width/t.width,n=this.viewport.height/t.height;return Math.min(e,n)},t.prototype.Zy=function(){this.Oy&&this.Oy.interrupt(new fr),this.Oy=null},t.prototype.resize=function(){if(this.Py=!1,this.Xy=!1,this.lT())return Y.d(!0);var t=this;this.Ky(o.LOADING),this.Zy();var e=Y.a().wt().run(function(){return Y.b("resize",function(n){t.opf?(t.Oy=e,g.registerStartTiming("render (resize)"),t.reset(),t.$y&&(0==t.$y.Xl&&0==t.$y.jx||(t.$y.Xl=-1)),t.opf.Mx(t.renderAllPages),t.vT.ay(t.$y,!t.renderAllPages).then(function(i){i?(t.$y=i.position,t.tT(i.page,!0).then(function(){t.Ky(o.INTERACTIVE),t.opf.Ux(function(e){var n={t:"nav",epageCount:e,first:t.currentPage.Kr,last:t.currentPage.Zr,metadata:t.opf.metadata,docTitle:t.opf.spine[t.$y.te].title};(t.currentPage.Kr||0==t.$y.Xl&&t.opf.spine[t.$y.te].epage)&&(n.epage=t.opf.spine[t.$y.te].epage),t.callback(n)}).then(function(){t.uT().then(function(i){(t.renderAllPages?t.vT.renderAllPages():Y.d(null)).then(function(){t.Oy===e&&(t.Oy=null),g.registerEndTiming("render (resize)"),t.renderAllPages&&t.Ky(o.COMPLETE),t.callback({t:"loaded"}),n.finish(i)})})})})):n.finish(!1)})):n.finish(!1)},function(t,e){if(!(e instanceof fr))throw e;g.registerEndTiming("render (resize)"),l.b.debug(e.message)})});return Y.d(!0)},t.prototype.hT=function(t,e){var n=Y.c("sendLocationNotification"),i={t:"nav",first:t.Kr,last:t.Zr,metadata:this.opf.metadata,docTitle:this.opf.spine[t.te].title},r=this;return this.opf.Vx(r.$y).then(function(t){i.epage=t,i.epageCount=r.opf.epageCount,e&&(i.cfi=e),r.callback(i),n.finish(!0)}),n.result()},t.prototype.getCurrentPageProgression=function(){return this.vT?this.vT.getCurrentPageProgression(this.$y):null},t.prototype.moveTo=function(t){var e,n=this;if(this.readyState!==o.COMPLETE&&"next"!==t.where&&this.Ky(o.LOADING),"string"==typeof t.where){var i;switch(t.where){case"next":i=this.pref.Xt?this.vT.py:this.vT.nextPage;break;case"previous":i=this.pref.Xt?this.vT.by:this.vT.previousPage;break;case"last":i=this.vT.lastPage;break;case"first":i=this.vT.firstPage;break;default:return Y.d(!0)}i&&(e=function(){return i.call(n.vT,n.$y,!n.renderAllPages)})}else if("number"==typeof t.epage){var r=t.epage;e=function(){return n.vT.wy(r,n.$y,!n.renderAllPages)}}else{if("string"!=typeof t.url)return Y.d(!0);var a=t.url;e=function(){return n.vT.gy(a,n.$y,!n.renderAllPages)}}var s=Y.c("moveTo");return e.call(n.vT).then(function(t){var e;if(t){n.$y=t.position;var i=Y.c("moveTo.showCurrent");e=i.result(),n.tT(t.page,!n.renderAllPages).then(function(){n.uT().Dt(i)})}else e=Y.d(!0);e.then(function(t){n.readyState===o.LOADING&&n.Ky(o.INTERACTIVE),s.finish(t)})}),s.result()},t.prototype.showTOC=function(t){var e=!!t.autohide,n=t.v,i=this.vT.isTOCVisible(),r=e!=this.vT.qx&&"hide"!=n;if(i){if("show"==n&&!r)return Y.d(!0)}else if("hide"==n)return Y.d(!0);if(i&&"show"!=n)return this.vT.X_(),Y.d(!0);var o=this,a=Y.c("showTOC");return this.vT.showTOC(e).then(function(t){t&&(r&&(t.listeners={}),e&&t.addEventListener("hyperlink",function(){o.vT.X_()},!1),t.addEventListener("hyperlink",o.Dy,!1)),a.finish(!0)}),a.result()},t.prototype._T=function(t){var e=this,n=t.a||"";return Y.b("runCommand",function(i){var r=e.actions[n];r?r.call(e,t).then(function(){e.callback({t:"done",a:n}),i.finish(!0)}):(l.b.error("No such action:",n),i.finish(!0))},function(t,e){l.b.error(e,"Error during action:",n),t.finish(!0)})},t.prototype.xT=function(t){var e=dr(t),n=null,i=this;Y.e(function(){var t=Y.c("commandLoop"),r=Y.a().wt();return i.Dy=function(t){var e=t,n="#"===e.href.charAt(0)||i.Gy.some(function(t){return e.href.substr(0,t.length)==t});if(n){t.preventDefault();var o={t:"hyperlink",href:e.href,internal:n};r.run(function(){return i.callback(o),Y.d(!0)})}},t.Bt(function(t){if(i.Py)i.resize().then(function(){t.zt()});else if(i.Xy)i.currentPage&&i.tT(i.currentPage).then(function(){t.zt()});else if(e){var r=e;e=null,i._T(r).then(function(){t.zt()})}else{var o=Y.c("waitForCommand");n=o.suspend(self),o.result().then(function(){t.zt()})}}).Dt(t),t.result()}),i.kick=function(){var t=n;t&&(n=null,t.schedule(!0))},i.Iy=function(t){return!e&&(e=dr(t),i.kick(),!0)},this.window.adapt_command=i.Iy},t}();(cr||(cr={})).FIT_INSIDE_VIEWPORT="fit inside viewport";var fr=function(t){function e(){var e=t.call(this)||this;return e.name="RenderingCanceledError",e.message="Page rendering has been canceled",e.stack=(new Error).stack,e}return lr(e,t),e}(Error);function dr(t){return"string"==typeof t?b.H(t):t}var vr=i;function gr(t){var e={};return Object.keys(t).forEach(function(n){var i=t[n];switch(n){case"autoResize":e.autoresize=i;break;case"pageBorderWidth":e.pageBorder=i;break;default:e[n]=i}}),e}var mr,yr=function(){function t(t,e){var n;this.settings=t,this.initialized=!1,n=t.debug,a=n,this.viewer_=new pr(t.window||window,t.viewportElement,"main",this.dispatcher.bind(this)),this.options={yT:!0,fontSize:16,TT:1,renderAllPages:!0,pageViewMode:Er.AUTO_SPREAD,zoom:1,fitToScreen:!1,defaultPaperSize:void 0},e&&this.setOptions(e),this.NT=new b.c,Object.defineProperty(this,"readyState",{get:function(){return this.viewer_.readyState}})}return t.prototype.setOptions=function(t){var e=Object.assign({a:"configure"},gr(t));this.viewer_.Iy(e),Object.assign(this.options,t)},t.prototype.dispatcher=function(t){var e={type:t.t},n=t;Object.keys(n).forEach(function(t){"t"!==t&&(e[t]=n[t])}),this.NT.dispatchEvent(e)},t.prototype.addListener=function(t,e){this.NT.addEventListener(t,e,!1)},t.prototype.removeListener=function(t,e){this.NT.removeEventListener(t,e,!1)},t.prototype.loadDocument=function(t,e,n){t||this.NT.dispatchEvent({type:"error",content:"No URL specified"}),this.ST(t,null,e,n)},t.prototype.loadPublication=function(t,e,n){t||this.NT.dispatchEvent({type:"error",content:"No URL specified"}),this.ST(null,t,e,n)},t.prototype.ST=function(t,e,n,i){var r=n||{};function o(t){return t?t.map(function(t){return{url:t.url||null,text:t.text||null}}):void 0}var a=o(r.authorStyleSheet),s=o(r.userStyleSheet);i&&Object.assign(this.options,i);var u=Object.assign({a:t?"loadXML":"loadPublication",userAgentRootURL:this.settings.userAgentRootURL,url:br(t)||e,document:r.documentObject,fragment:r.fragment,authorStyleSheet:a,userStyleSheet:s},gr(this.options));this.initialized?this.viewer_.Iy(u):(this.initialized=!0,this.viewer_.xT(u))},t.prototype.getCurrentPageProgression=function(){return this.viewer_.getCurrentPageProgression()},t.prototype.RT=function(t){switch(t){case mr.LEFT:return this.getCurrentPageProgression()===vr.LTR?mr.PREVIOUS:mr.NEXT;case mr.RIGHT:return this.getCurrentPageProgression()===vr.LTR?mr.NEXT:mr.PREVIOUS;default:return t}},t.prototype.navigateToPage=function(t,e){t===mr.EPAGE?this.viewer_.Iy({a:"moveTo",epage:e}):this.viewer_.Iy({a:"moveTo",where:this.RT(t)})},t.prototype.navigateToInternalUrl=function(t){this.viewer_.Iy({a:"moveTo",url:t})},t.prototype.isTOCVisible=function(){return this.viewer_.vT&&this.viewer_.vT.opf&&(this.viewer_.vT.opf.ax||this.viewer_.vT.opf.Ix)?!!this.viewer_.vT.isTOCVisible():null},t.prototype.showTOC=function(t,e){var n=null==t?"toggle":t?"show":"hide";this.viewer_.Iy({a:"toc",v:n,autohide:e})},t.prototype.queryZoomFactor=function(t){return this.viewer_.queryZoomFactor(t)},t.prototype.getPageSizes=function(){return this.viewer_.qy},t}();function br(t){function e(t){return"number"==typeof t?t:null}function n(t){return"string"==typeof t?{url:t,startPage:null,skipPagesBefore:null}:{url:t.url,startPage:e(t.startPage),skipPagesBefore:e(t.skipPagesBefore)}}return Array.isArray(t)?t.map(n):t?[n(t)]:null}!function(t){t.PREVIOUS="previous",t.NEXT="next",t.LEFT="left",t.RIGHT="right",t.FIRST="first",t.LAST="last",t.EPAGE="epage"}(mr||(mr={}));var Er=rr,wr={Viewer:yr,PageViewMode:Er,ZoomType:cr};g.Fl("load_vivliostyle"),e.default={constants:s,plugin:u.c,profile:m,viewer:wr}}]).default},"object"==typeof n&&"object"==typeof e?e.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof n?n.vivliostyle=r():i.vivliostyle=r()},{}]},{},[5]);